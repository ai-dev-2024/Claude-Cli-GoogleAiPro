"use strict";var qN=Object.create,ul=Object.defineProperty,zN=Object.getOwnPropertyDescriptor,BN=Object.getOwnPropertyNames,HN=Object.getPrototypeOf,VN=Object.prototype.hasOwnProperty,j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Hp=(e,t)=>{for(var r in t)ul(e,r,{get:t[r],enumerable:!0})},rb=(e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of BN(t))!VN.call(e,i)&&i!==r&&ul(e,i,{get:()=>t[i],enumerable:!(a=zN(t,i))||a.enumerable});return e},le=(e,t,r)=>(r=null!=e?qN(HN(e)):{},rb(!t&&e&&e.__esModule?r:ul(r,"default",{value:e,enumerable:!0}),e)),ZN=e=>rb(ul({},"__esModule",{value:!0}),e),cb=j((e,t)=>{t.exports=i,i.sync=function(e,t){return a(r.statSync(e),e,t)};var r=require("fs");function a(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r||-1!==(r=r.split(";")).indexOf(""))return!0;for(var a=0;a<r.length;a++){var i=r[a].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,r)}function i(e,t,i){r.stat(e,function(r,s){i(r,!r&&a(s,e,t))})}}),fb=j((e,t)=>{t.exports=a,a.sync=function(e,t){return i(r.statSync(e),t)};var r=require("fs");function a(e,t,a){r.stat(e,function(e,r){a(e,!e&&i(r,t))})}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,a=e.uid,i=e.gid,s=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),n=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),o=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),u=o|l;return r&c||r&l&&i===n||r&o&&a===s||r&u&&0===s}(e,t)}}),hb=j((e,t)=>{var r;require("fs");function a(e,t,i){if("function"==typeof t&&(i=t,t={}),!i){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(r,i){a(e,t||{},function(e,t){e?i(e):r(t)})})}r(e,t||{},function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),i(e,r)})}r="win32"===process.platform||global.TESTING_WINDOWS?cb():fb(),t.exports=a,a.sync=function(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}}),wb=j((e,t)=>{var r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,a=require("path"),i=r?";":":",s=hb(),n=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),o=(e,t)=>{let a=t.colon||i,s=e.match(/\//)||r&&e.match(/\\/)?[""]:[...r?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(a)],n=r?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=r?n.split(a):[""];return r&&-1!==e.indexOf(".")&&""!==o[0]&&o.unshift(""),{pathEnv:s,pathExt:o,pathExtExe:n}},l=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});let{pathEnv:i,pathExt:l,pathExtExe:c}=o(e,t),u=[],p=r=>new Promise((s,o)=>{if(r===i.length)return t.all&&u.length?s(u):o(n(e));let l=i[r],c=/^".*"$/.test(l)?l.slice(1,-1):l,p=a.join(c,e),h=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;s(d(h,r,0))}),d=(e,r,a)=>new Promise((i,n)=>{if(a===l.length)return i(p(r+1));let o=l[a];s(e+o,{pathExt:c},(s,n)=>{if(!s&&n){if(!t.all)return i(e+o);u.push(e+o)}return i(d(e,r,a+1))})});return r?p(0).then(e=>r(null,e),r):p(0)};t.exports=l,l.sync=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:i,pathExtExe:l}=o(e,t),c=[];for(let n=0;n<r.length;n++){let o=r[n],u=/^".*"$/.test(o)?o.slice(1,-1):o,p=a.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;for(let e=0;e<i.length;e++){let r=d+i[e];try{if(s.sync(r,{pathExt:l})){if(!t.all)return r;c.push(r)}}catch{}}}if(t.all&&c.length)return c;if(t.nothrow)return null;throw n(e)}}),Eb=j((e,t)=>{var r=(e={})=>{let t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};t.exports=r,t.exports.default=r}),kb=j((e,t)=>{var r=require("path"),a=wb(),i=Eb();function s(e,t){let s,n=e.options.env||process.env,o=process.cwd(),l=null!=e.options.cwd,c=l&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch{}try{s=a.sync(e.command,{path:n[i({env:n})],pathExt:t?r.delimiter:void 0})}catch{}finally{c&&process.chdir(o)}return s&&(s=r.resolve(l?e.options.cwd:"",s)),s}t.exports=function(e){return s(e)||s(e,!0)}}),Rb=j((e,t)=>{var r=/([()\][%!^"`<>&|;, *?])/g;t.exports.command=function(e){return e=e.replace(r,"^$1")},t.exports.argument=function(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1")}"`).replace(r,"^$1"),t&&(e=e.replace(r,"^$1")),e}}),Ib=j((e,t)=>{t.exports=/^#!(.*)/}),Ab=j((e,t)=>{var r=Ib();t.exports=(e="")=>{let t=e.match(r);if(!t)return null;let[a,i]=t[0].replace(/#! ?/,"").split(" "),s=a.split("/").pop();return"env"===s?i:i?`${s} ${i}`:s}}),Db=j((e,t)=>{var r=require("fs"),a=Ab();t.exports=function(e){let t,i=Buffer.alloc(150);try{t=r.openSync(e,"r"),r.readSync(t,i,0,150,0),r.closeSync(t)}catch{}return a(i.toString())}}),Fb=j((e,t)=>{var r=require("path"),a=kb(),i=Rb(),s=Db(),n="win32"===process.platform,o=/\.(?:com|exe)$/i,l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function c(e){if(!n)return e;let t=function(e){e.file=a(e);let t=e.file&&s(e.file);return t?(e.args.unshift(e.file),e.command=t,a(e)):e.file}(e),c=!o.test(t);if(e.options.forceShell||c){let a=l.test(t);e.command=r.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map(e=>i.argument(e,a));let s=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${s}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}t.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);let a={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?a:c(a)}}),zb=j((e,t)=>{var r="win32"===process.platform;function a(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function i(e,t){return r&&1===e&&!t.file?a(t.original,"spawn"):null}t.exports={hookChildProcess:function(e,t){if(!r)return;let a=e.emit;e.emit=function(r,s){if("exit"===r){let r=i(s,t);if(r)return a.call(e,"error",r)}return a.apply(e,arguments)}},verifyENOENT:i,verifyENOENTSync:function(e,t){return r&&1===e&&!t.file?a(t.original,"spawnSync"):null},notFoundError:a}}),ef=j((e,t)=>{var r=require("child_process"),a=Fb(),i=zb();function s(e,t,s){let n=a(e,t,s),o=r.spawn(n.command,n.args,n.options);return i.hookChildProcess(o,n),o}t.exports=s,t.exports.spawn=s,t.exports.sync=function(e,t,s){let n=a(e,t,s),o=r.spawnSync(n.command,n.args,n.options);return o.error=o.error||i.verifyENOENTSync(o.status,n),o},t.exports._parse=a,t.exports._enoent=i}),S_=j((e,t)=>{var{PassThrough:r}=require("stream");t.exports=function(){var e=[],t=new r({objectMode:!0});return t.setMaxListeners(0),t.add=a,t.isEmpty=function(){return 0==e.length},t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(a),t;function a(r){return Array.isArray(r)?(r.forEach(a),this):(e.push(r),r.once("end",i.bind(null,r)),r.once("error",t.emit.bind(t,"error")),r.pipe(t,{end:!1}),this)}function i(r){!(e=e.filter(function(e){return e!==r})).length&&t.readable&&t.end()}}}),Oo=j((e,t)=>{var r=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),Io=j((e,t)=>{var r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=r}),Ya=j((e,t)=>{var{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=Oo(),s=Io(),n=(e=t.exports={}).re=[],o=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],u=e.t={},p=0,d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,a]],m=(e,t,r)=>{let a=(e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=p++;s(e,i,t),u[e]=i,l[i]=t,c[i]=a,n[i]=new RegExp(t,r?"g":void 0),o[i]=new RegExp(a,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),m("FULL",`^${l[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),m("LOOSE",`^${l[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),m("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),m("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[u.COERCE],!0),m("COERCERTLFULL",l[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",m("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",m("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),Cl=j((e,t)=>{var r=Object.freeze({loose:!0}),a=Object.freeze({});t.exports=e=>e?"object"!=typeof e?r:e:a}),kf=j((e,t)=>{var r=/^[0-9]+$/,a=(e,t)=>{let a=r.test(e),i=r.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};t.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}}),sr=j((e,t)=>{var r=Io(),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=Oo(),{safeRe:s,t:n}=Ya(),o=Cl(),{compareIdentifiers:l}=kf();t.exports=class e{constructor(t,l){if(l=o(l),t instanceof e){if(t.loose===!!l.loose&&t.includePrerelease===!!l.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>a)throw new TypeError(`version is longer than ${a} characters`);r("SemVer",t,l),this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease;let c=t.trim().match(l.loose?s[n.LOOSE]:s[n.FULL]);if(!c)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(r("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),l(this.major,t.major)||l(this.minor,t.minor)||l(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let a=0;do{let e=this.prerelease[a],i=t.prerelease[a];if(r("prerelease compare",a,e,i),void 0===e&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===e)return-1;if(e!==i)return l(e,i)}while(++a)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let a=0;do{let e=this.build[a],i=t.build[a];if(r("build compare",a,e,i),void 0===e&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===e)return-1;if(e!==i)return l(e,i)}while(++a)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?s[n.PRERELEASELOOSE]:s[n.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let a=this.prerelease.length;for(;--a>=0;)"number"==typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);if(-1===a){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let a=[t,e];!1===r&&(a=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}}),Ks=j((e,t)=>{var r=sr();t.exports=(e,t,a=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!a)return null;throw e}}}),ax=j((e,t)=>{var r=Ks();t.exports=(e,t)=>{let a=r(e,t);return a?a.version:null}}),ox=j((e,t)=>{var r=Ks();t.exports=(e,t)=>{let a=r(e.trim().replace(/^[=v]+/,""),t);return a?a.version:null}}),ux=j((e,t)=>{var r=sr();t.exports=(e,t,a,i,s)=>{"string"==typeof a&&(s=i,i=a,a=void 0);try{return new r(e instanceof r?e.version:e,a).inc(t,i,s).version}catch{return null}}}),fx=j((e,t)=>{var r=Ks();t.exports=(e,t)=>{let a=r(e,null,!0),i=r(t,null,!0),s=a.compare(i);if(0===s)return null;let n=s>0,o=n?a:i,l=n?i:a,c=!!o.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}let u=c?"pre":"";return a.major!==i.major?u+"major":a.minor!==i.minor?u+"minor":a.patch!==i.patch?u+"patch":"prerelease"}}),hx=j((e,t)=>{var r=sr();t.exports=(e,t)=>new r(e,t).major}),vx=j((e,t)=>{var r=sr();t.exports=(e,t)=>new r(e,t).minor}),bx=j((e,t)=>{var r=sr();t.exports=(e,t)=>new r(e,t).patch}),xx=j((e,t)=>{var r=Ks();t.exports=(e,t)=>{let a=r(e,t);return a&&a.prerelease.length?a.prerelease:null}}),Vr=j((e,t)=>{var r=sr();t.exports=(e,t,a)=>new r(e,a).compare(new r(t,a))}),Tx=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>r(t,e,a)}),Px=j((e,t)=>{var r=Vr();t.exports=(e,t)=>r(e,t,!0)}),Il=j((e,t)=>{var r=sr();t.exports=(e,t,a)=>{let i=new r(e,a),s=new r(t,a);return i.compare(s)||i.compareBuild(s)}}),Ix=j((e,t)=>{var r=Il();t.exports=(e,t)=>e.sort((e,a)=>r(e,a,t))}),Ax=j((e,t)=>{var r=Il();t.exports=(e,t)=>e.sort((e,a)=>r(a,e,t))}),$o=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>r(e,t,a)>0}),$l=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>r(e,t,a)<0}),Of=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>0===r(e,t,a)}),If=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>0!==r(e,t,a)}),Al=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>r(e,t,a)>=0}),Nl=j((e,t)=>{var r=Vr();t.exports=(e,t,a)=>r(e,t,a)<=0}),$f=j((e,t)=>{var r=Of(),a=If(),i=$o(),s=Al(),n=$l(),o=Nl();t.exports=(e,t,l,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof l&&(l=l.version),e===l;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof l&&(l=l.version),e!==l;case"":case"=":case"==":return r(e,l,c);case"!=":return a(e,l,c);case">":return i(e,l,c);case">=":return s(e,l,c);case"<":return n(e,l,c);case"<=":return o(e,l,c);default:throw new TypeError(`Invalid operator: ${t}`)}}}),zx=j((e,t)=>{var r=sr(),a=Ks(),{safeRe:i,t:s}=Ya();t.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let r,a=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];for(;(r=a.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),a.lastIndex=r.index+r[1].length+r[2].length;a.lastIndex=-1}else n=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===n)return null;let o=n[2],l=n[3]||"0",c=n[4]||"0",u=t.includePrerelease&&n[5]?`-${n[5]}`:"",p=t.includePrerelease&&n[6]?`+${n[6]}`:"";return a(`${o}.${l}.${c}${u}${p}`,t)}}),Hx=j((e,t)=>{t.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}}),Zr=j((e,t)=>{var r=/\s+/g;t.exports=class e{constructor(t,a){if(a=i(a),t instanceof e)return t.loose===!!a.loose&&t.includePrerelease===!!a.includePrerelease?t:new e(t.raw,a);if(t instanceof s)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease,this.raw=t.trim().replace(r," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!f(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(let e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+e,r=a.get(t);if(r)return r;let i=this.options.loose,o=i?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];e=e.replace(o,T(this.options.includePrerelease)),n("hyphen replace",e),e=e.replace(l[c.COMPARATORTRIM],u),n("comparator trim",e),e=e.replace(l[c.TILDETRIM],p),n("tilde trim",e),e=e.replace(l[c.CARETTRIM],d),n("caret trim",e);let v=e.split(" ").map(e=>y(e,this.options)).join(" ").split(/\s+/).map(e=>C(e,this.options));i&&(v=v.filter(e=>(n("loose invalid filter",e,this.options),!!e.match(l[c.COMPARATORLOOSE])))),n("range list",v);let g=new Map,b=v.map(e=>new s(e,this.options));for(let e of b){if(f(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");let x=[...g.values()];return a.set(t,x),x}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(e=>g(e,r)&&t.set.some(t=>g(t,r)&&e.every(e=>t.every(t=>e.intersects(t,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if($(this.set[t],e,this.options))return!0;return!1}};var a=new(Hx()),i=Cl(),s=Ao(),n=Io(),o=sr(),{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:p,caretTrimReplace:d}=Ya(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=Oo(),f=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,g=(e,t)=>{let r=!0,a=e.slice(),i=a.pop();for(;r&&a.length;)r=a.every(e=>i.intersects(e,t)),i=a.pop();return r},y=(e,t)=>(n("comp",e,t),e=w(e,t),n("caret",e),e=x(e,t),n("tildes",e),e=S(e,t),n("xrange",e),e=P(e,t),n("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,x=(e,t)=>e.trim().split(/\s+/).map(e=>_(e,t)).join(" "),_=(e,t)=>{let r=t.loose?l[c.TILDELOOSE]:l[c.TILDE];return e.replace(r,(t,r,a,i,s)=>{let o;return n("tilde",e,t,r,a,i,s),b(r)?o="":b(a)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:b(i)?o=`>=${r}.${a}.0 <${r}.${+a+1}.0-0`:s?(n("replaceTilde pr",s),o=`>=${r}.${a}.${i}-${s} <${r}.${+a+1}.0-0`):o=`>=${r}.${a}.${i} <${r}.${+a+1}.0-0`,n("tilde return",o),o})},w=(e,t)=>e.trim().split(/\s+/).map(e=>E(e,t)).join(" "),E=(e,t)=>{n("caret",e,t);let r=t.loose?l[c.CARETLOOSE]:l[c.CARET],a=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,s,o)=>{let l;return n("caret",e,t,r,i,s,o),b(r)?l="":b(i)?l=`>=${r}.0.0${a} <${+r+1}.0.0-0`:b(s)?l="0"===r?`>=${r}.${i}.0${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${a} <${+r+1}.0.0-0`:o?(n("replaceCaret pr",o),l="0"===r?"0"===i?`>=${r}.${i}.${s}-${o} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}-${o} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s}-${o} <${+r+1}.0.0-0`):(n("no pr"),l="0"===r?"0"===i?`>=${r}.${i}.${s}${a} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s} <${+r+1}.0.0-0`),n("caret return",l),l})},S=(e,t)=>(n("replaceXRanges",e,t),e.split(/\s+/).map(e=>k(e,t)).join(" ")),k=(e,t)=>{e=e.trim();let r=t.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return e.replace(r,(r,a,i,s,o,l)=>{n("xRange",e,r,a,i,s,o,l);let c=b(i),u=c||b(s),p=u||b(o),d=p;return"="===a&&d&&(a=""),l=t.includePrerelease?"-0":"",c?r=">"===a||"<"===a?"<0.0.0-0":"*":a&&d?(u&&(s=0),o=0,">"===a?(a=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===a&&(a="<",u?i=+i+1:s=+s+1),"<"===a&&(l="-0"),r=`${a+i}.${s}.${o}${l}`):u?r=`>=${i}.0.0${l} <${+i+1}.0.0-0`:p&&(r=`>=${i}.${s}.0${l} <${i}.${+s+1}.0-0`),n("xRange return",r),r})},P=(e,t)=>(n("replaceStars",e,t),e.trim().replace(l[c.STAR],"")),C=(e,t)=>(n("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),T=e=>(t,r,a,i,s,n,o,l,c,u,p,d)=>`${r=b(a)?"":b(i)?`>=${a}.0.0${e?"-0":""}`:b(s)?`>=${a}.${i}.0${e?"-0":""}`:n?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=b(c)?"":b(u)?`<${+c+1}.0.0-0`:b(p)?`<${c}.${+u+1}.0-0`:d?`<=${c}.${u}.${p}-${d}`:e?`<${c}.${u}.${+p+1}-0`:`<=${l}`}`.trim(),$=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let a=e[r].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}}),Ao=j((e,t)=>{var r=Symbol("SemVer ANY");t.exports=class e{static get ANY(){return r}constructor(t,i){if(i=a(i),t instanceof e){if(t.loose===!!i.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),o("comparator",t,i),this.options=i,this.loose=!!i.loose,this.parse(t),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(e){let t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],a=e.match(t);if(!a)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new l(a[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(o("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch{return!1}return n(e,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(t.value,r).test(this.value):""===t.operator?""===t.value||new c(this.value,r).test(t.semver):!((r=a(r)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||n(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||n(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">"))}};var a=Cl(),{safeRe:i,t:s}=Ya(),n=$f(),o=Io(),l=sr(),c=Zr()}),Do=j((e,t)=>{var r=Zr();t.exports=(e,t,a)=>{try{t=new r(t,a)}catch{return!1}return t.test(e)}}),nw=j((e,t)=>{var r=Zr();t.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))}),aw=j((e,t)=>{var r=sr(),a=Zr();t.exports=(e,t,i)=>{let s=null,n=null,o=null;try{o=new a(t,i)}catch{return null}return e.forEach(e=>{o.test(e)&&(!s||-1===n.compare(e))&&(s=e,n=new r(s,i))}),s}}),ow=j((e,t)=>{var r=sr(),a=Zr();t.exports=(e,t,i)=>{let s=null,n=null,o=null;try{o=new a(t,i)}catch{return null}return e.forEach(e=>{o.test(e)&&(!s||1===n.compare(e))&&(s=e,n=new r(s,i))}),s}}),uw=j((e,t)=>{var r=sr(),a=Zr(),i=$o();t.exports=(e,t)=>{e=new a(e,t);let s=new r("0.0.0");if(e.test(s)||(s=new r("0.0.0-0"),e.test(s)))return s;s=null;for(let t=0;t<e.set.length;++t){let a=e.set[t],n=null;a.forEach(e=>{let t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||i(t,n))&&(n=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),n&&(!s||i(s,n))&&(s=n)}return s&&e.test(s)?s:null}}),pw=j((e,t)=>{var r=Zr();t.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch{return null}}}),Ml=j((e,t)=>{var r=sr(),a=Ao(),{ANY:i}=a,s=Zr(),n=Do(),o=$o(),l=$l(),c=Nl(),u=Al();t.exports=(e,t,p,d)=>{let h,m,f,v,g;switch(e=new r(e,d),t=new s(t,d),p){case">":h=o,m=c,f=l,v=">",g=">=";break;case"<":h=l,m=u,f=o,v="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(e,t,d))return!1;for(let r=0;r<t.set.length;++r){let s=t.set[r],n=null,o=null;if(s.forEach(e=>{e.semver===i&&(e=new a(">=0.0.0")),n=n||e,o=o||e,h(e.semver,n.semver,d)?n=e:f(e.semver,o.semver,d)&&(o=e)}),n.operator===v||n.operator===g||(!o.operator||o.operator===v)&&m(e,o.semver))return!1;if(o.operator===g&&f(e,o.semver))return!1}return!0}}),yw=j((e,t)=>{var r=Ml();t.exports=(e,t,a)=>r(e,t,">",a)}),_w=j((e,t)=>{var r=Ml();t.exports=(e,t,a)=>r(e,t,"<",a)}),Sw=j((e,t)=>{var r=Zr();t.exports=(e,t,a)=>(e=new r(e,a),t=new r(t,a),e.intersects(t,a))}),Tw=j((e,t)=>{var r=Do(),a=Vr();t.exports=(e,t,i)=>{let s=[],n=null,o=null,l=e.sort((e,t)=>a(e,t,i));for(let e of l)r(e,t,i)?(o=e,n||(n=e)):(o&&s.push([n,o]),o=null,n=null);n&&s.push([n,null]);let c=[];for(let[e,t]of s)e===t?c.push(e):t||e!==l[0]?t?e===l[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");let u=c.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return u.length<p.length?u:t}}),Iw=j((e,t)=>{var r=Zr(),a=Ao(),{ANY:i}=a,s=Do(),n=Vr(),o=[new a(">=0.0.0-0")],l=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?o:l}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=l}let a,c,d,h=new Set;for(let t of e)">"===t.operator||">="===t.operator?a=u(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):h.add(t.semver);if(h.size>1)return null;if(a&&c){if(d=n(a.semver,c.semver,r),d>0)return null;if(0===d&&(">="!==a.operator||"<="!==c.operator))return null}for(let e of h){if(a&&!s(e,String(a),r)||c&&!s(e,String(c),r))return null;for(let a of t)if(!s(e,String(a),r))return!1;return!0}let m,f,v,g,y=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,b=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(let e of t){if(g=g||">"===e.operator||">="===e.operator,v=v||"<"===e.operator||"<="===e.operator,a)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(m=u(a,e,r),m===e&&m!==a)return!1}else if(">="===a.operator&&!s(a.semver,String(e),r))return!1;if(c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(f=p(c,e,r),f===e&&f!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==d)return!1}return!(a&&v&&!c&&0!==d||c&&g&&!a&&0!==d||b||y)},u=(e,t,r)=>{if(!e)return t;let a=n(e.semver,t.semver,r);return a>0?e:a<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;let a=n(e.semver,t.semver,r);return a<0?e:a>0||"<"===t.operator&&"<="===e.operator?t:e};t.exports=(e,t,a={})=>{if(e===t)return!0;e=new r(e,a),t=new r(t,a);let i=!1;e:for(let r of e.set){for(let e of t.set){let t=c(r,e,a);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}}),Hf=j((e,t)=>{var r=Ya(),a=Oo(),i=sr(),s=kf(),n=Ks(),o=ax(),l=ox(),c=ux(),u=fx(),p=hx(),d=vx(),h=bx(),m=xx(),f=Vr(),v=Tx(),g=Px(),y=Il(),b=Ix(),x=Ax(),_=$o(),w=$l(),E=Of(),S=If(),k=Al(),P=Nl(),C=$f(),T=zx(),$=Ao(),O=Zr(),R=Do(),j=nw(),I=aw(),A=ow(),N=uw(),L=pw(),F=Ml(),D=yw(),z=_w(),M=Sw(),q=Tw(),U=Iw();t.exports={parse:n,valid:o,clean:l,inc:c,diff:u,major:p,minor:d,patch:h,prerelease:m,compare:f,rcompare:v,compareLoose:g,compareBuild:y,sort:b,rsort:x,gt:_,lt:w,eq:E,neq:S,gte:k,lte:P,cmp:C,coerce:T,Comparator:$,Range:O,satisfies:R,toComparators:j,maxSatisfying:I,minSatisfying:A,minVersion:N,validRange:L,outside:F,gtr:D,ltr:z,intersects:M,simplifyRange:q,subset:U,SemVer:i,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}}),VT=j((e,t)=>{t.exports=function(e){return e.map(function(e){return""===e?"''":e&&"object"==typeof e?e.op.replace(/(.)/g,"\\$1"):/["\s\\]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}}),YT=j((e,t)=>{var r="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",a=new RegExp("^"+r+"$"),i="|&;()<> \\t",s=/^#$/,n="";for(o=0;o<4;o++)n+=(4294967296*Math.random()).toString(16);var o,l=new RegExp("^"+n);function c(e,t,o){o||(o={});var l=o.escape||"\\",c=new RegExp(["("+r+")","("+("(\\"+l+"['\""+i+"]|[^\\s'\""+i+"])+")+"|\"((\\\\\"|[^\"])*?)\"|'((\\\\'|[^'])*?)')+"].join("|"),"g"),u=function(e,t){for(var r,a=t.lastIndex,i=[];r=t.exec(e);)i.push(r),t.lastIndex===r.index&&(t.lastIndex+=1);return t.lastIndex=a,i}(e,c);if(0===u.length)return[];t||(t={});var p=!1;return u.map(function(r){var i=r[0];if(i&&!p){if(a.test(i))return{op:i};var o,c=!1,u=!1,d="",h=!1;for(o=0;o<i.length;o++){var m=i.charAt(o);if(h=h||!c&&("*"===m||"?"===m),u)d+=m,u=!1;else if(c)m===c?c=!1:"'"==c?d+=m:m===l?(o+=1,d+='"'===(m=i.charAt(o))||m===l||"$"===m?m:l+m):d+="$"===m?v():m;else if('"'===m||"'"===m)c=m;else{if(a.test(m))return{op:i};if(s.test(m)){p=!0;var f={comment:e.slice(r.index+o+1)};return d.length?[d,f]:[f]}m===l?u=!0:d+="$"===m?v():m}}return h?{op:"glob",pattern:d}:d}function v(){o+=1;var e,r,a=i.charAt(o);if("{"===a){if(o+=1,"}"===i.charAt(o))throw new Error("Bad substitution: "+i.slice(o-2,o+1));if((e=i.indexOf("}",o))<0)throw new Error("Bad substitution: "+i.slice(o));r=i.slice(o,e),o=e}else if(/[*@#?$!_-]/.test(a))r=a,o+=1;else{var s=i.slice(o);(e=s.match(/[^\w\d_]/))?(r=s.slice(0,e.index),o+=e.index-1):(r=s,o=i.length)}return function(e,t,r){var a="function"==typeof e?e(r):e[r];return typeof a>"u"&&""!=r?a="":typeof a>"u"&&(a="$"),"object"==typeof a?t+n+JSON.stringify(a)+n:t+a}(t,"",r)}}).reduce(function(e,t){return typeof t>"u"?e:e.concat(t)},[])}t.exports=function(e,t,r){var a=c(e,t,r);return"function"!=typeof t?a:a.reduce(function(e,t){if("object"==typeof t)return e.concat(t);var r=t.split(RegExp("("+n+".*?"+n+")","g"));return 1===r.length?e.concat(r[0]):e.concat(r.filter(Boolean).map(function(e){return l.test(e)?JSON.parse(e.split(n)[1]):e}))},[])}}),Vh=j(e=>{e.quote=VT(),e.parse=YT()}),OC=j((e,t)=>{var r=require("stream").Stream,a=require("util");function i(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}t.exports=i,a.inherits(i,r),i.create=function(e,t){var r=new this;for(var a in t=t||{})r[a]=t[a];r.source=e;var i=e.emit;return e.emit=function(){return r._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),r.pauseStream&&e.pause(),r},Object.defineProperty(i.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),i.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},i.prototype.resume=function(){this._released||this.release(),this.source.resume()},i.prototype.pause=function(){this.source.pause()},i.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},i.prototype.pipe=function(){var e=r.prototype.pipe.apply(this,arguments);return this.resume(),e},i.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},i.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}}),NC=j((e,t)=>{var r=require("util"),a=require("stream").Stream,i=OC();function s(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}t.exports=s,r.inherits(s,a),s.create=function(e){var t=new this;for(var r in e=e||{})t[r]=e[r];return t},s.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},s.prototype.append=function(e){if(s.isStreamLike(e)){if(!(e instanceof i)){var t=i.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},s.prototype.pipe=function(e,t){return a.prototype.pipe.call(this,e,t),this.resume(),e},s.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},s.prototype._realGetNext=function(){var e=this._streams.shift();typeof e>"u"?this.end():"function"==typeof e?e(function(e){s.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e)},s.prototype._pipeNext=function(e){if(this._currentStream=e,s.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},s.prototype._handleErrors=function(e){var t=this;e.on("error",function(e){t._emitError(e)})},s.prototype.write=function(e){this.emit("data",e)},s.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},s.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},s.prototype.end=function(){this._reset(),this.emit("end")},s.prototype.destroy=function(){this._reset(),this.emit("close")},s.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},s.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},s.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},s.prototype._emitError=function(e){this._reset(),this.emit("error",e)}}),DC=j((e,t)=>{t.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}}),MC=j((e,t)=>{t.exports=DC()}),UC=j(e=>{var t,r,a,i=MC(),s=require("path").extname,n=/^\s*([^;\s]*)(?:;|\s|$)/,o=/^text\//i;function l(e){if(!e||"string"!=typeof e)return!1;var t=n.exec(e),r=t&&i[t[1].toLowerCase()];return r&&r.charset?r.charset:!(!t||!o.test(t[1]))&&"UTF-8"}e.charset=l,e.charsets={lookup:l},e.contentType=function(t){if(!t||"string"!=typeof t)return!1;var r=-1===t.indexOf("/")?e.lookup(t):t;if(!r)return!1;if(-1===r.indexOf("charset")){var a=e.charset(r);a&&(r+="; charset="+a.toLowerCase())}return r},e.extension=function(t){if(!t||"string"!=typeof t)return!1;var r=n.exec(t),a=r&&e.extensions[r[1].toLowerCase()];return!(!a||!a.length)&&a[0]},e.extensions=Object.create(null),e.lookup=function(t){if(!t||"string"!=typeof t)return!1;var r=s("x."+t).toLowerCase().substr(1);return r&&e.types[r]||!1},e.types=Object.create(null),t=e.extensions,r=e.types,a=["nginx","apache",void 0,"iana"],Object.keys(i).forEach(function(e){var s=i[e],n=s.extensions;if(n&&n.length){t[e]=n;for(var o=0;o<n.length;o++){var l=n[o];if(r[l]){var c=a.indexOf(i[r[l]].source),u=a.indexOf(s.source);if("application/octet-stream"!==r[l]&&(c>u||c===u&&"application/"===r[l].substr(0,12)))continue}r[l]=e}}})}),zC=j((e,t)=>{t.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}}),rg=j((e,t)=>{var r=zC();t.exports=function(e){var t=!1;return r(function(){t=!0}),function(a,i){t?e(a,i):r(function(){e(a,i)})}}}),ng=j((e,t)=>{function r(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}t.exports=function(e){Object.keys(e.jobs).forEach(r.bind(e)),e.jobs={}}}),sg=j((e,t)=>{var r=rg(),a=ng();t.exports=function(e,t,i,s){var n=i.keyedList?i.keyedList[i.index]:i.index;i.jobs[n]=function(e,t,a,i){var s;return s=2==e.length?e(a,r(i)):e(a,t,r(i)),s}(t,n,e[n],function(e,t){n in i.jobs&&(delete i.jobs[n],e?a(i):i.results[n]=t,s(e,i.results))})}}),ag=j((e,t)=>{t.exports=function(e,t){var r=!Array.isArray(e),a={index:0,keyedList:r||t?Object.keys(e):null,jobs:{},results:r?{}:[],size:r?Object.keys(e).length:e.length};return t&&a.keyedList.sort(r?t:function(r,a){return t(e[r],e[a])}),a}}),ig=j((e,t)=>{var r=ng(),a=rg();t.exports=function(e){Object.keys(this.jobs).length&&(this.index=this.size,r(this),a(e)(null,this.results))}}),XC=j((e,t)=>{var r=sg(),a=ag(),i=ig();t.exports=function(e,t,s){for(var n=a(e);n.index<(n.keyedList||e).length;)r(e,t,n,function(e,t){e?s(e,t):0!==Object.keys(n.jobs).length||s(null,n.results)}),n.index++;return i.bind(n,s)}}),og=j((e,t)=>{var r=sg(),a=ag(),i=ig();function s(e,t){return e<t?-1:e>t?1:0}t.exports=function(e,t,s,n){var o=a(e,s);return r(e,t,o,function a(i,s){i?n(i,s):(o.index++,o.index<(o.keyedList||e).length?r(e,t,o,a):n(null,o.results))}),i.bind(o,n)},t.exports.ascending=s,t.exports.descending=function(e,t){return-1*s(e,t)}}),tP=j((e,t)=>{var r=og();t.exports=function(e,t,a){return r(e,t,null,a)}}),nP=j((e,t)=>{t.exports={parallel:XC(),serial:tP(),serialOrdered:og()}}),cg=j((e,t)=>{t.exports=Object}),iP=j((e,t)=>{t.exports=Error}),cP=j((e,t)=>{t.exports=EvalError}),uP=j((e,t)=>{t.exports=RangeError}),pP=j((e,t)=>{t.exports=ReferenceError}),mP=j((e,t)=>{t.exports=SyntaxError}),Qu=j((e,t)=>{t.exports=TypeError}),vP=j((e,t)=>{t.exports=URIError}),bP=j((e,t)=>{t.exports=Math.abs}),xP=j((e,t)=>{t.exports=Math.floor}),SP=j((e,t)=>{t.exports=Math.max}),TP=j((e,t)=>{t.exports=Math.min}),PP=j((e,t)=>{t.exports=Math.pow}),RP=j((e,t)=>{t.exports=Math.round}),IP=j((e,t)=>{t.exports=Number.isNaN||function(e){return e!=e}}),AP=j((e,t)=>{var r=IP();t.exports=function(e){return r(e)||0===e?e:e<0?-1:1}}),DP=j((e,t)=>{t.exports=Object.getOwnPropertyDescriptor}),lg=j((e,t)=>{var r=DP();if(r)try{r([],"length")}catch{r=null}t.exports=r}),jP=j((e,t)=>{var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}t.exports=r}),ug=j((e,t)=>{t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var a in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}}),zP=j((e,t)=>{var r=typeof Symbol<"u"&&Symbol,a=ug();t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&a()}}),dg=j((e,t)=>{t.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null}),pg=j((e,t)=>{var r=cg();t.exports=r.getPrototypeOf||null}),GP=j((e,t)=>{var r=Object.prototype.toString,a=Math.max,i=function(e,t){for(var r=[],a=0;a<e.length;a+=1)r[a]=e[a];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};t.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==r.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var s,n=function(e,t){for(var r=[],a=t||0,i=0;a<e.length;a+=1,i+=1)r[i]=e[a];return r}(arguments,1),o=a(0,t.length-n.length),l=[],c=0;c<o;c++)l[c]="$"+c;if(s=Function("binder","return function ("+function(e,t){for(var r="",a=0;a<e.length;a+=1)r+=e[a],a+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var r=t.apply(this,i(n,arguments));return Object(r)===r?r:this}return t.apply(e,i(n,arguments))}),t.prototype){var u=function(){};u.prototype=t.prototype,s.prototype=new u,u.prototype=null}return s}}),Ec=j((e,t)=>{var r=GP();t.exports=Function.prototype.bind||r}),rd=j((e,t)=>{t.exports=Function.prototype.call}),fg=j((e,t)=>{t.exports=Function.prototype.apply}),YP=j((e,t)=>{t.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply}),ek=j((e,t)=>{var r=Ec(),a=fg(),i=rd(),s=YP();t.exports=s||r.call(i,a)}),rk=j((e,t)=>{var r=Ec(),a=Qu(),i=rd(),s=ek();t.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new a("a function is required");return s(r,i,e)}}),ck=j((e,t)=>{var r,a=rk(),i=lg();try{r=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!r&&i&&i(Object.prototype,"__proto__"),n=Object,o=n.getPrototypeOf;t.exports=s&&"function"==typeof s.get?a([s.get]):"function"==typeof o&&function(e){return o(null==e?e:n(e))}}),fk=j((e,t)=>{var r=dg(),a=pg(),i=ck();t.exports=r?function(e){return r(e)}:a?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return a(e)}:i?function(e){return i(e)}:null}),hg=j((e,t)=>{var r=Function.prototype.call,a=Object.prototype.hasOwnProperty,i=Ec();t.exports=i.call(r,a)}),xk=j((e,t)=>{var r,a=cg(),i=iP(),s=cP(),n=uP(),o=pP(),l=mP(),c=Qu(),u=vP(),p=bP(),d=xP(),h=SP(),m=TP(),f=PP(),v=RP(),g=AP(),y=Function,b=function(e){try{return y('"use strict"; return ('+e+").constructor;")()}catch{}},x=lg(),_=jP(),w=function(){throw new c},E=x?function(){try{return w}catch{try{return x(arguments,"callee").get}catch{return w}}}():w,S=zP()(),k=fk(),P=pg(),C=dg(),T=fg(),$=rd(),O={},R=typeof Uint8Array>"u"||!k?r:k(Uint8Array),j={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":S&&k?k([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":s,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&k?k(k([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!S||!k?r:k((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":a,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!S||!k?r:k((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&k?k(""[Symbol.iterator]()):r,"%Symbol%":S?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":E,"%TypedArray%":R,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":$,"%Function.prototype.apply%":T,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":P,"%Math.abs%":p,"%Math.floor%":d,"%Math.max%":h,"%Math.min%":m,"%Math.pow%":f,"%Math.round%":v,"%Math.sign%":g,"%Reflect.getPrototypeOf%":C};if(k)try{null.error}catch(e){I=k(k(e)),j["%Error.prototype%"]=I}var I,A=function e(t){var r;if("%AsyncFunction%"===t)r=b("async function () {}");else if("%GeneratorFunction%"===t)r=b("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=b("async function* () {}");else if("%AsyncGenerator%"===t){var a=e("%AsyncGeneratorFunction%");a&&(r=a.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&k&&(r=k(i.prototype))}return j[t]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=Ec(),F=hg(),D=L.call($,Array.prototype.concat),z=L.call(T,Array.prototype.splice),M=L.call($,String.prototype.replace),q=L.call($,String.prototype.slice),U=L.call($,RegExp.prototype.exec),Z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,V=function(e,t){var r,a=e;if(F(N,a)&&(a="%"+(r=N[a])[0]+"%"),F(j,a)){var i=j[a];if(i===O&&(i=A(a)),typeof i>"u"&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:a,value:i}}throw new l("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===U(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=q(e,0,1),r=q(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var a=[];return M(e,Z,function(e,t,r,i){a[a.length]=r?M(i,B,"$1"):t||e}),a}(e),a=r.length>0?r[0]:"",i=V("%"+a+"%",t),s=i.name,n=i.value,o=!1,u=i.alias;u&&(a=u[0],z(r,D([0,1],u)));for(var p=1,d=!0;p<r.length;p+=1){var h=r[p],m=q(h,0,1),f=q(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===f||"'"===f||"`"===f)&&m!==f)throw new l("property names with quotes must have matching quotes");if(("constructor"===h||!d)&&(o=!0),F(j,s="%"+(a+="."+h)+"%"))n=j[s];else if(null!=n){if(!(h in n)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(x&&p+1>=r.length){var v=x(n,h);n=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:n[h]}else d=F(n,h),n=n[h];d&&!o&&(j[s]=n)}}return n}}),Sk=j((e,t)=>{var r=ug();t.exports=function(){return r()&&!!Symbol.toStringTag}}),Ck=j((e,t)=>{var r=xk()("%Object.defineProperty%",!0),a=Sk()(),i=hg(),s=Qu(),n=a?Symbol.toStringTag:null;t.exports=function(e,t){var a=arguments.length>2&&!!arguments[2]&&arguments[2].force,o=arguments.length>2&&!!arguments[2]&&arguments[2].nonConfigurable;if(typeof a<"u"&&"boolean"!=typeof a||typeof o<"u"&&"boolean"!=typeof o)throw new s("if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans");n&&(a||!i(e,n))&&(r?r(e,n,{configurable:!o,enumerable:!1,value:t,writable:!1}):e[n]=t)}}),kk=j((e,t)=>{t.exports=function(e,t){return Object.keys(t).forEach(function(r){e[r]=e[r]||t[r]}),e}}),Ok=j((e,t)=>{var r=NC(),a=require("util"),i=require("path"),s=require("http"),n=require("https"),o=require("url").parse,l=require("fs"),c=require("stream").Stream,u=UC(),p=nP(),d=Ck(),h=kk();function m(e){if(!(this instanceof m))return new m(e);for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],r.call(this),e=e||{})this[t]=e[t]}t.exports=m,a.inherits(m,r),m.LINE_BREAK="\r\n",m.DEFAULT_CONTENT_TYPE="application/octet-stream",m.prototype.append=function(e,t,a){"string"==typeof(a=a||{})&&(a={filename:a});var i=r.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),Array.isArray(t))this._error(new Error("Arrays are not supported."));else{var s=this._multiPartHeader(e,t,a),n=this._multiPartFooter();i(s),i(t),i(n),this._trackLength(s,t,a)}},m.prototype._trackLength=function(e,t,r){var a=0;null!=r.knownLength?a+=+r.knownLength:Buffer.isBuffer(t)?a=t.length:"string"==typeof t&&(a=Buffer.byteLength(t)),this._valueLength+=a,this._overheadLength+=Buffer.byteLength(e)+m.LINE_BREAK.length,t&&(t.path||t.readable&&Object.prototype.hasOwnProperty.call(t,"httpVersion")||t instanceof c)&&(r.knownLength||this._valuesToMeasure.push(t))},m.prototype._lengthRetriever=function(e,t){Object.prototype.hasOwnProperty.call(e,"fd")?null!=e.end&&e.end!=1/0&&null!=e.start?t(null,e.end+1-(e.start?e.start:0)):l.stat(e.path,function(r,a){var i;r?t(r):(i=a.size-(e.start?e.start:0),t(null,i))}):Object.prototype.hasOwnProperty.call(e,"httpVersion")?t(null,+e.headers["content-length"]):Object.prototype.hasOwnProperty.call(e,"httpModule")?(e.on("response",function(r){e.pause(),t(null,+r.headers["content-length"])}),e.resume()):t("Unknown stream")},m.prototype._multiPartHeader=function(e,t,r){if("string"==typeof r.header)return r.header;var a,i=this._getContentDisposition(t,r),s=this._getContentType(t,r),n="",o={"Content-Disposition":["form-data",'name="'+e+'"'].concat(i||[]),"Content-Type":[].concat(s||[])};for(var l in"object"==typeof r.header&&h(o,r.header),o)if(Object.prototype.hasOwnProperty.call(o,l)){if(null==(a=o[l]))continue;Array.isArray(a)||(a=[a]),a.length&&(n+=l+": "+a.join("; ")+m.LINE_BREAK)}return"--"+this.getBoundary()+m.LINE_BREAK+n+m.LINE_BREAK},m.prototype._getContentDisposition=function(e,t){var r,a;return"string"==typeof t.filepath?r=i.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?r=i.basename(t.filename||e.name||e.path):e.readable&&Object.prototype.hasOwnProperty.call(e,"httpVersion")&&(r=i.basename(e.client._httpMessage.path||"")),r&&(a='filename="'+r+'"'),a},m.prototype._getContentType=function(e,t){var r=t.contentType;return!r&&e.name&&(r=u.lookup(e.name)),!r&&e.path&&(r=u.lookup(e.path)),!r&&e.readable&&Object.prototype.hasOwnProperty.call(e,"httpVersion")&&(r=e.headers["content-type"]),!r&&(t.filepath||t.filename)&&(r=u.lookup(t.filepath||t.filename)),!r&&"object"==typeof e&&(r=m.DEFAULT_CONTENT_TYPE),r},m.prototype._multiPartFooter=function(){return function(e){var t=m.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},m.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+m.LINE_BREAK},m.prototype.getHeaders=function(e){var t,r={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t.toLowerCase()]=e[t]);return r},m.prototype.setBoundary=function(e){this._boundary=e},m.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},m.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),r=0,a=this._streams.length;r<a;r++)"function"!=typeof this._streams[r]&&(e=Buffer.isBuffer(this._streams[r])?Buffer.concat([e,this._streams[r]]):Buffer.concat([e,Buffer.from(this._streams[r])]),("string"!=typeof this._streams[r]||this._streams[r].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(m.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])},m.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},m.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},m.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},m.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?p.parallel(this._valuesToMeasure,this._lengthRetriever,function(r,a){r?e(r):(a.forEach(function(e){t+=e}),e(null,t))}):process.nextTick(e.bind(this,null,t))},m.prototype.submit=function(e,t){var r,a,i={method:"post"};return"string"==typeof e?(e=o(e),a=h({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(a=h(e,i)).port||(a.port="https:"==a.protocol?443:80),a.headers=this.getHeaders(e.headers),r="https:"==a.protocol?n.request(a):s.request(a),this.getLength(function(e,a){if(e&&"Unknown stream"!==e)this._error(e);else if(a&&r.setHeader("Content-Length",a),this.pipe(r),t){var i,s=function(e,a){return r.removeListener("error",s),r.removeListener("response",i),t.call(this,e,a)};i=s.bind(this,null),r.on("error",s),r.on("response",i)}}.bind(this)),r},m.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},m.prototype.toString=function(){return"[object FormData]"},d(m,"FormData")}),Wk=j(e=>{var t=require("url").parse,r={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},a=String.prototype.endsWith||function(e){return e.length<=this.length&&-1!==this.indexOf(e,this.length-e.length)};function i(e){return process.env[e.toLowerCase()]||process.env[e.toUpperCase()]||""}e.getProxyForUrl=function(e){var s="string"==typeof e?t(e):e||{},n=s.protocol,o=s.host,l=s.port;if("string"!=typeof o||!o||"string"!=typeof n||(n=n.split(":",1)[0],!function(e,t){var r=(i("npm_config_no_proxy")||i("no_proxy")).toLowerCase();return!r||"*"!==r&&r.split(/[,\s]/).every(function(r){if(!r)return!0;var i=r.match(/^(.+):(\d+)$/),s=i?i[1]:r,n=i?parseInt(i[2]):0;return!(!n||n===t)||(/^[.*]/.test(s)?("*"===s.charAt(0)&&(s=s.slice(1)),!a.call(e,s)):e!==s)})}(o=o.replace(/:\d*$/,""),l=parseInt(l)||r[n]||0)))return"";var c=i("npm_config_"+n+"_proxy")||i(n+"_proxy")||i("npm_config_proxy")||i("all_proxy");return c&&-1===c.indexOf("://")&&(c=n+"://"+c),c}}),Jk=j((e,t)=>{var r=1e3,a=6e4,i=60*a,s=24*i,n=7*s,o=365.25*s;function l(e,t,r,a){var i=t>=1.5*r;return Math.round(e/r)+" "+a+(i?"s":"")}t.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*n;case"days":case"day":case"d":return l*s;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*a;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(e);if("number"===c&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=s?l(e,t,s,"day"):t>=i?l(e,t,i,"hour"):t>=a?l(e,t,a,"minute"):t>=r?l(e,t,r,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=s?Math.round(e/s)+"d":t>=i?Math.round(e/i)+"h":t>=a?Math.round(e/a)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}),Ng=j((e,t)=>{t.exports=function(e){function t(e){let a,i,s,n=null;function o(...e){if(!o.enabled)return;let r=o,i=Number(new Date),s=i-(a||i);r.diff=s,r.prev=a,r.curr=i,a=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(a,i)=>{if("%%"===a)return"%";n++;let s=t.formatters[i];if("function"==typeof s){let t=e[n];a=s.call(r,t),e.splice(n,1),n--}return a}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==n?n:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{n=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){let a=t(this.namespace+(typeof r>"u"?":":r)+e);return a.log=this.log,a}function a(e,t){let r=0,a=0,i=-1,s=0;for(;r<e.length;)if(a<t.length&&(t[a]===e[r]||"*"===t[a]))"*"===t[a]?(i=a,s=r,a++):(r++,a++);else{if(-1===i)return!1;a=i+1,s++,r=s}for(;a<t.length&&"*"===t[a];)a++;return a===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(let e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(let r of t.skips)if(a(e,r))return!1;for(let r of t.names)if(a(e,r))return!0;return!1},t.humanize=Jk(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}}),Yk=j((e,t)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(a++,"%c"===e&&(i=a))}),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch{}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=Ng()(e);var{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),eR=j((e,t)=>{t.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",a=t.indexOf(r+e),i=t.indexOf("--");return-1!==a&&(-1===i||a<i)}}),nR=j((e,t)=>{var r,a=require("os"),i=require("tty"),s=eR(),{env:n}=process;function o(e,{streamIsTTY:t,sniffFlags:i=!0}={}){let o=function(){if("FORCE_COLOR"in n)return"true"===n.FORCE_COLOR?1:"false"===n.FORCE_COLOR?0:0===n.FORCE_COLOR.length?1:Math.min(Number.parseInt(n.FORCE_COLOR,10),3)}();void 0!==o&&(r=o);let l=i?r:o;if(0===l)return 0;if(i){if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2}if(e&&!t&&void 0===l)return 0;let c=l||0;if("dumb"===n.TERM)return c;if("win32"===process.platform){let e=a.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(e=>e in n)||"codeship"===n.CI_NAME?1:c;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if("truecolor"===n.COLORTERM)return 3;if("TERM_PROGRAM"in n){let e=Number.parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:c}function l(e,t={}){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(o(e,{streamIsTTY:e&&e.isTTY,...t}))}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?r=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(r=1),t.exports={supportsColor:l,stdout:l({isTTY:i.isatty(1)}),stderr:l({isTTY:i.isatty(2)})}}),aR=j((e,t)=>{var r=require("tty"),a=require("util");e.init=function(t){t.inspectOpts={};let r=Object.keys(e.inspectOpts);for(let a=0;a<r.length;a++)t.inspectOpts[r[a]]=e.inspectOpts[r[a]]},e.log=function(...t){return process.stderr.write(a.formatWithOptions(e.inspectOpts,...t)+"\n")},e.formatArgs=function(r){let{namespace:a,useColors:i}=this;if(i){let e=this.color,i="[3"+(e<8?e:"8;5;"+e),s=`  ${i};1m${a} [0m`;r[0]=s+r[0].split("\n").join("\n"+s),r.push(i+"m+"+t.exports.humanize(this.diff)+"[0m")}else r[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+a+" "+r[0]},e.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:r.isatty(process.stderr.fd)},e.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{let t=nR();t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}e.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),a=process.env[t];return a=!!/^(yes|on|true|enabled)$/i.test(a)||!/^(no|off|false|disabled)$/i.test(a)&&("null"===a?null:Number(a)),e[r]=a,e},{}),t.exports=Ng()(e);var{formatters:i}=t.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}}),iR=j((e,t)=>{typeof process>"u"||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=Yk():t.exports=aR()}),cR=j((e,t)=>{var r;t.exports=function(){if(!r){try{r=iR()("follow-redirects")}catch{}"function"!=typeof r&&(r=function(){})}r.apply(null,arguments)}}),fR=j((e,t)=>{var r,a,i,s=require("url"),n=s.URL,o=require("http"),l=require("https"),c=require("stream").Writable,u=require("assert"),p=cR();r=typeof process<"u",a=typeof window<"u"&&typeof document<"u",i=j(Error.captureStackTrace),!r&&(a||!i)&&console.warn("The follow-redirects package should be excluded from browser builds.");var d=!1;try{u(new n(""))}catch(e){d="ERR_INVALID_URL"===e.code}var h=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],m=["abort","aborted","connect","error","socket","timeout"],f=Object.create(null);m.forEach(function(e){f[e]=function(t,r,a){this._redirectable.emit(e,t,r,a)}});var v=$("ERR_INVALID_URL","Invalid URL",TypeError),g=$("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),y=$("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",g),b=$("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),x=$("ERR_STREAM_WRITE_AFTER_END","write after end"),_=c.prototype.destroy||S;function w(e,t){c.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){try{r._processResponse(e)}catch(e){r.emit("error",e instanceof g?e:new g({cause:e}))}},this._performRequest()}function E(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach(function(a){var i=a+":",s=r[i]=e[a],o=t[a]=Object.create(s);Object.defineProperties(o,{request:{value:function(e,a,s){return function(e){return n&&e instanceof n}(e)?e=C(e):R(e)?e=C(k(e)):(s=a,a=P(e),e={protocol:i}),j(a)&&(s=a,a=null),(a=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,a)).nativeProtocols=r,!R(a.host)&&!R(a.hostname)&&(a.hostname="::1"),u.equal(a.protocol,i,"protocol mismatch"),p("options",a),new w(a,s)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var a=o.request(e,t,r);return a.end(),a},configurable:!0,enumerable:!0,writable:!0}})}),t}function S(){}function k(e){var t;if(d)t=new n(e);else if(!R((t=P(s.parse(e))).protocol))throw new v({input:e});return t}function P(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new v({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new v({input:e.href||e});return e}function C(e,t){var r=t||{};for(var a of h)r[a]=e[a];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),""!==r.port&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function T(e,t){var r;for(var a in t)e.test(a)&&(r=t[a],delete t[a]);return null===r||typeof r>"u"?void 0:String(r).trim()}function $(e,t,r){function a(r){j(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,r||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return a.prototype=new(r||Error),Object.defineProperties(a.prototype,{constructor:{value:a,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),a}function O(e,t){for(var r of m)e.removeListener(r,f[r]);e.on("error",S),e.destroy(t)}function R(e){return"string"==typeof e||e instanceof String}function j(e){return"function"==typeof e}w.prototype=Object.create(c.prototype),w.prototype.abort=function(){O(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},w.prototype.destroy=function(e){return O(this._currentRequest,e),_.call(this,e),this},w.prototype.write=function(e,t,r){if(this._ending)throw new x;if(!R(e)&&!function(e){return"object"==typeof e&&"length"in e}(e))throw new TypeError("data should be a string, Buffer or Uint8Array");j(t)&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new b),this.abort()):r&&r()},w.prototype.end=function(e,t,r){if(j(e)?(r=e,e=t=null):j(t)&&(r=t,t=null),e){var a=this,i=this._currentRequest;this.write(e,t,function(){a._ended=!0,i.end(null,null,r)}),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},w.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},w.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},w.prototype.setTimeout=function(e,t){var r=this;function a(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function i(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},e),a(t)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),r.removeListener("close",s),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",a),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){w.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}}),["aborted","connection","socket"].forEach(function(e){Object.defineProperty(w.prototype,e,{get:function(){return this._currentRequest[e]}})}),w.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},w.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var a=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i of(a._redirectable=this,m))a.on(i,f[i]);if(this._currentUrl=/^\//.test(this._options.path)?s.format(this._options):this._options.path,this._isRedirect){var n=0,o=this,l=this._requestBodyBuffers;!function e(t){if(a===o._currentRequest)if(t)o.emit("error",t);else if(n<l.length){var r=l[n++];a.finished||a.write(r.data,r.encoding,e)}else o._ended&&a.end()}()}},w.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(O(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new y;var a,i=this._options.beforeRedirect;i&&(a=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var o=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],T(/^content-/i,this._options.headers));var l=T(/^host$/i,this._options.headers),c=k(this._currentUrl),h=l||c.host,m=/^\w+:/.test(r)?this._currentUrl:s.format(Object.assign(c,{host:h})),f=function(e,t){return d?new n(e,t):k(s.resolve(t,e))}(r,m);if(p("redirecting to",f.href),this._isRedirect=!0,C(f,this._options),(f.protocol!==c.protocol&&"https:"!==f.protocol||f.host!==h&&!function(e,t){u(R(e)&&R(t));var r=e.length-t.length-1;return r>0&&"."===e[r]&&e.endsWith(t)}(f.host,h))&&T(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),j(i)){var v={headers:e.headers,statusCode:t},g={url:m,method:o,headers:a};i(this._options,v,g),this._sanitizeOptions(this._options)}this._performRequest()},t.exports=E({http:o,https:l}),t.exports.wrap=E}),VO=j((e,t)=>{var r,a;r=e,a=function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var a=t.length-1,i=1;i<a;++i)t[i]=t[i].slice(1,-1);return t[a]=t[a].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function a(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var a="[A-Za-z]",i="[0-9]",s=t(i,"[A-Fa-f]"),n=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",o),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(a,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),p=r(a+t(a,i,"[\\+\\-\\.]")+"*"),d=r(r(n+"|"+t(u,o,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("[1-9]"+i)+"|"+i),r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("0?[1-9]"+i)+"|0?0?"+i)),m=r(h+"\\."+h+"\\."+h+"\\."+h),f=r(s+"{1,4}"),v=r(r(f+"\\:"+f)+"|"+m),g=r(r(f+"\\:")+"{6}"+v),y=r("\\:\\:"+r(f+"\\:")+"{5}"+v),b=r(r(f)+"?\\:\\:"+r(f+"\\:")+"{4}"+v),x=r(r(r(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+r(f+"\\:")+"{3}"+v),_=r(r(r(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+r(f+"\\:")+"{2}"+v),w=r(r(r(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+v),E=r(r(r(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+v),S=r(r(r(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),k=r(r(r(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),P=r([g,y,b,x,_,w,E,S,k].join("|")),C=r(r(u+"|"+n)+"+"),T=(r(P+"\\%25"+C),r(P+r("\\%25|\\%(?!"+s+"{2})")+C)),$=r("[vV]"+s+"+\\."+t(u,o,"[\\:]")+"+"),O=r("\\["+r(T+"|"+P+"|"+$)+"\\]"),R=r(r(n+"|"+t(u,o))+"*"),j=r(O+"|"+m+"(?!"+R+")|"+R),I=r(i+"*"),A=r(r(d+"@")+"?"+j+r("\\:"+I)+"?"),N=r(n+"|"+t(u,o,"[\\:\\@]")),L=r(N+"*"),F=r(N+"+"),D=r(r(n+"|"+t(u,o,"[\\@]"))+"+"),z=r(r("\\/"+L)+"*"),M=r("\\/"+r(F+z)+"?"),q=r(D+z),U=r(F+z),Z="(?!"+N+")",B=(r(z+"|"+M+"|"+q+"|"+U+"|"+Z),r(r(N+"|"+t("[\\/\\?]",c))+"*")),V=r(r(N+"|[\\/\\?]")+"*"),H=r(r("\\/\\/"+A+z)+"|"+M+"|"+U+"|"+Z),G=r(p+"\\:"+H+r("\\?"+B)+"?"+r("\\#"+V)+"?"),W=r(r("\\/\\/"+A+z)+"|"+M+"|"+q+"|"+Z),J=r(W+r("\\?"+B)+"?"+r("\\#"+V)+"?");return r(G+"|"+J),r(p+"\\:"+H+r("\\?"+B)+"?"),r(r("\\/\\/("+r("("+d+")@")+"?("+j+")"+r("\\:("+I+")")+"?)")+"?("+z+"|"+M+"|"+U+"|"+Z+")"),r("\\?("+B+")"),r("\\#("+V+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+j+")"+r("\\:("+I+")")+"?)")+"?("+z+"|"+M+"|"+q+"|"+Z+")"),r("\\?("+B+")"),r("\\#("+V+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+j+")"+r("\\:("+I+")")+"?)")+"?("+z+"|"+M+"|"+U+"|"+Z+")"),r("\\?("+B+")"),r("\\#("+V+")"),r("("+d+")@"),r("\\:("+I+")"),{NOT_SCHEME:new RegExp(t("[^]",a,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+m+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+C+")")+"?\\]?$")}}var n=s(!1),o=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,s=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,p=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,v=String.fromCharCode;function g(e){throw new RangeError(m[e])}function y(e,t){var r=e.split("@"),a="";r.length>1&&(a=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],a=e.length;a--;)r[a]=t(e[a]);return r}((e=e.replace(h,".")).split("."),t).join(".");return a+i}function b(e){for(var t=[],r=0,a=e.length;r<a;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<a){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}var x=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u},_=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var a=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;a+=u)e=f(e/35);return f(a+36*e/(e+38))},E=function(e){var t=[],r=e.length,a=0,i=128,s=72,n=e.lastIndexOf("-");n<0&&(n=0);for(var o=0;o<n;++o)e.charCodeAt(o)>=128&&g("not-basic"),t.push(e.charCodeAt(o));for(var l=n>0?n+1:0;l<r;){for(var p=a,d=1,h=u;;h+=u){l>=r&&g("invalid-input");var m=x(e.charCodeAt(l++));(m>=u||m>f((c-a)/d))&&g("overflow"),a+=m*d;var v=h<=s?1:h>=s+26?26:h-s;if(m<v)break;var y=u-v;d>f(c/y)&&g("overflow"),d*=y}var b=t.length+1;s=w(a-p,b,0==p),f(a/b)>c-i&&g("overflow"),i+=f(a/b),a%=b,t.splice(a++,0,i)}return String.fromCodePoint.apply(String,t)},S=function(e){var t=[],r=(e=b(e)).length,a=128,i=0,s=72,n=!0,o=!1,l=void 0;try{for(var p,d=e[Symbol.iterator]();!(n=(p=d.next()).done);n=!0){var h=p.value;h<128&&t.push(v(h))}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}var m=t.length,y=m;for(m&&t.push("-");y<r;){var x=c,E=!0,S=!1,k=void 0;try{for(var P,C=e[Symbol.iterator]();!(E=(P=C.next()).done);E=!0){var T=P.value;T>=a&&T<x&&(x=T)}}catch(e){S=!0,k=e}finally{try{!E&&C.return&&C.return()}finally{if(S)throw k}}var $=y+1;x-a>f((c-i)/$)&&g("overflow"),i+=(x-a)*$,a=x;var O=!0,R=!1,j=void 0;try{for(var I,A=e[Symbol.iterator]();!(O=(I=A.next()).done);O=!0){var N=I.value;if(N<a&&++i>c&&g("overflow"),N==a){for(var L=i,F=u;;F+=u){var D=F<=s?1:F>=s+26?26:F-s;if(L<D)break;var z=L-D,M=u-D;t.push(v(_(D+z%M,0))),L=f(z/M)}t.push(v(_(L,0))),s=w(i,$,y==m),i=0,++y}}}catch(e){R=!0,j=e}finally{try{!O&&A.return&&A.return()}finally{if(R)throw j}}++i,++a}return t.join("")},k=function(e){return y(e,function(e){return d.test(e)?"xn--"+S(e):e})},P=function(e){return y(e,function(e){return p.test(e)?E(e.slice(4).toLowerCase()):e})},C={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function $(e){for(var t="",r=0,a=e.length;r<a;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(a-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(a-r>=9){var n=parseInt(e.substr(r+4,2),16),o=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&o)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=$(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,i)),e}function R(e){return e.replace(/^0*(.*)/,"$1")||"0"}function j(e,t){var r=e.match(t.IPV4ADDRESS)||[],a=l(r,2)[1];return a?a.split(".").map(R).join("."):e}function I(e,t){var r=e.match(t.IPV6ADDRESS)||[],a=l(r,3),i=a[1],s=a[2];if(i){for(var n=i.toLowerCase().split("::").reverse(),o=l(n,2),c=o[0],u=o[1],p=u?u.split(":").map(R):[],d=c.split(":").map(R),h=t.IPV4ADDRESS.test(d[d.length-1]),m=h?7:8,f=d.length-m,v=Array(m),g=0;g<m;++g)v[g]=p[g]||d[f+g]||"";h&&(v[m-1]=j(v[m-1],t));var y=v.reduce(function(e,t,r){if(!t||"0"===t){var a=e[e.length-1];a&&a.index+a.length===r?a.length++:e.push({index:r,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],b=void 0;if(y&&y.length>1){var x=v.slice(0,y.index),_=v.slice(y.index+y.length);b=x.join(":")+"::"+_.join(":")}else b=v.join(":");return s&&(b+="%"+s),b}return e}var A=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},a=!1!==t.iri?o:n;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(A);if(i){N?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=I(j(r.host,a),a)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=C[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)O(r,a);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=k(r.host.replace(a.PCT_ENCODED,$).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,n)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var F=/^\.\.?\//,D=/^\/\.(\/|$)/,z=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function q(e){for(var t=[];e.length;)if(e.match(F))e=e.replace(F,"");else if(e.match(D))e=e.replace(D,"/");else if(e.match(z))e=e.replace(z,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var a=r[0];e=e.slice(a.length),t.push(a)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?o:n,a=[],i=C[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host&&!r.IPV6ADDRESS.test(e.host)&&(t.domainHost||i&&i.domainHost))try{e.host=t.iri?P(e.host):k(e.host.replace(r.PCT_ENCODED,$).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(a.push(e.scheme),a.push(":"));var s=function(e,t){var r=!1!==t.iri?o:n,a=[];return void 0!==e.userinfo&&(a.push(e.userinfo),a.push("@")),void 0!==e.host&&a.push(I(j(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),("number"==typeof e.port||"string"==typeof e.port)&&(a.push(":"),a.push(String(e.port))),a.length?a.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&a.push("//"),a.push(s),e.path&&"/"!==e.path.charAt(0)&&a.push("/")),void 0!==e.path){var l=e.path;!t.absolutePath&&(!i||!i.absolutePath)&&(l=q(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),a.push(l)}return void 0!==e.query&&(a.push("?"),a.push(e.query)),void 0!==e.fragment&&(a.push("#"),a.push(e.fragment)),a.join("")}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={};return arguments[3]||(e=L(U(e,r),r),t=L(U(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=q(t.path||""),a.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=q(t.path||""),a.query=t.query):(t.path?("/"===t.path.charAt(0)?a.path=q(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path:a.path="/"+t.path,a.path=q(a.path)),a.query=t.query):(a.path=e.path,void 0!==t.query?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function B(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:n.PCT_ENCODED,$)}var V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return(e.port===(r?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}},H={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize};function G(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var W={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=G(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if((e.port===(G(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),a=l(r,2),i=a[0],s=a[1];e.path=i&&"/"!==i?i:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},J={scheme:"wss",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize},K={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",Q=r(r("%[EFef]"+Y+"%"+Y+Y+"%"+Y+Y)+"|"+r("%[89A-Fa-f]"+Y+"%"+Y+Y)+"|"+r("%"+Y+Y)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(X,"g"),re=new RegExp(Q,"g"),ae=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ie=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ie;function ne(e){var t=$(e);return t.match(te)?t:e}var oe={scheme:"mailto",parse:function(e,t){var r=e,a=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},n=r.query.split("&"),o=0,l=n.length;o<l;++o){var c=n[o].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),p=0,d=u.length;p<d;++p)a.push(u[p]);break;case"subject":r.subject=B(c[1],t);break;case"body":r.body=B(c[1],t);break;default:i=!0,s[B(c[0],t)]=B(c[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var h=0,m=a.length;h<m;++h){var f=a[h].split("@");if(f[0]=B(f[0]),t.unicodeSupport)f[1]=B(f[1],t).toLowerCase();else try{f[1]=k(B(f[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}a[h]=f.join("@")}return r},serialize:function(e,t){var r,a=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var n=0,o=s.length;n<o;++n){var l=String(s[n]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(re,ne).replace(re,i).replace(ae,T),p=l.slice(c+1);try{p=t.iri?P(p):k(B(p,t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[n]=u+"@"+p}a.path=s.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var m in d)d[m]!==K[m]&&h.push(m.replace(re,ne).replace(re,i).replace(ie,T)+"="+d[m].replace(re,ne).replace(re,i).replace(se,T));return h.length&&(a.query=h.join("&")),a}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(le),a=e;if(r){var i=t.scheme||a.scheme||"urn",s=r[1].toLowerCase(),n=r[2],o=i+":"+(t.nid||s),l=C[o];a.nid=s,a.nss=n,a.path=void 0,l&&(a=l.parse(a,t))}else a.error=a.error||"URN can not be parsed.";return a},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",a=e.nid,i=r+":"+(t.nid||a),s=C[i];s&&(e=s.serialize(e,t));var n=e,o=e.nss;return n.path=(a||t.nid)+":"+o,n}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,pe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!r.uuid.match(ue))&&(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};C[V.scheme]=V,C[H.scheme]=H,C[W.scheme]=W,C[J.scheme]=J,C[oe.scheme]=oe,C[ce.scheme]=ce,C[pe.scheme]=pe,e.SCHEMES=C,e.pctEncChar=T,e.pctDecChars=$,e.parse=L,e.removeDotSegments=q,e.serialize=U,e.resolveComponents=Z,e.resolve=function(e,t,r){var a=function(e,t){var r=e;if(t)for(var a in t)r[a]=t[a];return r}({scheme:"null"},r);return U(Z(L(e,a),L(t,a),a,!0),a)},e.normalize=function(e,t){return"string"==typeof e?e=U(L(e,t),t):"object"===a(e)&&(e=L(U(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=U(L(e,r),r):"object"===a(e)&&(e=U(e,r)),"string"==typeof t?t=U(L(t,r),r):"object"===a(t)&&(t=U(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:n.ESCAPE,T)},e.unescapeComponent=B,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&typeof t<"u"?a(e):"function"==typeof define&&define.amd?define(["exports"],a):a(r.URI=r.URI||{})}),Zd=j((e,t)=>{t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,i,s;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(i=a;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=a;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=a;0!==i--;){var n=s[i];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r}}),WO=j((e,t)=>{t.exports=function(e){for(var t,r=0,a=e.length,i=0;i<a;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a&&(56320==(64512&(t=e.charCodeAt(i)))&&i++);return r}}),Da=j((e,t)=>{function r(e,t,r,a){var i=a?" !== ":" === ",s=a?" || ":" && ",n=a?"!":"",o=a?"":"!";switch(e){case"null":return t+i+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+s+"typeof "+t+i+'"object"'+s+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+s+o+"("+t+" % 1)"+s+t+i+t+(r?s+n+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?s+n+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}t.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:r,checkDataTypes:function(e,t,a){if(1===e.length)return r(e[0],t,a,!0);var s="",n=i(e);for(var o in n.array&&n.object&&(s=n.null?"(":"(!"+t+" || ",s+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)s+=(s?" && ":"")+r(o,t,a,!0);return s},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var s=t[i];(a[s]||"array"===e&&"array"===s)&&(r[r.length]=s)}if(r.length)return r}else{if(a[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:o,escapeQuotes:l,equal:Zd(),ucs2length:WO(),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var a in e)if(a!=r&&t[a])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:c,getPathExpr:function(e,t,r,a){return d(e,r?"'/' + "+t+(a?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):a?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var a=c(r?"/"+h(t):o(t));return d(e,a)},getData:function(e,t,r){var a,i,s,n;if(""===e)return"rootData";if("/"==e[0]){if(!u.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,s="rootData"}else{if(!(n=e.match(p)))throw new Error("Invalid JSON-pointer: "+e);if(a=+n[1],"#"==(i=n[2])){if(a>=t)throw new Error("Cannot access property/index "+a+" levels up, current level is "+t);return r[t-a]}if(a>t)throw new Error("Cannot access data "+a+" levels up, current level is "+t);if(s="data"+(t-a||""),!i)return s}for(var l=s,c=i.split("/"),d=0;d<c.length;d++){var h=c[d];h&&(l+=" && "+(s+=o(m(h))))}return l},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(h(e))},escapeJsonPointer:h};var a=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,n=/'|\\/g;function o(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(n,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function c(e){return"'"+l(e)+"'"}var u=/^\/(?:[^~]|~0|~1)*$/,p=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function d(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function h(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}}),qv=j((e,t)=>{var r=Da();t.exports=function(e){r.copy(e,this)}}),eI=j((e,t)=>{var r=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),a(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function a(e,t,s,n,o,l,c,u,p,d){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var h in t(n,o,l,c,u,p,d),n){var m=n[h];if(Array.isArray(m)){if(h in r.arrayKeywords)for(var f=0;f<m.length;f++)a(e,t,s,m[f],o+"/"+h+"/"+f,l,o,h,n,f)}else if(h in r.propsKeywords){if(m&&"object"==typeof m)for(var v in m)a(e,t,s,m[v],o+"/"+h+"/"+i(v),l,o,h,n,v)}else(h in r.keywords||e.allKeys&&!(h in r.skipKeywords))&&a(e,t,s,m,o+"/"+h,l,o,h,n)}s(n,o,l,c,u,p,d)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}),Qd=j((e,t)=>{var r=VO(),a=Zd(),i=Da(),s=qv(),n=eI();function o(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return o.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof s)return h(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var i,n,c,u=l.call(this,t,r);return u&&(i=u.schema,t=u.root,c=u.baseId),i instanceof s?n=i.validate||e.call(this,i.schema,t,void 0,c):void 0!==i&&(n=h(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,c)),n}function l(e,t){var a=r.parse(t),i=g(a),n=v(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==n){var o=b(i),l=this._refs[o];if("string"==typeof l)return c.call(this,e,l,a);if(l instanceof s)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[o])instanceof s))return;if(l.validate||this._compile(l),o==b(t))return{schema:l,root:e,baseId:n};e=l}if(!e.schema)return;n=v(this._getId(e.schema))}return p.call(this,a,n,e.schema,e)}function c(e,t,r){var a=l.call(this,e,t);if(a){var i=a.schema,s=a.baseId;e=a.root;var n=this._getId(i);return n&&(s=x(s,n)),p.call(this,r,s,i,e)}}t.exports=o,o.normalizeId=b,o.fullPath=v,o.url=x,o.ids=function(e){var t=b(this._getId(e)),s={"":t},o={"":v(t,!1)},l={},c=this;return n(e,{allKeys:!0},function(e,t,n,u,p,d,h){if(""!==t){var m=c._getId(e),f=s[u],v=o[u]+"/"+p;if(void 0!==h&&(v+="/"+("number"==typeof h?h:i.escapeFragment(h))),"string"==typeof m){m=f=b(f?r.resolve(f,m):m);var g=c._refs[m];if("string"==typeof g&&(g=c._refs[g]),g&&g.schema){if(!a(e,g.schema))throw new Error('id "'+m+'" resolves to more than one schema')}else if(m!=b(v))if("#"==m[0]){if(l[m]&&!a(e,l[m]))throw new Error('id "'+m+'" resolves to more than one schema');l[m]=e}else c._refs[m]=v}s[t]=f,o[t]=v}}),l},o.inlineRef=h,o.schema=l;var u=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function p(e,t,r,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),n=1;n<s.length;n++){var o=s[n];if(o){if(void 0===(r=r[o=i.unescapeFragment(o)]))break;var c;if(!u[o]&&((c=this._getId(r))&&(t=x(t,c)),r.$ref)){var p=x(t,r.$ref),d=l.call(this,a,p);d&&(r=d.schema,a=d.root,t=d.baseId)}}}if(void 0!==r&&r!==a.schema)return{schema:r,root:a,baseId:t}}}var d=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function h(e,t){return!1!==t&&(void 0===t||!0===t?m(e):t?f(e)<=t:void 0)}function m(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!m(t))return!1}else for(var a in e)if("$ref"==a||"object"==typeof(t=e[a])&&!m(t))return!1;return!0}function f(e){var t,r=0;if(Array.isArray(e)){for(var a=0;a<e.length;a++)if("object"==typeof(t=e[a])&&(r+=f(t)),r==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(d[i])r++;else if("object"==typeof(t=e[i])&&(r+=f(t)+1),r==1/0)return 1/0}return r}function v(e,t){return!1!==t&&(e=b(e)),g(r.parse(e))}function g(e){return r.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function b(e){return e?e.replace(y,""):""}function x(e,t){return t=b(t),r.resolve(e,t)}}),ep=j((e,t)=>{var r=Qd();function a(e,t,i){this.message=i||a.message(e,t),this.missingRef=r.url(e,t),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}t.exports={Validation:i(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:i(a)},a.message=function(e,t){return"can't resolve reference "+t+" from id "+e}}),Gv=j((e,t)=>{t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,a="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,a){var i={key:t,value:e[t]},s={key:a,value:e[a]};return r(i,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,n;if(Array.isArray(t)){for(n="[",r=0;r<t.length;r++)r&&(n+=","),n+=e(t[r])||"null";return n+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=s.push(t)-1,l=Object.keys(t).sort(i&&i(t));for(n="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(n&&(n+=","),n+=JSON.stringify(c)+":"+u)}return s.splice(o,1),"{"+n+"}"}}(e)}}),Wv=j((e,t)=>{t.exports=function(e,t,r){var a="",i=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),n=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var l="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(a+=" var validate = ",i&&(e.async=!0,a+="async "),a+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",n&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+n+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,p=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,f="data"+(u||""),v="valid"+c;if(!1===e.schema){e.isTop?m=!0:a+=" var "+v+" = false; ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";var g=a;a=K.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=i?" return data; ":" validate.errors = null; return true; ":a+=" var "+v+" = true; ";return e.isTop&&(a+=" }; return validate; "),a}if(e.isTop){var y=e.isTop;c=e.level=0,u=e.dataLevel=0,f="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{c=e.level,f="data"+((u=e.dataLevel)||"");if(n&&(e.baseId=e.resolve.url(e.baseId,n)),i&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+c+" = errors;"}v="valid"+c,m=!e.opts.allErrors;var x="",_="",w=e.schema.type,E=Array.isArray(w);if(w&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],E=!0)),E&&1==w.length&&(w=w[0],E=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(a+=" "+e.RULES.all.$comment.code(e,"$comment")),w){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,w);var k=e.RULES.types[w];if(S||E||!0===k||k&&!X(k)){d=e.schemaPath+".type",h=e.errSchemaPath+"/type",d=e.schemaPath+".type",h=e.errSchemaPath+"/type";var P=E?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[P](w,f,e.opts.strictNumbers,!0)+") { ",S){var C="dataType"+c,T="coerced"+c;a+=" var "+C+" = typeof "+f+"; var "+T+" = undefined; ","array"==e.opts.coerceTypes&&(a+=" if ("+C+" == 'object' && Array.isArray("+f+") && "+f+".length == 1) { "+f+" = "+f+"[0]; "+C+" = typeof "+f+"; if ("+e.util.checkDataType(e.schema.type,f,e.opts.strictNumbers)+") "+T+" = "+f+"; } "),a+=" if ("+T+" !== undefined) ; ";var $=S;if($)for(var O,R=-1,j=$.length-1;R<j;)"string"==(O=$[R+=1])?a+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+T+" = '' + "+f+"; else if ("+f+" === null) "+T+" = ''; ":"number"==O||"integer"==O?(a+=" else if ("+C+" == 'boolean' || "+f+" === null || ("+C+" == 'string' && "+f+" && "+f+" == +"+f+" ","integer"==O&&(a+=" && !("+f+" % 1)"),a+=")) "+T+" = +"+f+"; "):"boolean"==O?a+=" else if ("+f+" === 'false' || "+f+" === 0 || "+f+" === null) "+T+" = false; else if ("+f+" === 'true' || "+f+" === 1) "+T+" = true; ":"null"==O?a+=" else if ("+f+" === '' || "+f+" === 0 || "+f+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(a+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+f+" == null) "+T+" = ["+f+"]; ");a+=" else {   ",(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=E?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=K.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } if ("+T+" !== undefined) {  ";var I=u?"data"+(u-1||""):"parentData";a+=" "+f+" = "+T+"; ",u||(a+="if ("+I+" !== undefined)"),a+=" "+I+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+T+"; } "}else{(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=E?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=K.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!s)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(a+=" } if (errors === ",a+=y?"0":"errs_"+c,a+=") { ",_+="}");else{var A=e.RULES;if(A)for(var N=-1,L=A.length-1;N<L;)if(X(k=A[N+=1])){if(k.type&&(a+=" if ("+e.util.checkDataType(k.type,f,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==k.type&&e.schema.properties){p=e.schema.properties;var F=Object.keys(p);if(F)for(var D,z=-1,M=F.length-1;z<M;){if(void 0!==(Z=p[D=F[z+=1]]).default){var q=f+e.util.getProperty(D);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(Z.default)+" ":a+=" "+JSON.stringify(Z.default)+" ",a+="; "}}}else if("array"==k.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){R=-1;for(var Z,B=U.length-1;R<B;)if(void 0!==(Z=U[R+=1]).default){q=f+"["+R+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else a+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(a+=" || "+q+" === null || "+q+" === '' "),a+=" ) "+q+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(Z.default)+" ":a+=" "+JSON.stringify(Z.default)+" ",a+="; "}}}var V=k.rules;if(V)for(var H,G=-1,W=V.length-1;G<W;)if(Y(H=V[G+=1])){var J=H.code(e,H.keyword,k.type);J&&(a+=" "+J+" ",m&&(x+="}"))}if(m&&(a+=" "+x+" ",x=""),k.type&&(a+=" } ",w&&w===k.type&&!S)){a+=" else { ";var K;d=e.schemaPath+".type",h=e.errSchemaPath+"/type";(K=K||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",a+=E?""+w.join(","):""+w,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=E?""+w.join(","):""+w,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";g=a;a=K.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}m&&(a+=" if (errors === ",a+=y?"0":"errs_"+c,a+=") { ",_+="}")}}function X(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,a=0;a<r.length;a++)if(void 0!==e.schema[r[a]])return!0}(t)}return m&&(a+=" "+_+" "),y?(i?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }; return validate;"):a+=" var "+v+" = errors === errs_"+c+";",a}}),fI=j((e,t)=>{var r=Qd(),a=Da(),i=ep(),s=Gv(),n=Wv(),o=a.ucs2length,l=Zd(),c=i.Validation;function u(e,t,r){var a=d.call(this,e,t,r);return a>=0?{index:a,compiling:!0}:(a=this._compilations.length,this._compilations[a]={schema:e,root:t,baseId:r},{index:a,compiling:!1})}function p(e,t,r){var a=d.call(this,e,t,r);a>=0&&this._compilations.splice(a,1)}function d(e,t,r){for(var a=0;a<this._compilations.length;a++){var i=this._compilations[a];if(i.schema==e&&i.root==t&&i.baseId==r)return a}return-1}function h(e,t){return"var pattern"+e+" = new RegExp("+a.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function f(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var r="",a=0;a<e.length;a++)r+=t(a,e);return r}t.exports=function e(t,d,y,b){var x=this,_=this._opts,w=[void 0],E={},S=[],k={},P=[],C={},T=[];d=d||{schema:t,refVal:w,refs:E};var $=u.call(this,t,d,b),O=this._compilations[$.index];if($.compiling)return O.callValidate=function e(){var t=O.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var R=this._formats,j=this.RULES;try{var I=N(t,d,y,b);O.validate=I;var A=O.callValidate;return A&&(A.schema=I.schema,A.errors=null,A.refs=I.refs,A.refVal=I.refVal,A.root=I.root,A.$async=I.$async,_.sourceCode&&(A.source=I.source)),I}finally{p.call(this,t,d,b)}function N(t,s,u,p){var y=!s||s&&s.schema==t;if(s.schema!=d.schema)return e.call(x,t,s,u,p);var b,k=!0===t.$async,C=n({isTop:!0,schema:t,isRoot:y,baseId:p,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:j,validate:n,util:a,resolve:r,resolveRef:L,usePattern:z,useDefault:M,useCustomRule:q,opts:_,formats:R,logger:x.logger,self:x});C=g(w,f)+g(S,h)+g(P,m)+g(T,v)+C,_.processCode&&(C=_.processCode(C,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(x,j,R,d,w,P,T,l,o,c),w[0]=b}catch(e){throw x.logger.error("Error compiling schema, function code:",C),e}return b.schema=t,b.errors=null,b.refs=E,b.refVal=w,b.root=y?b:s,k&&(b.$async=!0),!0===_.sourceCode&&(b.source={code:C,patterns:S,defaults:P}),b}function L(t,a,i){a=r.url(t,a);var s,n,o=E[a];if(void 0!==o)return D(s=w[o],n="refVal["+o+"]");if(!i&&d.refs){var l=d.refs[a];if(void 0!==l)return D(s=d.refVal[l],n=F(a,s))}n=F(a);var c=r.call(x,N,d,a);if(void 0===c){var u=y&&y[a];u&&(c=r.inlineRef(u,_.inlineRefs)?u:e.call(x,u,d,y,t))}if(void 0!==c)return function(e,t){var r=E[e];w[r]=t}(a,c),D(c,n);!function(e){delete E[e]}(a)}function F(e,t){var r=w.length;return w[r]=t,E[e]=r,"refVal"+r}function D(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function z(e){var t=k[e];return void 0===t&&(t=k[e]=S.length,S[t]=e),"pattern"+t}function M(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return a.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=C[t];return void 0===r&&(r=C[t]=P.length,P[r]=e),"default"+r}}function q(e,t,r,a){if(!1!==x._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+i.join(","));var s=e.definition.validateSchema;if(s)if(!s(t)){var n="keyword schema is invalid: "+x.errorsText(s.errors);if("log"!=x._opts.validateSchema)throw new Error(n);x.logger.error(n)}}var o,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)o=l.call(x,t,r,a);else if(u)o=u.call(x,t,r,a),!1!==_.validateSchema&&x.validateSchema(o,!0);else if(c)o=c.call(x,a,e.keyword,t,r);else if(!(o=e.definition.validate))return;if(void 0===o)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var p=T.length;return T[p]=o,{code:"customRule"+p,validate:o}}}}),hI=j((e,t)=>{var r=t.exports=function(){this._cache={}};r.prototype.put=function(e,t){this._cache[e]=t},r.prototype.get=function(e){return this._cache[e]},r.prototype.del=function(e){delete this._cache[e]},r.prototype.clear=function(){this._cache={}}}),PI=j((e,t)=>{var r=Da(),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,n=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,o=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,c=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,u=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,p=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,h=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",r.copy(m[e])}function f(e){var t=e.match(a);if(!t)return!1;var r=+t[1],s=+t[2],n=+t[3];return s>=1&&s<=12&&n>=1&&n<=(2==s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[s])}function v(e,t){var r=e.match(s);if(!r)return!1;var a=r[1],i=r[2],n=r[3],o=r[5];return(a<=23&&i<=59&&n<=59||23==a&&59==i&&60==n)&&(!t||o)}t.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:u,"json-pointer":p,"json-pointer-uri-fragment":d,"relative-json-pointer":h},m.full={date:f,time:v,"date-time":function(e){var t=e.split(g);return 2==t.length&&f(t[0])&&v(t[1],!0)},uri:function(e){return y.test(e)&&o.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:u,"json-pointer":p,"json-pointer-uri-fragment":d,"relative-json-pointer":h};var g=/t|\s/i;var y=/\/|:/;var b=/[^\\]\\Z/;function x(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}}),RI=j((e,t)=>{t.exports=function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(o||""),d="valid"+n;if("#"==l||"#/"==l)e.isRoot?(a=e.async,i="validate"):(a=!0===e.root.schema.$async,i="root.refVal[0]");else{var h=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===h){var m=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(m),(y=y||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),s+=" } "):s+=" {} ";var f=s;s=y.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,m);e.logger.warn(m),u&&(s+=" if (true) { ")}}else if(h.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=h.schema,v.schemaPath="",v.errSchemaPath=l,s+=" "+e.validate(v).replace(/validate\.schema/g,h.code)+" ",u&&(s+=" if ("+g+") { ")}else a=!0===h.$async||e.async&&!1!==h.$async,i=h.code}if(i){var y;(y=y||[]).push(s),s="",e.opts.passContext?s+=" "+i+".call(this, ":s+=" "+i+"( ",s+=" "+p+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=y.pop(),a){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+d+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+d+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+d+" = false; "),s+=" } ",u&&(s+=" if ("+d+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s}}),II=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),n=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,p=l.baseId,d=!0,h=i;if(h)for(var m,f=-1,v=h.length-1;f<v;)m=h[f+=1],(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all))&&(d=!1,l.schema=m,l.schemaPath=s+"["+f+"]",l.errSchemaPath=n+"/"+f,a+="  "+e.validate(l)+" ",l.baseId=p,o&&(a+=" if ("+u+") { ",c+="}"));return o&&(a+=d?" if (true) { ":" "+c.slice(0,-1)+" "),a}}),AI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level;if(n.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)})){var v=h.baseId;a+=" var "+d+" = errors; var "+p+" = false;  ";var g=e.compositeRule;e.compositeRule=h.compositeRule=!0;var y=n;if(y)for(var b,x=-1,_=y.length-1;x<_;)b=y[x+=1],h.schema=b,h.schemaPath=o+"["+x+"]",h.errSchemaPath=l+"/"+x,a+="  "+e.validate(h)+" ",h.baseId=v,a+=" "+p+" = "+p+" || "+f+"; if (!"+p+") { ",m+="}";e.compositeRule=h.compositeRule=g,a+=" "+m+" if (!"+p+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else c&&(a+=" if (true) { ");return a}}),DI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.schema[t],s=e.errSchemaPath+"/"+t,n=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?a+=" console.log("+n+");":"function"==typeof e.opts.$comment&&(a+=" self._opts.$comment("+n+", "+e.util.toQuotedString(s)+", validate.root.schema);"),a}}),MI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d=e.opts.$data&&n&&n.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; "),d||(a+=" var schema"+i+" = validate.schema"+o+";"),a+="var "+p+" = equal("+u+", schema"+i+"); if (!"+p+") {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to constant' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var m=a;return a=h.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}}),FI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e);h.level++;var m="valid"+h.level,f="i"+i,v=h.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,b=e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0||!1===n:e.util.schemaHasRules(n,e.RULES.all);if(a+="var "+d+" = errors;var "+p+";",b){var x=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=n,h.schemaPath=o,h.errSchemaPath=l,a+=" var "+m+" = false; for (var "+f+" = 0; "+f+" < "+u+".length; "+f+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers,!0);var _=u+"["+f+"]";h.dataPathArr[v]=f;var w=e.validate(h);h.baseId=y,e.util.varOccurences(w,g)<2?a+=" "+e.util.varReplace(w,g,_)+" ":a+=" var "+g+" = "+_+"; "+w+" ",a+=" if ("+m+") break; }  ",e.compositeRule=h.compositeRule=x,a+="  if (!"+m+") {"}else a+=" if ("+u+".length == 0) {";var E=E||[];E.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should contain a valid item' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;return a=E.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { ",b&&(a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(a+=" } "),a}}),qI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="errs__"+i,d=e.util.copy(e),h="";d.level++;var m="valid"+d.level,f={},v={},g=e.opts.ownProperties;for(_ in n)if("__proto__"!=_){var y=n[_],b=Array.isArray(y)?v:f;b[_]=y}a+="var "+p+" = errors;";var x=e.errorPath;for(var _ in a+="var missing"+i+";",v)if((b=v[_]).length){if(a+=" if ( "+u+e.util.getProperty(_)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(_)+"') "),c){a+=" && ( ";var w=b;if(w)for(var E=-1,S=w.length-1;E<S;){O=w[E+=1],E&&(a+=" || "),a+=" ( ( "+(A=u+(I=e.util.getProperty(O)))+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:I)+") ) "}a+=")) {  ";var k="missing"+i,P="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,k,!0):x+" + "+k);var C=C||[];C.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var T=a;a=C.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+T+"]); ":a+=" validate.errors = ["+T+"]; return false; ":a+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var $=b;if($)for(var O,R=-1,j=$.length-1;R<j;){O=$[R+=1];var I=e.util.getProperty(O),A=(P=e.util.escapeQuotes(O),u+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,O,e.opts.jsonPointers)),a+=" if ( "+A+" === undefined ",g&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==b.length?a+="property "+e.util.escapeQuotes(b[0]):a+="properties "+e.util.escapeQuotes(b.join(", ")),a+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",c&&(h+="}",a+=" else { ")}e.errorPath=x;var N=d.baseId;for(var _ in f){y=f[_];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))&&(a+=" "+m+" = true; if ( "+u+e.util.getProperty(_)+" !== undefined ",g&&(a+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(_)+"') "),a+=") { ",d.schema=y,d.schemaPath=o+e.util.getProperty(_),d.errSchemaPath=l+"/"+e.util.escapeFragment(_),a+="  "+e.validate(d)+" ",d.baseId=N,a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}"))}return c&&(a+="   "+h+" if ("+p+" == errors) {"),a}}),BI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d=e.opts.$data&&n&&n.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var h="i"+i,m="schema"+i;d||(a+=" var "+m+" = validate.schema"+o+";"),a+="var "+p+";",d&&(a+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),a+=p+" = false;for (var "+h+"=0; "+h+"<"+m+".length; "+h+"++) if (equal("+u+", "+m+"["+h+"])) { "+p+" = true; break; }",d&&(a+="  }  "),a+=" if (!"+p+") {   ";var f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=f.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" }",c&&(a+=" else { "),a}}),VI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return c&&(a+=" if (true) { "),a;var p,d=e.opts.$data&&n&&n.$data;d?(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ",p="schema"+i):p=n;var h=e.opts.unknownFormats,m=Array.isArray(h);if(d){a+=" var "+(f="format"+i)+" = formats["+p+"]; var "+(v="isObject"+i)+" = typeof "+f+" == 'object' && !("+f+" instanceof RegExp) && "+f+".validate; var "+(g="formatType"+i)+" = "+v+" && "+f+".type || 'string'; if ("+v+") { ",e.async&&(a+=" var async"+i+" = "+f+".async; "),a+=" "+f+" = "+f+".validate; } if (  ",d&&(a+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),a+=" (","ignore"!=h&&(a+=" ("+p+" && !"+f+" ",m&&(a+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),a+=") || "),a+=" ("+f+" && "+g+" == '"+r+"' && !(typeof "+f+" == 'function' ? ",e.async?a+=" (async"+i+" ? await "+f+"("+u+") : "+f+"("+u+")) ":a+=" "+f+"("+u+") ",a+=" : "+f+".test("+u+"))))) {"}else{var f;if(!(f=e.formats[n])){if("ignore"==h)return e.logger.warn('unknown format "'+n+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(a+=" if (true) { "),a;if(m&&h.indexOf(n)>=0)return c&&(a+=" if (true) { "),a;throw new Error('unknown format "'+n+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof f&&!(f instanceof RegExp)&&f.validate)&&f.type||"string";if(v){var y=!0===f.async;f=f.validate}if(g!=r)return c&&(a+=" if (true) { "),a;if(y){if(!e.async)throw new Error("async format in sync schema");a+=" if (!(await "+(b="formats"+e.util.getProperty(n)+".validate")+"("+u+"))) { "}else{a+=" if (! ";var b="formats"+e.util.getProperty(n);v&&(b+=".validate"),a+="function"==typeof f?" "+b+"("+u+") ":" "+b+".test("+u+") ",a+=") { "}}var x=x||[];x.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",a+=d?""+p:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match format \"",a+=d?"' + "+p+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=d?"validate.schema"+o:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var _=a;return a=x.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",c&&(a+=" else { "),a}}),GI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e);h.level++;var m="valid"+h.level,f=e.schema.then,v=e.schema.else,g=void 0!==f&&(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all)),y=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all)),b=h.baseId;if(g||y){var x;h.createErrors=!1,h.schema=n,h.schemaPath=o,h.errSchemaPath=l,a+=" var "+d+" = errors; var "+p+" = true;  ";var _=e.compositeRule;e.compositeRule=h.compositeRule=!0,a+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,a+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=_,g?(a+=" if ("+m+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",a+="  "+e.validate(h)+" ",h.baseId=b,a+=" "+p+" = "+m+"; ",g&&y?a+=" var "+(x="ifClause"+i)+" = 'then'; ":x="'then'",a+=" } ",y&&(a+=" else { ")):a+=" if (!"+m+") { ",y&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",a+="  "+e.validate(h)+" ",h.baseId=b,a+=" "+p+" = "+m+"; ",g&&y?a+=" var "+(x="ifClause"+i)+" = 'else'; ":x="'else'",a+=" } "),a+=" if (!"+p+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+x+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match \"' + "+x+" + '\" schema' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+=" }   ",c&&(a+=" else { ")}else c&&(a+=" if (true) { ");return a}}),KI=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level,v="i"+i,g=h.dataLevel=e.dataLevel+1,y="data"+g,b=e.baseId;if(a+="var "+d+" = errors;var "+p+";",Array.isArray(n)){var x=e.schema.additionalItems;if(!1===x){a+=" "+p+" = "+u+".length <= "+n.length+"; ";var _=l;l=e.errSchemaPath+"/additionalItems",a+="  if (!"+p+") {   ";var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n.length+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have more than "+n.length+" items' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var E=a;a=w.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+E+"]); ":a+=" validate.errors = ["+E+"]; return false; ":a+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",l=_,c&&(m+="}",a+=" else { ")}var S=n;if(S)for(var k,P=-1,C=S.length-1;P<C;)if(k=S[P+=1],e.opts.strictKeywords?"object"==typeof k&&Object.keys(k).length>0||!1===k:e.util.schemaHasRules(k,e.RULES.all)){a+=" "+f+" = true; if ("+u+".length > "+P+") { ";var T=u+"["+P+"]";h.schema=k,h.schemaPath=o+"["+P+"]",h.errSchemaPath=l+"/"+P,h.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0),h.dataPathArr[g]=P;var $=e.validate(h);h.baseId=b,e.util.varOccurences($,y)<2?a+=" "+e.util.varReplace($,y,T)+" ":a+=" var "+y+" = "+T+"; "+$+" ",a+=" }  ",c&&(a+=" if ("+f+") { ",m+="}")}if("object"==typeof x&&(e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all))){h.schema=x,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",a+=" "+f+" = true; if ("+u+".length > "+n.length+") {  for (var "+v+" = "+n.length+"; "+v+" < "+u+".length; "+v+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);T=u+"["+v+"]";h.dataPathArr[g]=v;$=e.validate(h);h.baseId=b,e.util.varOccurences($,y)<2?a+=" "+e.util.varReplace($,y,T)+" ":a+=" var "+y+" = "+T+"; "+$+" ",c&&(a+=" if (!"+f+") break; "),a+=" } }  ",c&&(a+=" if ("+f+") { ",m+="}")}}else if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0||!1===n:e.util.schemaHasRules(n,e.RULES.all)){h.schema=n,h.schemaPath=o,h.errSchemaPath=l,a+="  for (var "+v+" = 0; "+v+" < "+u+".length; "+v+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);T=u+"["+v+"]";h.dataPathArr[g]=v;$=e.validate(h);h.baseId=b,e.util.varOccurences($,y)<2?a+=" "+e.util.varReplace($,y,T)+" ":a+=" var "+y+" = "+T+"; "+$+" ",c&&(a+=" if (!"+f+") break; "),a+=" }"}return c&&(a+=" "+m+" if ("+d+" == errors) {"),a}}),Jv=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o;var h="maximum"==t,m=h?"exclusiveMaximum":"exclusiveMinimum",f=e.schema[m],v=e.opts.$data&&f&&f.$data,g=h?"<":">",y=h?">":"<",b=void 0;if(!d&&"number"!=typeof o&&void 0!==o)throw new Error(t+" must be number");if(!v&&void 0!==f&&"number"!=typeof f&&"boolean"!=typeof f)throw new Error(m+" must be number or boolean");if(v){var x=e.util.getData(f.$data,n,e.dataPathArr),_="exclusive"+s,w="exclType"+s,E="exclIsNumber"+s,S="' + "+(C="op"+s)+" + '";i+=" var schemaExcl"+s+" = "+x+"; ",i+=" var "+_+"; var "+w+" = typeof "+(x="schemaExcl"+s)+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var k;b=m;(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var P=i;i=k.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+w+" == 'number' ? ( ("+_+" = "+a+" === undefined || "+x+" "+g+"= "+a+") ? "+p+" "+y+"= "+x+" : "+p+" "+y+" "+a+" ) : ( ("+_+" = "+x+" === true) ? "+p+" "+y+"= "+a+" : "+p+" "+y+" "+a+" ) || "+p+" !== "+p+") { var op"+s+" = "+_+" ? '"+g+"' : '"+g+"='; ",void 0===o&&(b=m,c=e.errSchemaPath+"/"+m,a=x,d=v)}else{S=g;if((E="number"==typeof f)&&d){var C="'"+S+"'";i+=" if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" ( "+a+" === undefined || "+f+" "+g+"= "+a+" ? "+p+" "+y+"= "+f+" : "+p+" "+y+" "+a+" ) || "+p+" !== "+p+") { "}else{E&&void 0===o?(_=!0,b=m,c=e.errSchemaPath+"/"+m,a=f,y+="="):(E&&(a=Math[h?"min":"max"](f,o)),f===(!E||a)?(_=!0,b=m,c=e.errSchemaPath+"/"+m,y+="="):(_=!1,S+="="));C="'"+S+"'";i+=" if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+p+" "+y+" "+a+" || "+p+" !== "+p+") { "}}b=b||t,(k=k||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+C+", limit: "+a+", exclusive: "+_+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=d?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";P=i;return i=k.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}}),Xv=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;if(d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!d&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" "+p+".length "+("maxItems"==t?">":"<")+" "+a+") { ";var h=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=d?"' + "+a+" + '":""+o,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var f=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}),Yv=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;if(d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!d&&"number"!=typeof o)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),!1===e.opts.unicode?i+=" "+p+".length ":i+=" ucs2length("+p+") ",i+=" "+h+" "+a+") { ";var m=t,f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=d?"' + "+a+" + '":""+o,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var v=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}),Qv=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;if(d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!d&&"number"!=typeof o)throw new Error(t+" must be number");i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'number') || "),i+=" Object.keys("+p+").length "+("maxProperties"==t?">":"<")+" "+a+") { ";var h=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=d?"' + "+a+" + '":""+o,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var f=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+f+"]); ":i+=" validate.errors = ["+f+"]; return false; ":i+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}),t$=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;if(d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,!d&&"number"!=typeof o)throw new Error(t+" must be number");i+="var division"+s+";if (",d&&(i+=" "+a+" !== undefined && ( typeof "+a+" != 'number' || "),i+=" (division"+s+" = "+p+" / "+a+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+s+" !== parseInt(division"+s+") ",i+=" ) ",d&&(i+="  )  "),i+=" ) {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=d?"' + "+a:a+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}),n$=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="errs__"+i,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0||!1===n:e.util.schemaHasRules(n,e.RULES.all)){d.schema=n,d.schemaPath=o,d.errSchemaPath=l,a+=" var "+p+" = errors;  ";var m,f=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(m=d.opts.allErrors,d.opts.allErrors=!1),a+=" "+e.validate(d)+" ",d.createErrors=!0,m&&(d.opts.allErrors=m),e.compositeRule=d.compositeRule=f,a+=" if ("+h+") {   ";var v=v||[];v.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var g=a;a=v.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(a+=" } ")}else a+="  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be valid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(a+=" if (false) { ");return a}}),a$=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d="errs__"+i,h=e.util.copy(e),m="";h.level++;var f="valid"+h.level,v=h.baseId,g="prevValid"+i,y="passingSchemas"+i;a+="var "+d+" = errors , "+g+" = false , "+p+" = false , "+y+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var x=n;if(x)for(var _,w=-1,E=x.length-1;w<E;)_=x[w+=1],(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))?(h.schema=_,h.schemaPath=o+"["+w+"]",h.errSchemaPath=l+"/"+w,a+="  "+e.validate(h)+" ",h.baseId=v):a+=" var "+f+" = true; ",w&&(a+=" if ("+f+" && "+g+") { "+p+" = false; "+y+" = ["+y+", "+w+"]; } else { ",m+="}"),a+=" if ("+f+") { "+p+" = "+g+" = true; "+y+" = "+w+"; }";return e.compositeRule=h.compositeRule=b,a+=m+"if (!"+p+") {   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(a+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),a+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(a+=" } "),a}}),o$=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d=e.opts.$data&&o&&o.$data;d?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,i+="if ( ",d&&(i+=" ("+a+" !== undefined && typeof "+a+" != 'string') || "),i+=" !"+(d?"(new RegExp("+a+"))":e.usePattern(o))+".test("+p+") ) {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=d?""+a:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=d?"' + "+a+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+l:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var m=i;return i=h.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}}),l$=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="errs__"+i,d=e.util.copy(e),h="";d.level++;var m="valid"+d.level,f="key"+i,v="idx"+i,g=d.dataLevel=e.dataLevel+1,y="data"+g,b="dataProperties"+i,x=Object.keys(n||{}).filter(I),_=e.schema.patternProperties||{},w=Object.keys(_).filter(I),E=e.schema.additionalProperties,S=x.length||w.length,k=!1===E,P="object"==typeof E&&Object.keys(E).length,C=e.opts.removeAdditional,T=k||P||C,$=e.opts.ownProperties,O=e.baseId,R=e.schema.required;if(R&&(!e.opts.$data||!R.$data)&&R.length<e.opts.loopRequired)var j=e.util.toHash(R);function I(e){return"__proto__"!==e}if(a+="var "+p+" = errors;var "+m+" = true;",$&&(a+=" var "+b+" = undefined;"),T){if(a+=$?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+f+" = "+b+"["+v+"]; ":" for (var "+f+" in "+u+") { ",S){if(a+=" var isAdditional"+i+" = !(false ",x.length)if(x.length>8)a+=" || validate.schema"+o+".hasOwnProperty("+f+") ";else{var A=x;if(A)for(var N=-1,L=A.length-1;N<L;)J=A[N+=1],a+=" || "+f+" == "+e.util.toQuotedString(J)+" "}if(w.length){var F=w;if(F)for(var D=-1,z=F.length-1;D<z;)se=F[D+=1],a+=" || "+e.usePattern(se)+".test("+f+") "}a+=" ); if (isAdditional"+i+") { "}if("all"==C)a+=" delete "+u+"["+f+"]; ";else{var M=e.errorPath,q="' + "+f+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers)),k)if(C)a+=" delete "+u+"["+f+"]; ";else{a+=" "+m+" = false; ";var U=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+q+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var Z=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+Z+"]); ":a+=" validate.errors = ["+Z+"]; return false; ":a+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,c&&(a+=" break; ")}else if(P)if("failing"==C){a+=" var "+p+" = errors;  ";var B=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);var V=u+"["+f+"]";d.dataPathArr[g]=f;var H=e.validate(d);d.baseId=O,e.util.varOccurences(H,y)<2?a+=" "+e.util.varReplace(H,y,V)+" ":a+=" var "+y+" = "+V+"; "+H+" ",a+=" if (!"+m+") { errors = "+p+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+f+"]; }  ",e.compositeRule=d.compositeRule=B}else{d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);V=u+"["+f+"]";d.dataPathArr[g]=f;H=e.validate(d);d.baseId=O,e.util.varOccurences(H,y)<2?a+=" "+e.util.varReplace(H,y,V)+" ":a+=" var "+y+" = "+V+"; "+H+" ",c&&(a+=" if (!"+m+") break; ")}e.errorPath=M}S&&(a+=" } "),a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}")}var G=e.opts.useDefaults&&!e.compositeRule;if(x.length){var W=x;if(W)for(var J,K=-1,X=W.length-1;K<X;){var Y=n[J=W[K+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all)){var Q=e.util.getProperty(J),ee=(V=u+Q,G&&void 0!==Y.default);d.schema=Y,d.schemaPath=o+Q,d.errSchemaPath=l+"/"+e.util.escapeFragment(J),d.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),d.dataPathArr[g]=e.util.toQuotedString(J);H=e.validate(d);if(d.baseId=O,e.util.varOccurences(H,y)<2){H=e.util.varReplace(H,y,V);var te=V}else{te=y;a+=" var "+y+" = "+V+"; "}if(ee)a+=" "+H+" ";else{if(j&&j[J]){a+=" if ( "+te+" === undefined ",$&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+m+" = false; ";M=e.errorPath,U=l;var re,ae=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,J,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+ae+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";Z=a;a=re.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+Z+"]); ":a+=" validate.errors = ["+Z+"]; return false; ":a+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,e.errorPath=M,a+=" } else { "}else c?(a+=" if ( "+te+" === undefined ",$&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+m+" = true; } else { "):(a+=" if ("+te+" !== undefined ",$&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+H+" } "}}c&&(a+=" if ("+m+") { ",h+="}")}}if(w.length){var ie=w;if(ie)for(var se,ne=-1,oe=ie.length-1;ne<oe;){Y=_[se=ie[ne+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all)){d.schema=Y,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=$?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+f+" = "+b+"["+v+"]; ":" for (var "+f+" in "+u+") { ",a+=" if ("+e.usePattern(se)+".test("+f+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,f,e.opts.jsonPointers);V=u+"["+f+"]";d.dataPathArr[g]=f;H=e.validate(d);d.baseId=O,e.util.varOccurences(H,y)<2?a+=" "+e.util.varReplace(H,y,V)+" ":a+=" var "+y+" = "+V+"; "+H+" ",c&&(a+=" if (!"+m+") break; "),a+=" } ",c&&(a+=" else "+m+" = true; "),a+=" }  ",c&&(a+=" if ("+m+") { ",h+="}")}}}return c&&(a+=" "+h+" if ("+p+" == errors) {"),a}}),d$=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="errs__"+i,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(a+="var "+p+" = errors;",e.opts.strictKeywords?"object"==typeof n&&Object.keys(n).length>0||!1===n:e.util.schemaHasRules(n,e.RULES.all)){d.schema=n,d.schemaPath=o,d.errSchemaPath=l;var m="key"+i,f="idx"+i,v="i"+i,g="' + "+m+" + '",y="data"+(d.dataLevel=e.dataLevel+1),b="dataProperties"+i,x=e.opts.ownProperties,_=e.baseId;x&&(a+=" var "+b+" = undefined; "),a+=x?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+f+"=0; "+f+"<"+b+".length; "+f+"++) { var "+m+" = "+b+"["+f+"]; ":" for (var "+m+" in "+u+") { ",a+=" var startErrs"+i+" = errors; ";var w=m,E=e.compositeRule;e.compositeRule=d.compositeRule=!0;var S=e.validate(d);d.baseId=_,e.util.varOccurences(S,y)<2?a+=" "+e.util.varReplace(S,y,w)+" ":a+=" var "+y+" = "+w+"; "+S+" ",e.compositeRule=d.compositeRule=E,a+=" if (!"+h+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+m+"; }   var err =   ",!1!==e.createErrors?(a+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(a+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; "),c&&(a+=" break; "),a+=" } }"}return c&&(a+="  if ("+p+" == errors) {"),a}}),f$=j((e,t)=>{t.exports=function(e,t,r){var a=" ",i=e.level,s=e.dataLevel,n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),p="valid"+i,d=e.opts.$data&&n&&n.$data;d&&(a+=" var schema"+i+" = "+e.util.getData(n.$data,s,e.dataPathArr)+"; ");var h="schema"+i;if(!d)if(n.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],f=n;if(f)for(var v,g=-1,y=f.length-1;g<y;){v=f[g+=1];var b=e.schema.properties[v];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(m[m.length]=v)}}else m=n;if(d||m.length){var x=e.errorPath,_=d||m.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(c)if(a+=" var missing"+i+"; ",_){d||(a+=" var "+h+" = validate.schema"+o+"; ");var E="' + "+($="schema"+i+"["+(P="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,$,e.opts.jsonPointers)),a+=" var "+p+" = true; ",d&&(a+=" if (schema"+i+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+i+")) "+p+" = false; else {"),a+=" for (var "+P+" = 0; "+P+" < "+h+".length; "+P+"++) { "+p+" = "+u+"["+h+"["+P+"]] !== undefined ",w&&(a+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+P+"]) "),a+="; if (!"+p+") break; } ",d&&(a+="  }  "),a+="  if (!"+p+") {   ",(T=T||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var S=a;a=T.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else{a+=" if ( ";var k=m;if(k)for(var P=-1,C=k.length-1;P<C;){R=k[P+=1],P&&(a+=" || "),a+=" ( ( "+(N=u+(A=e.util.getProperty(R)))+" === undefined ",w&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),a+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:A)+") ) "}a+=") {  ";var T;E="' + "+($="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,$,!0):x+" + "+$),(T=T||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";S=a;a=T.pop(),!e.compositeRule&&c?e.async?a+=" throw new ValidationError(["+S+"]); ":a+=" validate.errors = ["+S+"]; return false; ":a+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else { "}else if(_){d||(a+=" var "+h+" = validate.schema"+o+"; ");var $;E="' + "+($="schema"+i+"["+(P="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,$,e.opts.jsonPointers)),d&&(a+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),a+=" for (var "+P+" = 0; "+P+" < "+h+".length; "+P+"++) { if ("+u+"["+h+"["+P+"]] === undefined ",w&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+P+"]) "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(a+="  }  ")}else{var O=m;if(O)for(var R,j=-1,I=O.length-1;j<I;){R=O[j+=1];var A=e.util.getProperty(R),N=(E=e.util.escapeQuotes(R),u+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,R,e.opts.jsonPointers)),a+=" if ( "+N+" === undefined ",w&&(a+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(R)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+E+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=x}else c&&(a+=" if (true) {");return a}}),h$=j((e,t)=>{t.exports=function(e,t,r){var a,i=" ",s=e.level,n=e.dataLevel,o=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,p="data"+(n||""),d="valid"+s,h=e.opts.$data&&o&&o.$data;if(h?(i+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",a="schema"+s):a=o,(o||h)&&!1!==e.opts.uniqueItems){h&&(i+=" var "+d+"; if ("+a+" === false || "+a+" === undefined) "+d+" = true; else if (typeof "+a+" != 'boolean') "+d+" = false; else { "),i+=" var i = "+p+".length , "+d+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,f=Array.isArray(m);if(!m||"object"==m||"array"==m||f&&(m.indexOf("object")>=0||m.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+d+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var v="checkDataType"+(f?"s":"");i+=" if ("+e.util[v](m,"item",e.opts.strictNumbers,!0)+") continue; ",f&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",h&&(i+="  }  "),i+=" if (!"+d+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+l:""+o,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var y=i;i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}}),v$=j((e,t)=>{t.exports={$ref:RI(),allOf:II(),anyOf:AI(),$comment:DI(),const:MI(),contains:FI(),dependencies:qI(),enum:BI(),format:VI(),if:GI(),items:KI(),maximum:Jv(),minimum:Jv(),maxItems:Xv(),minItems:Xv(),maxLength:Yv(),minLength:Yv(),maxProperties:Qv(),minProperties:Qv(),multipleOf:t$(),not:n$(),oneOf:a$(),pattern:o$(),properties:l$(),propertyNames:d$(),required:f$(),uniqueItems:h$(),validate:Wv()}}),_$=j((e,t)=>{var r=v$(),a=Da().toHash;t.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=a(t),e.types=a(["number","integer","string","array","object","boolean","null"]),e.forEach(function(a){a.rules=a.rules.map(function(a){var i;if("object"==typeof a){var s=Object.keys(a)[0];i=a[s],a=s,i.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(a),e.all[a]={keyword:a,code:r[a],implements:i}}),e.all.$comment={keyword:"$comment",code:r.$comment},a.type&&(e.types[a.type]=a)}),e.keywords=a(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}}),S$=j((e,t)=>{var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(e,t){for(var a=0;a<t.length;a++){e=JSON.parse(JSON.stringify(e));var i,s=t[a].split("/"),n=e;for(i=1;i<s.length;i++)n=n[s[i]];for(i=0;i<r.length;i++){var o=r[i],l=n[o];l&&(n[o]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}}),C$=j((e,t)=>{var r=ep().MissingRef;t.exports=function e(t,a,i){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof a&&(i=a,a=void 0);var n=o(t).then(function(){var e=s._addSchema(t,void 0,a);return e.validate||l(e)});return i&&n.then(function(e){i(null,e)},i),n;function o(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}function l(e){try{return s._compile(e)}catch(t){if(t instanceof r)return function(t){var r=t.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+t.missingRef+" cannot be resolved");var i=s._loadingSchemas[r];return i||(i=s._loadingSchemas[r]=s._opts.loadSchema(r)).then(n,n),i.then(function(e){if(!c(r))return o(e).then(function(){c(r)||s.addSchema(e,r,void 0,a)})}).then(function(){return l(e)});function n(){delete s._loadingSchemas[r]}function c(e){return s._refs[e]||s._schemas[e]}}(t);throw t}}}}),k$=j((e,t)=>{t.exports=function(e,t,r){var a,i,s=" ",n=e.level,o=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,d="data"+(o||""),h="valid"+n,m="errs__"+n,f=e.opts.$data&&l&&l.$data;f?(s+=" var schema"+n+" = "+e.util.getData(l.$data,o,e.dataPathArr)+"; ",i="schema"+n):i=l;var v,g,y,b,x,_=this,w="definition"+n,E=_.definition,S="";if(f&&E.$data){x="keywordValidate"+n;var k=E.validateSchema;s+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+x+" = "+w+".validate;"}else{if(!(b=e.useCustomRule(_,l,e.schema,e)))return;i="validate.schema"+c,x=b.code,v=E.compile,g=E.inline,y=E.macro}var P=x+".errors",C="i"+n,T="ruleErr"+n,$=E.async;if($&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(s+=P+" = null;"),s+="var "+m+" = errors;var "+h+";",f&&E.$data&&(S+="}",s+=" if ("+i+" === undefined) { "+h+" = true; } else { ",k&&(S+="}",s+=" "+h+" = "+w+".validateSchema("+i+"); if ("+h+") { ")),g)E.statements?s+=" "+b.validate+" ":s+=" "+h+" = "+b.validate+"; ";else if(y){var O=e.util.copy(e);S="";O.level++;var R="valid"+O.level;O.schema=b.validate,O.schemaPath="";var j=e.compositeRule;e.compositeRule=O.compositeRule=!0;var I=e.validate(O).replace(/validate\.schema/g,x);e.compositeRule=O.compositeRule=j,s+=" "+I}else{(F=F||[]).push(s),s="",s+="  "+x+".call( ",e.opts.passContext?s+="this":s+="self",v||!1===E.schema?s+=" , "+d+" ":s+=" , "+i+" , "+d+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var A=o?"data"+(o-1||""):"parentData",N=o?e.dataPathArr[o]:"parentDataProperty",L=s+=" , "+A+" , "+N+" , rootData )  ";s=F.pop(),!1===E.errors?(s+=" "+h+" = ",$&&(s+="await "),s+=L+"; "):$?s+=" var "+(P="customErrors"+n)+" = null; try { "+h+" = await "+L+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":s+=" "+P+" = null; "+h+" = "+L+"; "}if(E.modifying&&(s+=" if ("+A+") "+d+" = "+A+"["+N+"];"),s+=""+S,E.valid)p&&(s+=" if (true) { ");else{var F;s+=" if ( ",void 0===E.valid?(s+=" !",s+=y?""+R:""+h):s+=" "+!E.valid+" ",s+=") { ",a=_.keyword,(F=F||[]).push(s),s="",(F=F||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var D=s;s=F.pop(),!e.compositeRule&&p?e.async?s+=" throw new ValidationError(["+D+"]); ":s+=" validate.errors = ["+D+"]; return false; ":s+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var z=s;s=F.pop(),g?E.errors?"full"!=E.errors&&(s+="  for (var "+C+"="+m+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+T+".schema = "+i+"; "+T+".data = "+d+"; "),s+=" } "):!1===E.errors?s+=" "+z+" ":(s+=" if ("+m+" == errors) { "+z+" } else {  for (var "+C+"="+m+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+T+".schema = "+i+"; "+T+".data = "+d+"; "),s+=" } } "):y?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(a||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&p&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===E.errors?s+=" "+z+" ":(s+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+C+"="+m+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+T+".schema = "+i+"; "+T+".data = "+d+"; "),s+=" } } else { "+z+" } "),s+=" } ",p&&(s+=" else { ")}return s}}),ty=j((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),I$=j((e,t)=>{var r=ty();t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}),A$=j((e,t)=>{var r=/^[a-z_$][a-z0-9_$-]*$/i,a=k$(),i=I$();t.exports={add:function(e,t){var i=this.RULES;if(i.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!r.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var s=t.type;if(Array.isArray(s))for(var n=0;n<s.length;n++)l(e,s[n],t);else l(e,s,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function l(e,t,r){for(var s,n=0;n<i.length;n++){var o=i[n];if(o.type==t){s=o;break}}s||(s={type:t,rules:[]},i.push(s));var l={keyword:e,definition:r,custom:!0,code:a,implements:r.implements};s.rules.push(l),i.custom[e]=l}return i.keywords[e]=i.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var a=t[r].rules,i=0;i<a.length;i++)if(a[i].keyword==e){a.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(a(t))return!0;if(e.errors=a.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}}}),N$=j((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),sy=j((e,t)=>{var r=fI(),a=Qd(),i=hI(),s=qv(),n=Gv(),o=PI(),l=_$(),c=S$(),u=Da();t.exports=v,v.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i},v.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},v.prototype.addSchema=function(e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,i);return this}var n=this._getId(e);if(void 0!==n&&"string"!=typeof n)throw new Error("schema id must be string");return w(this,t=a.normalizeId(t||n)),this._schemas[t]=this._addSchema(e,r,i,!0),this},v.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},v.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(h)?h:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a},v.prototype.getSchema=function(e){var t=g(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var i=a.schema.call(e,{schema:{}},t);if(i){var n=i.schema,o=i.root,l=i.baseId,c=r.call(e,n,o,void 0,l);return e._fragments[t]=new s({ref:t,fragment:!0,schema:n,root:o,baseId:l,validate:c}),c}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return y(this,this._schemas,e),y(this,this._refs,e),this;switch(typeof e){case"undefined":return y(this,this._schemas),y(this,this._refs),this._cache.clear(),this;case"string":var t=g(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var s=this._getId(e);s&&(s=a.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},v.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var n=e[s];n&&(i+=a+n.dataPath+" "+n.message+r)}return i.slice(0,-r.length)},v.prototype._addSchema=function(e,t,r,i){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var n=this._opts.serialize,o=n?n(e):e,l=this._cache.get(o);if(l)return l;i=i||!1!==this._opts.addUsedSchema;var c=a.normalizeId(this._getId(e));c&&i&&w(this,c);var u,p=!1!==this._opts.validateSchema&&!t;p&&!(u=c&&c==a.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=a.ids.call(this,e),h=new s({id:c,schema:e,localRefs:d,cacheKey:o,meta:r});return"#"!=c[0]&&i&&(this._refs[c]=h),this._cache.put(o,h),p&&u&&this.validateSchema(e,!0),h},v.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var a,i;e.compiling=!0,e.meta&&(a=this._opts,this._opts=this._metaOpts);try{i=r.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=a)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},v.prototype.compileAsync=C$();var p=A$();v.prototype.addKeyword=p.add,v.prototype.getKeyword=p.get,v.prototype.removeKeyword=p.remove,v.prototype.validateKeyword=p.validate;var d=ep();v.ValidationError=d.Validation,v.MissingRefError=d.MissingRef,v.$dataMetaSchema=c;var h="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],f=["/properties"];function v(e){if(!(this instanceof v))return new v(e);e=this._opts=u.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:E,warn:E,error:E};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=o(e.format),this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return _;case"id":return b;default:return x}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=n),this._metaOpts=function(e){for(var t=u.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=N$(),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=ty();e._opts.$data&&(r=c(r,f)),e.addMetaSchema(r,h,!0),e._refs["http://json-schema.org/schema"]=h}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function g(e,t){return t=a.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function y(e,t,r){for(var a in t){var i=t[a];!i.meta&&(!r||r.test(a))&&(e._cache.del(i.cacheKey),delete t[a])}}function b(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function x(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function w(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function E(){}}),ls=j((e,t)=>{var r=["nodebuffer","arraybuffer","fragments"],a=typeof Blob<"u";a&&r.push("blob"),t.exports={BINARY_TYPES:r,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:a,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}),Xc=j((e,t)=>{var{EMPTY_BUFFER:r}=ls(),a=Buffer[Symbol.species];function i(e,t,r,a,i){for(let s=0;s<i;s++)r[a+s]=e[s]^t[3&s]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(t.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];let i=Buffer.allocUnsafe(t),s=0;for(let t=0;t<e.length;t++){let r=e[t];i.set(r,s),s+=r.length}return s<t?new a(i.buffer,i.byteOffset,s):i},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new a(t):ArrayBuffer.isView(t)?r=new a(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{let e=require("bufferutil");t.exports.mask=function(t,r,a,s,n){n<48?i(t,r,a,s,n):e.mask(t,r,a,s,n)},t.exports.unmask=function(t,r){t.length<32?s(t,r):e.unmask(t,r)}}catch{}}),o1=j((e,t)=>{var r=Symbol("kDone"),a=Symbol("kRun");t.exports=class{constructor(e){this[r]=()=>{this.pending--,this[a]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[a]()}[a](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[r])}}}}),Qc=j((e,t)=>{var r,a=require("zlib"),i=Xc(),s=o1(),{kStatusCode:n}=ls(),o=Buffer[Symbol.species],l=Buffer.from([0,0,255,255]),c=Symbol("permessage-deflate"),u=Symbol("total-length"),p=Symbol("callback"),d=Symbol("buffers"),h=Symbol("error");function m(e){this[d].push(e),this[u]+=e.length}function f(e){this[u]+=e.length,this[c]._maxPayload<1||this[u]<=this[c]._maxPayload?this[d].push(e):(this[h]=new RangeError("Max payload size exceeded"),this[h].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[h][n]=1009,this.removeListener("data",f),this.reset())}function v(e){this[c]._inflate=null,this[h]?this[p](this[h]):(e[n]=1007,this[p](e))}t.exports=class{constructor(e,t,a){if(this._maxPayload=0|a,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!r){let e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;r=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[p];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,a){r.add(r=>{this._decompress(e,t,(e,t)=>{r(),a(e,t)})})}compress(e,t,a){r.add(r=>{this._compress(e,t,(e,t)=>{r(),a(e,t)})})}_decompress(e,t,r){let s=this._isServer?"client":"server";if(!this._inflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=a.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[c]=this,this._inflate[u]=0,this._inflate[d]=[],this._inflate.on("error",v),this._inflate.on("data",f)}this._inflate[p]=r,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush(()=>{let e=this._inflate[h];if(e)return this._inflate.close(),this._inflate=null,void r(e);let a=i.concat(this._inflate[d],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[d]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,a)})}_compress(e,t,r){let s=this._isServer?"server":"client";if(!this._deflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=a.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[d]=[],this._deflate.on("data",m)}this._deflate[p]=r,this._deflate.write(e),this._deflate.flush(a.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=i.concat(this._deflate[d],this._deflate[u]);t&&(e=new o(e.buffer,e.byteOffset,e.length-4)),this._deflate[p]=null,this._deflate[u]=0,this._deflate[d]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}}),po=j((e,t)=>{var{isUtf8:r}=require("buffer"),{hasBlob:a}=ls();function i(e){let t=e.length,r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(t.exports={isBlob:function(e){return a&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:i,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)t.exports.isValidUTF8=function(e){return e.length<24?i(e):r(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=require("utf-8-validate");t.exports.isValidUTF8=function(t){return t.length<32?i(t):e(t)}}catch{}}),Ry=j((e,t)=>{var{Writable:r}=require("stream"),a=Qc(),{BINARY_TYPES:i,EMPTY_BUFFER:s,kStatusCode:n,kWebSocket:o}=ls(),{concat:l,toArrayBuffer:c,unmask:u}=Xc(),{isValidStatusCode:p,isValidUTF8:d}=po(),h=Buffer[Symbol.species];t.exports=class extends r{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[o]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new h(t.buffer,t.byteOffset+e,t.length-e),new h(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],a=t.length-e;e>=r.length?t.set(this._buffers.shift(),a):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),a),this._buffers[0]=new h(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);let t=this.consume(2);if(48&t[0]){return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}let r=!(64&~t[0]);if(r&&!this._extensions[a.extensionName]){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11)){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked){return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);let t=this.consume(8),r=t.readUInt32BE(0);if(r>Math.pow(2,21)-1){return void e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){return void e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&u(t,this._mask)}if(!(this._opcode>7))return this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),void this.dataMessage(e));this.controlMessage(t,e)}decompress(e,t){this._extensions[a.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin)return void(this._state=0);let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let a;a="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?c(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",a,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",a,!0),this._state=0,this.startLoop(e)}))}else{let a=l(r,t);if(!this._skipUTF8Validation&&!d(a)){let t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",a,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",a,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,s),this.end();else{let r=e.readUInt16BE(0);if(!p(r)){let e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}let a=new h(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!d(a)){let e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,a),this.end()}this._state=0}}createError(e,t,r,a,i){this._loop=!1,this._errored=!0;let s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=i,s[n]=a,s}}}),$y=j((e,t)=>{var r,{Duplex:a}=require("stream"),{randomFillSync:i}=require("crypto"),s=Qc(),{EMPTY_BUFFER:n,kWebSocket:o,NOOP:l}=ls(),{isBlob:c,isValidStatusCode:u}=po(),{mask:p,toBuffer:d}=Xc(),h=Symbol("kByteLength"),m=Buffer.alloc(4),f=8192,v=f;function g(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){let a=e._queue[r],i=a[a.length-1];"function"==typeof i&&i(t)}}function y(e,t,r){g(e,t,r),e.onerror(t)}t.exports=class e{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=l,this[o]=void 0}static frame(e,t){let a,s,n=!1,o=2,l=!1;t.mask&&(a=t.maskBuffer||m,t.generateMask?t.generateMask(a):(v===f&&(void 0===r&&(r=Buffer.alloc(f)),i(r,0,f),v=0),a[0]=r[v++],a[1]=r[v++],a[2]=r[v++],a[3]=r[v++]),l=0===(a[0]|a[1]|a[2]|a[3]),o=6),"string"==typeof e?t.mask&&!l||void 0===t[h]?s=(e=Buffer.from(e)).length:s=t[h]:(s=e.length,n=t.mask&&t.readOnly&&!l);let c=s;s>=65536?(o+=8,c=127):s>125&&(o+=2,c=126);let u=Buffer.allocUnsafe(n?s+o:o);return u[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(u[0]|=64),u[1]=c,126===c?u.writeUInt16BE(s,2):127===c&&(u[2]=u[3]=0,u.writeUIntBE(s,4,6)),t.mask?(u[1]|=128,u[o-4]=a[0],u[o-3]=a[1],u[o-2]=a[2],u[o-1]=a[3],l?[u,e]:n?(p(e,a,u,o,s),[u]):(p(e,a,e,0,s),[u,e])):[u,e]}close(t,r,a,i){let s;if(void 0===t)s=n;else{if("number"!=typeof t||!u(t))throw new TypeError("First argument must be a valid error code number");if(void 0!==r&&r.length){let e=Buffer.byteLength(r);if(e>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+e),s.writeUInt16BE(t,0),"string"==typeof r?s.write(r,2):s.set(r,2)}else s=Buffer.allocUnsafe(2),s.writeUInt16BE(t,0)}let o={[h]:s.length,fin:!0,generateMask:this._generateMask,mask:a,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(e.frame(s,o),i)}ping(t,r,a){let i,s;if("string"==typeof t?(i=Buffer.byteLength(t),s=!1):c(t)?(i=t.size,s=!1):(i=(t=d(t)).length,s=d.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let n={[h]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};c(t)?0!==this._state?this.enqueue([this.getBlobData,t,!1,n,a]):this.getBlobData(t,!1,n,a):0!==this._state?this.enqueue([this.dispatch,t,!1,n,a]):this.sendFrame(e.frame(t,n),a)}pong(t,r,a){let i,s;if("string"==typeof t?(i=Buffer.byteLength(t),s=!1):c(t)?(i=t.size,s=!1):(i=(t=d(t)).length,s=d.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let n={[h]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};c(t)?0!==this._state?this.enqueue([this.getBlobData,t,!1,n,a]):this.getBlobData(t,!1,n,a):0!==this._state?this.enqueue([this.dispatch,t,!1,n,a]):this.sendFrame(e.frame(t,n),a)}send(e,t,r){let a,i,n=this._extensions[s.extensionName],o=t.binary?2:1,l=t.compress;"string"==typeof e?(a=Buffer.byteLength(e),i=!1):c(e)?(a=e.size,i=!1):(a=(e=d(e)).length,i=d.readOnly),this._firstFragment?(this._firstFragment=!1,l&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=a>=n._threshold),this._compress=l):(l=!1,o=0),t.fin&&(this._firstFragment=!0);let u={[h]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:i,rsv1:l};c(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(t,r,a,i){this._bufferedBytes+=a[h],this._state=2,t.arrayBuffer().then(t=>{if(this._socket.destroyed){let e=new Error("The socket was closed while the blob was being read");return void process.nextTick(g,this,e,i)}this._bufferedBytes-=a[h];let s=d(t);r?this.dispatch(s,r,a,i):(this._state=0,this.sendFrame(e.frame(s,a),i),this.dequeue())}).catch(e=>{process.nextTick(y,this,e,i)})}dispatch(t,r,a,i){if(!r)return void this.sendFrame(e.frame(t,a),i);let n=this._extensions[s.extensionName];this._bufferedBytes+=a[h],this._state=1,n.compress(t,a.fin,(t,r)=>{if(this._socket.destroyed){return void g(this,new Error("The socket was closed while data was being compressed"),i)}this._bufferedBytes-=a[h],this._state=0,a.readOnly=!1,this.sendFrame(e.frame(r,a),i),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][h],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][h],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}}),I1=j((e,t)=>{var{kForOnEventAttribute:r,kListener:a}=ls(),i=Symbol("kCode"),s=Symbol("kData"),n=Symbol("kError"),o=Symbol("kMessage"),l=Symbol("kReason"),c=Symbol("kTarget"),u=Symbol("kType"),p=Symbol("kWasClean"),d=class{constructor(e){this[c]=null,this[u]=e}get target(){return this[c]}get type(){return this[u]}};Object.defineProperty(d.prototype,"target",{enumerable:!0}),Object.defineProperty(d.prototype,"type",{enumerable:!0});var h=class extends d{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[p]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[l]}get wasClean(){return this[p]}};Object.defineProperty(h.prototype,"code",{enumerable:!0}),Object.defineProperty(h.prototype,"reason",{enumerable:!0}),Object.defineProperty(h.prototype,"wasClean",{enumerable:!0});var m=class extends d{constructor(e,t={}){super(e),this[n]=void 0===t.error?null:t.error,this[o]=void 0===t.message?"":t.message}get error(){return this[n]}get message(){return this[o]}};Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});var f=class extends d{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}};Object.defineProperty(f.prototype,"data",{enumerable:!0});var v={addEventListener(e,t,i={}){for(let s of this.listeners(e))if(!i[r]&&s[a]===t&&!s[r])return;let s;if("message"===e)s=function(e,r){let a=new f("message",{data:r?e:e.toString()});a[c]=this,g(t,this,a)};else if("close"===e)s=function(e,r){let a=new h("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[c]=this,g(t,this,a)};else if("error"===e)s=function(e){let r=new m("error",{error:e,message:e.message});r[c]=this,g(t,this,r)};else{if("open"!==e)return;s=function(){let e=new d("open");e[c]=this,g(t,this,e)}}s[r]=!!i[r],s[a]=t,i.once?this.once(e,s):this.on(e,s)},removeEventListener(e,t){for(let i of this.listeners(e))if(i[a]===t&&!i[r]){this.removeListener(e,i);break}}};function g(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}t.exports={CloseEvent:h,ErrorEvent:m,Event:d,EventTarget:v,MessageEvent:f}}),Ny=j((e,t)=>{var{tokenChars:r}=po();function a(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,i,s=Object.create(null),n=Object.create(null),o=!1,l=!1,c=!1,u=-1,p=-1,d=-1,h=0;for(;h<e.length;h++)if(p=e.charCodeAt(h),void 0===t)if(-1===d&&1===r[p])-1===u&&(u=h);else if(0===h||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);let r=e.slice(u,d);44===p?(a(s,r,n),n=Object.create(null)):t=r,u=d=-1}}else-1===d&&-1!==u&&(d=h);else if(void 0===i)if(-1===d&&1===r[p])-1===u&&(u=h);else if(32===p||9===p)-1===d&&-1!==u&&(d=h);else if(59===p||44===p){if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h),a(n,e.slice(u,d),!0),44===p&&(a(s,t,n),n=Object.create(null),t=void 0),u=d=-1}else{if(61!==p||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${h}`);i=e.slice(u,h),u=d=-1}else if(l){if(1!==r[p])throw new SyntaxError(`Unexpected character at index ${h}`);-1===u?u=h:o||(o=!0),l=!1}else if(c)if(1===r[p])-1===u&&(u=h);else if(34===p&&-1!==u)c=!1,d=h;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${h}`);l=!0}else if(34===p&&61===e.charCodeAt(h-1))c=!0;else if(-1===d&&1===r[p])-1===u&&(u=h);else if(-1===u||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${h}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${h}`);-1===d&&(d=h);let r=e.slice(u,d);o&&(r=r.replace(/\\/g,""),o=!1),a(n,i,r),44===p&&(a(s,t,n),n=Object.create(null),t=void 0),i=void 0,u=d=-1}}else-1===d&&(d=h);if(-1===u||c||32===p||9===p)throw new SyntaxError("Unexpected end of input");-1===d&&(d=h);let m=e.slice(u,d);return void 0===t?a(s,m,n):(void 0===i?a(n,m,!0):a(n,i,o?m.replace(/\\/g,""):m),a(s,t,n)),s}}}),Mp=j((e,t)=>{var r=require("events"),a=require("https"),i=require("http"),s=require("net"),n=require("tls"),{randomBytes:o,createHash:l}=require("crypto"),{Duplex:c,Readable:u}=require("stream"),{URL:p}=require("url"),d=Qc(),h=Ry(),m=$y(),{isBlob:f}=po(),{BINARY_TYPES:v,EMPTY_BUFFER:g,GUID:y,kForOnEventAttribute:b,kListener:x,kStatusCode:_,kWebSocket:w,NOOP:E}=ls(),{EventTarget:{addEventListener:S,removeEventListener:k}}=I1(),{format:P,parse:C}=Ny(),{toBuffer:T}=Xc(),$=Symbol("kAborted"),O=[8,13],R=["CONNECTING","OPEN","CLOSING","CLOSED"],j=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,I=class e extends r{constructor(t,r,a){super(),this._binaryType=v[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=e.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==t?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===r?r=[]:Array.isArray(r)||("object"==typeof r&&null!==r?(a=r,r=[]):r=[r]),A(this,t,r,a)):(this._autoPong=a.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){v.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,r,a){let i=new h({allowSynchronousEvents:a.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:a.maxPayload,skipUTF8Validation:a.skipUTF8Validation}),s=new m(t,this._extensions,a.generateMask);this._receiver=i,this._sender=s,this._socket=t,i[w]=this,s[w]=this,t[w]=this,i.on("conclude",M),i.on("drain",q),i.on("error",U),i.on("message",B),i.on("ping",V),i.on("pong",H),s.onerror=W,t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),r.length>0&&t.unshift(r),t.on("close",K),t.on("data",X),t.on("end",Y),t.on("error",Q),this._readyState=e.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=e.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=e.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,r){if(this.readyState!==e.CLOSED){if(this.readyState===e.CONNECTING)return void D(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===e.CLOSING)return void(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end());this._readyState=e.CLOSING,this._sender.close(t,r,!this._isServer,e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),J(this)}}pause(){this.readyState===e.CONNECTING||this.readyState===e.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,r,a){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(a=t,t=r=void 0):"function"==typeof r&&(a=r,r=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===e.OPEN?(void 0===r&&(r=!this._isServer),this._sender.ping(t||g,r,a)):z(this,t,a)}pong(t,r,a){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof t?(a=t,t=r=void 0):"function"==typeof r&&(a=r,r=void 0),"number"==typeof t&&(t=t.toString()),this.readyState===e.OPEN?(void 0===r&&(r=!this._isServer),this._sender.pong(t||g,r,a)):z(this,t,a)}resume(){this.readyState===e.CONNECTING||this.readyState===e.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,r,a){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof r&&(a=r,r={}),"number"==typeof t&&(t=t.toString()),this.readyState!==e.OPEN)return void z(this,t,a);let i={binary:"string"!=typeof t,mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[d.extensionName]||(i.compress=!1),this._sender.send(t||g,i,a)}terminate(){if(this.readyState!==e.CLOSED){if(this.readyState===e.CONNECTING)return void D(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=e.CLOSING,this._socket.destroy())}}};function A(e,t,r,s){let n,c={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:O[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=c.autoPong,!O.includes(c.protocolVersion))throw new RangeError(`Unsupported protocol version: ${c.protocolVersion} (supported versions: ${O.join(", ")})`);if(t instanceof p)n=t;else try{n=new p(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===n.protocol?n.protocol="ws:":"https:"===n.protocol&&(n.protocol="wss:"),e._url=n.href;let u,h="wss:"===n.protocol,m="ws+unix:"===n.protocol;if("ws:"===n.protocol||h||m?m&&!n.pathname?u="The URL's pathname is empty":n.hash&&(u="The URL contains a fragment identifier"):u='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',u){let t=new SyntaxError(u);if(0===e._redirects)throw t;return void N(e,t)}let f,v,g=h?443:80,b=o(16).toString("base64"),x=h?a.request:i.request,_=new Set;if(c.createConnection=c.createConnection||(h?F:L),c.defaultPort=c.defaultPort||g,c.port=n.port||g,c.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,c.headers={...c.headers,"Sec-WebSocket-Version":c.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},c.path=n.pathname+n.search,c.timeout=c.handshakeTimeout,c.perMessageDeflate&&(f=new d(!0!==c.perMessageDeflate?c.perMessageDeflate:{},!1,c.maxPayload),c.headers["Sec-WebSocket-Extensions"]=P({[d.extensionName]:f.offer()})),r.length){for(let e of r){if("string"!=typeof e||!j.test(e)||_.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(e)}c.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(c.origin&&(c.protocolVersion<13?c.headers["Sec-WebSocket-Origin"]=c.origin:c.headers.Origin=c.origin),(n.username||n.password)&&(c.auth=`${n.username}:${n.password}`),m){let e=c.path.split(":");c.socketPath=e[0],c.path=e[1]}if(c.followRedirects){if(0===e._redirects){e._originalIpc=m,e._originalSecure=h,e._originalHostOrSocketPath=m?c.socketPath:n.host;let t=s&&s.headers;if(s={...s,headers:{}},t)for(let[e,r]of Object.entries(t))s.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){let t=m?!!e._originalIpc&&c.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&n.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!h)&&(delete c.headers.authorization,delete c.headers.cookie,t||delete c.headers.host,c.auth=void 0)}c.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(c.auth).toString("base64")),v=e._req=x(c),e._redirects&&e.emit("redirect",e.url,v)}else v=e._req=x(c);c.timeout&&v.on("timeout",()=>{D(e,v,"Opening handshake has timed out")}),v.on("error",t=>{null===v||v[$]||(v=e._req=null,N(e,t))}),v.on("response",a=>{let i=a.headers.location,n=a.statusCode;if(i&&c.followRedirects&&n>=300&&n<400){if(++e._redirects>c.maxRedirects)return void D(e,v,"Maximum redirects exceeded");let a;v.abort();try{a=new p(i,t)}catch{let t=new SyntaxError(`Invalid URL: ${i}`);return void N(e,t)}A(e,a,r,s)}else e.emit("unexpected-response",v,a)||D(e,v,`Unexpected server response: ${a.statusCode}`)}),v.on("upgrade",(t,r,a)=>{if(e.emit("upgrade",t),e.readyState!==I.CONNECTING)return;v=e._req=null;let i=t.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase())return void D(e,r,"Invalid Upgrade header");let s=l("sha1").update(b+y).digest("base64");if(t.headers["sec-websocket-accept"]!==s)return void D(e,r,"Invalid Sec-WebSocket-Accept header");let n,o=t.headers["sec-websocket-protocol"];if(void 0!==o?_.size?_.has(o)||(n="Server sent an invalid subprotocol"):n="Server sent a subprotocol but none was requested":_.size&&(n="Server sent no subprotocol"),n)return void D(e,r,n);o&&(e._protocol=o);let u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!f)return void D(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=C(u)}catch{return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}let a=Object.keys(t);if(1!==a.length||a[0]!==d.extensionName)return void D(e,r,"Server indicated an extension that was not requested");try{f.accept(t[d.extensionName])}catch{return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[d.extensionName]=f}e.setSocket(r,a,{allowSynchronousEvents:c.allowSynchronousEvents,generateMask:c.generateMask,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation})}),c.finishRequest?c.finishRequest(v,e):v.end()}function N(e,t){e._readyState=I.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function L(e){return e.path=e.socketPath,s.connect(e)}function F(e){return e.path=void 0,!e.servername&&""!==e.servername&&(e.servername=s.isIP(e.host)?"":e.host),n.connect(e)}function D(e,t,r){e._readyState=I.CLOSING;let a=new Error(r);Error.captureStackTrace(a,D),t.setHeader?(t[$]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(N,e,a)):(t.destroy(a),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function z(e,t,r){if(t){let r=f(t)?t.size:T(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=new Error(`WebSocket is not open: readyState ${e.readyState} (${R[e.readyState]})`);process.nextTick(r,t)}}function M(e,t){let r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",X),process.nextTick(G,r._socket),1005===e?r.close():r.close(e,t))}function q(){let e=this[w];e.isPaused||e._socket.resume()}function U(e){let t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",X),process.nextTick(G,t._socket),t.close(e[_])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function Z(){this[w].emitClose()}function B(e,t){this[w].emit("message",e,t)}function V(e){let t=this[w];t._autoPong&&t.pong(e,!this._isServer,E),t.emit("ping",e)}function H(e){this[w].emit("pong",e)}function G(e){e.resume()}function W(e){let t=this[w];t.readyState!==I.CLOSED&&(t.readyState===I.OPEN&&(t._readyState=I.CLOSING,J(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function J(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function K(){let e,t=this[w];this.removeListener("close",K),this.removeListener("data",X),this.removeListener("end",Y),t._readyState=I.CLOSING,!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&null!==(e=t._socket.read())&&t._receiver.write(e),t._receiver.end(),this[w]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",Z),t._receiver.on("finish",Z))}function X(e){this[w]._receiver.write(e)||this.pause()}function Y(){let e=this[w];e._readyState=I.CLOSING,e._receiver.end(),this.end()}function Q(){let e=this[w];this.removeListener("error",Q),this.on("error",E),e&&(e._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(I.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(I.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[b])return t[x];return null},set(t){for(let t of this.listeners(e))if(t[b]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[b]:!0})}})}),I.prototype.addEventListener=S,I.prototype.removeEventListener=k,t.exports=I}),W1=j((e,t)=>{Mp();var{Duplex:r}=require("stream");function a(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}t.exports=function(e,t){let n=!0,o=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let a=!r&&o._readableState.objectMode?t.toString():t;o.push(a)||e.pause()}),e.once("error",function(e){o.destroyed||(n=!1,o.destroy(e))}),e.once("close",function(){o.destroyed||o.push(null)}),o._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(a,o);let i=!1;e.once("error",function(e){i=!0,r(e)}),e.once("close",function(){i||r(t),process.nextTick(a,o)}),n&&e.terminate()},o._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){o._final(t)})},o._read=function(){e.isPaused&&e.resume()},o._write=function(t,r,a){e.readyState!==e.CONNECTING?e.send(t,a):e.once("open",function(){o._write(t,r,a)})},o.on("end",i),o.on("error",s),o}}),J1=j((e,t)=>{var{tokenChars:r}=po();t.exports={parse:function(e){let t=new Set,a=-1,i=-1,s=0;for(;s<e.length;s++){let n=e.charCodeAt(s);if(-1===i&&1===r[n])-1===a&&(a=s);else if(0===s||32!==n&&9!==n){if(44!==n)throw new SyntaxError(`Unexpected character at index ${s}`);{if(-1===a)throw new SyntaxError(`Unexpected character at index ${s}`);-1===i&&(i=s);let r=e.slice(a,i);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),a=i=-1}}else-1===i&&-1!==a&&(i=s)}if(-1===a||-1!==i)throw new SyntaxError("Unexpected end of input");let n=e.slice(a,s);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);return t.add(n),t}}}),nN=j((e,t)=>{var r=require("events"),a=require("http"),{Duplex:i}=require("stream"),{createHash:s}=require("crypto"),n=Ny(),o=Qc(),l=J1(),c=Mp(),{GUID:u,kWebSocket:p}=ls(),d=/^[+/0-9A-Za-z]{22}==$/;function h(e){e._state=2,e.emit("close")}function m(){this.destroy()}function f(e,t,r,i){r=r||a.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${a.STATUS_CODES[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+r)}function v(e,t,r,a,i,s){if(e.listenerCount("wsClientError")){let a=new Error(i);Error.captureStackTrace(a,v),e.emit("wsClientError",a,r,t)}else f(r,a,i,s)}t.exports=class extends r{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:c,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=a.createServer((e,t)=>{let r=a.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,a)=>{this.handleUpgrade(t,r,a,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",()=>{e(new Error("The server is not running"))}),void process.nextTick(h,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(h,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{h(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,a){t.on("error",m);let i=e.headers["sec-websocket-key"],s=e.headers.upgrade,c=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void v(this,e,t,405,"Invalid HTTP method");if(void 0===s||"websocket"!==s.toLowerCase())return void v(this,e,t,400,"Invalid Upgrade header");if(void 0===i||!d.test(i))return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==c&&8!==c)return void v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(e))return void f(t,400);let u=e.headers["sec-websocket-protocol"],p=new Set;if(void 0!==u)try{p=l.parse(u)}catch{return void v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}let h=e.headers["sec-websocket-extensions"],g={};if(this.options.perMessageDeflate&&void 0!==h){let r=new o(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=n.parse(h);e[o.extensionName]&&(r.accept(e[o.extensionName]),g[o.extensionName]=r)}catch{return void v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){let s={origin:e.headers[""+(8===c?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(s,n,o,l)=>{if(!s)return f(t,n||401,o,l);this.completeUpgrade(g,i,p,e,t,r,a)});if(!this.options.verifyClient(s))return f(t,401)}this.completeUpgrade(g,i,p,e,t,r,a)}completeUpgrade(e,t,r,a,i,l,c){if(!i.readable||!i.writable)return i.destroy();if(i[p])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return f(i,503);let d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+u).digest("base64")}`],v=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,a):r.values().next().value;e&&(d.push(`Sec-WebSocket-Protocol: ${e}`),v._protocol=e)}if(e[o.extensionName]){let t=e[o.extensionName].params,r=n.format({[o.extensionName]:[t]});d.push(`Sec-WebSocket-Extensions: ${r}`),v._extensions=e}this.emit("headers",d,a),i.write(d.concat("\r\n").join("\r\n")),i.removeListener("error",m),v.setSocket(i,l,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(v),v.on("close",()=>{this.clients.delete(v),this._shouldEmitClose&&!this.clients.size&&process.nextTick(h,this)})),c(v,a)}}}),vee={};Hp(vee,{activate:()=>dee,deactivate:()=>hee,openTabs:()=>gee}),module.exports=ZN(vee);var ke=le(require("vscode"),1),ut=le(require("vscode"),1),X$=le(require("path"),1),iy=le(require("os"),1),nb=require("crypto");function vs(){return(0,nb.randomBytes)(16).toString("hex")}var Rr=le(require("fs"),1),q_=require("node:buffer"),z_=le(require("node:path"),1),Tl=le(require("node:child_process"),1),ko=le(require("node:process"),1),B_=le(ef(),1);function tf(e){let t="string"==typeof e?"\n":10,r="string"==typeof e?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var To=le(require("node:process"),1),Xa=le(require("node:path"),1),rf=require("node:url");function pl(e={}){let{env:t=process.env,platform:r=process.platform}=e;return"win32"!==r?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"}var bD=({cwd:e=To.default.cwd(),path:t=To.default.env[pl()],preferLocal:r=!0,execPath:a=To.default.execPath,addExecPath:i=!0}={})=>{let s=e instanceof URL?(0,rf.fileURLToPath)(e):e,n=Xa.default.resolve(s),o=[];return r&&_D(o,n),i&&xD(o,a,n),[...o,t].join(Xa.default.delimiter)},_D=(e,t)=>{let r;for(;r!==t;)e.push(Xa.default.join(t,"node_modules/.bin")),r=t,t=Xa.default.resolve(t,"..")},xD=(e,t,r)=>{let a=t instanceof URL?(0,rf.fileURLToPath)(t):t;e.push(Xa.default.resolve(r,a,".."))},Vb=({env:e=To.default.env,...t}={})=>{let r=pl({env:e={...e}});return t.path=e[r],e[r]=bD(t),e},wD=(e,t,r,a)=>{if("length"===r||"prototype"===r||"arguments"===r||"caller"===r)return;let i=Object.getOwnPropertyDescriptor(e,r),s=Object.getOwnPropertyDescriptor(t,r);!SD(i,s)&&a||Object.defineProperty(e,r,s)},SD=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},ED=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},TD=(e,t)=>`/* Wrapped ${e}*/\n${t}`,CD=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),PD=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),kD=(e,t,r)=>{let a=""===r?"":`with ${r.trim()}() `,i=TD.bind(null,a,t.toString());Object.defineProperty(i,"name",PD),Object.defineProperty(e,"toString",{...CD,value:i})};function nf(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:a}=e;for(let a of Reflect.ownKeys(t))wD(e,t,a,r);return ED(e,t),kD(e,t,a),e}var fl=new WeakMap,Zb=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,a=0,i=e.displayName||e.name||"<anonymous>",s=function(...n){if(fl.set(s,++a),1===a)r=e.apply(this,n),e=null;else if(!0===t.throw)throw new Error(`Function \`${i}\` can only be called once`);return r};return nf(s,e),fl.set(s,a),s};Zb.callCount=e=>{if(!fl.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return fl.get(e)};var Gb=Zb,t_=le(require("node:process"),1),Qb=require("node:os"),Wb=()=>{let e=Jb-Kb+1;return Array.from({length:e},RD)},RD=(e,t)=>({name:`SIGRT${t+1}`,number:Kb+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Kb=34,Jb=64,Yb=require("node:os"),Xb=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],sf=()=>{let e=Wb();return[...Xb,...e].map(OD)},OD=({name:e,number:t,description:r,action:a,forced:i=!1,standard:s})=>{let{signals:{[e]:n}}=Yb.constants,o=void 0!==n;return{name:e,number:o?n:t,description:r,supported:o,action:a,forced:i,standard:s}},ID=()=>{let e=sf();return Object.fromEntries(e.map($D))},$D=({name:e,number:t,description:r,supported:a,action:i,forced:s,standard:n})=>[e,{name:e,number:t,description:r,supported:a,action:i,forced:s,standard:n}],e_=ID(),AD=()=>{let e=sf(),t=Array.from({length:65},(t,r)=>ND(r,e));return Object.assign({},...t)},ND=(e,t)=>{let r=DD(e,t);if(void 0===r)return{};let{name:a,description:i,supported:s,action:n,forced:o,standard:l}=r;return{[e]:{name:a,number:e,description:i,supported:s,action:n,forced:o,standard:l}}},DD=(e,t)=>{let r=t.find(({name:t})=>Qb.constants.signals[t]===e);return void 0!==r?r:t.find(t=>t.number===e)},tte=AD(),LD=({timedOut:e,timeout:t,errorCode:r,signal:a,signalDescription:i,exitCode:s,isCanceled:n})=>e?`timed out after ${t} milliseconds`:n?"was canceled":void 0!==r?`failed with ${r}`:void 0!==a?`was killed with ${a} (${i})`:void 0!==s?`failed with exit code ${s}`:"failed",Co=({stdout:e,stderr:t,all:r,error:a,signal:i,exitCode:s,command:n,escapedCommand:o,timedOut:l,isCanceled:c,killed:u,parsed:{options:{timeout:p,cwd:d=t_.default.cwd()}}})=>{s=null===s?void 0:s;let h=void 0===(i=null===i?void 0:i)?void 0:e_[i].description,m=a&&a.code,f=`Command ${LD({timedOut:l,timeout:p,errorCode:m,signal:i,signalDescription:h,exitCode:s,isCanceled:c})}: ${n}`,v="[object Error]"===Object.prototype.toString.call(a),g=v?`${f}\n${a.message}`:f,y=[g,t,e].filter(Boolean).join("\n");return v?(a.originalMessage=a.message,a.message=y):a=new Error(y),a.shortMessage=g,a.command=n,a.escapedCommand=o,a.exitCode=s,a.signal=i,a.signalDescription=h,a.stdout=e,a.stderr=t,a.cwd=d,void 0!==r&&(a.all=r),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=!!l,a.isCanceled=c,a.killed=u&&!l,a},ml=["stdin","stdout","stderr"],MD=e=>ml.some(t=>void 0!==e[t]),r_=e=>{if(!e)return;let{stdio:t}=e;if(void 0===t)return ml.map(t=>e[t]);if(MD(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${ml.map(e=>`\`${e}\``).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,ml.length);return Array.from({length:r},(e,r)=>t[r])},s_=le(require("node:os"),1),Ws=[];Ws.push("SIGHUP","SIGINT","SIGTERM"),"win32"!==process.platform&&Ws.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&Ws.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var hl=e=>!!e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on,af=Symbol.for("signal-exit emitter"),of=globalThis,jD=Object.defineProperty.bind(Object),cf=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(of[af])return of[af];jD(of,af,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(e,t){this.listeners[e].push(t)}removeListener(e,t){let r=this.listeners[e],a=r.indexOf(t);-1!==a&&(0===a&&1===r.length?r.length=0:r.splice(a,1))}emit(e,t,r){if(this.emitted[e])return!1;this.emitted[e]=!0;let a=!1;for(let i of this.listeners[e])a=!0===i(t,r)||a;return"exit"===e&&(a=this.emit("afterExit",t,r)||a),a}},gl=class{},FD=e=>({onExit:(t,r)=>e.onExit(t,r),load:()=>e.load(),unload:()=>e.unload()}),lf=class extends gl{onExit(){return()=>{}}load(){}unload(){}},uf=class extends gl{#e="win32"===df.platform?"SIGINT":"SIGHUP";#t=new cf;#r;#a;#i;#s={};#n=!1;constructor(e){super(),this.#r=e,this.#s={};for(let t of Ws)this.#s[t]=()=>{let r=this.#r.listeners(t),{count:a}=this.#t,i=e;if("object"==typeof i.__signal_exit_emitter__&&"number"==typeof i.__signal_exit_emitter__.count&&(a+=i.__signal_exit_emitter__.count),r.length===a){this.unload();let r=this.#t.emit("exit",null,t),a="SIGHUP"===t?this.#e:t;r||e.kill(e.pid,a)}};this.#i=e.reallyExit,this.#a=e.emit}onExit(e,t){if(!hl(this.#r))return()=>{};!1===this.#n&&this.load();let r=t?.alwaysLast?"afterExit":"exit";return this.#t.on(r,e),()=>{this.#t.removeListener(r,e),0===this.#t.listeners.exit.length&&0===this.#t.listeners.afterExit.length&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let e of Ws)try{let t=this.#s[e];t&&this.#r.on(e,t)}catch{}this.#r.emit=(e,...t)=>this.#o(e,...t),this.#r.reallyExit=e=>this.#l(e)}}unload(){this.#n&&(this.#n=!1,Ws.forEach(e=>{let t=this.#s[e];if(!t)throw new Error("Listener not defined for signal: "+e);try{this.#r.removeListener(e,t)}catch{}}),this.#r.emit=this.#a,this.#r.reallyExit=this.#i,this.#t.count-=1)}#l(e){return hl(this.#r)?(this.#r.exitCode=e||0,this.#t.emit("exit",this.#r.exitCode,null),this.#i.call(this.#r,this.#r.exitCode)):0}#o(e,...t){let r=this.#a;if("exit"===e&&hl(this.#r)){"number"==typeof t[0]&&(this.#r.exitCode=t[0]);let a=r.call(this.#r,e,...t);return this.#t.emit("exit",this.#r.exitCode,null),a}return r.call(this.#r,e,...t)}},df=globalThis.process,{onExit:n_,load:cte,unload:lte}=FD(hl(df)?new uf(df):new lf),UD=5e3,a_=(e,t="SIGTERM",r={})=>{let a=e(t);return qD(e,t,r,a),a},qD=(e,t,r,a)=>{if(!zD(t,r,a))return;let i=HD(r),s=setTimeout(()=>{e("SIGKILL")},i);s.unref&&s.unref()},zD=(e,{forceKillAfterTimeout:t},r)=>BD(e)&&!1!==t&&r,BD=e=>e===s_.default.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),HD=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return UD;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},i_=(e,t)=>{e.kill()&&(t.isCanceled=!0)},VD=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},o_=(e,{timeout:t,killSignal:r="SIGTERM"},a)=>{if(0===t||void 0===t)return a;let i,s=new Promise((a,s)=>{i=setTimeout(()=>{VD(e,r,s)},t)}),n=a.finally(()=>{clearTimeout(i)});return Promise.race([s,n])},c_=({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},l_=async(e,{cleanup:t,detached:r},a)=>{if(!t||r)return a;let i=n_(()=>{e.kill()});return a.finally(()=>{i()})},u_=require("node:fs"),d_=require("node:child_process");function vl(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe}function pf(e){return vl(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState}var ZD=e=>e instanceof d_.ChildProcess&&"function"==typeof e.then,ff=(e,t,r)=>{if("string"==typeof r)return e[t].pipe((0,u_.createWriteStream)(r)),e;if(pf(r))return e[t].pipe(r),e;if(!ZD(r))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!pf(r.stdin))throw new TypeError("The target child process's stdin must be available.");return e[t].pipe(r.stdin),r},p_=e=>{null!==e.stdout&&(e.pipeStdout=ff.bind(void 0,e,"stdout")),null!==e.stderr&&(e.pipeStderr=ff.bind(void 0,e,"stderr")),void 0!==e.all&&(e.pipeAll=ff.bind(void 0,e,"all"))},Sl=require("node:fs"),E_=require("node:timers/promises"),Po=async(e,{init:t,convertChunk:r,getSize:a,truncateChunk:i,addChunk:s,getFinalChunk:n,finalize:o},{maxBuffer:l=Number.POSITIVE_INFINITY}={})=>{if(!WD(e))throw new Error("The first argument must be a Readable, a ReadableStream, or an async iterable.");let c=t();c.length=0;try{for await(let t of e){let e=r[KD(t)](t,c);h_({convertedChunk:e,state:c,getSize:a,truncateChunk:i,addChunk:s,maxBuffer:l})}return GD({state:c,convertChunk:r,getSize:a,truncateChunk:i,addChunk:s,getFinalChunk:n,maxBuffer:l}),o(c)}catch(e){throw e.bufferedData=o(c),e}},GD=({state:e,getSize:t,truncateChunk:r,addChunk:a,getFinalChunk:i,maxBuffer:s})=>{let n=i(e);void 0!==n&&h_({convertedChunk:n,state:e,getSize:t,truncateChunk:r,addChunk:a,maxBuffer:s})},h_=({convertedChunk:e,state:t,getSize:r,truncateChunk:a,addChunk:i,maxBuffer:s})=>{let n=r(e),o=t.length+n;if(o<=s)return void f_(e,t,i,o);let l=a(e,s-t.length);throw void 0!==l&&f_(l,t,i,s),new yl},f_=(e,t,r,a)=>{t.contents=r(e,t,a),t.length=a},WD=e=>"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator],KD=e=>{let t=typeof e;if("string"===t)return"string";if("object"!==t||null===e)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=m_.call(e);return"[object ArrayBuffer]"===r?"arrayBuffer":"[object DataView]"===r?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&"[object ArrayBuffer]"===m_.call(e.buffer)?"typedArray":"others"},{toString:m_}=Object.prototype,yl=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}},mf=e=>e,hf=()=>{},gf=({contents:e})=>e,bl=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},_l=e=>e.length;async function vf(e,t){return Po(e,sL,t)}var JD=()=>({contents:new ArrayBuffer(0)}),XD=e=>YD.encode(e),YD=new TextEncoder,g_=e=>new Uint8Array(e),v_=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),QD=(e,t)=>e.slice(0,t),eL=(e,{contents:t,length:r},a)=>{let i=__()?rL(t,a):tL(t,a);return new Uint8Array(i).set(e,r),i},tL=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(b_(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},rL=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:b_(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},b_=e=>y_**Math.ceil(Math.log(e)/Math.log(y_)),y_=2,nL=({contents:e,length:t})=>__()?e:e.slice(0,t),__=()=>"resize"in ArrayBuffer.prototype,sL={init:JD,convertChunk:{string:XD,buffer:g_,arrayBuffer:g_,dataView:v_,typedArray:v_,others:bl},getSize:_l,truncateChunk:QD,addChunk:eL,getFinalChunk:hf,finalize:nL};async function xl(e,t){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return x_(await vf(e,t))}catch(e){throw void 0!==e.bufferedData&&(e.bufferedData=x_(e.bufferedData)),e}}var x_=e=>globalThis.Buffer.from(e);async function yf(e,t){return Po(e,lL,t)}var aL=()=>({contents:"",textDecoder:new TextDecoder}),wl=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),iL=(e,{contents:t})=>t+e,oL=(e,t)=>e.slice(0,t),cL=({textDecoder:e})=>{let t=e.decode();return""===t?void 0:t},lL={init:aL,convertChunk:{string:mf,buffer:wl,arrayBuffer:wl,dataView:wl,typedArray:wl,others:bl},getSize:_l,truncateChunk:oL,addChunk:iL,getFinalChunk:cL,finalize:gf},T_=le(S_(),1),C_=e=>{if(void 0!==e)throw new TypeError("The `input` and `inputFile` options cannot be both set.")},dL=({input:e,inputFile:t})=>"string"!=typeof t?e:(C_(e),(0,Sl.readFileSync)(t)),P_=e=>{let t=dL(e);if(vl(t))throw new TypeError("The `input` option cannot be a stream in sync mode");return t},pL=({input:e,inputFile:t})=>"string"!=typeof t?e:(C_(e),(0,Sl.createReadStream)(t)),k_=(e,t)=>{let r=pL(t);void 0!==r&&(vl(r)?r.pipe(e.stdin):e.stdin.end(r))},R_=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,T_.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},bf=async(e,t)=>{if(e&&void 0!==t){await(0,E_.setTimeout)(0),e.destroy();try{return await t}catch(e){return e.bufferedData}}},_f=(e,{encoding:t,buffer:r,maxBuffer:a})=>{if(e&&r)return"utf8"===t||"utf-8"===t?yf(e,{maxBuffer:a}):null===t||"buffer"===t?xl(e,{maxBuffer:a}):fL(e,a,t)},fL=async(e,t,r)=>(await xl(e,{maxBuffer:t})).toString(r),O_=async({stdout:e,stderr:t,all:r},{encoding:a,buffer:i,maxBuffer:s},n)=>{let o=_f(e,{encoding:a,buffer:i,maxBuffer:s}),l=_f(t,{encoding:a,buffer:i,maxBuffer:s}),c=_f(r,{encoding:a,buffer:i,maxBuffer:2*s});try{return await Promise.all([n,o,l,c])}catch(a){return Promise.all([{error:a,signal:a.signal,timedOut:a.timedOut},bf(e,o),bf(t,l),bf(r,c)])}},mL=(async()=>{})().constructor.prototype,hL=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(mL,e)]),xf=(e,t)=>{for(let[r,a]of hL){let i="function"==typeof t?(...e)=>Reflect.apply(a.value,t(),e):a.value.bind(t);Reflect.defineProperty(e,r,{...a,value:i})}},I_=e=>new Promise((t,r)=>{e.on("exit",(e,r)=>{t({exitCode:e,signal:r})}),e.on("error",e=>{r(e)}),e.stdin&&e.stdin.on("error",e=>{r(e)})}),N_=require("node:buffer"),D_=require("node:child_process"),L_=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],gL=/^[\w.-]+$/,vL=e=>"string"!=typeof e||gL.test(e)?e:`"${e.replaceAll('"','\\"')}"`,wf=(e,t)=>L_(e,t).join(" "),Sf=(e,t)=>L_(e,t).map(e=>vL(e)).join(" "),yL=/ +/g,$_=e=>{let t=typeof e;if("string"===t)return e;if("number"===t)return String(e);if("object"===t&&null!==e&&!(e instanceof D_.ChildProcess)&&"stdout"in e){let t=typeof e.stdout;if("string"===t)return e.stdout;if(N_.Buffer.isBuffer(e.stdout))return e.stdout.toString();throw new TypeError(`Unexpected "${t}" stdout in template expression`)}throw new TypeError(`Unexpected "${t}" in template expression`)},A_=(e,t,r)=>r||0===e.length||0===t.length?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],bL=({templates:e,expressions:t,tokens:r,index:a,template:i})=>{let s=i??e.raw[a],n=s.split(yL).filter(Boolean),o=A_(r,n,s.startsWith(" "));if(a===t.length)return o;let l=t[a],c=Array.isArray(l)?l.map(e=>$_(e)):[$_(l)];return A_(o,c,s.endsWith(" "))},Ef=(e,t)=>{let r=[];for(let[a,i]of e.entries())r=bL({templates:e,expressions:t,tokens:r,index:a,template:i});return r},M_=require("node:util"),j_=le(require("node:process"),1),F_=(0,M_.debuglog)("execa").enabled,El=(e,t)=>String(e).padStart(t,"0"),_L=()=>{let e=new Date;return`${El(e.getHours(),2)}:${El(e.getMinutes(),2)}:${El(e.getSeconds(),2)}.${El(e.getMilliseconds(),3)}`},Tf=(e,{verbose:t})=>{t&&j_.default.stderr.write(`[${_L()}] ${e}\n`)},xL=1e8,wL=({env:e,extendEnv:t,preferLocal:r,localDir:a,execPath:i})=>{let s=t?{...ko.default.env,...e}:e;return r?Vb({env:s,cwd:a,execPath:i}):s},H_=(e,t,r={})=>{let a=B_.default._parse(e,t,r);return e=a.command,t=a.args,r=a.options,(r={maxBuffer:xL,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||ko.default.cwd(),execPath:ko.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:F_,...r}).env=wL(r),r.stdio=r_(r),"win32"===ko.default.platform&&"cmd"===z_.default.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:a}},Ro=(e,t,r)=>"string"==typeof t||q_.Buffer.isBuffer(t)?e.stripFinalNewline?tf(t):t:void 0===r?void 0:"";function V_(e,t,r){let a,i=H_(e,t,r),s=wf(e,t),n=Sf(e,t);Tf(n,i.options),c_(i.options);try{a=Tl.default.spawn(i.file,i.args,i.options)}catch(e){let t=new Tl.default.ChildProcess,r=Promise.reject(Co({error:e,stdout:"",stderr:"",all:"",command:s,escapedCommand:n,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return xf(t,r),t}let o=I_(a),l=o_(a,i.options,o),c=l_(a,i.options,l),u={isCanceled:!1};a.kill=a_.bind(null,a.kill.bind(a)),a.cancel=i_.bind(null,a,u);let p=Gb(async()=>{let[{error:e,exitCode:t,signal:r,timedOut:o},l,p,d]=await O_(a,i.options,c),h=Ro(i.options,l),m=Ro(i.options,p),f=Ro(i.options,d);if(e||0!==t||null!==r){let l=Co({error:e,exitCode:t,signal:r,stdout:h,stderr:m,all:f,command:s,escapedCommand:n,parsed:i,timedOut:o,isCanceled:u.isCanceled||!!i.options.signal&&i.options.signal.aborted,killed:a.killed});if(!i.options.reject)return l;throw l}return{command:s,escapedCommand:n,exitCode:0,stdout:h,stderr:m,all:f,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return k_(a,i.options),a.all=R_(a,i.options),p_(a),xf(a,p),a}function Ar(e,t,r){let a=H_(e,t,r),i=wf(e,t),s=Sf(e,t);Tf(s,a.options);let n,o=P_(a.options);try{n=Tl.default.spawnSync(a.file,a.args,{...a.options,input:o})}catch(e){throw Co({error:e,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let l=Ro(a.options,n.stdout,n.error),c=Ro(a.options,n.stderr,n.error);if(n.error||0!==n.status||null!==n.signal){let e=Co({stdout:l,stderr:c,error:n.error,signal:n.signal,exitCode:n.status,command:i,escapedCommand:s,parsed:a,timedOut:n.error&&"ETIMEDOUT"===n.error.code,isCanceled:!1,killed:null!==n.signal});if(!a.options.reject)return e;throw e}return{command:i,escapedCommand:s,exitCode:0,stdout:l,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}var SL=({input:e,inputFile:t,stdio:r})=>void 0===e&&void 0===t&&void 0===r?{stdin:"inherit"}:{},U_=(e={})=>({preferLocal:!0,...SL(e),...e});function Z_(e){function t(t,...r){if(!Array.isArray(t))return Z_({...e,...t});let[a,...i]=Ef(t,r);return V_(a,i,U_(e))}return t.sync=(t,...r)=>{if(!Array.isArray(t))throw new TypeError("Please use $(options).sync`command` instead of $.sync(options)`command`.");let[a,...i]=Ef(t,r);return Ar(a,i,U_(e))},t}var rre=Z_(),K$=le(Hf(),1),ei=class e{constructor(e){this.returned=e}queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;[Symbol.asyncIterator](){if(this.started)throw new Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}static from(t){let r=new e;for(let e of t)r.enqueue(e);return r.done(),r}};function Dw(){return{clawd:{light:"/resources/clawd.svg",dark:"/resources/clawd.svg"},"welcome-art":{light:"/resources/welcome-art-light.svg",dark:"/resources/welcome-art-dark.svg"}}}function Lw(){return{clawd:{light:"./resources/clawd.svg",dark:"./resources/clawd.svg"},"welcome-art":{light:"./resources/welcome-art-light.svg",dark:"./resources/welcome-art-dark.svg"}}}var KE=require("child_process"),an=require("path"),Nr=le(require("fs"),1),Wf=require("crypto"),Mw=require("path"),jw=require("os");function sn(){return process.env.CLAUDE_CONFIG_DIR??(0,Mw.join)((0,jw.homedir)(),".claude")}function Vf(e){if(!e)return!1;if("boolean"==typeof e)return e;let t=e.toLowerCase().trim();return["1","true","yes","on"].includes(t)}var bF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function _F(){return(0,an.join)(sn(),"projects")}function Zf(e){return(0,an.join)(_F(),e.replace(/[^a-zA-Z0-9]/g,"-"))}function Fw(e,t){return(0,an.join)(sn(),"file-history",t,e)}var Bn=class e{constructor(e,t,r,a,i,s){this.sessionMessages=e,this.messages=t,this.summaries=r,this.projectRoot=a,this.fileModificationTimes=i,this.logger=s}static cache=new Map;refreshing=Promise.resolve();async fetchSessions(){return this.getTranscripts().map(e=>{let t=e[e.length-1],r=e[0],a=SF(e);return{lastModified:new Date(t.timestamp).getTime(),messageCount:e.length,isSidechain:r.isSidechain,id:t.sessionId,summary:this.summaries.get(t.uuid)||a}})}getTranscripts(){let e=[...this.messages.values()],t=new Set(e.map(e=>e.parentUuid));return e.filter(e=>!t.has(e.uuid)).map(e=>this.getTranscript(e)).filter(e=>e.length)}async getSessionMessages(e){if(e.endsWith(".jsonl")){let t=[];for(let r of await Gf(e))t.push(r);return t}let t=e,r=this.sessionMessages.get(t);if(!r)return[];let a=Array.from(this.messages.values()).filter(e=>r.has(e.uuid)).filter(e=>!e.isSidechain).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0];return a?this.getTranscript(a).map(wF).filter(e=>!!e):[]}getTranscript(e,t=!1){let r=[],a=e;for(;a;){r.unshift(a);let e=a.parentUuid??(t?a.logicalParentUuid:null);a=e?this.messages.get(e):void 0}return r}static async load(t,r){let a=Zf(t);if(!e.cache.has(a)){let i=new e(new Map,new Map,new Map,t,new Map,r);e.cache.set(a,i)}let i=e.cache.get(a);return await i.refresh(),i}refresh(){return this.refreshing=this.refreshing.then(async()=>this.performRefresh()),this.refreshing}async performRefresh(){let e=Zf(this.projectRoot),t=await Nr.promises.readdir(e),r=[];for(let a of t){let t=(0,an.join)(e,a);if(!t.endsWith(".jsonl"))continue;let i=xF((0,an.basename)(t,".jsonl"));if(i)try{let e=await Nr.promises.stat(t),a=this.fileModificationTimes.get(t)||0;e.mtime.getTime()>a&&r.push({path:t,sessionId:i,mtime:e.mtime.getTime()})}catch{if(this.fileModificationTimes.has(t)){this.fileModificationTimes.delete(t),this.sessionMessages.delete(i);for(let[e,t]of this.messages.entries())t.sessionId===i&&this.messages.delete(e)}}}for(let{path:e,sessionId:t,mtime:a}of r){let r=this.sessionMessages.get(t);if(r)for(let e of r)this.messages.delete(e),this.summaries.delete(e);let i=new Map,s=new Map;try{let r=!1,n=!1;for(let t of await Gf(e))if("user"===t.type||"assistant"===t.type||"attachment"===t.type||"system"===t.type){if(!r&&(r=!0,!0===t.isSidechain)){n=!0;break}i.set(t.uuid,t)}else"summary"===t.type&&t.leafUuid&&s.set(t.leafUuid,t.summary);if(n)this.sessionMessages.delete(t),this.fileModificationTimes.delete(e);else{this.sessionMessages.set(t,new Set(i.keys()));for(let[e,t]of i.entries())this.messages.set(e,t);for(let[e,t]of s.entries())this.summaries.set(e,t);this.fileModificationTimes.set(e,a)}}catch{}}}async forkSession(e,t){let r=this.sessionMessages.get(e);if(!r)throw new Error(`Session ${e} not found`);let a=Array.from(this.messages.values()).filter(e=>r.has(e.uuid)).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0];if(!a)throw new Error(`No messages found for session ${e}`);let i=this.getTranscript(a,!!t);if(t){let r=-1;for(let e=i.length-1;e>=0;e--)if(i[e].uuid===t){r=e;break}if(-1===r)throw new Error(`Message ${t} not found in session ${e}`);i=i.slice(0,r+1)}let s=(0,Wf.randomUUID)(),n=Zf(this.projectRoot),o=(0,an.join)(n,`${s}.jsonl`),l=i.length>0?this.summaries.get(i[i.length-1].uuid):void 0,c=(0,an.join)(n,`${e}.jsonl`),u=new Map;for(let e of await Gf(c))"file-history-snapshot"===e.type&&u.set(e.messageId,e);let p=new Map;for(let e of i)p.set(e.uuid,(0,Wf.randomUUID)());let d=[],h="",m=(new Date).toISOString(),f=new Set;for(let t=0;t<i.length;t++){let r=i[t],a=p.get(r.uuid),n=r.parentUuid&&p.get(r.parentUuid)||null,o=t===i.length-1?m:r.timestamp,l={...r,uuid:a,parentUuid:n,sessionId:s,timestamp:o};"assistant"===l.type&&l.message&&(l={...l,message:{...l.message,id:a}}),d.push(l),h+=JSON.stringify(l)+"\n";let c=u.get(r.uuid);if(c){let t=p.get(r.uuid),a={...c,messageId:t,snapshot:{...c.snapshot,messageId:t}};h+=JSON.stringify(a)+"\n",EF(c.snapshot,e,s,this.logger,f)}}await Nr.promises.appendFile(o,h);let v=d[d.length-1]?.uuid;if(l&&v){let e={type:"summary",leafUuid:v,summary:l};await Nr.promises.appendFile(o,JSON.stringify(e)+"\n")}this.sessionMessages.set(s,new Set(d.map(e=>e.uuid)));for(let e of d)this.messages.set(e.uuid,e);return l&&v&&this.summaries.set(v,l),s}};function xF(e){return"string"!=typeof e?null:bF.test(e)?e:null}async function Gf(e){try{let t=await Nr.promises.readFile(e,"utf8");return t.trim()?t.split("\n").filter(e=>e.trim()).map(e=>{try{return JSON.parse(e)}catch{return null}}).filter(e=>null!==e):[]}catch{return[]}}function wF(e){if(!e.isMeta){if("user"===e.type)return{type:"user",message:e.message,uuid:e.uuid,session_id:e.sessionId,parent_tool_use_id:null};if("assistant"===e.type)return{type:"assistant",message:e.message,uuid:e.uuid,session_id:e.sessionId,parent_tool_use_id:null};if("system"===e.type)return;if("attachment"===e.type)return}}function SF(e){let t;for(let r of e)if("user"!==r.type||r.isMeta){if(t)break}else t=r;if(!t||"user"!==t.type)return"No prompt";let r=t.message?.content,a="";return a="string"==typeof r?r:Array.isArray(r)&&r.findLast(e=>"text"===e.type)?.text||"No prompt",a=a.replace(/\n/g," ").trim(),a.length>45&&(a=a.slice(0,45)+"..."),a}async function EF(e,t,r,a,i){for(let s of Object.values(e.trackedFileBackups)){if(!s.backupFileName||i.has(s.backupFileName))continue;i.add(s.backupFileName);let e=Fw(s.backupFileName,t),n=Fw(s.backupFileName,r);if(!Nr.existsSync(e)){a.error(`FileHistory: Backup file does not exist at ${e}`);continue}if(Nr.existsSync(n))continue;let o=(0,an.dirname)(n);Nr.existsSync(o)||await Nr.promises.mkdir(o,{recursive:!0});try{await Nr.promises.link(e,n),a.log(`FileHistory: Hard linked backup ${s.backupFileName} from ${t} to ${r}`)}catch{a.log(`FileHistory: Hard link failed, falling back to copy for ${s.backupFileName}`);try{await Nr.promises.copyFile(e,n),a.log(`FileHistory: Copied backup ${s.backupFileName} from ${t} to ${r}`)}catch(e){a.error(`FileHistory: Failed to copy backup ${s.backupFileName}: ${e}`)}}}}var TF=7,Uw=["Edit","Write"],Dr={totalSessions:0,recentSessions:0,editsAccepted:0,editsAutoAccepted:0,editsDeclined:0};function qw(){return Dr}function zw(e){let t=Date.now()-24*TF*60*60*1e3,r=e.length,a=e.filter(e=>e.lastModified>=t).length;return Dr={...Dr,totalSessions:r,recentSessions:a}}function Bw(e,t){Uw.includes(e)&&(Dr="allow"===t.result.behavior?{...Dr,editsAccepted:Dr.editsAccepted+1}:{...Dr,editsDeclined:Dr.editsDeclined+1})}var Kf=new Set;function Hw(e){if("assistant"===e.type&&Array.isArray(e.message.content))for(let t of e.message.content)"tool_use"===t.type&&Uw.includes(t.name)&&Kf.add(t.id);if("user"===e.type&&Array.isArray(e.message.content))for(let t of e.message.content)"tool_result"===t.type&&!t.is_error&&Kf.has(t.tool_use_id)&&(Dr={...Dr,editsAutoAccepted:Dr.editsAutoAccepted+1},Kf.delete(t.tool_use_id))}var ti=le(require("node:child_process"),1);async function jl(e){return new Promise(async t=>{try{let r="win32"===process.platform?ti.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ParentProcessId=${e}").ProcessId`]):"darwin"===process.platform?ti.spawn("bash",["-c",`ps -eo pid,ppid | awk '$2 == ${e} {print $1}'`]):ti.spawn("bash",["-c",`ps -o pid= --ppid ${e}`]),a="";r.stdout.on("data",e=>{a+=e.toString()}),r.on("close",()=>{let e=a.trim().split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0);t(e)}),r.on("error",e=>{console.error(`Error finding children: ${e}`),t([])})}catch(e){console.error(`Error checking for child processes: ${e}`),t([])}})}async function Jf(e){return new Promise(t=>{try{let r="win32"===process.platform?ti.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ProcessId=${e}").CommandLine`]):ti.spawn("bash",["-c",`ps -p ${e} -o command=`]),a="";r.stdout.on("data",e=>{a+=e.toString()}),r.on("close",()=>{t(a.trim())}),r.on("error",e=>{console.error(`Error getting process command: ${e}`),t("")})}catch(e){console.error(`Error checking process command: ${e}`),t("")}})}var im=require("path"),zS=require("url"),BS=require("events"),VS=require("child_process"),ZS=require("readline"),Re=le(require("fs"),1),GS=require("fs/promises"),YS=require("path"),QS=require("os"),Qs=require("path"),t0=require("process"),r0=require("fs"),n0=require("crypto"),o0=require("crypto"),wi=require("fs"),om=require("path"),c0=require("crypto"),j3={},CF=Object.create,PF=Object.getPrototypeOf,am=Object.defineProperty,kF=Object.getOwnPropertyNames,RF=Object.prototype.hasOwnProperty,AS=(e,t,r)=>{r=null!=e?CF(PF(e)):{};let a=!t&&e&&e.__esModule?r:am(r,"default",{value:e,enumerable:!0});for(let t of kF(e))RF.call(a,t)||am(a,t,{get:()=>e[t],enumerable:!0});return a},ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),NS=(e,t)=>{for(var r in t)am(e,r,{get:t[r],enumerable:!0,configurable:!0,set:e=>t[r]=()=>e})},Hl=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){let r=[e[0]],i=0;for(;i<t.length;)o(r,t[i]),r.push(e[++i]);return new a(r)}e._Code=a,e.nil=new a(""),e._=i;var s=new a("+");function n(e,...t){let r=[c(e[0])],i=0;for(;i<t.length;)r.push(s),o(r,t[i]),r.push(s,c(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){let r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new a(r)}function o(e,t){t instanceof a?e.push(...t._items):t instanceof r?e.push(t):e.push(function(e){return"number"==typeof e||"boolean"==typeof e||null===e?e:c(Array.isArray(e)?e.join(","):e)}(t))}function l(e,t){return'""'===t?e:'""'===e?t:"string"==typeof e?t instanceof r||'"'!==e[e.length-1]?void 0:"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0:"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=n,e.addCodeArg=o,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:n`${e}${t}`},e.stringify=function(e){return new a(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new a(`.${t}`):i`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new a(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new a(e.toString())}}),Vw=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;var t,r,a=Hl();class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}(r=t||(e.UsedValueState=t={}))[r.Started=0]="Started",r[r.Completed=1]="Completed",e.varKinds={const:new a.Name("const"),let:new a.Name("let"),var:new a.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof a.Name?e:this.name(e)}name(e){return new a.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if(null!==(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)&&void 0!==r&&r.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=s;class n extends a.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=a._`.${new a.Name(t)}[${r}]`}}e.ValueScopeName=n;var o=a._`\n`;e.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?o:a.nil}}get(){return this._scope}name(e){return new n(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");let a=this.toName(e),{prefix:i}=a,s=null!==(r=t.key)&&void 0!==r?r:t.ref,n=this._values[i];if(n){let e=n.get(s);if(e)return e}else n=this._values[i]=new Map;n.set(s,a);let o=this._scope[i]||(this._scope[i]=[]),l=o.length;return o[l]=t.ref,a.setValue(t,{property:i,itemIndex:l}),a}getValue(e,t){let r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return a._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(r,s,n={},o){let l=a.nil;for(let c in r){let u=r[c];if(!u)continue;let p=n[c]=n[c]||new Map;u.forEach(r=>{if(p.has(r))return;p.set(r,t.Started);let n=s(r);if(n){let t=this.opts.es5?e.varKinds.var:e.varKinds.const;l=a._`${l}${t} ${r} = ${n};${this.opts._n}`}else{if(!(n=o?.(r)))throw new i(r);l=a._`${l}${n}${this.opts._n}`}p.set(r,t.Completed)})}return l}}}),Ze=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;var t=Hl(),r=Vw(),a=Hl();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var i=Vw();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(e,t){return this}}class n extends s{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){let a=e?r.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${a} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class o extends s{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=$(this.rhs,e,r),this}get names(){return T(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class l extends o{constructor(e,t,r,a){super(e,r,a),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class c extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class u extends s{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends s{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class d extends s{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=$(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){let{nodes:e}=this,t=e.length;for(;t--;){let r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){let{nodes:r}=this,a=r.length;for(;a--;){let i=r[a];i.optimizeNames(e,t)||(O(e,i.names),r.splice(a,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>C(e,t.names),{})}}class m extends h{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class f extends h{}class v extends m{}v.kind="else";class g extends m{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){let e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof g?t:t.nodes:this.nodes.length?this:new g(R(e),t instanceof g?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=$(this.condition,e,t),this}get names(){let e=super.names;return T(e,this.condition),this.else&&C(e,this.else.names),e}}g.kind="if";class y extends m{}y.kind="for";class b extends y{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=$(this.iteration,e,t),this}get names(){return C(super.names,this.iteration.names)}}class x extends y{constructor(e,t,r,a){super(),this.varKind=e,this.name=t,this.from=r,this.to=a}render(e){let t=e.es5?r.varKinds.var:this.varKind,{name:a,from:i,to:s}=this;return`for(${t} ${a}=${i}; ${a}<${s}; ${a}++)`+super.render(e)}get names(){let e=T(super.names,this.from);return T(e,this.to)}}class _ extends y{constructor(e,t,r,a){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=a}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=$(this.iterable,e,t),this}get names(){return C(super.names,this.iterable.names)}}class w extends m{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}w.kind="func";class E extends h{render(e){return"return "+super.render(e)}}E.kind="return";class S extends m{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,a;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(a=this.finally)||void 0===a||a.optimizeNames(e,t),this}get names(){let e=super.names;return this.catch&&C(e,this.catch.names),this.finally&&C(e,this.finally.names),e}}class k extends m{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}k.kind="catch";class P extends m{render(e){return"finally"+super.render(e)}}P.kind="finally";function C(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function T(e,r){return r instanceof t._CodeOrName?C(e,r.names):e}function $(e,r,a){return e instanceof t.Name?s(e):(i=e)instanceof t._Code&&i._items.some(e=>e instanceof t.Name&&1===r[e.str]&&void 0!==a[e.str])?new t._Code(e._items.reduce((e,r)=>(r instanceof t.Name&&(r=s(r)),r instanceof t._Code?e.push(...r._items):e.push(r),e),[])):e;var i;function s(e){let t=a[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function O(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function R(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${N(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new f]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){let r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,a){let i=this._scope.toName(t);return void 0!==r&&a&&(this._constants[i.str]=r),this._leafNode(new n(e,i,r)),i}const(e,t,a){return this._def(r.varKinds.const,e,t,a)}let(e,t,a){return this._def(r.varKinds.let,e,t,a)}var(e,t,a){return this._def(r.varKinds.var,e,t,a)}assign(e,t,r){return this._leafNode(new o(e,t,r))}add(t,r){return this._leafNode(new l(t,e.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new d(e)),this}object(...e){let r=["{"];for(let[a,i]of e)r.length>1&&r.push(","),r.push(a),(a!==i||this.opts.es5)&&(r.push(":"),(0,t.addCodeArg)(r,i));return r.push("}"),new t._Code(r)}if(e,t,r){if(this._blockNode(new g(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new g(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(g,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new b(e),t)}forRange(e,t,a,i,s=(this.opts.es5?r.varKinds.var:r.varKinds.let)){let n=this._scope.toName(e);return this._for(new x(s,n,t,a),()=>i(n))}forOf(e,a,i,s=r.varKinds.const){let n=this._scope.toName(e);if(this.opts.es5){let e=a instanceof t.Name?a:this.var("_arr",a);return this.forRange("_i",0,t._`${e}.length`,r=>{this.var(n,t._`${e}[${r}]`),i(n)})}return this._for(new _("of",s,n,a),()=>i(n))}forIn(e,a,i,s=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${a})`,i);let n=this._scope.toName(e);return this._for(new _("in",s,n,a),()=>i(n))}endFor(){return this._endBlockNode(y)}label(e){return this._leafNode(new c(e))}break(e){return this._leafNode(new u(e))}return(e){let t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');let a=new S;if(this._blockNode(a),this.code(e),t){let e=this.name("e");this._currNode=a.catch=new k(e),t(e)}return r&&(this._currNode=a.finally=new P,this.code(r)),this._endBlockNode(k,P)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){let t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");let r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,r=t.nil,a,i){return this._blockNode(new w(e,r,a)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){let r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){let t=this._currNode;if(!(t instanceof g))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let t=this._nodes;t[t.length-1]=e}},e.not=R;var j=A(e.operators.AND);e.and=function(...e){return e.reduce(j)};var I=A(e.operators.OR);function A(e){return(r,a)=>r===t.nil?a:a===t.nil?r:t._`${N(r)} ${e} ${N(a)}`}function N(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(I)}}),st=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;var t=Ze(),r=Hl();function a(e,t=e.schema){let{opts:r,self:a}=e;if(!r.strictSchema||"boolean"==typeof t)return;let i=a.RULES.keywords;for(let r in t)i[r]||h(e,`unknown keyword: "${r}"`)}function i(e,t){if("boolean"==typeof e)return!e;for(let r in e)if(t[r])return!0;return!1}function s(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function n(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function o({mergeNames:e,mergeToName:r,mergeValues:a,resultToName:i}){return(s,n,o,l)=>{let c=void 0===o?n:o instanceof t.Name?(n instanceof t.Name?e(s,n,o):r(s,n,o),o):n instanceof t.Name?(r(s,o,n),n):a(n,o);return l!==t.Name||c instanceof t.Name?c:i(s,c)}}function l(e,r){if(!0===r)return e.var("props",!0);let a=e.var("props",t._`{}`);return void 0!==r&&c(e,a,r),a}function c(e,r,a){Object.keys(a).forEach(a=>e.assign(t._`${r}${(0,t.getProperty)(a)}`,!0))}e.toHash=function(e){let t={};for(let r of e)t[r]=!0;return t},e.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(a(e,t),!i(t,e.self.RULES.all))},e.checkUnknownRules=a,e.schemaHasRules=i,e.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(let r in e)if("$ref"!==r&&t.all[r])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:e,schemaPath:r},a,i,s){if(!s){if("number"==typeof a||"boolean"==typeof a)return a;if("string"==typeof a)return t._`${a}`}return t._`${e}${r}${(0,t.getProperty)(i)}`},e.unescapeFragment=function(e){return n(decodeURIComponent(e))},e.escapeFragment=function(e){return encodeURIComponent(s(e))},e.escapeJsonPointer=s,e.unescapeJsonPointer=n,e.eachItem=function(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)},e.mergeEvaluated={props:o({mergeNames:(e,r,a)=>e.if(t._`${a} !== true && ${r} !== undefined`,()=>{e.if(t._`${r} === true`,()=>e.assign(a,!0),()=>e.assign(a,t._`${a} || {}`).code(t._`Object.assign(${a}, ${r})`))}),mergeToName:(e,r,a)=>e.if(t._`${a} !== true`,()=>{!0===r?e.assign(a,!0):(e.assign(a,t._`${a} || {}`),c(e,a,r))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:l}),items:o({mergeNames:(e,r,a)=>e.if(t._`${a} !== true && ${r} !== undefined`,()=>e.assign(a,t._`${r} === true ? true : ${a} > ${r} ? ${a} : ${r}`)),mergeToName:(e,r,a)=>e.if(t._`${a} !== true`,()=>e.assign(a,!0===r||t._`${a} > ${r} ? ${a} : ${r}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},e.evaluatedPropsToName=l,e.setEvaluated=c;var u,p,d={};function h(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}e.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:d[t.code]||(d[t.code]=new r._Code(t.code))})},(p=u||(e.Type=u={}))[p.Num=0]="Num",p[p.Str=1]="Str",e.getErrorPath=function(e,r,a){if(e instanceof t.Name){let i=r===u.Num;return a?i?t._`"[" + ${e} + "]"`:t._`"['" + ${e} + "']"`:i?t._`"/" + ${e}`:t._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return a?(0,t.getProperty)(e).toString():"/"+s(e)},e.checkStrictMode=h}),Es=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};e.default=r}),su=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;var t=Ze(),r=st(),a=Es();function i(e,r){let i=e.const("err",r);e.if(t._`${a.default.vErrors} === null`,()=>e.assign(a.default.vErrors,t._`[${i}]`),t._`${a.default.vErrors}.push(${i})`),e.code(t._`${a.default.errors}++`)}function s(e,r){let{gen:a,validateName:i,schemaEnv:s}=e;s.$async?a.throw(t._`new ${e.ValidationError}(${r})`):(a.assign(t._`${i}.errors`,r),a.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:r})=>r?t.str`"${e}" keyword must be ${r} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(r,a=e.keywordError,n,l){let{it:c}=r,{gen:u,compositeRule:p,allErrors:d}=c,h=o(r,a,n);l??(p||d)?i(u,h):s(c,t._`[${h}]`)},e.reportExtraError=function(t,r=e.keywordError,n){let{it:l}=t,{gen:c,compositeRule:u,allErrors:p}=l;i(c,o(t,r,n)),u||p||s(l,a.default.vErrors)},e.resetErrorsCount=function(e,r){e.assign(a.default.errors,r),e.if(t._`${a.default.vErrors} !== null`,()=>e.if(r,()=>e.assign(t._`${a.default.vErrors}.length`,r),()=>e.assign(a.default.vErrors,null)))},e.extendErrors=function({gen:e,keyword:r,schemaValue:i,data:s,errsCount:n,it:o}){if(void 0===n)throw new Error("ajv implementation error");let l=e.name("err");e.forRange("i",n,a.default.errors,n=>{e.const(l,t._`${a.default.vErrors}[${n}]`),e.if(t._`${l}.instancePath === undefined`,()=>e.assign(t._`${l}.instancePath`,(0,t.strConcat)(a.default.instancePath,o.errorPath))),e.assign(t._`${l}.schemaPath`,t.str`${o.errSchemaPath}/${r}`),o.opts.verbose&&(e.assign(t._`${l}.schema`,i),e.assign(t._`${l}.data`,s))})};var n={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function o(e,r,i){let{createErrors:s}=e.it;return!1===s?t._`{}`:function(e,r,i={}){let{gen:s,it:o}=e,u=[l(o,i),c(e,i)];return function(e,{params:r,message:i},s){let{keyword:o,data:l,schemaValue:c,it:u}=e,{opts:p,propertyName:d,topSchemaRef:h,schemaPath:m}=u;s.push([n.keyword,o],[n.params,"function"==typeof r?r(e):r||t._`{}`]),p.messages&&s.push([n.message,"function"==typeof i?i(e):i]),p.verbose&&s.push([n.schema,c],[n.parentSchema,t._`${h}${m}`],[a.default.data,l]),d&&s.push([n.propertyName,d])}(e,r,u),s.object(...u)}(e,r,i)}function l({errorPath:e},{instancePath:i}){let s=i?t.str`${e}${(0,r.getErrorPath)(i,r.Type.Str)}`:e;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,s)]}function c({keyword:e,it:{errSchemaPath:a}},{schemaPath:i,parentSchema:s}){let o=s?a:t.str`${a}/${e}`;return i&&(o=t.str`${o}${(0,r.getErrorPath)(i,r.Type.Str)}`),[n.schemaPath,o]}}),OF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.boolOrEmptySchema=e.topBoolOrEmptySchema=void 0;var t=su(),r=Ze(),a=Es(),i={message:"boolean schema is false"};function s(e,r){let{gen:a,data:s}=e,n={gen:a,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,t.reportError)(n,i,void 0,r)}e.topBoolOrEmptySchema=function(e){let{gen:t,schema:i,validateName:n}=e;!1===i?s(e,!1):"object"==typeof i&&!0===i.$async?t.return(a.default.data):(t.assign(r._`${n}.errors`,null),t.return(!0))},e.boolOrEmptySchema=function(e,t){let{gen:r,schema:a}=e;!1===a?(r.var(t,!1),s(e)):r.var(t,!0)}}),DS=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRules=e.isJSONType=void 0;var t=new Set(["string","number","integer","boolean","null","object","array"]);e.isJSONType=function(e){return"string"==typeof e&&t.has(e)},e.getRules=function(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}}),LS=ge(e=>{function t(e,t){return t.rules.some(t=>r(e,t))}function r(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldUseRule=e.shouldUseGroup=e.schemaHasRulesForType=void 0,e.schemaHasRulesForType=function({schema:e,self:r},a){let i=r.RULES.types[a];return i&&!0!==i&&t(e,i)},e.shouldUseGroup=t,e.shouldUseRule=r}),Vl=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;var t,r,a=DS(),i=LS(),s=su(),n=Ze(),o=st();function l(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(a.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}(r=t||(e.DataType=t={}))[r.Correct=0]="Correct",r[r.Wrong=1]="Wrong",e.getSchemaTypes=function(e){let t=l(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=l,e.coerceAndCheckDataType=function(e,r){let{gen:a,data:s,opts:o}=e,l=function(e,t){return t?e.filter(e=>c.has(e)||"array"===t&&"array"===e):[]}(r,o.coerceTypes),u=r.length>0&&!(0===l.length&&1===r.length&&(0,i.schemaHasRulesForType)(e,r[0]));if(u){let i=p(r,s,o.strictNumbers,t.Wrong);a.if(i,()=>{l.length?function(e,t,r){let{gen:a,data:i,opts:s}=e,o=a.let("dataType",n._`typeof ${i}`),l=a.let("coerced",n._`undefined`);"array"===s.coerceTypes&&a.if(n._`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>a.assign(i,n._`${i}[0]`).assign(o,n._`typeof ${i}`).if(p(t,i,s.strictNumbers),()=>a.assign(l,i))),a.if(n._`${l} !== undefined`);for(let e of r)(c.has(e)||"array"===e&&"array"===s.coerceTypes)&&u(e);function u(e){switch(e){case"string":return void a.elseIf(n._`${o} == "number" || ${o} == "boolean"`).assign(l,n._`"" + ${i}`).elseIf(n._`${i} === null`).assign(l,n._`""`);case"number":return void a.elseIf(n._`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(l,n._`+${i}`);case"integer":return void a.elseIf(n._`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,n._`+${i}`);case"boolean":return void a.elseIf(n._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf(n._`${i} === "true" || ${i} === 1`).assign(l,!0);case"null":return a.elseIf(n._`${i} === "" || ${i} === 0 || ${i} === false`),void a.assign(l,null);case"array":a.elseIf(n._`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(l,n._`[${i}]`)}}a.else(),h(e),a.endIf(),a.if(n._`${l} !== undefined`,()=>{a.assign(i,l),function({gen:e,parentData:t,parentDataProperty:r},a){e.if(n._`${t} !== undefined`,()=>e.assign(n._`${t}[${r}]`,a))}(e,l)})}(e,r,l):h(e)})}return u};var c=new Set(["string","number","integer","boolean","null"]);function u(e,r,a,i=t.Correct){let s,o=i===t.Correct?n.operators.EQ:n.operators.NEQ;switch(e){case"null":return n._`${r} ${o} null`;case"array":s=n._`Array.isArray(${r})`;break;case"object":s=n._`${r} && typeof ${r} == "object" && !Array.isArray(${r})`;break;case"integer":s=l(n._`!(${r} % 1) && !isNaN(${r})`);break;case"number":s=l();break;default:return n._`typeof ${r} ${o} ${e}`}return i===t.Correct?s:(0,n.not)(s);function l(e=n.nil){return(0,n.and)(n._`typeof ${r} == "number"`,e,a?n._`isFinite(${r})`:n.nil)}}function p(e,t,r,a){if(1===e.length)return u(e[0],t,r,a);let i,s=(0,o.toHash)(e);if(s.array&&s.object){let e=n._`typeof ${t} != "object"`;i=s.null?e:n._`!${t} || ${e}`,delete s.null,delete s.array,delete s.object}else i=n.nil;s.number&&delete s.integer;for(let e in s)i=(0,n.and)(i,u(e,t,r,a));return i}e.checkDataType=u,e.checkDataTypes=p;var d={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?n._`{type: ${e}}`:n._`{type: ${t}}`};function h(e){let t=function(e){let{gen:t,data:r,schema:a}=e,i=(0,o.schemaRefOrVal)(e,a,"type");return{gen:t,keyword:"type",data:r,schema:a.type,schemaCode:i,schemaValue:i,parentSchema:a,params:{},it:e}}(e);(0,s.reportError)(t,d)}e.reportTypeError=h}),IF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assignDefaults=void 0;var t=Ze(),r=st();function a(e,a,i){let{gen:s,compositeRule:n,data:o,opts:l}=e;if(void 0===i)return;let c=t._`${o}${(0,t.getProperty)(a)}`;if(n)return void(0,r.checkStrictMode)(e,`default is ignored for: ${c}`);let u=t._`${c} === undefined`;"empty"===l.useDefaults&&(u=t._`${u} || ${c} === null || ${c} === ""`),s.if(u,t._`${c} = ${(0,t.stringify)(i)}`)}e.assignDefaults=function(e,t){let{properties:r,items:i}=e.schema;if("object"===t&&r)for(let t in r)a(e,t,r[t].default);else"array"===t&&Array.isArray(i)&&i.forEach((t,r)=>a(e,r,t.default))}}),fn=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateUnion=e.validateArray=e.usePattern=e.callValidateCode=e.schemaProperties=e.allSchemaProperties=e.noPropertyInData=e.propertyInData=e.isOwnProperty=e.hasPropFunc=e.reportMissingProp=e.checkMissingProp=e.checkReportMissingProp=void 0;var t=Ze(),r=st(),a=Es(),i=st();function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:t._`Object.prototype.hasOwnProperty`})}function n(e,r,a){return t._`${s(e)}.call(${r}, ${a})`}function o(e,r,a,i){let s=t._`${r}${(0,t.getProperty)(a)} === undefined`;return i?(0,t.or)(s,(0,t.not)(n(e,r,a))):s}function l(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}e.checkReportMissingProp=function(e,r){let{gen:a,data:i,it:s}=e;a.if(o(a,i,r,s.opts.ownProperties),()=>{e.setParams({missingProperty:t._`${r}`},!0),e.error()})},e.checkMissingProp=function({gen:e,data:r,it:{opts:a}},i,s){return(0,t.or)(...i.map(i=>(0,t.and)(o(e,r,i,a.ownProperties),t._`${s} = ${i}`)))},e.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},e.hasPropFunc=s,e.isOwnProperty=n,e.propertyInData=function(e,r,a,i){let s=t._`${r}${(0,t.getProperty)(a)} !== undefined`;return i?t._`${s} && ${n(e,r,a)}`:s},e.noPropertyInData=o,e.allSchemaProperties=l,e.schemaProperties=function(e,t){return l(t).filter(a=>!(0,r.alwaysValidSchema)(e,t[a]))},e.callValidateCode=function({schemaCode:e,data:r,it:{gen:i,topSchemaRef:s,schemaPath:n,errorPath:o},it:l},c,u,p){let d=p?t._`${e}, ${r}, ${s}${n}`:r,h=[[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,o)],[a.default.parentData,l.parentData],[a.default.parentDataProperty,l.parentDataProperty],[a.default.rootData,a.default.rootData]];l.opts.dynamicRef&&h.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);let m=t._`${d}, ${i.object(...h)}`;return u!==t.nil?t._`${c}.call(${u}, ${m})`:t._`${c}(${m})`};var c=t._`new RegExp`;e.usePattern=function({gen:e,it:{opts:r}},a){let s=r.unicodeRegExp?"u":"",{regExp:n}=r.code,o=n(a,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:t._`${"new RegExp"===n.code?c:(0,i.useFunc)(e,n)}(${a}, ${s})`})},e.validateArray=function(e){let{gen:a,data:i,keyword:s,it:n}=e,o=a.name("valid");if(n.allErrors){let e=a.let("valid",!0);return l(()=>a.assign(e,!1)),e}return a.var(o,!0),l(()=>a.break()),o;function l(n){let l=a.const("len",t._`${i}.length`);a.forRange("i",0,l,i=>{e.subschema({keyword:s,dataProp:i,dataPropType:r.Type.Num},o),a.if((0,t.not)(o),n)})}},e.validateUnion=function(e){let{gen:a,schema:i,keyword:s,it:n}=e;if(!Array.isArray(i))throw new Error("ajv implementation error");if(i.some(e=>(0,r.alwaysValidSchema)(n,e))&&!n.opts.unevaluated)return;let o=a.let("valid",!1),l=a.name("_valid");a.block(()=>i.forEach((r,i)=>{let n=e.subschema({keyword:s,schemaProp:i,compositeRule:!0},l);a.assign(o,t._`${o} || ${l}`),e.mergeValidEvaluated(n,l)||a.if((0,t.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}}),$F=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateKeywordUsage=e.validSchemaType=e.funcKeywordCode=e.macroKeywordCode=void 0;var t=Ze(),r=Es(),a=fn(),i=su();function s(e){let{gen:r,data:a,it:i}=e;r.if(i.parentData,()=>r.assign(a,t._`${i.parentData}[${i.parentDataProperty}]`))}function n(e,r,a){if(void 0===a)throw new Error(`keyword "${r}" failed to compile`);return e.scopeValue("keyword","function"==typeof a?{ref:a}:{ref:a,code:(0,t.stringify)(a)})}e.macroKeywordCode=function(e,r){let{gen:a,keyword:i,schema:s,parentSchema:o,it:l}=e,c=r.macro.call(l.self,s,o,l),u=n(a,i,c);!1!==l.opts.validateSchema&&l.self.validateSchema(c,!0);let p=a.name("valid");e.subschema({schema:c,schemaPath:t.nil,errSchemaPath:`${l.errSchemaPath}/${i}`,topSchemaRef:u,compositeRule:!0},p),e.pass(p,()=>e.error(!0))},e.funcKeywordCode=function(e,o){var l;let{gen:c,keyword:u,schema:p,parentSchema:d,$data:h,it:m}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(m,o);let f=!h&&o.compile?o.compile.call(m.self,p,d,m):o.validate,v=n(c,u,f),g=c.let("valid");function y(i=(o.async?t._`await `:t.nil)){let s=m.opts.passContext?r.default.this:r.default.self,n=!("compile"in o&&!h||!1===o.schema);c.assign(g,t._`${i}${(0,a.callValidateCode)(e,v,s,n)}`,o.modifying)}function b(e){var r;c.if((0,t.not)(null!==(r=o.valid)&&void 0!==r?r:g),e)}e.block$data(g,function(){if(!1===o.errors)y(),o.modifying&&s(e),b(()=>e.error());else{let a=o.async?function(){let e=c.let("ruleErrs",null);return c.try(()=>y(t._`await `),r=>c.assign(g,!1).if(t._`${r} instanceof ${m.ValidationError}`,()=>c.assign(e,t._`${r}.errors`),()=>c.throw(r))),e}():function(){let e=t._`${v}.errors`;return c.assign(e,null),y(t.nil),e}();o.modifying&&s(e),b(()=>function(e,a){let{gen:s}=e;s.if(t._`Array.isArray(${a})`,()=>{s.assign(r.default.vErrors,t._`${r.default.vErrors} === null ? ${a} : ${r.default.vErrors}.concat(${a})`).assign(r.default.errors,t._`${r.default.vErrors}.length`),(0,i.extendErrors)(e)},()=>e.error())}(e,a))}}),e.ok(null!==(l=o.valid)&&void 0!==l?l:g)},e.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&typeof e>"u")},e.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:a},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let n=i.dependencies;if(n?.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${s}: ${n.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){let e=`keyword "${s}" value is invalid at path "${a}": `+r.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}}),AF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extendSubschemaMode=e.extendSubschemaData=e.getSubschema=void 0;var t=Ze(),r=st();e.getSubschema=function(e,{keyword:a,schemaProp:i,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:l}){if(void 0!==a&&void 0!==s)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==a){let s=e.schema[a];return void 0===i?{schema:s,schemaPath:t._`${e.schemaPath}${(0,t.getProperty)(a)}`,errSchemaPath:`${e.errSchemaPath}/${a}`}:{schema:s[i],schemaPath:t._`${e.schemaPath}${(0,t.getProperty)(a)}${(0,t.getProperty)(i)}`,errSchemaPath:`${e.errSchemaPath}/${a}/${(0,r.escapeFragment)(i)}`}}if(void 0!==s){if(void 0===n||void 0===o||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:l,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')},e.extendSubschemaData=function(e,a,{dataProp:i,dataPropType:s,data:n,dataTypes:o,propertyName:l}){if(void 0!==n&&void 0!==i)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=a;if(void 0!==i){let{errorPath:n,dataPathArr:o,opts:l}=a;u(c.let("data",t._`${a.data}${(0,t.getProperty)(i)}`,!0)),e.errorPath=t.str`${n}${(0,r.getErrorPath)(i,s,l.jsPropertySyntax)}`,e.parentDataProperty=t._`${i}`,e.dataPathArr=[...o,e.parentDataProperty]}if(void 0!==n){u(n instanceof t.Name?n:c.let("data",n,!0)),void 0!==l&&(e.propertyName=l)}function u(t){e.data=t,e.dataLevel=a.dataLevel+1,e.dataTypes=[],a.definedProperties=new Set,e.parentData=a.data,e.dataNames=[...a.dataNames,t]}o&&(e.dataTypes=o)},e.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:a,createErrors:i,allErrors:s}){void 0!==a&&(e.compositeRule=a),void 0!==i&&(e.createErrors=i),void 0!==s&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}}),MS=ge((e,t)=>{t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,i,s;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(i=a;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=a;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=a;0!==i--;){var n=s[i];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r}}),NF=ge((e,t)=>{var r=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),a(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function a(e,t,s,n,o,l,c,u,p,d){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var h in t(n,o,l,c,u,p,d),n){var m=n[h];if(Array.isArray(m)){if(h in r.arrayKeywords)for(var f=0;f<m.length;f++)a(e,t,s,m[f],o+"/"+h+"/"+f,l,o,h,n,f)}else if(h in r.propsKeywords){if(m&&"object"==typeof m)for(var v in m)a(e,t,s,m[v],o+"/"+h+"/"+i(v),l,o,h,n,v)}else(h in r.keywords||e.allKeys&&!(h in r.skipKeywords))&&a(e,t,s,m,o+"/"+h,l,o,h,n)}s(n,o,l,c,u,p,d)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}}),au=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSchemaRefs=e.resolveUrl=e.normalizeId=e._getFullPath=e.getFullPath=e.inlineRef=void 0;var t=st(),r=MS(),a=NF(),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);e.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!n(e):!!t&&o(e)<=t)};var s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function n(e){for(let t in e){if(s.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(n)||"object"==typeof r&&n(r))return!0}return!1}function o(e){let r=0;for(let a in e){if("$ref"===a)return 1/0;if(r++,!i.has(a)&&("object"==typeof e[a]&&(0,t.eachItem)(e[a],e=>r+=o(e)),r===1/0))return 1/0}return r}function l(e,t="",r){!1!==r&&(t=p(t));let a=e.parse(t);return c(e,a)}function c(e,t){return e.serialize(t).split("#")[0]+"#"}e.getFullPath=l,e._getFullPath=c;var u=/#\/?$/;function p(e){return e?e.replace(u,""):""}e.normalizeId=p,e.resolveUrl=function(e,t,r){return r=p(r),e.resolve(t,r)};var d=/^[a-z_][-a-z0-9._]*$/i;e.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};let{schemaId:i,uriResolver:s}=this.opts,n=p(e[i]||t),o={"":n},c=l(s,n,!1),u={},h=new Set;return a(e,{allKeys:!0},(e,t,r,a)=>{if(void 0===a)return;let s=c+t,n=o[a];function l(t){let r=this.opts.uriResolver.resolve;if(t=p(n?r(n,t):t),h.has(t))throw f(t);h.add(t);let a=this.refs[t];return"string"==typeof a&&(a=this.refs[a]),"object"==typeof a?m(e,a.schema,t):t!==p(s)&&("#"===t[0]?(m(e,u[t],t),u[t]=e):this.refs[t]=s),t}function v(e){if("string"==typeof e){if(!d.test(e))throw new Error(`invalid anchor "${e}"`);l.call(this,`#${e}`)}}"string"==typeof e[i]&&(n=l.call(this,e[i])),v.call(this,e.$anchor),v.call(this,e.$dynamicAnchor),o[t]=n}),u;function m(e,t,a){if(void 0!==t&&!r(e,t))throw f(a)}function f(e){return new Error(`reference "${e}" resolves to more than one schema`)}}}),iu=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getData=e.KeywordCxt=e.validateFunctionCode=void 0;var t=OF(),r=Vl(),a=LS(),i=Vl(),s=IF(),n=$F(),o=AF(),l=Ze(),c=Es(),u=au(),p=st(),d=su();function h({gen:e,validateName:t,schema:r,schemaEnv:a,opts:i},s){i.code.es5?e.func(t,l._`${c.default.data}, ${c.default.valCxt}`,a.$async,()=>{e.code(l._`"use strict"; ${m(r,i)}`),function(e,t){e.if(c.default.valCxt,()=>{e.var(c.default.instancePath,l._`${c.default.valCxt}.${c.default.instancePath}`),e.var(c.default.parentData,l._`${c.default.valCxt}.${c.default.parentData}`),e.var(c.default.parentDataProperty,l._`${c.default.valCxt}.${c.default.parentDataProperty}`),e.var(c.default.rootData,l._`${c.default.valCxt}.${c.default.rootData}`),t.dynamicRef&&e.var(c.default.dynamicAnchors,l._`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{e.var(c.default.instancePath,l._`""`),e.var(c.default.parentData,l._`undefined`),e.var(c.default.parentDataProperty,l._`undefined`),e.var(c.default.rootData,c.default.data),t.dynamicRef&&e.var(c.default.dynamicAnchors,l._`{}`)})}(e,i),e.code(s)}):e.func(t,l._`${c.default.data}, ${function(e){return l._`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${e.dynamicRef?l._`, ${c.default.dynamicAnchors}={}`:l.nil}}={}`}(i)}`,a.$async,()=>e.code(m(r,i)).code(s))}function m(e,t){let r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?l._`/*# sourceURL=${r} */`:l.nil}function f(e,r){g(e)&&(y(e),v(e))?function(e,t){let{schema:r,gen:a,opts:i}=e;i.$comment&&r.$comment&&x(e),function(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,u.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);let s=a.const("_errs",c.default.errors);b(e,s),a.var(t,l._`${s} === ${c.default.errors}`)}(e,r):(0,t.boolOrEmptySchema)(e,r)}function v({schema:e,self:t}){if("boolean"==typeof e)return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function g(e){return"boolean"!=typeof e.schema}function y(e){(0,p.checkUnknownRules)(e),function(e){let{schema:t,errSchemaPath:r,opts:a,self:i}=e;t.$ref&&a.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function b(e,t){if(e.opts.jtd)return _(e,[],!1,t);let a=(0,r.getSchemaTypes)(e.schema);_(e,a,!(0,r.coerceAndCheckDataType)(e,a),t)}function x({gen:e,schemaEnv:t,schema:r,errSchemaPath:a,opts:i}){let s=r.$comment;if(!0===i.$comment)e.code(l._`${c.default.self}.logger.log(${s})`);else if("function"==typeof i.$comment){let r=l.str`${a}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(l._`${c.default.self}.opts.$comment(${s}, ${r}, ${i}.schema)`)}}function _(e,t,r,s){let{gen:n,schema:o,data:u,allErrors:d,opts:h,self:m}=e,{RULES:f}=m;function v(p){(0,a.shouldUseGroup)(o,p)&&(p.type?(n.if((0,i.checkDataType)(p.type,u,h.strictNumbers)),w(e,p),1===t.length&&t[0]===p.type&&r&&(n.else(),(0,i.reportTypeError)(e)),n.endIf()):w(e,p),d||n.if(l._`${c.default.errors} === ${s||0}`))}!o.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(o,f)?(h.jtd||function(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(function(e,t){if(t.length){if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach(t=>{S(e.dataTypes,t)||k(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){let r=[];for(let a of e.dataTypes)S(t,a)?r.push(a):t.includes("integer")&&"number"===a&&r.push("integer");e.dataTypes=r}(e,t)}}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&k(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){let r=e.self.RULES.all;for(let i in r){let s=r[i];if("object"==typeof s&&(0,a.shouldUseRule)(e.schema,s)){let{type:r}=s.definition;r.length&&!r.some(e=>E(t,e))&&k(e,`missing type "${r.join(",")}" for keyword "${i}"`)}}}(e,e.dataTypes))}(e,t),n.block(()=>{for(let e of f.rules)v(e);v(f.post)})):n.block(()=>C(e,"$ref",f.all.$ref.definition))}function w(e,t){let{gen:r,schema:i,opts:{useDefaults:n}}=e;n&&(0,s.assignDefaults)(e,t.type),r.block(()=>{for(let r of t.rules)(0,a.shouldUseRule)(i,r)&&C(e,r.keyword,r.definition,t.type)})}function E(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function S(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function k(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}e.validateFunctionCode=function(e){g(e)&&(y(e),v(e))?function(e){let{schema:t,opts:r,gen:a}=e;h(e,()=>{r.$comment&&t.$comment&&x(e),function(e){let{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),a.let(c.default.vErrors,null),a.let(c.default.errors,0),r.unevaluated&&function(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",l._`${r}.evaluated`),t.if(l._`${e.evaluated}.dynamicProps`,()=>t.assign(l._`${e.evaluated}.props`,l._`undefined`)),t.if(l._`${e.evaluated}.dynamicItems`,()=>t.assign(l._`${e.evaluated}.items`,l._`undefined`))}(e),b(e),function(e){let{gen:t,schemaEnv:r,validateName:a,ValidationError:i,opts:s}=e;r.$async?t.if(l._`${c.default.errors} === 0`,()=>t.return(c.default.data),()=>t.throw(l._`new ${i}(${c.default.vErrors})`)):(t.assign(l._`${a}.errors`,c.default.vErrors),s.unevaluated&&function({gen:e,evaluated:t,props:r,items:a}){r instanceof l.Name&&e.assign(l._`${t}.props`,r),a instanceof l.Name&&e.assign(l._`${t}.items`,a)}(e),t.return(l._`${c.default.errors} === 0`))}(e)})}(e):h(e,()=>(0,t.topBoolOrEmptySchema)(e))};class P{constructor(e,t,r){if((0,n.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,n.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",c.default.errors))}result(e,t,r){this.failResult((0,l.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,l.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:t}=this;this.fail(l._`${t} !== undefined && (${(0,l.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?d.reportExtraError:d.reportError)(this,this.def.error,t)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=l.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=l.nil,t=l.nil){if(!this.$data)return;let{gen:r,schemaCode:a,schemaType:i,def:s}=this;r.if((0,l.or)(l._`${a} === undefined`,t)),e!==l.nil&&r.assign(e,!0),(i.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==l.nil&&r.assign(e,!1)),r.else()}invalid$data(){let{gen:e,schemaCode:t,schemaType:r,def:a,it:s}=this;return(0,l.or)(function(){if(r.length){if(!(t instanceof l.Name))throw new Error("ajv implementation error");let e=Array.isArray(r)?r:[r];return l._`${(0,i.checkDataTypes)(e,t,s.opts.strictNumbers,i.DataType.Wrong)}`}return l.nil}(),function(){if(a.validateSchema){let r=e.scopeValue("validate$data",{ref:a.validateSchema});return l._`!${r}(${t})`}return l.nil}())}subschema(e,t){let r=(0,o.getSubschema)(this.it,e);(0,o.extendSubschemaData)(r,this.it,e),(0,o.extendSubschemaMode)(r,e);let a={...this.it,...r,items:void 0,props:void 0};return f(a,t),a}mergeEvaluated(e,t){let{it:r,gen:a}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=p.mergeEvaluated.props(a,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=p.mergeEvaluated.items(a,e.items,r.items,t)))}mergeValidEvaluated(e,t){let{it:r,gen:a}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return a.if(t,()=>this.mergeEvaluated(e,l.Name)),!0}}function C(e,t,r,a){let i=new P(e,r,t);"code"in r?r.code(i,a):i.$data&&r.validate?(0,n.funcKeywordCode)(i,r):"macro"in r?(0,n.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,n.funcKeywordCode)(i,r)}e.KeywordCxt=P;var T=/^\/(?:[^~]|~0|~1)*$/,$=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:t,dataNames:r,dataPathArr:a}){let i,s;if(""===e)return c.default.rootData;if("/"===e[0]){if(!T.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=c.default.rootData}else{let n=$.exec(e);if(!n)throw new Error(`Invalid JSON-pointer: ${e}`);let o=+n[1];if(i=n[2],"#"===i){if(o>=t)throw new Error(u("property/index",o));return a[t-o]}if(o>t)throw new Error(u("data",o));if(s=r[t-o],!i)return s}let n=s,o=i.split("/");for(let e of o)e&&(s=l._`${s}${(0,l.getProperty)((0,p.unescapeJsonPointer)(e))}`,n=l._`${n} && ${s}`);return n;function u(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}e.getData=O}),qm=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});class t extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}e.default=t}),ou=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=au();class r extends Error{constructor(e,r,a,i){super(i||`can't resolve reference ${a} from id ${r}`),this.missingRef=(0,t.resolveUrl)(e,r,a),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(e,this.missingRef))}}e.default=r}),zm=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveSchema=e.getCompilingSchema=e.resolveRef=e.compileSchema=e.SchemaEnv=void 0;var t=Ze(),r=qm(),a=Es(),i=au(),s=st(),n=iu();class o{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,i.normalizeId)(r?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r?.$async,this.refs={}}}function l(e){let s=u.call(this,e);if(s)return s;let o,l=(0,i.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:c,lines:p}=this.opts.code,{ownProperties:d}=this.opts,h=new t.CodeGen(this.scope,{es5:c,lines:p,ownProperties:d});e.$async&&(o=h.scopeValue("Error",{ref:r.default,code:t._`require("ajv/dist/runtime/validation_error").default`}));let m=h.scopeName("validate");e.validateName=m;let f,v={gen:h,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,t.stringify)(e.schema)}:{ref:e.schema}),validateName:m,ValidationError:o,schema:e.schema,schemaEnv:e,rootId:l,baseId:e.baseId||l,schemaPath:t.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:t._`""`,opts:this.opts,self:this};try{this._compilations.add(e),(0,n.validateFunctionCode)(v),h.optimize(this.opts.code.optimize);let r=h.toString();f=`${h.scopeRefs(a.default.scope)}return ${r}`,this.opts.code.process&&(f=this.opts.code.process(f,e));let i=new Function(`${a.default.self}`,`${a.default.scope}`,f)(this,this.scope.get());if(this.scope.value(m,{ref:i}),i.errors=null,i.schema=e.schema,i.schemaEnv=e,e.$async&&(i.$async=!0),!0===this.opts.code.source&&(i.source={validateName:m,validateCode:r,scopeValues:h._values}),this.opts.unevaluated){let{props:e,items:r}=v;i.evaluated={props:e instanceof t.Name?void 0:e,items:r instanceof t.Name?void 0:r,dynamicProps:e instanceof t.Name,dynamicItems:r instanceof t.Name},i.source&&(i.source.evaluated=(0,t.stringify)(i.evaluated))}return e.validate=i,e}catch(t){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),t}finally{this._compilations.delete(e)}}function c(e){return(0,i.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:l.call(this,e)}function u(e){for(let t of this._compilations)if(p(t,e))return t}function p(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function d(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||h.call(this,e,t)}function h(e,t){let r=this.opts.uriResolver.parse(t),a=(0,i._getFullPath)(this.opts.uriResolver,r),s=(0,i.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&a===s)return f.call(this,r,e);let n=(0,i.normalizeId)(a),c=this.refs[n]||this.schemas[n];if("string"==typeof c){let t=h.call(this,e,c);return"object"!=typeof t?.schema?void 0:f.call(this,r,t)}if("object"==typeof c?.schema){if(c.validate||l.call(this,c),n===(0,i.normalizeId)(t)){let{schema:t}=c,{schemaId:r}=this.opts,a=t[r];return a&&(s=(0,i.resolveUrl)(this.opts.uriResolver,s,a)),new o({schema:t,schemaId:r,root:e,baseId:s})}return f.call(this,r,c)}}e.SchemaEnv=o,e.compileSchema=l,e.resolveRef=function(e,t,r){var a;r=(0,i.resolveUrl)(this.opts.uriResolver,t,r);let s=e.refs[r];if(s)return s;let n=d.call(this,e,r);if(void 0===n){let i=null===(a=e.localRefs)||void 0===a?void 0:a[r],{schemaId:s}=this.opts;i&&(n=new o({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==n?e.refs[r]=c.call(this,n):void 0},e.getCompilingSchema=u,e.resolveSchema=h;var m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function f(e,{baseId:t,schema:r,root:a}){var n;if("/"!==(null===(n=e.fragment)||void 0===n?void 0:n[0]))return;for(let a of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;let e=r[(0,s.unescapeFragment)(a)];if(void 0===e)return;let n="object"==typeof(r=e)&&r[this.opts.schemaId];!m.has(a)&&n&&(t=(0,i.resolveUrl)(this.opts.uriResolver,t,n))}let l;if("boolean"!=typeof r&&r.$ref&&!(0,s.schemaHasRulesButRef)(r,this.RULES)){let e=(0,i.resolveUrl)(this.opts.uriResolver,t,r.$ref);l=h.call(this,a,e)}let{schemaId:c}=this.opts;return l=l||new o({schema:r,schemaId:c,root:a,baseId:t}),l.schema!==l.root.schema?l:void 0}}),DF=ge((e,t)=>{t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),LF=ge((e,t)=>{t.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}}),MF=ge((e,t)=>{var{HEX:r}=LF(),a=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function i(e){if(l(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(a)||[],[r]=t;return r?{host:o(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function s(e,t=!1){let a="",i=!0;for(let t of e){if(void 0===r[t])return;"0"!==t&&!0===i&&(i=!1),i||(a+=t)}return t&&0===a.length&&(a="0"),a}function n(e){if(l(e,":")<2)return{host:e,isIPV6:!1};let t=function(e){let t=0,r={error:!1,address:"",zone:""},a=[],i=[],n=!1,o=!1,l=!1;function c(){if(i.length){if(!1===n){let e=s(i);if(void 0===e)return r.error=!0,!1;a.push(e)}i.length=0}return!0}for(let s=0;s<e.length;s++){let u=e[s];if("["!==u&&"]"!==u){if(":"===u){if(!0===o&&(l=!0),!c())break;if(t++,a.push(":"),t>7){r.error=!0;break}s-1>=0&&":"===e[s-1]&&(o=!0);continue}if("%"!==u){i.push(u);continue}if(!c())break;n=!0}}return i.length&&(n?r.zone=i.join(""):l?a.push(i.join("")):a.push(s(i))),r.address=a.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,escapedHost:r,isIPV6:!0}}}function o(e,t){let r="",a=!0,i=e.length;for(let s=0;s<i;s++){let n=e[s];"0"===n&&a?(s+1<=i&&e[s+1]===t||s+1===i)&&(r+=n,a=!1):(a=n===t,r+=n)}return r}function l(e,t){let r=0;for(let a=0;a<e.length;a++)e[a]===t&&r++;return r}var c=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,p=/^\/\.\.(?:\/|$)/u,d=/^\/?(?:.|\n)*?(?=\/|$)/u;t.exports={recomposeAuthority:function(e){let t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host),a=i(r);if(a.isIPV4)r=a.host;else{let t=n(a.host);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return("number"==typeof e.port||"string"==typeof e.port)&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){let r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=[];for(;e.length;)if(e.match(c))e=e.replace(c,"");else if(e.match(u))e=e.replace(u,"/");else if(e.match(p))e=e.replace(p,"/"),t.pop();else if("."===e||".."===e)e="";else{let r=e.match(d);if(!r)throw new Error("Unexpected dot segment condition");{let a=r[0];e=e.slice(a.length),t.push(a)}}return t.join("")},normalizeIPv4:i,normalizeIPv6:n,stringArrayToHexStripped:s}}),jF=ge((e,t)=>{var r=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,a=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function i(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function s(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function n(e){let t="https"===String(e.scheme).toLowerCase();return(e.port===(t?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}var o={scheme:"http",domainHost:!0,parse:s,serialize:n},l={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=i(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if((e.port===(i(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},c={http:o,https:{scheme:"https",domainHost:o.domainHost,parse:s,serialize:n},ws:l,wss:{scheme:"wss",domainHost:l.domainHost,parse:l.parse,serialize:l.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(a);if(r){let a=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${a}:${t.nid||e.nid}`,s=c[i];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){let r=t.scheme||e.scheme||"urn",a=e.nid.toLowerCase(),i=`${r}:${t.nid||a}`,s=c[i];s&&(e=s.serialize(e,t));let n=e,o=e.nss;return n.path=`${a||t.nid}:${o}`,t.skipEscape=!0,n},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){let a=e;return a.uuid=a.nss,a.nss=void 0,!t.tolerant&&(!a.uuid||!r.test(a.uuid))&&(a.error=a.error||"UUID is not valid."),a},serialize:function(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};t.exports=c}),FF=ge((e,t)=>{var{normalizeIPv6:r,normalizeIPv4:a,removeDotSegments:i,recomposeAuthority:s,normalizeComponentEncoding:n}=MF(),o=jF();function l(e,t,r,a){let s={};return a||(e=d(c(e,r),r),t=d(c(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=i(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=i(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=i(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=i(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function c(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},a=Object.assign({},t),n=[],l=o[(a.scheme||r.scheme||"").toLowerCase()];l&&l.serialize&&l.serialize(r,a),void 0!==r.path&&(a.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==a.reference&&r.scheme&&n.push(r.scheme,":");let c=s(r);if(void 0!==c&&("suffix"!==a.reference&&n.push("//"),n.push(c),r.path&&"/"!==r.path.charAt(0)&&n.push("/")),void 0!==r.path){let e=r.path;!a.absolutePath&&(!l||!l.absolutePath)&&(e=i(e)),void 0===c&&(e=e.replace(/^\/\//u,"/%2F")),n.push(e)}return void 0!==r.query&&n.push("?",r.query),void 0!==r.fragment&&n.push("#",r.fragment),n.join("")}var u=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));var p=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function d(e,t){let i=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=-1!==e.indexOf("%"),l=!1;"suffix"===i.reference&&(e=(i.scheme?i.scheme+":":"")+"//"+e);let c=e.match(p);if(c){if(s.scheme=c[1],s.userinfo=c[3],s.host=c[4],s.port=parseInt(c[5],10),s.path=c[6]||"",s.query=c[7],s.fragment=c[8],isNaN(s.port)&&(s.port=c[5]),s.host){let e=a(s.host);if(!1===e.isIPV4){let t=r(e.host);s.host=t.host.toLowerCase(),l=t.isIPV6}else s.host=e.host,l=!0}void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||void 0!==s.query||s.path?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",i.reference&&"suffix"!==i.reference&&i.reference!==s.reference&&(s.error=s.error||"URI is not a "+i.reference+" reference.");let e=o[(i.scheme||s.scheme||"").toLowerCase()];if(!i.unicodeSupport&&(!e||!e.unicodeSupport)&&s.host&&(i.domainHost||e&&e.domainHost)&&!1===l&&function(e){let t=0;for(let r=0,a=e.length;r<a;++r)if(t=e.charCodeAt(r),t>126||u[t])return!0;return!1}(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(n&&void 0!==s.scheme&&(s.scheme=unescape(s.scheme)),n&&void 0!==s.host&&(s.host=unescape(s.host)),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),e&&e.parse&&e.parse(s,i)}else s.error=s.error||"URI can not be parsed.";return s}var h={SCHEMES:o,normalize:function(e,t){return"string"==typeof e?e=c(d(e,t),t):"object"==typeof e&&(e=d(c(e,t),t)),e},resolve:function(e,t,r){let a=Object.assign({scheme:"null"},r);return c(l(d(e,a),d(t,a),a,!0),{...a,skipEscape:!0})},resolveComponents:l,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=c(n(d(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=c(n(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=c(n(d(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=c(n(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:c,parse:d};t.exports=h,t.exports.default=h,t.exports.fastUri=h}),UF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=FF();t.code='require("ajv/dist/runtime/uri").default',e.default=t}),qF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=iu();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=Ze();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});var a=qm(),i=ou(),s=DS(),n=zm(),o=Ze(),l=au(),c=Vl(),u=st(),p=DF(),d=UF(),h=(e,t)=>new RegExp(e,t);h.code="new RegExp";var m=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,r,a,i,s,n,o,l,c,u,p,m,f,v,g,y,b,x,_,w,E,S,k,P,C;let T=e.strict,$=null===(t=e.code)||void 0===t?void 0:t.optimize,O=!0===$||void 0===$?1:$||0,R=null!==(a=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==a?a:h,j=null!==(i=e.uriResolver)&&void 0!==i?i:d.default;return{strictSchema:null===(n=null!==(s=e.strictSchema)&&void 0!==s?s:T)||void 0===n||n,strictNumbers:null===(l=null!==(o=e.strictNumbers)&&void 0!==o?o:T)||void 0===l||l,strictTypes:null!==(u=null!==(c=e.strictTypes)&&void 0!==c?c:T)&&void 0!==u?u:"log",strictTuples:null!==(m=null!==(p=e.strictTuples)&&void 0!==p?p:T)&&void 0!==m?m:"log",strictRequired:null!==(v=null!==(f=e.strictRequired)&&void 0!==f?f:T)&&void 0!==v&&v,code:e.code?{...e.code,optimize:O,regExp:R}:{optimize:O,regExp:R},loopRequired:null!==(g=e.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(x=e.messages)||void 0===x||x,inlineRefs:null===(_=e.inlineRefs)||void 0===_||_,schemaId:null!==(w=e.schemaId)&&void 0!==w?w:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(S=e.validateSchema)||void 0===S||S,validateFormats:null===(k=e.validateFormats)||void 0===k||k,unicodeRegExp:null===(P=e.unicodeRegExp)||void 0===P||P,int32range:null===(C=e.int32range)||void 0===C||C,uriResolver:j}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};let{es5:t,lines:r}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:f,es5:t,lines:r}),this.logger=function(e){if(!1===e)return P;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);let a=e.validateFormats;e.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,v,e,"NOT SUPPORTED"),x.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=k.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:t,schemaId:r}=this.opts,a=p;"id"===r&&(a={...p},a.id=a.$id,delete a.$id),t&&e&&this.addMetaSchema(a,a[r],!1)}defaultMeta(){let{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);let a=r(t);return"$async"in r||(this.errors=r.errors),a}compile(e,t){let r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return a.call(this,e,t);async function a(e,t){await s.call(this,e.$schema);let r=this._addSchema(e,t);return r.validate||n.call(this,r)}async function s(e){e&&!this.getSchema(e)&&await a.call(this,{$ref:e},!0)}async function n(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof i.default))throw t;return o.call(this,t),await l.call(this,t.missingSchema),n.call(this,e)}}function o({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){let r=await c.call(this,e);this.refs[e]||await s.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){let t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,a=this.opts.validateSchema){if(Array.isArray(e)){for(let t of e)this.addSchema(t,void 0,r,a);return this}let i;if("object"==typeof e){let{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,l.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,a,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let a=this.validate(r,e);if(!a&&t){let e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return a}getSchema(e){let t;for(;"string"==typeof(t=_.call(this,e));)e=t;if(void 0===t){let{schemaId:r}=this.opts,a=new n.SchemaEnv({schema:{},schemaId:r});if(t=n.resolveSchema.call(this,a,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let t=_.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,l.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,r,t),!t)return(0,u.eachItem)(r,e=>$.call(this,e)),this;R.call(this,t);let a={...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)};return(0,u.eachItem)(r,0===a.type.length?e=>$.call(this,e,a):e=>a.type.forEach(t=>$.call(this,e,a,t))),this}getKeyword(e){let t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){let{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(let r of t.rules){let t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){let r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let a of t){let t=a.split("/").slice(1),i=e;for(let e of t)i=i[e];for(let e in r){let t=r[e];if("object"!=typeof t)continue;let{$data:a}=t.definition,s=i[e];a&&s&&(i[e]=I(s))}}return e}_removeAllSchemas(e,t){for(let r in e){let a=e[r];(!t||t.test(r))&&("string"==typeof a?delete e[r]:a&&!a.meta&&(this._cache.delete(a.schema),delete e[r]))}}_addSchema(e,t,r,a=this.opts.validateSchema,i=this.opts.addUsedSchema){let s,{schemaId:o}=this.opts;if("object"==typeof e)s=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;r=(0,l.normalizeId)(s||r);let u=l.getSchemaRefs.call(this,e,r);return c=new n.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:r,localRefs:u}),this._cache.set(c.schema,c),i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=c),a&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):n.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let t=this.opts;this.opts=this._metaOpts;try{n.compileSchema.call(this,e)}finally{this.opts=t}}}function x(e,t,r,a="error"){for(let i in e){let s=i;s in t&&this.logger[a](`${r}: option ${i}. ${e[s]}`)}}function _(e){return e=(0,l.normalizeId)(e),this.schemas[e]||this.refs[e]}function w(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function E(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function k(){let e={...this.opts};for(let t of m)delete e[t];return e}b.ValidationError=a.default,b.MissingRefError=i.default,e.default=b;var P={log(){},warn(){},error(){}};var C=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){let{RULES:r}=this;if((0,u.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!C.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function $(e,t,r){var a;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,n=i?s.post:s.rules.find(({type:e})=>e===r);if(n||(n={type:r,rules:[]},s.rules.push(n)),s.keywords[e]=!0,!t)return;let o={keyword:e,definition:{...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)}};t.before?O.call(this,n,o,t.before):n.rules.push(o),s.all[e]=o,null===(a=t.implements)||void 0===a||a.forEach(e=>this.addKeyword(e))}function O(e,t,r){let a=e.rules.findIndex(e=>e.keyword===r);a>=0?e.rules.splice(a,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function R(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=I(t)),e.validateSchema=this.compile(t,!0))}var j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(e){return{anyOf:[e,j]}}}),zF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};e.default=t}),BF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.callRef=e.getValidate=void 0;var t=ou(),r=fn(),a=Ze(),i=Es(),s=zm(),n=st(),o={keyword:"$ref",schemaType:"string",code(e){let{gen:r,schema:i,it:n}=e,{baseId:o,schemaEnv:u,validateName:p,opts:d,self:h}=n,{root:m}=u;if(("#"===i||"#/"===i)&&o===m.baseId)return function(){if(u===m)return c(e,p,u,u.$async);let t=r.scopeValue("root",{ref:m});return c(e,a._`${t}.validate`,m,m.$async)}();let f=s.resolveRef.call(h,m,o,i);if(void 0===f)throw new t.default(n.opts.uriResolver,o,i);return f instanceof s.SchemaEnv?function(t){let r=l(e,t);c(e,r,t,t.$async)}(f):function(t){let s=r.scopeValue("schema",!0===d.code.source?{ref:t,code:(0,a.stringify)(t)}:{ref:t}),n=r.name("valid"),o=e.subschema({schema:t,dataTypes:[],schemaPath:a.nil,topSchemaRef:s,errSchemaPath:i},n);e.mergeEvaluated(o),e.ok(n)}(f)}};function l(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):a._`${r.scopeValue("wrapper",{ref:t})}.validate`}function c(e,t,s,o){let{gen:l,it:c}=e,{allErrors:u,schemaEnv:p,opts:d}=c,h=d.passContext?i.default.this:a.nil;function m(e){let t=a._`${e}.errors`;l.assign(i.default.vErrors,a._`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`),l.assign(i.default.errors,a._`${i.default.vErrors}.length`)}function f(e){var t;if(!c.opts.unevaluated)return;let r=null===(t=s?.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=n.mergeEvaluated.props(l,r.props,c.props));else{let t=l.var("props",a._`${e}.evaluated.props`);c.props=n.mergeEvaluated.props(l,t,c.props,a.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=n.mergeEvaluated.items(l,r.items,c.items));else{let t=l.var("items",a._`${e}.evaluated.items`);c.items=n.mergeEvaluated.items(l,t,c.items,a.Name)}}o?function(){if(!p.$async)throw new Error("async schema referenced by sync schema");let i=l.let("valid");l.try(()=>{l.code(a._`await ${(0,r.callValidateCode)(e,t,h)}`),f(t),u||l.assign(i,!0)},e=>{l.if(a._`!(${e} instanceof ${c.ValidationError})`,()=>l.throw(e)),m(e),u||l.assign(i,!1)}),e.ok(i)}():e.result((0,r.callValidateCode)(e,t,h),()=>f(t),()=>m(t))}e.getValidate=l,e.callRef=c,e.default=o}),HF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=zF(),r=BF(),a=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,r.default];e.default=a}),VF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=t.operators,a={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:e,schemaCode:r})=>t.str`must be ${a[e].okStr} ${r}`,params:({keyword:e,schemaCode:r})=>t._`{comparison: ${a[e].okStr}, limit: ${r}}`},s={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:i,code(e){let{keyword:r,data:i,schemaCode:s}=e;e.fail$data(t._`${i} ${a[r].fail} ${s} || isNaN(${i})`)}};e.default=s}),ZF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>t.str`must be multiple of ${e}`,params:({schemaCode:e})=>t._`{multipleOf: ${e}}`},code(e){let{gen:r,data:a,schemaCode:i,it:s}=e,n=s.opts.multipleOfPrecision,o=r.let("res"),l=n?t._`Math.abs(Math.round(${o}) - ${o}) > 1e-${n}`:t._`${o} !== parseInt(${o})`;e.fail$data(t._`(${i} === 0 || (${o} = ${a}/${i}, ${l}))`)}};e.default=r}),GF=ge(e=>{function t(e){let t,r=e.length,a=0,i=0;for(;i<r;)a++,t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<r&&(t=e.charCodeAt(i),56320==(64512&t)&&i++);return a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'}),WF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a=GF(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:r}){let a="maxLength"===e?"more":"fewer";return t.str`must NOT have ${a} than ${r} characters`},params:({schemaCode:e})=>t._`{limit: ${e}}`},code(e){let{keyword:i,data:s,schemaCode:n,it:o}=e,l="maxLength"===i?t.operators.GT:t.operators.LT,c=!1===o.opts.unicode?t._`${s}.length`:t._`${(0,r.useFunc)(e.gen,a.default)}(${s})`;e.fail$data(t._`${c} ${l} ${n}`)}};e.default=i}),KF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=fn(),r=Ze(),a={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match pattern "${e}"`,params:({schemaCode:e})=>r._`{pattern: ${e}}`},code(e){let{data:a,$data:i,schema:s,schemaCode:n,it:o}=e,l=o.opts.unicodeRegExp?"u":"",c=i?r._`(new RegExp(${n}, ${l}))`:(0,t.usePattern)(e,s);e.fail$data(r._`!${c}.test(${a})`)}};e.default=a}),JF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:r}){let a="maxProperties"===e?"more":"fewer";return t.str`must NOT have ${a} than ${r} properties`},params:({schemaCode:e})=>t._`{limit: ${e}}`},code(e){let{keyword:r,data:a,schemaCode:i}=e,s="maxProperties"===r?t.operators.GT:t.operators.LT;e.fail$data(t._`Object.keys(${a}).length ${s} ${i}`)}};e.default=r}),XF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=fn(),r=Ze(),a=st(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>r.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>r._`{missingProperty: ${e}}`},code(e){let{gen:i,schema:s,schemaCode:n,data:o,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===s.length)return;let p=s.length>=u.loopRequired;if(c.allErrors?function(){if(p||l)e.block$data(r.nil,d);else for(let r of s)(0,t.checkReportMissingProp)(e,r)}():function(){let a=i.let("missing");if(p||l){let s=i.let("valid",!0);e.block$data(s,()=>function(a,s){e.setParams({missingProperty:a}),i.forOf(a,n,()=>{i.assign(s,(0,t.propertyInData)(i,o,a,u.ownProperties)),i.if((0,r.not)(s),()=>{e.error(),i.break()})},r.nil)}(a,s)),e.ok(s)}else i.if((0,t.checkMissingProp)(e,s,a)),(0,t.reportMissingProp)(e,a),i.else()}(),u.strictRequired){let t=e.parentSchema.properties,{definedProperties:r}=e.it;for(let e of s)if(void 0===t?.[e]&&!r.has(e)){let t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,a.checkStrictMode)(c,t,c.opts.strictRequired)}}function d(){i.forOf("prop",n,r=>{e.setParams({missingProperty:r}),i.if((0,t.noPropertyInData)(i,o,r,u.ownProperties),()=>e.error())})}}};e.default=i}),YF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:r}){let a="maxItems"===e?"more":"fewer";return t.str`must NOT have ${a} than ${r} items`},params:({schemaCode:e})=>t._`{limit: ${e}}`},code(e){let{keyword:r,data:a,schemaCode:i}=e,s="maxItems"===r?t.operators.GT:t.operators.LT;e.fail$data(t._`${a}.length ${s} ${i}`)}};e.default=r}),Bm=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=MS();t.code='require("ajv/dist/runtime/equal").default',e.default=t}),QF=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Vl(),r=Ze(),a=st(),i=Bm(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>r.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>r._`{i: ${e}, j: ${t}}`},code(e){let{gen:s,data:n,$data:o,schema:l,parentSchema:c,schemaCode:u,it:p}=e;if(!o&&!l)return;let d=s.let("valid"),h=c.items?(0,t.getSchemaTypes)(c.items):[];function m(a,i){let o=s.name("item"),l=(0,t.checkDataTypes)(h,o,p.opts.strictNumbers,t.DataType.Wrong),c=s.const("indices",r._`{}`);s.for(r._`;${a}--;`,()=>{s.let(o,r._`${n}[${a}]`),s.if(l,r._`continue`),h.length>1&&s.if(r._`typeof ${o} == "string"`,r._`${o} += "_"`),s.if(r._`typeof ${c}[${o}] == "number"`,()=>{s.assign(i,r._`${c}[${o}]`),e.error(),s.assign(d,!1).break()}).code(r._`${c}[${o}] = ${a}`)})}function f(t,o){let l=(0,a.useFunc)(s,i.default),c=s.name("outer");s.label(c).for(r._`;${t}--;`,()=>s.for(r._`${o} = ${t}; ${o}--;`,()=>s.if(r._`${l}(${n}[${t}], ${n}[${o}])`,()=>{e.error(),s.assign(d,!1).break(c)})))}e.block$data(d,function(){let t=s.let("i",r._`${n}.length`),a=s.let("j");e.setParams({i:t,j:a}),s.assign(d,!0),s.if(r._`${t} > 1`,()=>(h.length>0&&!h.some(e=>"object"===e||"array"===e)?m:f)(t,a))},r._`${u} === false`),e.ok(d)}};e.default=s}),eU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a=Bm(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>t._`{allowedValue: ${e}}`},code(e){let{gen:i,data:s,$data:n,schemaCode:o,schema:l}=e;n||l&&"object"==typeof l?e.fail$data(t._`!${(0,r.useFunc)(i,a.default)}(${s}, ${o})`):e.fail(t._`${l} !== ${s}`)}};e.default=i}),tU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a=Bm(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>t._`{allowedValues: ${e}}`},code(e){let{gen:i,data:s,$data:n,schema:o,schemaCode:l,it:c}=e;if(!n&&0===o.length)throw new Error("enum must have non-empty array");let u,p,d=o.length>=c.opts.loopEnum,h=()=>u??(u=(0,r.useFunc)(i,a.default));if(d||n)p=i.let("valid"),e.block$data(p,function(){i.assign(p,!1),i.forOf("v",l,e=>i.if(t._`${h()}(${s}, ${e})`,()=>i.assign(p,!0).break()))});else{if(!Array.isArray(o))throw new Error("ajv implementation error");let e=i.const("vSchema",l);p=(0,t.or)(...o.map((r,a)=>function(e,r){let a=o[r];return"object"==typeof a&&null!==a?t._`${h()}(${s}, ${e}[${r}])`:t._`${s} === ${a}`}(e,a)))}e.pass(p)}};e.default=i}),rU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=VF(),r=ZF(),a=WF(),i=KF(),s=JF(),n=XF(),o=YF(),l=QF(),c=eU(),u=tU(),p=[t.default,r.default,a.default,i.default,s.default,n.default,o.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c.default,u.default];e.default=p}),jS=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateAdditionalItems=void 0;var t=Ze(),r=st(),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>t.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>t._`{limit: ${e}}`},code(e){let{parentSchema:t,it:a}=e,{items:s}=t;Array.isArray(s)?i(e,s):(0,r.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas')}};function i(e,a){let{gen:i,schema:s,data:n,keyword:o,it:l}=e;l.items=!0;let c=i.const("len",t._`${n}.length`);if(!1===s)e.setParams({len:a.length}),e.pass(t._`${c} <= ${a.length}`);else if("object"==typeof s&&!(0,r.alwaysValidSchema)(l,s)){let s=i.var("valid",t._`${c} <= ${a.length}`);i.if((0,t.not)(s),()=>function(s){i.forRange("i",a.length,c,a=>{e.subschema({keyword:o,dataProp:a,dataPropType:r.Type.Num},s),l.allErrors||i.if((0,t.not)(s),()=>i.break())})}(s)),e.ok(s)}}e.validateAdditionalItems=i,e.default=a}),FS=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateTuple=void 0;var t=Ze(),r=st(),a=fn(),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:i}=e;if(Array.isArray(t))return s(e,"additionalItems",t);i.items=!0,!(0,r.alwaysValidSchema)(i,t)&&e.ok((0,a.validateArray)(e))}};function s(e,a,i=e.schema){let{gen:s,parentSchema:n,data:o,keyword:l,it:c}=e;(function(e){let{opts:t,errSchemaPath:s}=c,n=i.length,o=n===e.minItems&&(n===e.maxItems||!1===e[a]);if(t.strictTuples&&!o){let e=`"${l}" is ${n}-tuple, but minItems or maxItems/${a} are not specified or different at path "${s}"`;(0,r.checkStrictMode)(c,e,t.strictTuples)}})(n),c.opts.unevaluated&&i.length&&!0!==c.items&&(c.items=r.mergeEvaluated.items(s,i.length,c.items));let u=s.name("valid"),p=s.const("len",t._`${o}.length`);i.forEach((a,i)=>{(0,r.alwaysValidSchema)(c,a)||(s.if(t._`${p} > ${i}`,()=>e.subschema({keyword:l,schemaProp:i,dataProp:i},u)),e.ok(u))})}e.validateTuple=s,e.default=i}),nU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=FS(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,t.validateTuple)(e,"items")};e.default=r}),sU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a=fn(),i=jS(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>t.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>t._`{limit: ${e}}`},code(e){let{schema:t,parentSchema:s,it:n}=e,{prefixItems:o}=s;n.items=!0,!(0,r.alwaysValidSchema)(n,t)&&(o?(0,i.validateAdditionalItems)(e,o):e.ok((0,a.validateArray)(e)))}};e.default=s}),aU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:r}})=>void 0===r?t.str`must contain at least ${e} valid item(s)`:t.str`must contain at least ${e} and no more than ${r} valid item(s)`,params:({params:{min:e,max:r}})=>void 0===r?t._`{minContains: ${e}}`:t._`{minContains: ${e}, maxContains: ${r}}`},code(e){let a,i,{gen:s,schema:n,parentSchema:o,data:l,it:c}=e,{minContains:u,maxContains:p}=o;c.opts.next?(a=void 0===u?1:u,i=p):a=1;let d=s.const("len",t._`${l}.length`);if(e.setParams({min:a,max:i}),void 0===i&&0===a)return void(0,r.checkStrictMode)(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==i&&a>i)return(0,r.checkStrictMode)(c,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,r.alwaysValidSchema)(c,n)){let r=t._`${d} >= ${a}`;return void 0!==i&&(r=t._`${r} && ${d} <= ${i}`),void e.pass(r)}c.items=!0;let h=s.name("valid");function m(){let e=s.name("_valid"),r=s.let("count",0);f(e,()=>s.if(e,()=>function(e){s.code(t._`${e}++`),void 0===i?s.if(t._`${e} >= ${a}`,()=>s.assign(h,!0).break()):(s.if(t._`${e} > ${i}`,()=>s.assign(h,!1).break()),1===a?s.assign(h,!0):s.if(t._`${e} >= ${a}`,()=>s.assign(h,!0)))}(r)))}function f(t,a){s.forRange("i",0,d,i=>{e.subschema({keyword:"contains",dataProp:i,dataPropType:r.Type.Num,compositeRule:!0},t),a()})}void 0===i&&1===a?f(h,()=>s.if(h,()=>s.break())):0===a?(s.let(h,!0),void 0!==i&&s.if(t._`${l}.length > 0`,m)):(s.let(h,!1),m()),e.result(h,()=>e.reset())}};e.default=a}),iU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;var t=Ze(),r=st(),a=fn();e.error={message:({params:{property:e,depsCount:r,deps:a}})=>{let i=1===r?"property":"properties";return t.str`must have ${i} ${a} when property ${e} is present`},params:({params:{property:e,depsCount:r,deps:a,missingProperty:i}})=>t._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${r},
    deps: ${a}}`};var i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){let[t,r]=function({schema:e}){let t={},r={};for(let a in e){if("__proto__"===a)continue;(Array.isArray(e[a])?t:r)[a]=e[a]}return[t,r]}(e);s(e,t),n(e,r)}};function s(e,r=e.schema){let{gen:i,data:s,it:n}=e;if(0===Object.keys(r).length)return;let o=i.let("missing");for(let l in r){let c=r[l];if(0===c.length)continue;let u=(0,a.propertyInData)(i,s,l,n.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),n.allErrors?i.if(u,()=>{for(let t of c)(0,a.checkReportMissingProp)(e,t)}):(i.if(t._`${u} && (${(0,a.checkMissingProp)(e,c,o)})`),(0,a.reportMissingProp)(e,o),i.else())}}function n(e,t=e.schema){let{gen:i,data:s,keyword:n,it:o}=e,l=i.name("valid");for(let c in t)(0,r.alwaysValidSchema)(o,t[c])||(i.if((0,a.propertyInData)(i,s,c,o.opts.ownProperties),()=>{let t=e.subschema({keyword:n,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>i.var(l,!0)),e.ok(l))}e.validatePropertyDeps=s,e.validateSchemaDeps=n,e.default=i}),oU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>t._`{propertyName: ${e.propertyName}}`},code(e){let{gen:a,schema:i,data:s,it:n}=e;if((0,r.alwaysValidSchema)(n,i))return;let o=a.name("valid");a.forIn("key",s,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},o),a.if((0,t.not)(o),()=>{e.error(!0),n.allErrors||a.break()})}),e.ok(o)}};e.default=a}),US=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=fn(),r=Ze(),a=Es(),i=st(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>r._`{additionalProperty: ${e.additionalProperty}}`},code(e){let{gen:s,schema:n,parentSchema:o,data:l,errsCount:c,it:u}=e;if(!c)throw new Error("ajv implementation error");let{allErrors:p,opts:d}=u;if(u.props=!0,"all"!==d.removeAdditional&&(0,i.alwaysValidSchema)(u,n))return;let h=(0,t.allSchemaProperties)(o.properties),m=(0,t.allSchemaProperties)(o.patternProperties);function f(e){s.code(r._`delete ${l}[${e}]`)}function v(t){if("all"===d.removeAdditional||d.removeAdditional&&!1===n)f(t);else{if(!1===n)return e.setParams({additionalProperty:t}),e.error(),void(p||s.break());if("object"==typeof n&&!(0,i.alwaysValidSchema)(u,n)){let a=s.name("valid");"failing"===d.removeAdditional?(g(t,a,!1),s.if((0,r.not)(a),()=>{e.reset(),f(t)})):(g(t,a),p||s.if((0,r.not)(a),()=>s.break()))}}}function g(t,r,a){let s={keyword:"additionalProperties",dataProp:t,dataPropType:i.Type.Str};!1===a&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}s.forIn("key",l,a=>{h.length||m.length?s.if(function(a){let n;if(h.length>8){let e=(0,i.schemaRefOrVal)(u,o.properties,"properties");n=(0,t.isOwnProperty)(s,e,a)}else n=h.length?(0,r.or)(...h.map(e=>r._`${a} === ${e}`)):r.nil;return m.length&&(n=(0,r.or)(n,...m.map(i=>r._`${(0,t.usePattern)(e,i)}.test(${a})`))),(0,r.not)(n)}(a),()=>v(a)):v(a)}),e.ok(r._`${c} === ${a.default.errors}`)}};e.default=s}),cU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=iu(),r=fn(),a=st(),i=US(),s={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:s,schema:n,parentSchema:o,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===o.additionalProperties&&i.default.code(new t.KeywordCxt(c,i.default,"additionalProperties"));let u=(0,r.allSchemaProperties)(n);for(let e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=a.mergeEvaluated.props(s,(0,a.toHash)(u),c.props));let p=u.filter(e=>!(0,a.alwaysValidSchema)(c,n[e]));if(0===p.length)return;let d=s.name("valid");for(let t of p)h(t)?m(t):(s.if((0,r.propertyInData)(s,l,t,c.opts.ownProperties)),m(t),c.allErrors||s.else().var(d,!0),s.endIf()),e.it.definedProperties.add(t),e.ok(d);function h(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function m(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}};e.default=s}),lU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=fn(),r=Ze(),a=st(),i=st(),s={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:s,schema:n,data:o,parentSchema:l,it:c}=e,{opts:u}=c,p=(0,t.allSchemaProperties)(n),d=p.filter(e=>(0,a.alwaysValidSchema)(c,n[e]));if(0===p.length||d.length===p.length&&(!c.opts.unevaluated||!0===c.props))return;let h=u.strictSchema&&!u.allowMatchingProperties&&l.properties,m=s.name("valid");!0!==c.props&&!(c.props instanceof r.Name)&&(c.props=(0,i.evaluatedPropsToName)(s,c.props));let{props:f}=c;function v(e){for(let t in h)new RegExp(e).test(t)&&(0,a.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(a){s.forIn("key",o,n=>{s.if(r._`${(0,t.usePattern)(e,a)}.test(${n})`,()=>{let t=d.includes(a);t||e.subschema({keyword:"patternProperties",schemaProp:a,dataProp:n,dataPropType:i.Type.Str},m),c.opts.unevaluated&&!0!==f?s.assign(r._`${f}[${n}]`,!0):!t&&!c.allErrors&&s.if((0,r.not)(m),()=>s.break())})})}!function(){for(let e of p)h&&v(e),c.allErrors?g(e):(s.var(m,!0),g(e),s.if(m))}()}};e.default=s}),uU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=st(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:r,schema:a,it:i}=e;if((0,t.alwaysValidSchema)(i,a))return void e.fail();let s=r.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};e.default=r}),dU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:fn().validateUnion,error:{message:"must match a schema in anyOf"}};e.default=t}),pU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>t._`{passingSchemas: ${e.passing}}`},code(e){let{gen:a,schema:i,parentSchema:s,it:n}=e;if(!Array.isArray(i))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let o=i,l=a.let("valid",!1),c=a.let("passing",null),u=a.name("_valid");e.setParams({passing:c}),a.block(function(){o.forEach((i,s)=>{let o;(0,r.alwaysValidSchema)(n,i)?a.var(u,!0):o=e.subschema({keyword:"oneOf",schemaProp:s,compositeRule:!0},u),s>0&&a.if(t._`${u} && ${l}`).assign(l,!1).assign(c,t._`[${c}, ${s}]`).else(),a.if(u,()=>{a.assign(l,!0),a.assign(c,s),o&&e.mergeEvaluated(o,t.Name)})})}),e.result(l,()=>e.reset(),()=>e.error(!0))}};e.default=a}),fU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=st(),r={keyword:"allOf",schemaType:"array",code(e){let{gen:r,schema:a,it:i}=e;if(!Array.isArray(a))throw new Error("ajv implementation error");let s=r.name("valid");a.forEach((r,a)=>{if((0,t.alwaysValidSchema)(i,r))return;let n=e.subschema({keyword:"allOf",schemaProp:a},s);e.ok(s),e.mergeEvaluated(n)})}};e.default=r}),mU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=st(),a={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>t.str`must match "${e.ifClause}" schema`,params:({params:e})=>t._`{failingKeyword: ${e.ifClause}}`},code(e){let{gen:a,parentSchema:s,it:n}=e;void 0===s.then&&void 0===s.else&&(0,r.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let o=i(n,"then"),l=i(n,"else");if(!o&&!l)return;let c=a.let("valid",!0),u=a.name("_valid");if(function(){let t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),o&&l){let t=a.let("ifClause");e.setParams({ifClause:t}),a.if(u,p("then",t),p("else",t))}else o?a.if(u,p("then")):a.if((0,t.not)(u),p("else"));function p(r,i){return()=>{let s=e.subschema({keyword:r},u);a.assign(c,u),e.mergeValidEvaluated(s,c),i?a.assign(i,t._`${r}`):e.setParams({ifClause:r})}}e.pass(c,()=>e.error(!0))}};function i(e,t){let a=e.schema[t];return void 0!==a&&!(0,r.alwaysValidSchema)(e,a)}e.default=a}),hU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=st(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:r,it:a}){void 0===r.if&&(0,t.checkStrictMode)(a,`"${e}" without "if" is ignored`)}};e.default=r}),gU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=jS(),r=nU(),a=FS(),i=sU(),s=aU(),n=iU(),o=oU(),l=US(),c=cU(),u=lU(),p=uU(),d=dU(),h=pU(),m=fU(),f=mU(),v=hU();e.default=function(e=!1){let g=[p.default,d.default,h.default,m.default,f.default,v.default,o.default,l.default,n.default,c.default,u.default];return e?g.push(r.default,i.default):g.push(t.default,a.default),g.push(s.default),g}}),vU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>t.str`must match format "${e}"`,params:({schemaCode:e})=>t._`{format: ${e}}`},code(e,r){let{gen:a,data:i,$data:s,schema:n,schemaCode:o,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:p,self:d}=l;c.validateFormats&&(s?function(){let s=a.scopeValue("formats",{ref:d.formats,code:c.code.formats}),n=a.const("fDef",t._`${s}[${o}]`),l=a.let("fType"),u=a.let("format");a.if(t._`typeof ${n} == "object" && !(${n} instanceof RegExp)`,()=>a.assign(l,t._`${n}.type || "string"`).assign(u,t._`${n}.validate`),()=>a.assign(l,t._`"string"`).assign(u,n)),e.fail$data((0,t.or)(!1===c.strictSchema?t.nil:t._`${o} && !${u}`,function(){let e=p.$async?t._`(${n}.async ? await ${u}(${i}) : ${u}(${i}))`:t._`${u}(${i})`,a=t._`(typeof ${u} == "function" ? ${e} : ${u}.test(${i}))`;return t._`${u} && ${u} !== true && ${l} === ${r} && !${a}`}()))}():function(){let s=d.formats[n];if(!s)return void function(){if(!1===c.strictSchema)return void d.logger.warn(e());throw new Error(e());function e(){return`unknown format "${n}" ignored in schema at path "${u}"`}}();if(!0===s)return;let[o,l,h]=function(e){let r=e instanceof RegExp?(0,t.regexpCode)(e):c.code.formats?t._`${c.code.formats}${(0,t.getProperty)(n)}`:void 0,i=a.scopeValue("formats",{key:n,ref:e,code:r});return"object"!=typeof e||e instanceof RegExp?["string",e,i]:[e.type||"string",e.validate,t._`${i}.validate`]}(s);o===r&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!p.$async)throw new Error("async format in sync schema");return t._`await ${h}(${i})`}return"function"==typeof l?t._`${h}(${i})`:t._`${h}.test(${i})`}())}())}};e.default=r}),yU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=[vU().default];e.default=t}),bU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contentVocabulary=e.metadataVocabulary=void 0,e.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],e.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),_U=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=HF(),r=rU(),a=gU(),i=yU(),s=bU(),n=[t.default,r.default,(0,a.default)(),i.default,s.metadataVocabulary,s.contentVocabulary];e.default=n}),xU=ge(e=>{var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,(r=t||(e.DiscrError=t={})).Tag="tag",r.Mapping="mapping"}),wU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ze(),r=xU(),a=zm(),i=ou(),s=st(),n={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===r.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:r,tagName:a}})=>t._`{error: ${e}, tag: ${a}, tagValue: ${r}}`},code(e){let{gen:n,data:o,schema:l,parentSchema:c,it:u}=e,{oneOf:p}=c;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");let d=l.propertyName;if("string"!=typeof d)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!p)throw new Error("discriminator: requires oneOf keyword");let h=n.let("valid",!1),m=n.const("tag",t._`${o}${(0,t.getProperty)(d)}`);function f(r){let a=n.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},a);return e.mergeEvaluated(i,t.Name),a}n.if(t._`typeof ${m} == "string"`,()=>function(){let o=function(){var e;let t={},r=o(c),n=!0;for(let t=0;t<p.length;t++){let c=p[t];if(c?.$ref&&!(0,s.schemaHasRulesButRef)(c,u.self.RULES)){let e=c.$ref;if(c=a.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,e),c instanceof a.SchemaEnv&&(c=c.schema),void 0===c)throw new i.default(u.opts.uriResolver,u.baseId,e)}let h=null===(e=c?.properties)||void 0===e?void 0:e[d];if("object"!=typeof h)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${d}"`);n=n&&(r||o(c)),l(h,t)}if(!n)throw new Error(`discriminator: "${d}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(d)}function l(e,t){if(e.const)h(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${d}" must have "const" or "enum"`);for(let r of e.enum)h(r,t)}}function h(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${d}" values must be unique strings`);t[e]=r}}();n.if(!1);for(let e in o)n.elseIf(t._`${m} === ${e}`),n.assign(h,f(o[e]));n.else(),e.error(!1,{discrError:r.DiscrError.Mapping,tag:m,tagName:d}),n.endIf()}(),()=>e.error(!1,{discrError:r.DiscrError.Tag,tag:m,tagName:d})),e.ok(h)}};e.default=n}),SU=ge((e,t)=>{t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),qS=ge((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;var r=qF(),a=_U(),i=wU(),s=SU(),n=["/properties"],o="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(s,n):s;this.addMetaSchema(e,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv=l,t.exports=e=l,t.exports.Ajv=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var c=iu();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var u=Ze();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var p=qm();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var d=ou();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}),EU=ge(e=>{function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(i,s),time:t(o(!0),l),"date-time":t(p(!0),d),"iso-time":t(o(),c),"iso-date-time":t(p(),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&f.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(x.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return v.lastIndex=0,v.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=y&&e>=g}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:b},double:{type:"number",validate:b},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);var r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(e){let t=r.exec(e);if(!t)return!1;let i=+t[1],s=+t[2],n=+t[3];return s>=1&&s<=12&&n>=1&&n<=(2===s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(i)?29:a[s])}function s(e,t){if(e&&t)return e>t?1:e<t?-1:0}var n=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function o(e){return function(t){let r=n.exec(t);if(!r)return!1;let a=+r[1],i=+r[2],s=+r[3],o=r[4],l="-"===r[5]?-1:1,c=+(r[6]||0),u=+(r[7]||0);if(c>23||u>59||e&&!o)return!1;if(a<=23&&i<=59&&s<60)return!0;let p=i-u*l,d=a-c*l-(p<0?1:0);return(23===d||-1===d)&&(59===p||-1===p)&&s<61}}function l(e,t){if(!e||!t)return;let r=new Date("2020-01-01T"+e).valueOf(),a=new Date("2020-01-01T"+t).valueOf();return r&&a?r-a:void 0}function c(e,t){if(!e||!t)return;let r=n.exec(e),a=n.exec(t);return r&&a?(e=r[1]+r[2]+r[3])>(t=a[1]+a[2]+a[3])?1:e<t?-1:0:void 0}var u=/t|\s/i;function p(e){let t=o(e);return function(e){let r=e.split(u);return 2===r.length&&i(r[0])&&t(r[1])}}function d(e,t){if(!e||!t)return;let r=new Date(e).valueOf(),a=new Date(t).valueOf();return r&&a?r-a:void 0}function h(e,t){if(!e||!t)return;let[r,a]=e.split(u),[i,n]=t.split(u),o=s(r,i);return void 0!==o?o||l(a,n):void 0}var m=/\/|:/,f=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;var g=-(2**31),y=2**31-1;function b(){return!0}var x=/[^\\]\\Z/}),TU=ge(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;var t=qS(),r=Ze(),a=r.operators,i={formatMaximum:{okStr:"<=",ok:a.LTE,fail:a.GT},formatMinimum:{okStr:">=",ok:a.GTE,fail:a.LT},formatExclusiveMaximum:{okStr:"<",ok:a.LT,fail:a.GTE},formatExclusiveMinimum:{okStr:">",ok:a.GT,fail:a.LTE}},s={message:({keyword:e,schemaCode:t})=>r.str`should be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${i[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:s,code(e){let{gen:a,data:s,schemaCode:n,keyword:o,it:l}=e,{opts:c,self:u}=l;if(!c.validateFormats)return;let p=new t.KeywordCxt(l,u.RULES.all.format.definition,"format");function d(e){return r._`${e}.compare(${s}, ${n}) ${i[o].fail} 0`}p.$data?function(){let t=a.scopeValue("formats",{ref:u.formats,code:c.code.formats}),i=a.const("fmt",r._`${t}[${p.schemaCode}]`);e.fail$data((0,r.or)(r._`typeof ${i} != "object"`,r._`${i} instanceof RegExp`,r._`typeof ${i}.compare != "function"`,d(i)))}():function(){let t=p.schema,i=u.formats[t];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error(`"${o}": format "${t}" does not define "compare" function`);let s=a.scopeValue("formats",{key:t,ref:i,code:c.code.formats?r._`${c.code.formats}${(0,r.getProperty)(t)}`:void 0});e.fail$data(d(s))}()},dependencies:["format"]};e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}),CU=ge((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=EU(),a=TU(),i=Ze(),s=new i.Name("fullFormats"),n=new i.Name("fastFormats"),o=(e,t={keywords:!0})=>{if(Array.isArray(t))return l(e,t,r.fullFormats,s),e;let[i,o]="fast"===t.mode?[r.fastFormats,n]:[r.fullFormats,s];return l(e,t.formats||r.formatNames,i,o),t.keywords&&(0,a.default)(e),e};function l(e,t,r,a){var s,n;null!==(s=(n=e.opts.code).formats)&&void 0!==s||(n.formats=i._`require("ajv-formats/dist/formats").${a}`);for(let a of t)e.addFormat(a,r[a])}o.get=(e,t="full")=>{let a=("fast"===t?r.fastFormats:r.fullFormats)[e];if(!a)throw new Error(`Unknown format "${e}"`);return a},t.exports=e=o,Object.defineProperty(e,"__esModule",{value:!0}),e.default=o}),PU=50;function HS(e=PU){let t=new AbortController;return(0,BS.setMaxListeners)(e,t.signal),t}var kU="object"==typeof global&&global&&global.Object===Object&&global,RU=kU,OU="object"==typeof self&&self&&self.Object===Object&&self,IU=RU||OU||Function("return this")(),Hm=IU,$U=Hm.Symbol,Zl=$U,WS=Object.prototype,AU=WS.hasOwnProperty,NU=WS.toString,Mo=Zl?Zl.toStringTag:void 0;function DU(e){var t=AU.call(e,Mo),r=e[Mo];try{e[Mo]=void 0;var a=!0}catch{}var i=NU.call(e);return a&&(t?e[Mo]=r:delete e[Mo]),i}var LU=DU,MU=Object.prototype,jU=MU.toString;function FU(e){return jU.call(e)}var UU=FU,qU="[object Null]",zU="[object Undefined]",Zw=Zl?Zl.toStringTag:void 0;function BU(e){return null==e?void 0===e?zU:qU:Zw&&Zw in Object(e)?LU(e):UU(e)}var HU=BU;function VU(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var KS=VU,ZU="[object AsyncFunction]",GU="[object Function]",WU="[object GeneratorFunction]",KU="[object Proxy]";function JU(e){if(!KS(e))return!1;var t=HU(e);return t==GU||t==WU||t==ZU||t==KU}var XU=JU,YU=Hm["__core-js_shared__"],Xf=YU,Gw=function(){var e=/[^.]+$/.exec(Xf&&Xf.keys&&Xf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function QU(e){return!!Gw&&Gw in e}var eq=QU,tq=Function.prototype,rq=tq.toString;function nq(e){if(null!=e){try{return rq.call(e)}catch{}try{return e+""}catch{}}return""}var sq=nq,aq=/[\\^$.*+?()[\]{}|]/g,iq=/^\[object .+?Constructor\]$/,oq=Function.prototype,cq=Object.prototype,lq=oq.toString,uq=cq.hasOwnProperty,dq=RegExp("^"+lq.call(uq).replace(aq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pq(e){return!(!KS(e)||eq(e))&&(XU(e)?dq:iq).test(sq(e))}var fq=pq;function mq(e,t){return e?.[t]}var hq=mq;function gq(e,t){var r=hq(e,t);return fq(r)?r:void 0}var JS=gq,vq=JS(Object,"create"),Vo=vq;function yq(){this.__data__=Vo?Vo(null):{},this.size=0}var bq=yq;function _q(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xq=_q,wq="__lodash_hash_undefined__",Sq=Object.prototype,Eq=Sq.hasOwnProperty;function Tq(e){var t=this.__data__;if(Vo){var r=t[e];return r===wq?void 0:r}return Eq.call(t,e)?t[e]:void 0}var Cq=Tq,Pq=Object.prototype,kq=Pq.hasOwnProperty;function Rq(e){var t=this.__data__;return Vo?void 0!==t[e]:kq.call(t,e)}var Oq=Rq,Iq="__lodash_hash_undefined__";function $q(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vo&&void 0===t?Iq:t,this}var Aq=$q;function bi(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}bi.prototype.clear=bq,bi.prototype.delete=xq,bi.prototype.get=Cq,bi.prototype.has=Oq,bi.prototype.set=Aq;var Ww=bi;function Nq(){this.__data__=[],this.size=0}var Dq=Nq;function Lq(e,t){return e===t||e!=e&&t!=t}var Mq=Lq;function jq(e,t){for(var r=e.length;r--;)if(Mq(e[r][0],t))return r;return-1}var cu=jq,Fq=Array.prototype,Uq=Fq.splice;function qq(e){var t=this.__data__,r=cu(t,e);return!(r<0)&&(r==t.length-1?t.pop():Uq.call(t,r,1),--this.size,!0)}var zq=qq;function Bq(e){var t=this.__data__,r=cu(t,e);return r<0?void 0:t[r][1]}var Hq=Bq;function Vq(e){return cu(this.__data__,e)>-1}var Zq=Vq;function Gq(e,t){var r=this.__data__,a=cu(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var Wq=Gq;function _i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}_i.prototype.clear=Dq,_i.prototype.delete=zq,_i.prototype.get=Hq,_i.prototype.has=Zq,_i.prototype.set=Wq;var Kq=_i,Jq=JS(Hm,"Map"),Xq=Jq;function Yq(){this.size=0,this.__data__={hash:new Ww,map:new(Xq||Kq),string:new Ww}}var Qq=Yq;function e2(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var t2=e2;function r2(e,t){var r=e.__data__;return t2(t)?r["string"==typeof t?"string":"hash"]:r.map}var lu=r2;function n2(e){var t=lu(this,e).delete(e);return this.size-=t?1:0,t}var s2=n2;function a2(e){return lu(this,e).get(e)}var i2=a2;function o2(e){return lu(this,e).has(e)}var c2=o2;function l2(e,t){var r=lu(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var u2=l2;function xi(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}xi.prototype.clear=Qq,xi.prototype.delete=s2,xi.prototype.get=i2,xi.prototype.has=c2,xi.prototype.set=u2;var XS=xi,d2="Expected a function";function Vm(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(d2);var r=function(){var a=arguments,i=t?t.apply(this,a):a[0],s=r.cache;if(s.has(i))return s.get(i);var n=e.apply(this,a);return r.cache=s.set(i,n)||s,n};return r.cache=new(Vm.Cache||XS),r}Vm.Cache=XS;var ac=Vm,Kw=2e3;function p2(e){for(let t=0;t<e.length;t+=Kw)process.stderr.write(e.substring(t,t+Kw))}var f2=ac(e=>{if(!e||""===e.trim())return null;let t=e.split(",").map(e=>e.trim()).filter(Boolean);if(0===t.length)return null;let r=t.some(e=>e.startsWith("!")),a=t.some(e=>!e.startsWith("!"));if(r&&a)return null;let i=t.map(e=>e.replace(/^!/,"").toLowerCase());return{include:r?[]:i,exclude:r?i:[],isExclusive:r}});function m2(e){let t=[],r=e.match(/^MCP server ["']([^"']+)["']/);if(r&&r[1])t.push("mcp"),t.push(r[1].toLowerCase());else{let r=e.match(/^([^:[]+):/);r&&r[1]&&t.push(r[1].trim().toLowerCase())}let a=e.match(/^\[([^\]]+)]/);a&&a[1]&&t.push(a[1].trim().toLowerCase()),e.toLowerCase().includes("statsig event:")&&t.push("statsig");let i=e.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(i&&i[1]){let e=i[1].trim().toLowerCase();e.length<30&&!e.includes(" ")&&t.push(e)}return Array.from(new Set(t))}function h2(e,t){return!t||0!==e.length&&(t.isExclusive?!e.some(e=>t.exclude.includes(e)):e.some(e=>t.include.includes(e)))}function g2(e,t){if(!t)return!0;return h2(m2(e),t)}function e0(){return process.env.CLAUDE_CONFIG_DIR??(0,YS.join)((0,QS.homedir)(),".claude")}function Jw(e){if(!e)return!1;if("boolean"==typeof e)return e;let t=e.toLowerCase().trim();return["1","true","yes","on"].includes(t)}var v2={name:"BASH_MAX_OUTPUT_LENGTH",default:3e4,validate:e=>{if(!e)return{effective:3e4,status:"valid"};let t=parseInt(e,10);return isNaN(t)||t<=0?{effective:3e4,status:"invalid",message:`Invalid value "${e}" (using default: 30000)`}:t>15e4?{effective:15e4,status:"capped",message:`Capped from ${t} to 150000`}:{effective:t,status:"valid"}}},y2={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32e3,validate:e=>{if(!e)return{effective:32e3,status:"valid"};let t=parseInt(e,10);return isNaN(t)||t<=0?{effective:32e3,status:"invalid",message:`Invalid value "${e}" (using default: 32000)`}:t>64e3?{effective:64e3,status:"capped",message:`Capped from ${t} to 64000`}:{effective:t,status:"valid"}}};function b2(){let e="";return typeof process<"u"&&"function"==typeof process.cwd&&(e=(0,r0.realpathSync)((0,t0.cwd)())),{originalCwd:e,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:e,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:(0,n0.randomUUID)(),loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[v2,y2],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],sessionBypassPermissionsMode:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map}}var _2=b2();function x2(){return _2.sessionId}function w2({writeFn:e,flushIntervalMs:t=1e3,maxBufferSize:r=100,immediateMode:a=!1}){let i=[],s=null;function n(){0!==i.length&&(e(i.join("")),i=[],s&&(clearTimeout(s),s=null))}return{write(o){a?e(o):(i.push(o),s||(s=setTimeout(n,t)),i.length>=r&&n())},flush:n,dispose(){n()}}}var Xw=new Set;function S2(e){return Xw.add(e),()=>Xw.delete(e)}var E2=ac(()=>Jw(process.env.DEBUG)||Jw(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||s0()||process.argv.some(e=>e.startsWith("--debug="))),T2=ac(()=>{let e=process.argv.find(e=>e.startsWith("--debug="));if(!e)return null;let t=e.substring(8);return f2(t)}),s0=ac(()=>process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e"));function C2(e){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;return g2(e,T2())}var P2=!1,Fl=null;function k2(){return Fl||(Fl=w2({writeFn:e=>{let t=a0();Zn().existsSync((0,Qs.dirname)(t))||Zn().mkdirSync((0,Qs.dirname)(t)),Zn().appendFileSync(t,e),R2()},flushIntervalMs:1e3,maxBufferSize:100,immediateMode:E2()}),S2(async()=>Fl?.dispose())),Fl}function bs(e,{level:t}={level:"debug"}){if(!C2(e))return;P2&&e.includes("\n")&&(e=JSON.stringify(e));let r=`${(new Date).toISOString()} [${t.toUpperCase()}] ${e.trim()}\n`;s0()?p2(r):k2().write(r)}function a0(){return process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??(0,Qs.join)(e0(),"debug",`${x2()}.txt`)}var R2=ac(()=>{if("--ripgrep"!==process.argv[2])try{let e=a0(),t=(0,Qs.dirname)(e),r=(0,Qs.join)(t,"latest");if(Zn().existsSync(t)||Zn().mkdirSync(t),Zn().existsSync(r))try{Zn().unlinkSync(r)}catch{}Zn().symlinkSync(e,r)}catch{}}),O2=5;function jt(e,t){let r=performance.now();try{return t()}finally{let t=performance.now()-r;t>O2&&bs(`[SLOW OPERATION DETECTED] fs.${e} (${t.toFixed(1)}ms)`)}}var I2={cwd:()=>process.cwd(),existsSync:e=>jt("existsSync",()=>Re.existsSync(e)),stat:async e=>(0,GS.stat)(e),statSync:e=>jt("statSync",()=>Re.statSync(e)),lstatSync:e=>jt("lstatSync",()=>Re.lstatSync(e)),readFileSync:(e,t)=>jt("readFileSync",()=>Re.readFileSync(e,{encoding:t.encoding})),readFileBytesSync:e=>jt("readFileBytesSync",()=>Re.readFileSync(e)),readSync:(e,t)=>jt("readSync",()=>{let r;try{r=Re.openSync(e,"r");let a=Buffer.alloc(t.length);return{buffer:a,bytesRead:Re.readSync(r,a,0,t.length,0)}}finally{r&&Re.closeSync(r)}}),writeFileSync:(e,t,r)=>jt("writeFileSync",()=>{let a,i=Re.existsSync(e);if(!r.flush){let a={encoding:r.encoding};return i?void 0!==r.mode&&(a.mode=r.mode):a.mode=r.mode??384,void Re.writeFileSync(e,t,a)}try{let s=i?r.mode:r.mode??384;a=Re.openSync(e,"w",s),Re.writeFileSync(a,t,{encoding:r.encoding}),Re.fsyncSync(a)}finally{a&&Re.closeSync(a)}}),appendFileSync:(e,t,r)=>jt("appendFileSync",()=>{if(Re.existsSync(e))Re.appendFileSync(e,t);else{let a=r?.mode??384,i=Re.openSync(e,"a",a);try{Re.appendFileSync(i,t)}finally{Re.closeSync(i)}}}),copyFileSync:(e,t)=>jt("copyFileSync",()=>Re.copyFileSync(e,t)),unlinkSync:e=>jt("unlinkSync",()=>Re.unlinkSync(e)),renameSync:(e,t)=>jt("renameSync",()=>Re.renameSync(e,t)),linkSync:(e,t)=>jt("linkSync",()=>Re.linkSync(e,t)),symlinkSync:(e,t)=>jt("symlinkSync",()=>Re.symlinkSync(e,t)),readlinkSync:e=>jt("readlinkSync",()=>Re.readlinkSync(e)),realpathSync:e=>jt("realpathSync",()=>Re.realpathSync(e)),mkdirSync:e=>jt("mkdirSync",()=>{Re.existsSync(e)||Re.mkdirSync(e,{recursive:!0,mode:448})}),readdirSync:e=>jt("readdirSync",()=>Re.readdirSync(e,{withFileTypes:!0})),readdirStringSync:e=>jt("readdirStringSync",()=>Re.readdirSync(e)),isDirEmptySync(e){return jt("isDirEmptySync",()=>0===this.readdirSync(e).length)},rmdirSync:e=>jt("rmdirSync",()=>Re.rmdirSync(e)),rmSync:(e,t)=>jt("rmSync",()=>Re.rmSync(e,t)),createWriteStream:e=>Re.createWriteStream(e)},$2=I2;function Zn(){return $2}var Ys=class extends Error{};function i0(){return void 0!==process.versions.bun}var Ul=null,Yw=!1;function A2(){if(Yw)return Ul;if(Yw=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let e=(0,om.join)(e0(),"debug");return Ul=(0,om.join)(e,`sdk-${(0,o0.randomUUID)()}.txt`),(0,wi.existsSync)(e)||(0,wi.mkdirSync)(e,{recursive:!0}),process.stderr.write(`SDK debug logs: ${Ul}\n`),Ul}function Js(e){let t=A2();if(!t)return;let r=`${(new Date).toISOString()} ${e}\n`;(0,wi.appendFileSync)(t,r)}function N2(e,t){let r={...e};if(t){let e={sandbox:t};if(r.settings)try{e={...JSON.parse(r.settings),sandbox:t}}catch{}r.settings=JSON.stringify(e)}return r}var cm=class{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(e){this.options=e,this.abortController=e.abortController||HS(),this.initialize()}getDefaultExecutable(){return i0()?"bun":"node"}spawnLocalProcess(e){let{command:t,args:r,cwd:a,env:i,signal:s}=e,n=i.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",o=(0,VS.spawn)(t,r,{cwd:a,stdio:["pipe","pipe",n],signal:s,env:i,windowsHide:!0});return(i.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)&&o.stderr.on("data",e=>{let t=e.toString();Js(t),this.options.stderr&&this.options.stderr(t)}),{stdin:o.stdin,stdout:o.stdout,get killed(){return o.killed},get exitCode(){return o.exitCode},kill:o.kill.bind(o),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o)}}initialize(){try{let{additionalDirectories:e=[],betas:t,cwd:r,executable:a=this.getDefaultExecutable(),executableArgs:i=[],extraArgs:s={},pathToClaudeCodeExecutable:n,env:o={...process.env},maxThinkingTokens:l,maxTurns:c,maxBudgetUsd:u,model:p,fallbackModel:d,jsonSchema:h,permissionMode:m,allowDangerouslySkipPermissions:f,permissionPromptToolName:v,continueConversation:g,resume:y,settingSources:b,allowedTools:x=[],disallowedTools:_=[],tools:w,mcpServers:E,strictMcpConfig:S,canUseTool:k,includePartialMessages:P,plugins:C,sandbox:T}=this.options,$=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(void 0!==l&&$.push("--max-thinking-tokens",l.toString()),c&&$.push("--max-turns",c.toString()),void 0!==u&&$.push("--max-budget-usd",u.toString()),p&&$.push("--model",p),t&&t.length>0&&$.push("--betas",t.join(",")),h&&$.push("--json-schema",JSON.stringify(h)),o.DEBUG_CLAUDE_AGENT_SDK&&$.push("--debug-to-stderr"),k){if(v)throw new Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");$.push("--permission-prompt-tool","stdio")}else v&&$.push("--permission-prompt-tool",v);if(g&&$.push("--continue"),y&&$.push("--resume",y),x.length>0&&$.push("--allowedTools",x.join(",")),_.length>0&&$.push("--disallowedTools",_.join(",")),void 0!==w&&(Array.isArray(w)?0===w.length?$.push("--tools",""):$.push("--tools",w.join(",")):$.push("--tools","default")),E&&Object.keys(E).length>0&&$.push("--mcp-config",JSON.stringify({mcpServers:E})),b&&$.push("--setting-sources",b.join(",")),S&&$.push("--strict-mcp-config"),m&&$.push("--permission-mode",m),f&&$.push("--allow-dangerously-skip-permissions"),d){if(p&&d===p)throw new Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");$.push("--fallback-model",d)}P&&$.push("--include-partial-messages");for(let t of e)$.push("--add-dir",t);if(C&&C.length>0)for(let e of C){if("local"!==e.type)throw new Error(`Unsupported plugin type: ${e.type}`);$.push("--plugin-dir",e.path)}this.options.forkSession&&$.push("--fork-session"),this.options.resumeSessionAt&&$.push("--resume-session-at",this.options.resumeSessionAt),!1===this.options.persistSession&&$.push("--no-session-persistence");let O=N2(s??{},T);for(let[e,t]of Object.entries(O))null===t?$.push(`--${e}`):$.push(`--${e}`,t);o.CLAUDE_CODE_ENTRYPOINT||(o.CLAUDE_CODE_ENTRYPOINT="sdk-ts"),delete o.NODE_OPTIONS,o.DEBUG_CLAUDE_AGENT_SDK?o.DEBUG="1":delete o.DEBUG;let R=D2(n),j=R?n:a,I=R?[...i,...$]:[...i,n,...$],A={command:j,args:I,cwd:r,env:o,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)Js(`Spawning Claude Code (custom): ${j} ${I.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(A);else{if(!Zn().existsSync(n)){let e=R?`Claude Code native binary not found at ${n}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${n}. Is options.pathToClaudeCodeExecutable set?`;throw new ReferenceError(e)}Js(`Spawning Claude Code: ${j} ${I.join(" ")}`),this.process=this.spawnLocalProcess(A)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let N=()=>{this.process&&!this.process.killed&&this.process.kill("SIGTERM")};this.processExitHandler=N,this.abortHandler=N,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",e=>{this.ready=!1,this.abortController.signal.aborted?this.exitError=new Ys("Claude Code process aborted by user"):(this.exitError=new Error(`Failed to spawn Claude Code process: ${e.message}`),Js(this.exitError.message))}),this.process.on("exit",(e,t)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new Ys("Claude Code process aborted by user");else{let r=this.getProcessExitError(e,t);r&&(this.exitError=r,Js(r.message))}}),this.ready=!0}catch(e){throw this.ready=!1,e}}getProcessExitError(e,t){return 0!==e&&null!==e?new Error(`Claude Code process exited with code ${e}`):t?new Error(`Claude Code process terminated by signal ${t}`):void 0}write(e){if(this.abortController.signal.aborted)throw new Ys("Operation aborted");if(!this.ready||!this.processStdin)throw new Error("ProcessTransport is not ready for writing");if(this.process?.killed||null!==this.process?.exitCode)throw new Error("Cannot write to terminated process");if(this.exitError)throw new Error(`Cannot write to process that exited with error: ${this.exitError.message}`);Js(`[ProcessTransport] Writing to stdin: ${e.substring(0,100)}`);try{this.processStdin.write(e)||Js("[ProcessTransport] Write buffer full, data queued")}catch(e){throw this.ready=!1,new Error(`Failed to write to process stdin: ${e.message}`)}}close(){this.processStdin&&(this.processStdin.end(),this.processStdin=void 0),this.abortHandler&&(this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0);for(let{handler:e}of this.exitListeners)this.process?.off("exit",e);this.exitListeners=[],this.process&&!this.process.killed&&(this.process.kill("SIGTERM"),setTimeout(()=>{this.process&&!this.process.killed&&this.process.kill("SIGKILL")},5e3)),this.ready=!1,this.processExitHandler&&(process.off("exit",this.processExitHandler),this.processExitHandler=void 0)}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw new Error("ProcessTransport output stream not available");let e=(0,ZS.createInterface)({input:this.processStdout});try{for await(let t of e)t.trim()&&(yield JSON.parse(t));await this.waitForExit()}catch(e){throw e}finally{e.close()}}endInput(){this.processStdin&&this.processStdin.end()}getInputStream(){return this.processStdin}onExit(e){if(!this.process)return()=>{};let t=(t,r)=>{let a=this.getProcessExitError(t,r);e(a)};return this.process.on("exit",t),this.exitListeners.push({callback:e,handler:t}),()=>{this.process&&this.process.off("exit",t);let e=this.exitListeners.findIndex(e=>e.handler===t);-1!==e&&this.exitListeners.splice(e,1)}}async waitForExit(){if(this.process){if(null===this.process.exitCode&&!this.process.killed)return new Promise((e,t)=>{let r=(r,a)=>{if(this.abortController.signal.aborted)return void t(new Ys("Operation aborted"));let i=this.getProcessExitError(r,a);i?t(i):e()};this.process.once("exit",r);let a=e=>{this.process.off("exit",r),t(e)};this.process.once("error",a),this.process.once("exit",()=>{this.process.off("error",a)})});if(this.exitError)throw this.exitError}else if(this.exitError)throw this.exitError}};function D2(e){return![".js",".mjs",".tsx",".ts",".jsx"].some(t=>e.endsWith(t))}var rt,Qw,lm=class{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(e){this.returned=e}[Symbol.asyncIterator](){if(this.started)throw new Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}},um=class{sendMcpMessage;isClosed=!1;constructor(e){this.sendMcpMessage=e}onclose;onerror;onmessage;async start(){}async send(e){if(this.isClosed)throw new Error("Transport is closed");this.sendMcpMessage(e)}async close(){this.isClosed||(this.isClosed=!0,this.onclose?.())}},dm=class{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new lm;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||void 0!==this.hooks&&Object.keys(this.hooks).length>0||void 0!==this.canUseTool}constructor(e,t,r,a,i,s=new Map,n,o){this.transport=e,this.isSingleUserTurn=t,this.canUseTool=r,this.hooks=a,this.abortController=i,this.jsonSchema=n,this.initConfig=o;for(let[e,t]of s)this.connectSdkMcpServer(e,t);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(e){this.inputStream.error(e)}cleanup(e){if(!this.cleanupPerformed){this.cleanupPerformed=!0;try{this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let e of this.sdkMcpTransports.values())try{e.close()}catch{}this.sdkMcpTransports.clear(),e?this.inputStream.error(e):this.inputStream.done()}catch{}}}next(...[e]){return this.sdkMessages.next(e)}return(e){return this.sdkMessages.return(e)}throw(e){return this.sdkMessages.throw(e)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let e of this.transport.readMessages()){if("control_response"===e.type){let t=this.pendingControlResponses.get(e.response.request_id);t&&t(e.response);continue}"control_request"!==e.type?"control_cancel_request"!==e.type?"keep_alive"!==e.type&&("result"===e.type&&(this.firstResultReceived=!0,this.firstResultReceivedResolve&&this.firstResultReceivedResolve(),this.isSingleUserTurn&&(bs("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput())),this.inputStream.enqueue(e)):this.handleControlCancelRequest(e):this.handleControlRequest(e)}this.firstResultReceivedResolve&&this.firstResultReceivedResolve(),this.inputStream.done(),this.cleanup()}catch(e){this.firstResultReceivedResolve&&this.firstResultReceivedResolve(),this.inputStream.error(e),this.cleanup(e)}}async handleControlRequest(e){let t=new AbortController;this.cancelControllers.set(e.request_id,t);try{let r=await this.processControlRequest(e,t.signal),a={type:"control_response",response:{subtype:"success",request_id:e.request_id,response:r}};await Promise.resolve(this.transport.write(JSON.stringify(a)+"\n"))}catch(t){let r={type:"control_response",response:{subtype:"error",request_id:e.request_id,error:t.message||String(t)}};await Promise.resolve(this.transport.write(JSON.stringify(r)+"\n"))}finally{this.cancelControllers.delete(e.request_id)}}handleControlCancelRequest(e){let t=this.cancelControllers.get(e.request_id);t&&(t.abort(),this.cancelControllers.delete(e.request_id))}async processControlRequest(e,t){if("can_use_tool"===e.request.subtype){if(!this.canUseTool)throw new Error("canUseTool callback is not provided.");return{...await this.canUseTool(e.request.tool_name,e.request.input,{signal:t,suggestions:e.request.permission_suggestions,blockedPath:e.request.blocked_path,decisionReason:e.request.decision_reason,toolUseID:e.request.tool_use_id,agentID:e.request.agent_id}),toolUseID:e.request.tool_use_id}}if("hook_callback"===e.request.subtype)return await this.handleHookCallbacks(e.request.callback_id,e.request.input,e.request.tool_use_id,t);if("mcp_message"===e.request.subtype){let t=e.request,r=this.sdkMcpTransports.get(t.server_name);if(!r)throw new Error(`SDK MCP server not found: ${t.server_name}`);return"method"in t.message&&"id"in t.message&&null!==t.message.id?{mcp_response:await this.handleMcpControlRequest(t.server_name,t,r)}:(r.onmessage&&r.onmessage(t.message),{mcp_response:{jsonrpc:"2.0",result:{},id:0}})}throw new Error("Unsupported control request subtype: "+e.request.subtype)}async*readSdkMessages(){for await(let e of this.inputStream)yield e}async initialize(){let e;if(this.hooks){e={};for(let[t,r]of Object.entries(this.hooks))r.length>0&&(e[t]=r.map(e=>{let t=[];for(let r of e.hooks){let e="hook_"+this.nextCallbackId++;this.hookCallbacks.set(e,r),t.push(e)}return{matcher:e.matcher,hookCallbackIds:t,timeout:e.timeout}}))}let t={subtype:"initialize",hooks:e,sdkMcpServers:this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents};return(await this.request(t)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(e){await this.request({subtype:"set_permission_mode",mode:e})}async setModel(e){await this.request({subtype:"set_model",model:e})}async setMaxThinkingTokens(e){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:e})}async rewindFiles(e){await this.request({subtype:"rewind_files",user_message_id:e})}async processPendingPermissionRequests(e){for(let t of e)"can_use_tool"===t.request.subtype&&this.handleControlRequest(t).catch(()=>{})}request(e){let t=Math.random().toString(36).substring(2,15),r={request_id:t,type:"control_request",request:e};return new Promise((e,a)=>{this.pendingControlResponses.set(t,t=>{"success"===t.subtype?e(t):(a(new Error(t.error)),t.pending_permission_requests&&this.processPendingPermissionRequests(t.pending_permission_requests))}),Promise.resolve(this.transport.write(JSON.stringify(r)+"\n"))})}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async setMcpServers(e){let t={},r={};for(let[a,i]of Object.entries(e))"sdk"===i.type&&"instance"in i?t[a]=i.instance:r[a]=i;let a=new Set(this.sdkMcpServerInstances.keys()),i=new Set(Object.keys(t));for(let e of a)i.has(e)||await this.disconnectSdkMcpServer(e);for(let[e,r]of Object.entries(t))a.has(e)||this.connectSdkMcpServer(e,r);let s={};for(let e of Object.keys(t))s[e]={type:"sdk",name:e};return(await this.request({subtype:"mcp_set_servers",servers:{...r,...s}})).response}async accountInfo(){return(await this.initialization).account}async streamInput(e){bs("[Query.streamInput] Starting to process input stream");try{let t=0;for await(let r of e){if(t++,bs(`[Query.streamInput] Processing message ${t}: ${r.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(JSON.stringify(r)+"\n"))}bs(`[Query.streamInput] Finished processing ${t} messages from input stream`),this.hasBidirectionalNeeds()&&(bs("[Query.streamInput] Has bidirectional needs, waiting for first result"),await this.waitForFirstResult()),bs("[Query] Calling transport.endInput() to close stdin to CLI process"),this.transport.endInput()}catch(e){if(!(e instanceof Ys))throw e}}waitForFirstResult(){return this.firstResultReceived?(bs("[Query.waitForFirstResult] Result already received, returning immediately"),Promise.resolve()):new Promise(e=>{this.abortController?.signal.aborted?e():(this.abortController?.signal.addEventListener("abort",()=>e(),{once:!0}),this.firstResultReceivedResolve=e)})}handleHookCallbacks(e,t,r,a){let i=this.hookCallbacks.get(e);if(!i)throw new Error(`No hook callback found for ID: ${e}`);return i(t,r,{signal:a})}connectSdkMcpServer(e,t){let r=new um(t=>this.sendMcpServerMessageToCli(e,t));this.sdkMcpTransports.set(e,r),this.sdkMcpServerInstances.set(e,t),t.connect(r)}async disconnectSdkMcpServer(e){let t=this.sdkMcpTransports.get(e);t&&(await t.close(),this.sdkMcpTransports.delete(e)),this.sdkMcpServerInstances.delete(e)}sendMcpServerMessageToCli(e,t){if("id"in t&&null!==t.id&&void 0!==t.id){let r=`${e}:${t.id}`,a=this.pendingMcpResponses.get(r);if(a)return a.resolve(t),void this.pendingMcpResponses.delete(r)}let r={type:"control_request",request_id:(0,c0.randomUUID)(),request:{subtype:"mcp_message",server_name:e,message:t}};this.transport.write(JSON.stringify(r)+"\n")}handleMcpControlRequest(e,t,r){let a=`${e}:${"id"in t.message?t.message.id:null}`;return new Promise((e,i)=>{let s=()=>{this.pendingMcpResponses.delete(a)};if(this.pendingMcpResponses.set(a,{resolve:t=>{s(),e(t)},reject:e=>{s(),i(e)}}),!r.onmessage)return s(),void i(new Error("No message handler registered"));r.onmessage(t.message)})}};!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),a={};for(let e of r)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(rt||(rt={})),(Qw||(Qw={})).mergeShapes=(e,t)=>({...e,...t});var xe=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_s=e=>{switch(typeof e){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return Number.isNaN(e)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(e)?xe.array:null===e?xe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?xe.promise:typeof Map<"u"&&e instanceof Map?xe.map:typeof Set<"u"&&e instanceof Set?xe.set:typeof Date<"u"&&e instanceof Date?xe.date:xe.object;default:return xe.unknown}},ne=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Gr=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,a=0;for(;a<i.path.length;){let r=i.path[a];a===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};Gr.create=e=>new Gr(e);var L2=(e,t)=>{let r;switch(e.code){case ne.invalid_type:r=e.received===xe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ne.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,rt.jsonStringifyReplacer)}`;break;case ne.unrecognized_keys:r=`Unrecognized key(s) in object: ${rt.joinValues(e.keys,", ")}`;break;case ne.invalid_union:r="Invalid input";break;case ne.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${rt.joinValues(e.options)}`;break;case ne.invalid_enum_value:r=`Invalid enum value. Expected ${rt.joinValues(e.options)}, received '${e.received}'`;break;case ne.invalid_arguments:r="Invalid function arguments";break;case ne.invalid_return_type:r="Invalid function return type";break;case ne.invalid_date:r="Invalid date";break;case ne.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:rt.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ne.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ne.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ne.custom:r="Invalid input";break;case ne.invalid_intersection_types:r="Intersection results could not be merged";break;case ne.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ne.not_finite:r="Number must be finite";break;default:r=t.defaultError,rt.assertNever(e)}return{message:r}},Zo=L2,M2=Zo;function pm(){return M2}var fm=e=>{let{data:t,path:r,errorMaps:a,issueData:i}=e,s=[...r,...i.path||[]],n={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="",l=a.filter(e=>!!e).slice().reverse();for(let e of l)o=e(n,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function me(e,t){let r=pm(),a=fm({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Zo?void 0:Zo].filter(e=>!!e)});e.common.issues.push(a)}var Se,fr=class e{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return De;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(t,r){let a=[];for(let e of r){let t=await e.key,r=await e.value;a.push({key:t,value:r})}return e.mergeObjectSync(t,a)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:i}=a;if("aborted"===t.status||"aborted"===i.status)return De;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(typeof i.value<"u"||a.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}},De=Object.freeze({status:"aborted"}),Uo=e=>({status:"dirty",value:e}),vr=e=>({status:"valid",value:e}),eS=e=>"aborted"===e.status,tS=e=>"dirty"===e.status,ai=e=>"valid"===e.status,Gl=e=>typeof Promise<"u"&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(Se||(Se={}));var Wr=class{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},rS=(e,t)=>{if(ai(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Gr(e.common.issues);return this._error=t,this._error}}};function ze(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:i}=e;if(t&&(r||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:typeof i.data>"u"?{message:s??a??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}var Yf,Ge=class{get description(){return this._def.description}_getType(e){return _s(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:_s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fr,ctx:{common:e.parent.common,data:e.data,parsedType:_s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Gl(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_s(e)},a=this._parseSync({data:e,path:r.path,parent:r});return rS(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_s(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return ai(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>ai(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_s(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Gl(a)?a:Promise.resolve(a));return rS(r,i)}refine(e,t){let r=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{let i=e(t),s=()=>a.addIssue({code:ne.custom,...r(t)});return typeof Promise<"u"&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new un({schema:this,typeName:ie.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ln.create(this,this._def)}nullable(){return Wn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ss.create(this)}promise(){return ea.create(this,this._def)}or(e){return li.create([this,e],this._def)}and(e){return ui.create(this,e,this._def)}transform(e){return new un({...ze(this._def),schema:this,typeName:ie.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new hi({...ze(this._def),innerType:this,defaultValue:t,typeName:ie.ZodDefault})}brand(){return new Wl({typeName:ie.ZodBranded,type:this,...ze(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new gi({...ze(this._def),innerType:this,catchValue:t,typeName:ie.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Kl.create(this,e)}readonly(){return vi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},j2=/^c[^\s-]{8,}$/i,F2=/^[0-9a-z]+$/,U2=/^[0-9A-HJKMNP-TV-Z]{26}$/i,q2=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,z2=/^[a-z0-9_-]{21}$/i,B2=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,H2=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,V2=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Z2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",G2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,W2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K2=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,J2=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,X2=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Y2=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,l0="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Q2=new RegExp(`^${l0}$`);function u0(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function ez(e){return new RegExp(`^${u0(e)}$`)}function tz(e){let t=`${l0}T${u0(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function rz(e,t){return!(("v4"!==t&&t||!G2.test(e))&&("v6"!==t&&t||!K2.test(e)))}function nz(e,t){if(!B2.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(a));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function sz(e,t){return!(("v4"!==t&&t||!W2.test(e))&&("v6"!==t&&t||!J2.test(e)))}var ii=class e extends Ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.string,received:t.parsedType}),De}let t,r=new fr;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("max"===a.kind)e.data.length>a.value&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("length"===a.kind){let i=e.data.length>a.value,s=e.data.length<a.value;(i||s)&&(t=this._getOrReturnCtx(e,t),i?me(t,{code:ne.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&me(t,{code:ne.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if("email"===a.kind)V2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"email",code:ne.invalid_string,message:a.message}),r.dirty());else if("emoji"===a.kind)Yf||(Yf=new RegExp(Z2,"u")),Yf.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"emoji",code:ne.invalid_string,message:a.message}),r.dirty());else if("uuid"===a.kind)q2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"uuid",code:ne.invalid_string,message:a.message}),r.dirty());else if("nanoid"===a.kind)z2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"nanoid",code:ne.invalid_string,message:a.message}),r.dirty());else if("cuid"===a.kind)j2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"cuid",code:ne.invalid_string,message:a.message}),r.dirty());else if("cuid2"===a.kind)F2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"cuid2",code:ne.invalid_string,message:a.message}),r.dirty());else if("ulid"===a.kind)U2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"ulid",code:ne.invalid_string,message:a.message}),r.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),me(t,{validation:"url",code:ne.invalid_string,message:a.message}),r.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"regex",code:ne.invalid_string,message:a.message}),r.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):"datetime"===a.kind?tz(a).test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:"datetime",message:a.message}),r.dirty()):"date"===a.kind?Q2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:"date",message:a.message}),r.dirty()):"time"===a.kind?ez(a).test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_string,validation:"time",message:a.message}),r.dirty()):"duration"===a.kind?H2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"duration",code:ne.invalid_string,message:a.message}),r.dirty()):"ip"===a.kind?rz(e.data,a.version)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"ip",code:ne.invalid_string,message:a.message}),r.dirty()):"jwt"===a.kind?nz(e.data,a.alg)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"jwt",code:ne.invalid_string,message:a.message}),r.dirty()):"cidr"===a.kind?sz(e.data,a.version)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"cidr",code:ne.invalid_string,message:a.message}),r.dirty()):"base64"===a.kind?X2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"base64",code:ne.invalid_string,message:a.message}),r.dirty()):"base64url"===a.kind?Y2.test(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{validation:"base64url",code:ne.invalid_string,message:a.message}),r.dirty()):rt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:ne.invalid_string,...Se.errToObj(r)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...Se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Se.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Se.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Se.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Se.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Se.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Se.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Se.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Se.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Se.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Se.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Se.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Se.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Se.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Se.errToObj(t)})}nonempty(e){return this.min(1,Se.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function az(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=r>a?r:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}ii.create=e=>new ii({checks:[],typeName:ie.ZodString,coerce:e?.coerce??!1,...ze(e)});var Go=class e extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.number,received:t.parsedType}),De}let t,r=new fr;for(let a of this._def.checks)"int"===a.kind?rt.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==az(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),me(t,{code:ne.not_finite,message:a.message}),r.dirty()):rt.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(t,r,a,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Se.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:Se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Se.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&rt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Go.create=e=>new Go({checks:[],typeName:ie.ZodNumber,coerce:e?.coerce||!1,...ze(e)});var Wo=class e extends Ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xe.bigint)return this._getInvalidInput(e);let t,r=new fr;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):rt.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.bigint,received:t.parsedType}),De}gte(e,t){return this.setLimit("min",e,!0,Se.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Se.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Se.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Se.toString(t))}setLimit(t,r,a,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:Se.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Se.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Se.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};Wo.create=e=>new Wo({checks:[],typeName:ie.ZodBigInt,coerce:e?.coerce??!1,...ze(e)});var Ko=class extends Ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.boolean,received:t.parsedType}),De}return vr(e.data)}};Ko.create=e=>new Ko({typeName:ie.ZodBoolean,coerce:e?.coerce||!1,...ze(e)});var Jo=class e extends Ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.date,received:t.parsedType}),De}if(Number.isNaN(e.data.getTime())){return me(this._getOrReturnCtx(e),{code:ne.invalid_date}),De}let t,r=new fr;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(t=this._getOrReturnCtx(e,t),me(t,{code:ne.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):rt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Se.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Se.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};Jo.create=e=>new Jo({checks:[],coerce:e?.coerce||!1,typeName:ie.ZodDate,...ze(e)});var Xo=class extends Ge{_parse(e){if(this._getType(e)!==xe.symbol){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.symbol,received:t.parsedType}),De}return vr(e.data)}};Xo.create=e=>new Xo({typeName:ie.ZodSymbol,...ze(e)});var oi=class extends Ge{_parse(e){if(this._getType(e)!==xe.undefined){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.undefined,received:t.parsedType}),De}return vr(e.data)}};oi.create=e=>new oi({typeName:ie.ZodUndefined,...ze(e)});var ci=class extends Ge{_parse(e){if(this._getType(e)!==xe.null){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.null,received:t.parsedType}),De}return vr(e.data)}};ci.create=e=>new ci({typeName:ie.ZodNull,...ze(e)});var Yo=class extends Ge{constructor(){super(...arguments),this._any=!0}_parse(e){return vr(e.data)}};Yo.create=e=>new Yo({typeName:ie.ZodAny,...ze(e)});var ws=class extends Ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return vr(e.data)}};ws.create=e=>new ws({typeName:ie.ZodUnknown,...ze(e)});var kn=class extends Ge{_parse(e){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.never,received:t.parsedType}),De}};kn.create=e=>new kn({typeName:ie.ZodNever,...ze(e)});var Qo=class extends Ge{_parse(e){if(this._getType(e)!==xe.undefined){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.void,received:t.parsedType}),De}return vr(e.data)}};Qo.create=e=>new Qo({typeName:ie.ZodVoid,...ze(e)});var Ss=class e extends Ge{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==xe.array)return me(t,{code:ne.invalid_type,expected:xe.array,received:t.parsedType}),De;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(me(t,{code:e?ne.too_big:ne.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(me(t,{code:ne.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(me(t,{code:ne.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new Wr(t,e,t.path,r)))).then(e=>fr.mergeArray(r,e));let i=[...t.data].map((e,r)=>a.type._parseSync(new Wr(t,e,t.path,r)));return fr.mergeArray(r,i)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:Se.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:Se.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:Se.toString(r)}})}nonempty(e){return this.min(1,e)}};function ri(e){if(e instanceof Lr){let t={};for(let r in e.shape){let a=e.shape[r];t[r]=ln.create(ri(a))}return new Lr({...e._def,shape:()=>t})}return e instanceof Ss?new Ss({...e._def,type:ri(e.element)}):e instanceof ln?ln.create(ri(e.unwrap())):e instanceof Wn?Wn.create(ri(e.unwrap())):e instanceof Gn?Gn.create(e.items.map(e=>ri(e))):e}Ss.create=(e,t)=>new Ss({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ie.ZodArray,...ze(t)});var Lr=class e extends Ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=rt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==xe.object){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.object,received:t.parsedType}),De}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof kn&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let n=[];for(let e of i){let t=a[e],i=r.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new Wr(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof kn){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)n.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(me(r,{code:ne.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new Wr(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of n){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>fr.mergeObjectSync(t,e)):fr.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(t){return Se.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,r)=>{let a=this._def.errorMap?.(e,r).message??r.defaultError;return"unrecognized_keys"===e.code?{message:Se.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ie.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let e of rt.objectKeys(t))t[e]&&this.shape[e]&&(r[e]=this.shape[e]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let e of rt.objectKeys(this.shape))t[e]||(r[e]=this.shape[e]);return new e({...this._def,shape:()=>r})}deepPartial(){return ri(this)}partial(t){let r={};for(let e of rt.objectKeys(this.shape)){let a=this.shape[e];t&&!t[e]?r[e]=a:r[e]=a.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let e of rt.objectKeys(this.shape))if(t&&!t[e])r[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof ln;)t=t._def.innerType;r[e]=t}return new e({...this._def,shape:()=>r})}keyof(){return d0(rt.objectKeys(this.shape))}};Lr.create=(e,t)=>new Lr({shape:()=>e,unknownKeys:"strip",catchall:kn.create(),typeName:ie.ZodObject,...ze(t)}),Lr.strictCreate=(e,t)=>new Lr({shape:()=>e,unknownKeys:"strict",catchall:kn.create(),typeName:ie.ZodObject,...ze(t)}),Lr.lazycreate=(e,t)=>new Lr({shape:e,unknownKeys:"strip",catchall:kn.create(),typeName:ie.ZodObject,...ze(t)});var li=class extends Ge{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new Gr(e.ctx.common.issues));return me(t,{code:ne.invalid_union,unionErrors:r}),De});{let e,a=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"===s.status&&!e&&(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=a.map(e=>new Gr(e));return me(t,{code:ne.invalid_union,unionErrors:i}),De}}get options(){return this._def.options}};li.create=(e,t)=>new li({options:e,typeName:ie.ZodUnion,...ze(t)});var Hn=e=>e instanceof di?Hn(e.schema):e instanceof un?Hn(e.innerType()):e instanceof pi?[e.value]:e instanceof fi?e.options:e instanceof mi?rt.objectValues(e.enum):e instanceof hi?Hn(e._def.innerType):e instanceof oi?[void 0]:e instanceof ci?[null]:e instanceof ln?[void 0,...Hn(e.unwrap())]:e instanceof Wn?[null,...Hn(e.unwrap())]:e instanceof Wl||e instanceof vi?Hn(e.unwrap()):e instanceof gi?Hn(e._def.innerType):[],mm=class e extends Ge{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==xe.object)return me(t,{code:ne.invalid_type,expected:xe.object,received:t.parsedType}),De;let r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(me(t,{code:ne.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),De)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,a){let i=new Map;for(let e of r){let r=Hn(e.shape[t]);if(!r.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of r){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,e)}}return new e({typeName:ie.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...ze(a)})}};function hm(e,t){let r=_s(e),a=_s(t);if(e===t)return{valid:!0,data:e};if(r===xe.object&&a===xe.object){let r=rt.objectKeys(t),a=rt.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of a){let a=hm(e[r],t[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r===xe.array&&a===xe.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let a=0;a<e.length;a++){let i=hm(e[a],t[a]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===xe.date&&a===xe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var ui=class extends Ge{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(eS(e)||eS(a))return De;let i=hm(e.value,a.value);return i.valid?((tS(e)||tS(a))&&t.dirty(),{status:t.value,value:i.data}):(me(r,{code:ne.invalid_intersection_types}),De)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};ui.create=(e,t,r)=>new ui({left:e,right:t,typeName:ie.ZodIntersection,...ze(r)});var Gn=class e extends Ge{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.array)return me(r,{code:ne.invalid_type,expected:xe.array,received:r.parsedType}),De;if(r.data.length<this._def.items.length)return me(r,{code:ne.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),De;!this._def.rest&&r.data.length>this._def.items.length&&(me(r,{code:ne.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new Wr(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>fr.mergeArray(t,e)):fr.mergeArray(t,a)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Gn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Gn({items:e,typeName:ie.ZodTuple,rest:null,...ze(t)})};var gm=class e extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.object)return me(r,{code:ne.invalid_type,expected:xe.object,received:r.parsedType}),De;let a=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:i._parse(new Wr(r,e,r.path,e)),value:s._parse(new Wr(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?fr.mergeObjectAsync(t,a):fr.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(t,r,a){return new e(r instanceof Ge?{keyType:t,valueType:r,typeName:ie.ZodRecord,...ze(a)}:{keyType:ii.create(),valueType:t,typeName:ie.ZodRecord,...ze(r)})}},ec=class extends Ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.map)return me(r,{code:ne.invalid_type,expected:xe.map,received:r.parsedType}),De;let a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new Wr(r,e,r.path,[s,"key"])),value:i._parse(new Wr(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,i=await r.value;if("aborted"===a.status||"aborted"===i.status)return De;("dirty"===a.status||"dirty"===i.status)&&t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,i=r.value;if("aborted"===a.status||"aborted"===i.status)return De;("dirty"===a.status||"dirty"===i.status)&&t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}};ec.create=(e,t,r)=>new ec({valueType:t,keyType:e,typeName:ie.ZodMap,...ze(r)});var tc=class e extends Ge{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.set)return me(r,{code:ne.invalid_type,expected:xe.set,received:r.parsedType}),De;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(me(r,{code:ne.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(me(r,{code:ne.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return De;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let n=[...r.data.values()].map((e,t)=>i._parse(new Wr(r,e,r.path,t)));return r.common.async?Promise.all(n).then(e=>s(e)):s(n)}min(t,r){return new e({...this._def,minSize:{value:t,message:Se.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:Se.toString(r)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};tc.create=(e,t)=>new tc({valueType:e,minSize:null,maxSize:null,typeName:ie.ZodSet,...ze(t)});var vm=class e extends Ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==xe.function)return me(t,{code:ne.invalid_type,expected:xe.function,received:t.parsedType}),De;function r(e,r){return fm({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,pm(),Zo].filter(e=>!!e),issueData:{code:ne.invalid_arguments,argumentsError:r}})}function a(e,r){return fm({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,pm(),Zo].filter(e=>!!e),issueData:{code:ne.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ea){let e=this;return vr(async function(...t){let n=new Gr([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw n.addIssue(r(t,e)),n}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw n.addIssue(a(l,e)),n})})}{let e=this;return vr(function(...t){let n=e._def.args.safeParse(t,i);if(!n.success)throw new Gr([r(t,n.error)]);let o=Reflect.apply(s,this,n.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new Gr([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Gn.create(t).rest(ws.create())})}returns(t){return new e({...this._def,returns:t})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(t,r,a){return new e({args:t||Gn.create([]).rest(ws.create()),returns:r||ws.create(),typeName:ie.ZodFunction,...ze(a)})}},di=class extends Ge{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};di.create=(e,t)=>new di({getter:e,typeName:ie.ZodLazy,...ze(t)});var pi=class extends Ge{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:ne.invalid_literal,expected:this._def.value}),De}return{status:"valid",value:e.data}}get value(){return this._def.value}};function d0(e,t){return new fi({values:e,typeName:ie.ZodEnum,...ze(t)})}pi.create=(e,t)=>new pi({value:e,typeName:ie.ZodLiteral,...ze(t)});var fi=class e extends Ge{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return me(t,{expected:rt.joinValues(r),received:t.parsedType,code:ne.invalid_type}),De}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return me(t,{received:t.data,code:ne.invalid_enum_value,options:r}),De}return vr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...r})}};fi.create=d0;var mi=class extends Ge{_parse(e){let t=rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xe.string&&r.parsedType!==xe.number){let e=rt.objectValues(t);return me(r,{expected:rt.joinValues(e),received:r.parsedType,code:ne.invalid_type}),De}if(this._cache||(this._cache=new Set(rt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=rt.objectValues(t);return me(r,{received:r.data,code:ne.invalid_enum_value,options:e}),De}return vr(e.data)}get enum(){return this._def.values}};mi.create=(e,t)=>new mi({values:e,typeName:ie.ZodNativeEnum,...ze(t)});var ea=class extends Ge{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==xe.promise&&!1===t.common.async)return me(t,{code:ne.invalid_type,expected:xe.promise,received:t.parsedType}),De;let r=t.parsedType===xe.promise?t.data:Promise.resolve(t.data);return vr(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};ea.create=(e,t)=>new ea({type:e,typeName:ie.ZodPromise,...ze(t)});var un=class extends Ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{me(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){let e=a.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return De;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?De:"dirty"===a.status||"dirty"===t.value?Uo(a.value):a});{if("aborted"===t.value)return De;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?De:"dirty"===a.status||"dirty"===t.value?Uo(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?De:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?De:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===a.type){if(!1===r.common.async){let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ai(e))return De;let s=a.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>ai(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):De)}rt.assertNever(a)}};un.create=(e,t,r)=>new un({schema:e,typeName:ie.ZodEffects,effect:t,...ze(r)}),un.createWithPreprocess=(e,t,r)=>new un({schema:t,effect:{type:"preprocess",transform:e},typeName:ie.ZodEffects,...ze(r)});var ln=class extends Ge{_parse(e){return this._getType(e)===xe.undefined?vr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ln.create=(e,t)=>new ln({innerType:e,typeName:ie.ZodOptional,...ze(t)});var Wn=class extends Ge{_parse(e){return this._getType(e)===xe.null?vr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Wn.create=(e,t)=>new Wn({innerType:e,typeName:ie.ZodNullable,...ze(t)});var hi=class extends Ge{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===xe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};hi.create=(e,t)=>new hi({innerType:e,typeName:ie.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ze(t)});var gi=class extends Ge{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gl(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Gr(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new Gr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};gi.create=(e,t)=>new gi({innerType:e,typeName:ie.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ze(t)});var rc=class extends Ge{_parse(e){if(this._getType(e)!==xe.nan){let t=this._getOrReturnCtx(e);return me(t,{code:ne.invalid_type,expected:xe.nan,received:t.parsedType}),De}return{status:"valid",value:e.data}}};rc.create=e=>new rc({typeName:ie.ZodNaN,...ze(e)});var nne=Symbol("zod_brand"),Wl=class extends Ge{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},Kl=class e extends Ge{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?De:"dirty"===e.status?(t.dirty(),Uo(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?De:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(t,r){return new e({in:t,out:r,typeName:ie.ZodPipeline})}},vi=class extends Ge{_parse(e){let t=this._def.innerType._parse(e),r=e=>(ai(e)&&(e.value=Object.freeze(e.value)),e);return Gl(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}};vi.create=(e,t)=>new vi({innerType:e,typeName:ie.ZodReadonly,...ze(t)});var ie,sne={object:Lr.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ie||(ie={}));var ane=ii.create,ine=Go.create,one=rc.create,cne=Wo.create,lne=Ko.create,une=Jo.create,dne=Xo.create,pne=oi.create,fne=ci.create,mne=Yo.create,hne=ws.create,gne=kn.create,vne=Qo.create,yne=Ss.create,iz=Lr.create,bne=Lr.strictCreate,_ne=li.create,xne=mm.create,wne=ui.create,Sne=Gn.create,Ene=gm.create,Tne=ec.create,Cne=tc.create,Pne=vm.create,kne=di.create,Rne=pi.create,One=fi.create,Ine=mi.create,$ne=ea.create,Ane=un.create,Nne=ln.create,Dne=Wn.create,Lne=un.createWithPreprocess,Mne=Kl.create,jne=Object.freeze({status:"aborted"});function X(e,t,r){function a(r,a){var i;Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(i=r._zod).traits??(i.traits=new Set),r._zod.traits.add(e),t(r,a);for(let e in n.prototype)e in r||Object.defineProperty(r,e,{value:n.prototype[e].bind(r)});r._zod.constr=n,r._zod.def=a}let i=r?.Parent??Object;class s extends i{}function n(e){var t;let i=r?.Parent?new s:this;a(i,e),(t=i._zod).deferred??(t.deferred=[]);for(let e of i._zod.deferred)e();return i}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(n,"init",{value:a}),Object.defineProperty(n,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(n,"name",{value:e}),n}var Fne=Symbol("zod_brand"),ta=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},ym={};function Kn(e){return e&&Object.assign(ym,e),ym}var ht={};function oz(e){return e}function cz(e){return e}function lz(e){}function uz(e){throw new Error}function dz(e){}function Zm(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function bm(e,t="|"){return e.map(e=>Km(e)).join(t)}function p0(e,t){return"bigint"==typeof t?t.toString():t}function uu(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function du(e){return null==e}function pu(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function f0(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=r>a?r:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}function Et(e,t,r){Object.defineProperty(e,t,{get(){{let a=r();return e[t]=a,a}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function Gm(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function pz(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function fz(e){let t=Object.keys(e),r=t.map(t=>e[t]);return Promise.all(r).then(e=>{let r={};for(let a=0;a<t.length;a++)r[t[a]]=e[a];return r})}function mz(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let a=0;a<e;a++)r+=t[Math.floor(26*Math.random())];return r}function ni(e){return JSON.stringify(e)}NS(ht,{unwrapMessage:()=>qo,stringifyPrimitive:()=>Km,required:()=>Tz,randomString:()=>mz,propertyKeyTypes:()=>h0,promiseAllObject:()=>fz,primitiveTypes:()=>vz,prefixIssues:()=>xs,pick:()=>_z,partial:()=>Ez,optionalKeys:()=>g0,omit:()=>xz,numKeys:()=>hz,nullish:()=>du,normalizeParams:()=>Ae,merge:()=>Sz,jsonStringifyReplacer:()=>p0,joinValues:()=>bm,issue:()=>y0,isPlainObject:()=>sc,isObject:()=>nc,getSizableOrigin:()=>Cz,getParsedType:()=>gz,getLengthableOrigin:()=>fu,getEnumValues:()=>Zm,getElementAtPath:()=>pz,floatSafeRemainder:()=>f0,finalizeIssue:()=>Jn,extend:()=>wz,escapeRegex:()=>Si,esc:()=>ni,defineLazy:()=>Et,createTransparentProxy:()=>yz,clone:()=>Xn,cleanRegex:()=>pu,cleanEnum:()=>Pz,captureStackTrace:()=>Wm,cached:()=>uu,assignProp:()=>Gm,assertNotEqual:()=>cz,assertNever:()=>uz,assertIs:()=>lz,assertEqual:()=>oz,assert:()=>dz,allowsEval:()=>m0,aborted:()=>si,NUMBER_FORMAT_RANGES:()=>v0,Class:()=>_m,BIGINT_FORMAT_RANGES:()=>bz});var Wm=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function nc(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var m0=uu(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch{return!1}});function sc(e){if(!1===nc(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!(!1===nc(r)||!1===Object.prototype.hasOwnProperty.call(r,"isPrototypeOf"))}function hz(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var gz=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},h0=new Set(["string","number","symbol"]),vz=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Si(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xn(e,t,r){let a=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(a._zod.parent=e),a}function Ae(e){let t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function yz(e){let t;return new Proxy({},{get:(r,a,i)=>(t??(t=e()),Reflect.get(t,a,i)),set:(r,a,i,s)=>(t??(t=e()),Reflect.set(t,a,i,s)),has:(r,a)=>(t??(t=e()),Reflect.has(t,a)),deleteProperty:(r,a)=>(t??(t=e()),Reflect.deleteProperty(t,a)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,a)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,a)),defineProperty:(r,a,i)=>(t??(t=e()),Reflect.defineProperty(t,a,i))})}function Km(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function g0(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}var v0={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},bz={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function _z(e,t){let r={},a=e._zod.def;for(let e in t){if(!(e in a.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=a.shape[e])}return Xn(e,{...e._zod.def,shape:r,checks:[]})}function xz(e,t){let r={...e._zod.def.shape},a=e._zod.def;for(let e in t){if(!(e in a.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return Xn(e,{...e._zod.def,shape:r,checks:[]})}function wz(e,t){if(!sc(t))throw new Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return Gm(this,"shape",r),r},checks:[]};return Xn(e,r)}function Sz(e,t){return Xn(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return Gm(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function Ez(e,t,r){let a=t._zod.def.shape,i={...a};if(r)for(let t in r){if(!(t in a))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:a[t]}):a[t])}else for(let t in a)i[t]=e?new e({type:"optional",innerType:a[t]}):a[t];return Xn(t,{...t._zod.def,shape:i,checks:[]})}function Tz(e,t,r){let a=t._zod.def.shape,i={...a};if(r)for(let t in r){if(!(t in i))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:a[t]}))}else for(let t in a)i[t]=new e({type:"nonoptional",innerType:a[t]});return Xn(t,{...t._zod.def,shape:i,checks:[]})}function si(e,t=0){for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1}function xs(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function qo(e){return"string"==typeof e?e:e?.message}function Jn(e,t,r){let a={...e,path:e.path??[]};if(!e.message){let i=qo(e.inst?._zod.def?.error?.(e))??qo(t?.error?.(e))??qo(r.customError?.(e))??qo(r.localeError?.(e))??"Invalid input";a.message=i}return delete a.inst,delete a.continue,t?.reportInput||delete a.input,a}function Cz(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function fu(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function y0(...e){let[t,r,a]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:a}:{...t}}function Pz(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}var _m=class{constructor(...e){}},b0=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,p0,2),enumerable:!0})},_0=X("$ZodError",b0),mu=X("$ZodError",b0,{Parent:Error});function kz(e,t=e=>e.message){let r={},a=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):a.push(t(i));return{formErrors:a,fieldErrors:r}}function Rz(e,t){let r=t||function(e){return e.message},a={_errors:[]},i=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)a._errors.push(r(t));else{let e=a,i=0;for(;i<t.path.length;){let a=t.path[i];i===t.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(r(t))):e[a]=e[a]||{_errors:[]},e=e[a],i++}}};return i(e),a}var x0=e=>(t,r,a,i)=>{let s=a?Object.assign(a,{async:!1}):{async:!1},n=t._zod.run({value:r,issues:[]},s);if(n instanceof Promise)throw new ta;if(n.issues.length){let t=new(i?.Err??e)(n.issues.map(e=>Jn(e,s,Kn())));throw Wm(t,i?.callee),t}return n.value},Oz=x0(mu),w0=e=>async(t,r,a,i)=>{let s=a?Object.assign(a,{async:!0}):{async:!0},n=t._zod.run({value:r,issues:[]},s);if(n instanceof Promise&&(n=await n),n.issues.length){let t=new(i?.Err??e)(n.issues.map(e=>Jn(e,s,Kn())));throw Wm(t,i?.callee),t}return n.value},Iz=w0(mu),S0=e=>(t,r,a)=>{let i=a?{...a,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise)throw new ta;return s.issues.length?{success:!1,error:new(e??_0)(s.issues.map(e=>Jn(e,i,Kn())))}:{success:!0,data:s.value}},Jm=S0(mu),E0=e=>async(t,r,a)=>{let i=a?Object.assign(a,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>Jn(e,i,Kn())))}:{success:!0,data:s.value}},Xm=E0(mu),$z=/^[cC][^\s-]{8,}$/,Az=/^[0-9a-z]+$/,Nz=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Dz=/^[0-9a-vA-V]{20}$/,Lz=/^[A-Za-z0-9]{27}$/,Mz=/^[a-zA-Z0-9_-]{21}$/,jz=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Fz=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,nS=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Uz=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,qz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function zz(){return new RegExp(qz,"u")}var Bz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Vz=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Zz=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gz=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,T0=/^[A-Za-z0-9_-]*$/,Wz=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Kz=/^\+(?:[0-9]){6,14}[0-9]$/,C0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Jz=new RegExp(`^${C0}$`);function P0(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Xz(e){return new RegExp(`^${P0(e)}$`)}function Yz(e){let t=P0({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");let a=`${t}(?:${r.join("|")})`;return new RegExp(`^${C0}T(?:${a})$`)}var Qz=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),e9=/^\d+$/,t9=/^-?\d+(?:\.\d+)?/i,r9=/true|false/i,n9=/null/i,s9=/^[^A-Z]*$/,a9=/^[^a-z]*$/,br=X("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),k0={number:"number",bigint:"bigint",object:"date"},R0=X("$ZodCheckLessThan",(e,t)=>{br.init(e,t);let r=k0[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,a=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value<=t.value:a.value<t.value)||a.issues.push({origin:r,code:"too_big",maximum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),O0=X("$ZodCheckGreaterThan",(e,t)=>{br.init(e,t);let r=k0[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,a=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value>=t.value:a.value>t.value)||a.issues.push({origin:r,code:"too_small",minimum:t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),i9=X("$ZodCheckMultipleOf",(e,t)=>{br.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===f0(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),o9=X("$ZodCheckNumberFormat",(e,t)=>{br.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),a=r?"int":"number",[i,s]=v0[t.format];e._zod.onattach.push(e=>{let a=e._zod.bag;a.format=t.format,a.minimum=i,a.maximum=s,r&&(a.pattern=e9)}),e._zod.check=n=>{let o=n.value;if(r){if(!Number.isInteger(o))return void n.issues.push({expected:a,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?n.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort}):n.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!t.abort}))}o<i&&n.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>s&&n.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),c9=X("$ZodCheckMaxLength",(e,t)=>{br.init(e,t),e._zod.when=e=>{let t=e.value;return!du(t)&&void 0!==t.length},e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let a=r.value;if(a.length<=t.maximum)return;let i=fu(a);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),l9=X("$ZodCheckMinLength",(e,t)=>{br.init(e,t),e._zod.when=e=>{let t=e.value;return!du(t)&&void 0!==t.length},e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let a=r.value;if(a.length>=t.minimum)return;let i=fu(a);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),u9=X("$ZodCheckLengthEquals",(e,t)=>{br.init(e,t),e._zod.when=e=>{let t=e.value;return!du(t)&&void 0!==t.length},e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let a=r.value,i=a.length;if(i===t.length)return;let s=fu(a),n=i>t.length;r.issues.push({origin:s,...n?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),hu=X("$ZodCheckStringFormat",(e,t)=>{var r,a;br.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(a=e._zod).check??(a.check=()=>{})}),d9=X("$ZodCheckRegex",(e,t)=>{hu.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),p9=X("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=s9),hu.init(e,t)}),f9=X("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=a9),hu.init(e,t)}),m9=X("$ZodCheckIncludes",(e,t)=>{br.init(e,t);let r=Si(t.includes),a=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=a,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(a)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),h9=X("$ZodCheckStartsWith",(e,t)=>{br.init(e,t);let r=new RegExp(`^${Si(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),g9=X("$ZodCheckEndsWith",(e,t)=>{br.init(e,t);let r=new RegExp(`.*${Si(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),v9=X("$ZodCheckOverwrite",(e,t)=>{br.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}),xm=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),a=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(let e of a)this.content.push(e)}compile(){let e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}},y9={major:4,minor:0,patch:0},xt=X("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=y9;let a=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(let t of a)for(let r of t._zod.onattach)r(e);if(0===a.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let a,i=si(e);for(let s of t){if(s._zod.when){if(!s._zod.when(e))continue}else if(i)continue;let t=e.issues.length,n=s._zod.check(e);if(n instanceof Promise&&!1===r?.async)throw new ta;if(a||n instanceof Promise)a=(a??Promise.resolve()).then(async()=>{await n,e.issues.length!==t&&(i||(i=si(e,t)))});else{if(e.issues.length===t)continue;i||(i=si(e,t))}}return a?a.then(()=>e):e};e._zod.run=(r,i)=>{let s=e._zod.parse(r,i);if(s instanceof Promise){if(!1===i.async)throw new ta;return s.then(e=>t(e,a,i))}return t(s,a,i)}}e["~standard"]={validate:t=>{try{let r=Jm(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return Xm(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Ym=X("$ZodString",(e,t)=>{xt.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Qz(e._zod.bag),e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),Ct=X("$ZodStringFormat",(e,t)=>{hu.init(e,t),Ym.init(e,t)}),b9=X("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Fz),Ct.init(e,t)}),_9=X("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=nS(e))}else t.pattern??(t.pattern=nS());Ct.init(e,t)}),x9=X("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Uz),Ct.init(e,t)}),w9=X("$ZodURL",(e,t)=>{Ct.init(e,t),e._zod.check=r=>{try{let a=r.value,i=new URL(a),s=i.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Wz.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),void(!a.endsWith("/")&&s.endsWith("/")?r.value=s.slice(0,-1):r.value=s)}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),S9=X("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=zz()),Ct.init(e,t)}),E9=X("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Mz),Ct.init(e,t)}),T9=X("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=$z),Ct.init(e,t)}),C9=X("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Az),Ct.init(e,t)}),P9=X("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Nz),Ct.init(e,t)}),k9=X("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Dz),Ct.init(e,t)}),R9=X("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Lz),Ct.init(e,t)}),O9=X("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Yz(t)),Ct.init(e,t)}),I9=X("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Jz),Ct.init(e,t)}),$9=X("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Xz(t)),Ct.init(e,t)}),A9=X("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=jz),Ct.init(e,t)}),N9=X("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Bz),Ct.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),D9=X("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Hz),Ct.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),L9=X("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Vz),Ct.init(e,t)}),M9=X("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Zz),Ct.init(e,t),e._zod.check=r=>{let[a,i]=r.value.split("/");try{if(!i)throw new Error;let e=Number(i);if(`${e}`!==i)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function I0(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}var j9=X("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Gz),Ct.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{I0(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function F9(e){if(!T0.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return I0(t.padEnd(4*Math.ceil(t.length/4),"="))}var U9=X("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=T0),Ct.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{F9(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),q9=X("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Kz),Ct.init(e,t)});function z9(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[a]=r;if(!a)return!1;let i=JSON.parse(atob(a));return!("typ"in i&&"JWT"!==i?.typ||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}var B9=X("$ZodJWT",(e,t)=>{Ct.init(e,t),e._zod.check=r=>{z9(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),$0=X("$ZodNumber",(e,t)=>{xt.init(e,t),e._zod.pattern=e._zod.bag.pattern??t9,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let s="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),r}}),H9=X("$ZodNumber",(e,t)=>{o9.init(e,t),$0.init(e,t)}),V9=X("$ZodBoolean",(e,t)=>{xt.init(e,t),e._zod.pattern=r9,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=!!r.value}catch{}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),Z9=X("$ZodNull",(e,t)=>{xt.init(e,t),e._zod.pattern=n9,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let a=t.value;return null===a||t.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),t}}),G9=X("$ZodUnknown",(e,t)=>{xt.init(e,t),e._zod.parse=e=>e}),W9=X("$ZodNever",(e,t)=>{xt.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function sS(e,t,r){e.issues.length&&t.issues.push(...xs(r,e.issues)),t.value[r]=e.value}var K9=X("$ZodArray",(e,t)=>{xt.init(e,t),e._zod.parse=(r,a)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let s=[];for(let e=0;e<i.length;e++){let n=i[e],o=t.element._zod.run({value:n,issues:[]},a);o instanceof Promise?s.push(o.then(t=>sS(t,r,e))):sS(o,r,e)}return s.length?Promise.all(s).then(()=>r):r}});function ql(e,t,r){e.issues.length&&t.issues.push(...xs(r,e.issues)),t.value[r]=e.value}function aS(e,t,r,a){e.issues.length?void 0===a[r]?t.value[r]=r in a?void 0:e.value:t.issues.push(...xs(r,e.issues)):void 0===e.value?r in a&&(t.value[r]=void 0):t.value[r]=e.value}var A0=X("$ZodObject",(e,t)=>{xt.init(e,t);let r=uu(()=>{let e=Object.keys(t.shape);for(let r of e)if(!(t.shape[r]instanceof xt))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);let r=g0(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}});Et(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let a=e[t]._zod;if(a.values){r[t]??(r[t]=new Set);for(let e of a.values)r[t].add(e)}}return r});let a,i,s=nc,n=!ym.jitless,o=n&&m0.value,l=t.catchall;e._zod.parse=(c,u)=>{i??(i=r.value);let p=c.value;if(!s(p))return c.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),c;let d=[];if(n&&o&&!1===u?.async&&!0!==u.jitless)a||(a=(e=>{let t=new xm(["shape","payload","ctx"]),a=r.value,i=e=>{let t=ni(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let s=Object.create(null),n=0;for(let e of a.keys)s[e]="key_"+n++;t.write("const newResult = {}");for(let e of a.keys)if(a.optionalKeys.has(e)){let r=s[e];t.write(`const ${r} = ${i(e)};`);let a=ni(e);t.write(`\n        if (${r}.issues.length) {\n          if (input[${a}] === undefined) {\n            if (${a} in input) {\n              newResult[${a}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${r}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${a}, ...iss.path] : [${a}],\n              }))\n            );\n          }\n        } else if (${r}.value === undefined) {\n          if (${a} in input) newResult[${a}] = undefined;\n        } else {\n          newResult[${a}] = ${r}.value;\n        }\n        `)}else{let r=s[e];t.write(`const ${r} = ${i(e)};`),t.write(`\n          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${ni(e)}, ...iss.path] : [${ni(e)}]\n          })));`),t.write(`newResult[${ni(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)})(t.shape)),c=a(c,u);else{c.value={};let e=i.shape;for(let t of i.keys){let r=e[t],a=r._zod.run({value:p[t],issues:[]},u),i="optional"===r._zod.optin&&"optional"===r._zod.optout;a instanceof Promise?d.push(a.then(e=>i?aS(e,c,t,p):ql(e,c,t))):i?aS(a,c,t,p):ql(a,c,t)}}if(!l)return d.length?Promise.all(d).then(()=>c):c;let h=[],m=i.keySet,f=l._zod,v=f.def.type;for(let e of Object.keys(p)){if(m.has(e))continue;if("never"===v){h.push(e);continue}let t=f.run({value:p[e],issues:[]},u);t instanceof Promise?d.push(t.then(t=>ql(t,c,e))):ql(t,c,e)}return h.length&&c.issues.push({code:"unrecognized_keys",keys:h,input:p,inst:e}),d.length?Promise.all(d).then(()=>c):c}});function iS(e,t,r,a){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>Jn(e,a,Kn())))}),t}var N0=X("$ZodUnion",(e,t)=>{xt.init(e,t),Et(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),Et(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),Et(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),Et(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>pu(e.source)).join("|")})$`)}}),e._zod.parse=(r,a)=>{let i=!1,s=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},a);if(t instanceof Promise)s.push(t),i=!0;else{if(0===t.issues.length)return t;s.push(t)}}return i?Promise.all(s).then(t=>iS(t,r,e,a)):iS(s,r,e,a)}}),J9=X("$ZodDiscriminatedUnion",(e,t)=>{N0.init(e,t);let r=e._zod.parse;Et(e._zod,"propValues",()=>{let e={};for(let r of t.options){let a=r._zod.propValues;if(!a||0===Object.keys(a).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(a)){e[t]||(e[t]=new Set);for(let a of r)e[t].add(a)}}return e});let a=uu(()=>{let e=t.options,r=new Map;for(let a of e){let e=a._zod.propValues[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(let t of e){if(r.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,a)}}return r});e._zod.parse=(i,s)=>{let n=i.value;if(!nc(n))return i.issues.push({code:"invalid_type",expected:"object",input:n,inst:e}),i;let o=a.value.get(n?.[t.discriminator]);return o?o._zod.run(i,s):t.unionFallback?r(i,s):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:n,path:[t.discriminator],inst:e}),i)}}),X9=X("$ZodIntersection",(e,t)=>{xt.init(e,t),e._zod.parse=(e,r)=>{let a=e.value,i=t.left._zod.run({value:a,issues:[]},r),s=t.right._zod.run({value:a,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([t,r])=>oS(e,t,r)):oS(e,i,s)}});function wm(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(sc(e)&&sc(t)){let r=Object.keys(t),a=Object.keys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of a){let a=wm(e[r],t[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};i[r]=a.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let a=0;a<e.length;a++){let i=wm(e[a],t[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function oS(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),si(e))return e;let a=wm(t.value,r.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}var Y9=X("$ZodRecord",(e,t)=>{xt.init(e,t),e._zod.parse=(r,a)=>{let i=r.value;if(!sc(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let s=[];if(t.keyType._zod.values){let n,o=t.keyType._zod.values;r.value={};for(let e of o)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let n=t.valueType._zod.run({value:i[e],issues:[]},a);n instanceof Promise?s.push(n.then(t=>{t.issues.length&&r.issues.push(...xs(e,t.issues)),r.value[e]=t.value})):(n.issues.length&&r.issues.push(...xs(e,n.issues)),r.value[e]=n.value)}for(let e in i)o.has(e)||(n=n??[],n.push(e));n&&n.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:n})}else{r.value={};for(let n of Reflect.ownKeys(i)){if("__proto__"===n)continue;let o=t.keyType._zod.run({value:n,issues:[]},a);if(o instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:o.issues.map(e=>Jn(e,a,Kn())),input:n,path:[n],inst:e}),r.value[o.value]=o.value;continue}let l=t.valueType._zod.run({value:i[n],issues:[]},a);l instanceof Promise?s.push(l.then(e=>{e.issues.length&&r.issues.push(...xs(n,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...xs(n,l.issues)),r.value[o.value]=l.value)}}return s.length?Promise.all(s).then(()=>r):r}}),Q9=X("$ZodEnum",(e,t)=>{xt.init(e,t);let r=Zm(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(e=>h0.has(typeof e)).map(e=>"string"==typeof e?Si(e):e.toString()).join("|")})$`),e._zod.parse=(t,a)=>{let i=t.value;return e._zod.values.has(i)||t.issues.push({code:"invalid_value",values:r,input:i,inst:e}),t}}),e4=X("$ZodLiteral",(e,t)=>{xt.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?Si(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(r,a)=>{let i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),r}}),t4=X("$ZodTransform",(e,t)=>{xt.init(e,t),e._zod.parse=(e,r)=>{let a=t.transform(e.value,e);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(t=>(e.value=t,e));if(a instanceof Promise)throw new ta;return e.value=a,e}}),r4=X("$ZodOptional",(e,t)=>{xt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Et(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?new RegExp(`^(${pu(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),n4=X("$ZodNullable",(e,t)=>{xt.init(e,t),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?new RegExp(`^(${pu(e.source)}|null)$`):void 0}),Et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),s4=X("$ZodDefault",(e,t)=>{xt.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let a=t.innerType._zod.run(e,r);return a instanceof Promise?a.then(e=>cS(e,t)):cS(a,t)}});function cS(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}var a4=X("$ZodPrefault",(e,t)=>{xt.init(e,t),e._zod.optin="optional",Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),i4=X("$ZodNonOptional",(e,t)=>{xt.init(e,t),Et(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,a)=>{let i=t.innerType._zod.run(r,a);return i instanceof Promise?i.then(t=>lS(t,e)):lS(i,e)}});function lS(e,t){return!e.issues.length&&void 0===e.value&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var o4=X("$ZodCatch",(e,t)=>{xt.init(e,t),e._zod.optin="optional",Et(e._zod,"optout",()=>t.innerType._zod.optout),Et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let a=t.innerType._zod.run(e,r);return a instanceof Promise?a.then(a=>(e.value=a.value,a.issues.length&&(e.value=t.catchValue({...e,error:{issues:a.issues.map(e=>Jn(e,r,Kn()))},input:e.value}),e.issues=[]),e)):(e.value=a.value,a.issues.length&&(e.value=t.catchValue({...e,error:{issues:a.issues.map(e=>Jn(e,r,Kn()))},input:e.value}),e.issues=[]),e)}}),c4=X("$ZodPipe",(e,t)=>{xt.init(e,t),Et(e._zod,"values",()=>t.in._zod.values),Et(e._zod,"optin",()=>t.in._zod.optin),Et(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let a=t.in._zod.run(e,r);return a instanceof Promise?a.then(e=>uS(e,t,r)):uS(a,t,r)}});function uS(e,t,r){return si(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}var l4=X("$ZodReadonly",(e,t)=>{xt.init(e,t),Et(e._zod,"propValues",()=>t.innerType._zod.propValues),Et(e._zod,"values",()=>t.innerType._zod.values),Et(e._zod,"optin",()=>t.innerType._zod.optin),Et(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let a=t.innerType._zod.run(e,r);return a instanceof Promise?a.then(dS):dS(a)}});function dS(e){return e.value=Object.freeze(e.value),e}var u4=X("$ZodCustom",(e,t)=>{br.init(e,t),xt.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let a=r.value,i=t.fn(a);if(i instanceof Promise)return i.then(t=>pS(t,r,a,e));pS(i,r,a,e)}});function pS(e,t,r,a){if(!e){let e={code:"custom",input:r,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(e.params=a._zod.def.params),t.issues.push(y0(e))}}var d4=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t},p4=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${d4(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${Km(e.values[0])}`:`Invalid option: expected one of ${bm(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",a=t(e.origin);return a?`Too big: expected ${e.origin??"value"} to have ${r}${e.maximum.toString()} ${a.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",a=t(e.origin);return a?`Too small: expected ${e.origin} to have ${r}${e.minimum.toString()} ${a.unit}`:`Too small: expected ${e.origin} to be ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${bm(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function f4(){return{localeError:p4()}}var Une=Symbol("ZodOutput"),qne=Symbol("ZodInput"),Jl=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}remove(e){return this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function m4(){return new Jl}var zo=m4();function h4(e,t){return new e({type:"string",...Ae(t)})}function g4(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Ae(t)})}function fS(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ae(t)})}function v4(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Ae(t)})}function y4(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ae(t)})}function b4(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ae(t)})}function _4(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ae(t)})}function x4(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Ae(t)})}function w4(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Ae(t)})}function S4(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ae(t)})}function E4(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Ae(t)})}function T4(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ae(t)})}function C4(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Ae(t)})}function P4(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Ae(t)})}function k4(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ae(t)})}function R4(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ae(t)})}function O4(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ae(t)})}function I4(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ae(t)})}function $4(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ae(t)})}function A4(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Ae(t)})}function N4(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Ae(t)})}function D4(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Ae(t)})}function L4(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Ae(t)})}function M4(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ae(t)})}function j4(e,t){return new e({type:"string",format:"date",check:"string_format",...Ae(t)})}function F4(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Ae(t)})}function U4(e,t){return new e({type:"string",format:"duration",check:"string_format",...Ae(t)})}function q4(e,t){return new e({type:"number",checks:[],...Ae(t)})}function z4(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Ae(t)})}function B4(e,t){return new e({type:"boolean",...Ae(t)})}function H4(e,t){return new e({type:"null",...Ae(t)})}function V4(e){return new e({type:"unknown"})}function Z4(e,t){return new e({type:"never",...Ae(t)})}function mS(e,t){return new R0({check:"less_than",...Ae(t),value:e,inclusive:!1})}function Qf(e,t){return new R0({check:"less_than",...Ae(t),value:e,inclusive:!0})}function hS(e,t){return new O0({check:"greater_than",...Ae(t),value:e,inclusive:!1})}function em(e,t){return new O0({check:"greater_than",...Ae(t),value:e,inclusive:!0})}function gS(e,t){return new i9({check:"multiple_of",...Ae(t),value:e})}function D0(e,t){return new c9({check:"max_length",...Ae(t),maximum:e})}function Xl(e,t){return new l9({check:"min_length",...Ae(t),minimum:e})}function L0(e,t){return new u9({check:"length_equals",...Ae(t),length:e})}function G4(e,t){return new d9({check:"string_format",format:"regex",...Ae(t),pattern:e})}function W4(e){return new p9({check:"string_format",format:"lowercase",...Ae(e)})}function K4(e){return new f9({check:"string_format",format:"uppercase",...Ae(e)})}function J4(e,t){return new m9({check:"string_format",format:"includes",...Ae(t),includes:e})}function X4(e,t){return new h9({check:"string_format",format:"starts_with",...Ae(t),prefix:e})}function Y4(e,t){return new g9({check:"string_format",format:"ends_with",...Ae(t),suffix:e})}function ic(e){return new v9({check:"overwrite",tx:e})}function Q4(e){return ic(t=>t.normalize(e))}function eB(){return ic(e=>e.trim())}function tB(){return ic(e=>e.toLowerCase())}function rB(){return ic(e=>e.toUpperCase())}function nB(e,t,r){return new e({type:"array",element:t,...Ae(r)})}function sB(e,t,r){let a=Ae(r);return a.abort??(a.abort=!0),new e({type:"custom",check:"custom",fn:t,...a})}function aB(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Ae(r)})}var Yl=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??zo,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let a=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s)return s.count++,t.schemaPath.includes(e)&&(s.cycle=t.path),s.schema;let n={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,n);let o=e._zod.toJSONSchema?.();if(o)n.schema=o;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},s=e._zod.parent;if(s)n.ref=s,this.process(s,r),this.seen.get(s).isParent=!0;else{let t=n.schema;switch(a.type){case"string":{let r=t;r.type="string";let{minimum:a,maximum:s,format:o,patterns:l,contentEncoding:c}=e._zod.bag;if("number"==typeof a&&(r.minLength=a),"number"==typeof s&&(r.maxLength=s),o&&(r.format=i[o]??o,""===r.format&&delete r.format),c&&(r.contentEncoding=c),l&&l.size>0){let e=[...l];1===e.length?r.pattern=e[0].source:e.length>1&&(n.schema.allOf=[...e.map(e=>({..."draft-7"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let r=t,{minimum:a,maximum:i,format:s,multipleOf:n,exclusiveMaximum:o,exclusiveMinimum:l}=e._zod.bag;"string"==typeof s&&s.includes("int")?r.type="integer":r.type="number","number"==typeof l&&(r.exclusiveMinimum=l),"number"==typeof a&&(r.minimum=a,"number"==typeof l&&(l>=a?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof o&&(r.exclusiveMaximum=o),"number"==typeof i&&(r.maximum=i,"number"==typeof o&&(o<=i?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof n&&(r.multipleOf=n);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"null":t.type="null";break;case"any":case"unknown":break;case"undefined":case"never":t.not={};break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{let i=t,{minimum:s,maximum:n}=e._zod.bag;"number"==typeof s&&(i.minItems=s),"number"==typeof n&&(i.maxItems=n),i.type="array",i.items=this.process(a.element,{...r,path:[...r.path,"items"]});break}case"object":{let e=t;e.type="object",e.properties={};let i=a.shape;for(let t in i)e.properties[t]=this.process(i[t],{...r,path:[...r.path,"properties",t]});let s=new Set(Object.keys(i)),n=new Set([...s].filter(e=>{let t=a.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));n.size>0&&(e.required=Array.from(n)),"never"===a.catchall?._zod.def.type?e.additionalProperties=!1:a.catchall?a.catchall&&(e.additionalProperties=this.process(a.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":t.anyOf=a.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{let e=t,i=this.process(a.left,{...r,path:[...r.path,"allOf",0]}),s=this.process(a.right,{...r,path:[...r.path,"allOf",1]}),n=e=>"allOf"in e&&1===Object.keys(e).length,o=[...n(i)?i.allOf:[i],...n(s)?s.allOf:[s]];e.allOf=o;break}case"tuple":{let i=t;i.type="array";let s=a.items.map((e,t)=>this.process(e,{...r,path:[...r.path,"prefixItems",t]}));if("draft-2020-12"===this.target?i.prefixItems=s:i.items=s,a.rest){let e=this.process(a.rest,{...r,path:[...r.path,"items"]});"draft-2020-12"===this.target?i.items=e:i.additionalItems=e}a.rest&&(i.items=this.process(a.rest,{...r,path:[...r.path,"items"]}));let{minimum:n,maximum:o}=e._zod.bag;"number"==typeof n&&(i.minItems=n),"number"==typeof o&&(i.maxItems=o);break}case"record":{let e=t;e.type="object",e.propertyNames=this.process(a.keyType,{...r,path:[...r.path,"propertyNames"]}),e.additionalProperties=this.process(a.valueType,{...r,path:[...r.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=t,r=Zm(a.entries);r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=r;break}case"literal":{let e=t,r=[];for(let e of a.values)if(void 0===e){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(e))}else r.push(e);if(0!==r.length)if(1===r.length){let t=r[0];e.type=null===t?"null":typeof t,e.const=t}else r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),r.every(e=>"boolean"==typeof e)&&(e.type="string"),r.every(e=>null===e)&&(e.type="null"),e.enum=r;break}case"file":{let r=t,a={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:s,mime:n}=e._zod.bag;void 0!==i&&(a.minLength=i),void 0!==s&&(a.maxLength=s),n?1===n.length?(a.contentMediaType=n[0],Object.assign(r,a)):r.anyOf=n.map(e=>({...a,contentMediaType:e})):Object.assign(r,a);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(a.innerType,r);t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(a.innerType,r),n.ref=a.innerType;break;case"default":this.process(a.innerType,r),n.ref=a.innerType,t.default=JSON.parse(JSON.stringify(a.defaultValue));break;case"prefault":this.process(a.innerType,r),n.ref=a.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(a.defaultValue)));break;case"catch":{let e;this.process(a.innerType,r),n.ref=a.innerType;try{e=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=t,a=e._zod.pattern;if(!a)throw new Error("Pattern not found in template literal");r.type="string",r.pattern=a.source;break}case"pipe":{let e="input"===this.io?"transform"===a.in._zod.def.type?a.out:a.in:a.out;this.process(e,r),n.ref=e;break}case"readonly":this.process(a.innerType,r),n.ref=a.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),n.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")}}}let l=this.metadataRegistry.get(e);return l&&Object.assign(n.schema,l),"input"===this.io&&Zt(e)&&(delete n.schema.examples,delete n.schema.default),"input"===this.io&&n.schema._prefault&&((r=n.schema).default??(r.default=n.schema._prefault)),delete n.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},a=this.seen.get(e);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let a=r.external.registry.get(e[0])?.id;if(a)return{ref:r.external.uri(a)};let i=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=i,{defId:i,ref:`${r.external.uri("__shared")}#/${t}/${i}`}}if(e[1]===a)return{ref:"#"};let i=`#/${t}/`,s=e[1].schema.id??"__schema"+this.counter++;return{defId:s,ref:i+s}},s=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:a}=i(e);t.def={...t.schema},a&&(t.defId=a);let s=t.schema;for(let e in s)delete s[e];s.$ref=r};for(let t of this.seen.entries()){let a=t[1];if(e!==t[0]){if(r.external){let a=r.external.registry.get(t[0])?.id;if(e!==t[0]&&a){s(t);continue}}if(this.metadataRegistry.get(t[0])?.id)s(t);else if(a.cycle){if("throw"===r.cycles)throw new Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);"ref"===r.cycles&&s(t)}else a.count>1&&"ref"===r.reused&&s(t)}else s(t)}let n=(e,t)=>{let r=this.seen.get(e),a=r.def??r.schema,i={...a};if(null===r.ref)return;let s=r.ref;if(r.ref=null,s){n(s,t);let e=this.seen.get(s).schema;e.$ref&&"draft-7"===t.target?(a.allOf=a.allOf??[],a.allOf.push(e)):(Object.assign(a,e),Object.assign(a,i))}r.isParent||this.override({zodSchema:e,jsonSchema:a,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())n(e[0],{target:this.target});let o={};"draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),Object.assign(o,a.def);let l=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}!r.external&&Object.keys(l).length>0&&("draft-2020-12"===this.target?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch{throw new Error("Error converting schema to JSON.")}}};function iB(e,t){if(e instanceof Jl){let r=new Yl(t),a={};for(let t of e._idmap.entries()){let[e,a]=t;r.process(a)}let i={},s={registry:e,uri:t?.uri||(e=>e),defs:a};for(let a of e._idmap.entries()){let[e,n]=a;i[e]=r.emit(n,{...t,external:s})}if(Object.keys(a).length>0){let e="draft-2020-12"===r.target?"$defs":"definitions";i.__shared={[e]:a}}return{schemas:i}}let r=new Yl(t);return r.process(e),r.emit(e,t)}function Zt(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let a=e._zod.def;switch(a.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return Zt(a.element,r);case"object":for(let e in a.shape)if(Zt(a.shape[e],r))return!0;return!1;case"union":for(let e of a.options)if(Zt(e,r))return!0;return!1;case"intersection":return Zt(a.left,r)||Zt(a.right,r);case"tuple":for(let e of a.items)if(Zt(e,r))return!0;return!(!a.rest||!Zt(a.rest,r));case"record":case"map":return Zt(a.keyType,r)||Zt(a.valueType,r);case"set":return Zt(a.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return Zt(a.innerType,r);case"lazy":return Zt(a.getter(),r);case"transform":return!0;case"pipe":return Zt(a.in,r)||Zt(a.out,r)}throw new Error(`Unknown schema type: ${a.type}`)}var oB=X("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");xt.init(e,t),e.def=t,e.parse=(t,r)=>Oz(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>Jm(e,t,r),e.parseAsync=async(t,r)=>Iz(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>Xm(e,t,r),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>Xn(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e)}),cB=X("ZodMiniObject",(e,t)=>{A0.init(e,t),oB.init(e,t),ht.defineLazy(e,"shape",()=>t.shape)});function vS(e,t){let r={type:"object",get shape(){return ht.assignProp(this,"shape",{...e}),this.shape},...ht.normalizeParams(t)};return new cB(r)}function dn(e){return!!e._zod}function Bo(e){let t=Object.values(e);if(0===t.length)return vS({});let r=t.every(dn),a=t.every(e=>!dn(e));if(r)return vS(e);if(a)return iz(e);throw new Error("Mixed Zod versions detected in object shape.")}function Ho(e,t){return dn(e)?Jm(e,t):e.safeParse(t)}async function tm(e,t){return dn(e)?await Xm(e,t):await e.safeParseAsync(t)}function oc(e){var t,r;if(!e)return;let a;if(a=dn(e)?null===(r=null===(t=e._zod)||void 0===t?void 0:t.def)||void 0===r?void 0:r.shape:e.shape,a){if("function"==typeof a)try{return a()}catch{return}return a}}function jo(e){var t;if(e){if("object"==typeof e){let t=e;if(!e._def&&!t._zod){let t=Object.values(e);if(t.length>0&&t.every(e=>"object"==typeof e&&null!==e&&(void 0!==e._def||void 0!==e._zod||"function"==typeof e.parse)))return Bo(e)}}if(dn(e)){let r=null===(t=e._zod)||void 0===t?void 0:t.def;if(r&&("object"===r.type||void 0!==r.shape))return e}else if(void 0!==e.shape)return e}}function rm(e){if(e&&"object"==typeof e){if("message"in e&&"string"==typeof e.message)return e.message;if("issues"in e&&Array.isArray(e.issues)&&e.issues.length>0){let t=e.issues[0];if(t&&"object"==typeof t&&"message"in t)return String(t.message)}try{return JSON.stringify(e)}catch{return String(e)}}return String(e)}function lB(e){var t,r,a,i;if(dn(e))return null===(r=null===(t=e._zod)||void 0===t?void 0:t.def)||void 0===r?void 0:r.description;let s=e;return null!==(a=e.description)&&void 0!==a?a:null===(i=s._def)||void 0===i?void 0:i.description}function uB(e){var t,r,a;if(dn(e))return"optional"===(null===(r=null===(t=e._zod)||void 0===t?void 0:t.def)||void 0===r?void 0:r.type);let i=e;return"function"==typeof e.isOptional?e.isOptional():"ZodOptional"===(null===(a=i._def)||void 0===a?void 0:a.typeName)}function M0(e){var t;if(dn(e)){let r=null===(t=e._zod)||void 0===t?void 0:t.def;if(r){if(void 0!==r.value)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}}let r=e._def;if(r){if(void 0!==r.value)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}let a=e.value;if(void 0!==a)return a}var j0={};NS(j0,{time:()=>H0,duration:()=>Z0,datetime:()=>U0,date:()=>z0,ZodISOTime:()=>B0,ZodISODuration:()=>V0,ZodISODateTime:()=>F0,ZodISODate:()=>q0});var F0=X("ZodISODateTime",(e,t)=>{O9.init(e,t),$t.init(e,t)});function U0(e){return M4(F0,e)}var q0=X("ZodISODate",(e,t)=>{I9.init(e,t),$t.init(e,t)});function z0(e){return j4(q0,e)}var B0=X("ZodISOTime",(e,t)=>{$9.init(e,t),$t.init(e,t)});function H0(e){return F4(B0,e)}var V0=X("ZodISODuration",(e,t)=>{A9.init(e,t),$t.init(e,t)});function Z0(e){return U4(V0,e)}var G0=(e,t)=>{_0.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>Rz(e,t)},flatten:{value:t=>kz(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})},zne=X("ZodError",G0),gu=X("ZodError",G0,{Parent:Error}),dB=x0(gu),pB=w0(gu),fB=S0(gu),mB=E0(gu),It=X("ZodType",(e,t)=>(xt.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>Xn(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>dB(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>fB(e,t,r),e.parseAsync=async(t,r)=>pB(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>mB(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(sH(t,r)),e.superRefine=t=>e.check(aH(t)),e.overwrite=t=>e.check(ic(t)),e.optional=()=>Te(e),e.nullable=()=>_S(e),e.nullish=()=>Te(_S(e)),e.nonoptional=t=>JB(e,t),e.array=()=>Ye(e),e.or=t=>Pt([e,t]),e.and=t=>Qm(e,t),e.transform=t=>Em(e,eE(t)),e.default=t=>GB(e,t),e.prefault=t=>KB(e,t),e.catch=t=>YB(e,t),e.pipe=t=>Em(e,t),e.readonly=()=>tH(e),e.describe=t=>{let r=e.clone();return zo.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>zo.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return zo.get(e);let r=e.clone();return zo.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),W0=X("_ZodString",(e,t)=>{Ym.init(e,t),It.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(G4(...t)),e.includes=(...t)=>e.check(J4(...t)),e.startsWith=(...t)=>e.check(X4(...t)),e.endsWith=(...t)=>e.check(Y4(...t)),e.min=(...t)=>e.check(Xl(...t)),e.max=(...t)=>e.check(D0(...t)),e.length=(...t)=>e.check(L0(...t)),e.nonempty=(...t)=>e.check(Xl(1,...t)),e.lowercase=t=>e.check(W4(t)),e.uppercase=t=>e.check(K4(t)),e.trim=()=>e.check(eB()),e.normalize=(...t)=>e.check(Q4(...t)),e.toLowerCase=()=>e.check(tB()),e.toUpperCase=()=>e.check(rB())}),hB=X("ZodString",(e,t)=>{Ym.init(e,t),W0.init(e,t),e.email=t=>e.check(g4(gB,t)),e.url=t=>e.check(x4(vB,t)),e.jwt=t=>e.check(L4($B,t)),e.emoji=t=>e.check(w4(yB,t)),e.guid=t=>e.check(fS(yS,t)),e.uuid=t=>e.check(v4(zl,t)),e.uuidv4=t=>e.check(y4(zl,t)),e.uuidv6=t=>e.check(b4(zl,t)),e.uuidv7=t=>e.check(_4(zl,t)),e.nanoid=t=>e.check(S4(bB,t)),e.guid=t=>e.check(fS(yS,t)),e.cuid=t=>e.check(E4(_B,t)),e.cuid2=t=>e.check(T4(xB,t)),e.ulid=t=>e.check(C4(wB,t)),e.base64=t=>e.check(A4(RB,t)),e.base64url=t=>e.check(N4(OB,t)),e.xid=t=>e.check(P4(SB,t)),e.ksuid=t=>e.check(k4(EB,t)),e.ipv4=t=>e.check(R4(TB,t)),e.ipv6=t=>e.check(O4(CB,t)),e.cidrv4=t=>e.check(I4(PB,t)),e.cidrv6=t=>e.check($4(kB,t)),e.e164=t=>e.check(D4(IB,t)),e.datetime=t=>e.check(U0(t)),e.date=t=>e.check(z0(t)),e.time=t=>e.check(H0(t)),e.duration=t=>e.check(Z0(t))});function J(e){return h4(hB,e)}var $t=X("ZodStringFormat",(e,t)=>{Ct.init(e,t),W0.init(e,t)}),gB=X("ZodEmail",(e,t)=>{x9.init(e,t),$t.init(e,t)}),yS=X("ZodGUID",(e,t)=>{b9.init(e,t),$t.init(e,t)}),zl=X("ZodUUID",(e,t)=>{_9.init(e,t),$t.init(e,t)}),vB=X("ZodURL",(e,t)=>{w9.init(e,t),$t.init(e,t)}),yB=X("ZodEmoji",(e,t)=>{S9.init(e,t),$t.init(e,t)}),bB=X("ZodNanoID",(e,t)=>{E9.init(e,t),$t.init(e,t)}),_B=X("ZodCUID",(e,t)=>{T9.init(e,t),$t.init(e,t)}),xB=X("ZodCUID2",(e,t)=>{C9.init(e,t),$t.init(e,t)}),wB=X("ZodULID",(e,t)=>{P9.init(e,t),$t.init(e,t)}),SB=X("ZodXID",(e,t)=>{k9.init(e,t),$t.init(e,t)}),EB=X("ZodKSUID",(e,t)=>{R9.init(e,t),$t.init(e,t)}),TB=X("ZodIPv4",(e,t)=>{N9.init(e,t),$t.init(e,t)}),CB=X("ZodIPv6",(e,t)=>{D9.init(e,t),$t.init(e,t)}),PB=X("ZodCIDRv4",(e,t)=>{L9.init(e,t),$t.init(e,t)}),kB=X("ZodCIDRv6",(e,t)=>{M9.init(e,t),$t.init(e,t)}),RB=X("ZodBase64",(e,t)=>{j9.init(e,t),$t.init(e,t)}),OB=X("ZodBase64URL",(e,t)=>{U9.init(e,t),$t.init(e,t)}),IB=X("ZodE164",(e,t)=>{q9.init(e,t),$t.init(e,t)}),$B=X("ZodJWT",(e,t)=>{B9.init(e,t),$t.init(e,t)}),K0=X("ZodNumber",(e,t)=>{$0.init(e,t),It.init(e,t),e.gt=(t,r)=>e.check(hS(t,r)),e.gte=(t,r)=>e.check(em(t,r)),e.min=(t,r)=>e.check(em(t,r)),e.lt=(t,r)=>e.check(mS(t,r)),e.lte=(t,r)=>e.check(Qf(t,r)),e.max=(t,r)=>e.check(Qf(t,r)),e.int=t=>e.check(bS(t)),e.safe=t=>e.check(bS(t)),e.positive=t=>e.check(hS(0,t)),e.nonnegative=t=>e.check(em(0,t)),e.negative=t=>e.check(mS(0,t)),e.nonpositive=t=>e.check(Qf(0,t)),e.multipleOf=(t,r)=>e.check(gS(t,r)),e.step=(t,r)=>e.check(gS(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function _t(e){return q4(K0,e)}var AB=X("ZodNumberFormat",(e,t)=>{H9.init(e,t),K0.init(e,t)});function bS(e){return z4(AB,e)}var NB=X("ZodBoolean",(e,t)=>{V9.init(e,t),It.init(e,t)});function ar(e){return B4(NB,e)}var DB=X("ZodNull",(e,t)=>{Z9.init(e,t),It.init(e,t)});function J0(e){return H4(DB,e)}var LB=X("ZodUnknown",(e,t)=>{G9.init(e,t),It.init(e,t)});function Gt(){return V4(LB)}var MB=X("ZodNever",(e,t)=>{W9.init(e,t),It.init(e,t)});function jB(e){return Z4(MB,e)}var FB=X("ZodArray",(e,t)=>{K9.init(e,t),It.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(Xl(t,r)),e.nonempty=t=>e.check(Xl(1,t)),e.max=(t,r)=>e.check(D0(t,r)),e.length=(t,r)=>e.check(L0(t,r)),e.unwrap=()=>e.element});function Ye(e,t){return nB(FB,e,t)}var X0=X("ZodObject",(e,t)=>{A0.init(e,t),It.init(e,t),ht.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>ir(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Gt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Gt()}),e.strict=()=>e.clone({...e._zod.def,catchall:jB()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>ht.extend(e,t),e.merge=t=>ht.merge(e,t),e.pick=t=>ht.pick(e,t),e.omit=t=>ht.omit(e,t),e.partial=(...t)=>ht.partial(tE,e,t[0]),e.required=(...t)=>ht.required(rE,e,t[0])});function ue(e,t){let r={type:"object",get shape(){return ht.assignProp(this,"shape",{...e}),this.shape},...ht.normalizeParams(t)};return new X0(r)}function pn(e,t){return new X0({type:"object",get shape(){return ht.assignProp(this,"shape",{...e}),this.shape},catchall:Gt(),...ht.normalizeParams(t)})}var Y0=X("ZodUnion",(e,t)=>{N0.init(e,t),It.init(e,t),e.options=t.options});function Pt(e,t){return new Y0({type:"union",options:e,...ht.normalizeParams(t)})}var UB=X("ZodDiscriminatedUnion",(e,t)=>{Y0.init(e,t),J9.init(e,t)});function Q0(e,t,r){return new UB({type:"union",options:t,discriminator:e,...ht.normalizeParams(r)})}var qB=X("ZodIntersection",(e,t)=>{X9.init(e,t),It.init(e,t)});function Qm(e,t){return new qB({type:"intersection",left:e,right:t})}var zB=X("ZodRecord",(e,t)=>{Y9.init(e,t),It.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Wt(e,t,r){return new zB({type:"record",keyType:e,valueType:t,...ht.normalizeParams(r)})}var Sm=X("ZodEnum",(e,t)=>{Q9.init(e,t),It.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,a)=>{let i={};for(let a of e){if(!r.has(a))throw new Error(`Key ${a} not found in enum`);i[a]=t.entries[a]}return new Sm({...t,checks:[],...ht.normalizeParams(a),entries:i})},e.exclude=(e,a)=>{let i={...t.entries};for(let t of e){if(!r.has(t))throw new Error(`Key ${t} not found in enum`);delete i[t]}return new Sm({...t,checks:[],...ht.normalizeParams(a),entries:i})}});function ir(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new Sm({type:"enum",entries:r,...ht.normalizeParams(t)})}var BB=X("ZodLiteral",(e,t)=>{e4.init(e,t),It.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Ce(e,t){return new BB({type:"literal",values:Array.isArray(e)?e:[e],...ht.normalizeParams(t)})}var HB=X("ZodTransform",(e,t)=>{t4.init(e,t),It.init(e,t),e._zod.parse=(r,a)=>{r.addIssue=a=>{if("string"==typeof a)r.issues.push(ht.issue(a,r.value,t));else{let t=a;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),r.issues.push(ht.issue(t))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function eE(e){return new HB({type:"transform",transform:e})}var tE=X("ZodOptional",(e,t)=>{r4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Te(e){return new tE({type:"optional",innerType:e})}var VB=X("ZodNullable",(e,t)=>{n4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType});function _S(e){return new VB({type:"nullable",innerType:e})}var ZB=X("ZodDefault",(e,t)=>{s4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function GB(e,t){return new ZB({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}var WB=X("ZodPrefault",(e,t)=>{a4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType});function KB(e,t){return new WB({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})}var rE=X("ZodNonOptional",(e,t)=>{i4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType});function JB(e,t){return new rE({type:"nonoptional",innerType:e,...ht.normalizeParams(t)})}var XB=X("ZodCatch",(e,t)=>{o4.init(e,t),It.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function YB(e,t){return new XB({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}var QB=X("ZodPipe",(e,t)=>{c4.init(e,t),It.init(e,t),e.in=t.in,e.out=t.out});function Em(e,t){return new QB({type:"pipe",in:e,out:t})}var eH=X("ZodReadonly",(e,t)=>{l4.init(e,t),It.init(e,t)});function tH(e){return new eH({type:"readonly",innerType:e})}var nE=X("ZodCustom",(e,t)=>{u4.init(e,t),It.init(e,t)});function rH(e,t){let r=new br({check:"custom",...ht.normalizeParams(t)});return r._zod.check=e,r}function nH(e,t){return sB(nE,e??(()=>!0),t)}function sH(e,t={}){return aB(nE,e,t)}function aH(e,t){let r=rH(t=>(t.addIssue=e=>{if("string"==typeof e)t.issues.push(ht.issue(e,t.value,r._zod.def));else{let a=e;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=t.value),a.inst??(a.inst=r),a.continue??(a.continue=!r._zod.def.abort),t.issues.push(ht.issue(a))}},e(t.value,t)),t);return r}function sE(e,t){return Em(eE(e),t)}Kn(f4());var Ie,aE="2025-11-25",iH=[aE,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],Vn="io.modelcontextprotocol/related-task",vu="2.0",Pn=nH(e=>null!==e&&("object"==typeof e||"function"==typeof e)),iE=Pt([J(),_t().int()]),oE=J(),oH=pn({ttl:Pt([_t(),J0()]).optional(),pollInterval:_t().optional()}),eh=pn({taskId:J()}),cH=pn({progressToken:iE.optional(),[Vn]:eh.optional()}),_r=pn({task:oH.optional(),_meta:cH.optional()}),tr=ue({method:J(),params:_r.optional()}),ra=pn({_meta:ue({[Vn]:Te(eh)}).passthrough().optional()}),Kr=ue({method:J(),params:ra.optional()}),or=pn({_meta:pn({[Vn]:eh.optional()}).optional()}),yu=Pt([J(),_t().int()]),cE=ue({jsonrpc:Ce(vu),id:yu,...tr.shape}).strict(),xS=e=>cE.safeParse(e).success,lE=ue({jsonrpc:Ce(vu),...Kr.shape}).strict(),lH=e=>lE.safeParse(e).success,uE=ue({jsonrpc:Ce(vu),id:yu,result:or}).strict(),Bl=e=>uE.safeParse(e).success;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(Ie||(Ie={}));var dE=ue({jsonrpc:Ce(vu),id:yu,error:ue({code:_t().int(),message:J(),data:Te(Gt())})}).strict(),uH=e=>dE.safeParse(e).success,Bne=Pt([cE,lE,uE,dE]),th=or.strict(),dH=ra.extend({requestId:yu,reason:J().optional()}),rh=Kr.extend({method:Ce("notifications/cancelled"),params:dH}),pH=ue({src:J(),mimeType:J().optional(),sizes:Ye(J()).optional()}),cc=ue({icons:Ye(pH).optional()}),yi=ue({name:J(),title:J().optional()}),pE=yi.extend({...yi.shape,...cc.shape,version:J(),websiteUrl:J().optional()}),fH=Qm(ue({applyDefaults:ar().optional()}),Wt(J(),Gt())),mH=sE(e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,Qm(ue({form:fH.optional(),url:Pn.optional()}),Wt(J(),Gt()).optional())),hH=ue({list:Te(ue({}).passthrough()),cancel:Te(ue({}).passthrough()),requests:Te(ue({sampling:Te(ue({createMessage:Te(ue({}).passthrough())}).passthrough()),elicitation:Te(ue({create:Te(ue({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),gH=ue({list:Te(ue({}).passthrough()),cancel:Te(ue({}).passthrough()),requests:Te(ue({tools:Te(ue({call:Te(ue({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),vH=ue({experimental:Wt(J(),Pn).optional(),sampling:ue({context:Pn.optional(),tools:Pn.optional()}).optional(),elicitation:mH.optional(),roots:ue({listChanged:ar().optional()}).optional(),tasks:Te(hH)}),yH=_r.extend({protocolVersion:J(),capabilities:vH,clientInfo:pE}),fE=tr.extend({method:Ce("initialize"),params:yH}),bH=ue({experimental:Wt(J(),Pn).optional(),logging:Pn.optional(),completions:Pn.optional(),prompts:Te(ue({listChanged:Te(ar())})),resources:ue({subscribe:ar().optional(),listChanged:ar().optional()}).optional(),tools:ue({listChanged:ar().optional()}).optional(),tasks:Te(gH)}).passthrough(),_H=or.extend({protocolVersion:J(),capabilities:bH,serverInfo:pE,instructions:J().optional()}),mE=Kr.extend({method:Ce("notifications/initialized")}),nh=tr.extend({method:Ce("ping")}),xH=ue({progress:_t(),total:Te(_t()),message:Te(J())}),wH=ue({...ra.shape,...xH.shape,progressToken:iE}),sh=Kr.extend({method:Ce("notifications/progress"),params:wH}),SH=_r.extend({cursor:oE.optional()}),lc=tr.extend({params:SH.optional()}),uc=or.extend({nextCursor:Te(oE)}),dc=ue({taskId:J(),status:ir(["working","input_required","completed","failed","cancelled"]),ttl:Pt([_t(),J0()]),createdAt:J(),lastUpdatedAt:J(),pollInterval:Te(_t()),statusMessage:Te(J())}),bu=or.extend({task:dc}),EH=ra.merge(dc),Ql=Kr.extend({method:Ce("notifications/tasks/status"),params:EH}),ah=tr.extend({method:Ce("tasks/get"),params:_r.extend({taskId:J()})}),ih=or.merge(dc),oh=tr.extend({method:Ce("tasks/result"),params:_r.extend({taskId:J()})}),ch=lc.extend({method:Ce("tasks/list")}),lh=uc.extend({tasks:Ye(dc)}),TH=tr.extend({method:Ce("tasks/cancel"),params:_r.extend({taskId:J()})}),CH=or.merge(dc),hE=ue({uri:J(),mimeType:Te(J()),_meta:Wt(J(),Gt()).optional()}),gE=hE.extend({text:J()}),uh=J().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),vE=hE.extend({blob:uh}),Ei=ue({audience:Ye(ir(["user","assistant"])).optional(),priority:_t().min(0).max(1).optional(),lastModified:j0.datetime({offset:!0}).optional()}),yE=ue({...yi.shape,...cc.shape,uri:J(),description:Te(J()),mimeType:Te(J()),annotations:Ei.optional(),_meta:Te(pn({}))}),PH=ue({...yi.shape,...cc.shape,uriTemplate:J(),description:Te(J()),mimeType:Te(J()),annotations:Ei.optional(),_meta:Te(pn({}))}),Tm=lc.extend({method:Ce("resources/list")}),kH=uc.extend({resources:Ye(yE)}),Cm=lc.extend({method:Ce("resources/templates/list")}),RH=uc.extend({resourceTemplates:Ye(PH)}),dh=_r.extend({uri:J()}),OH=dh,Pm=tr.extend({method:Ce("resources/read"),params:OH}),IH=or.extend({contents:Ye(Pt([gE,vE]))}),$H=Kr.extend({method:Ce("notifications/resources/list_changed")}),AH=dh,NH=tr.extend({method:Ce("resources/subscribe"),params:AH}),DH=dh,LH=tr.extend({method:Ce("resources/unsubscribe"),params:DH}),MH=ra.extend({uri:J()}),jH=Kr.extend({method:Ce("notifications/resources/updated"),params:MH}),FH=ue({name:J(),description:Te(J()),required:Te(ar())}),UH=ue({...yi.shape,...cc.shape,description:Te(J()),arguments:Te(Ye(FH)),_meta:Te(pn({}))}),km=lc.extend({method:Ce("prompts/list")}),qH=uc.extend({prompts:Ye(UH)}),zH=_r.extend({name:J(),arguments:Wt(J(),J()).optional()}),Rm=tr.extend({method:Ce("prompts/get"),params:zH}),ph=ue({type:Ce("text"),text:J(),annotations:Ei.optional(),_meta:Wt(J(),Gt()).optional()}),fh=ue({type:Ce("image"),data:uh,mimeType:J(),annotations:Ei.optional(),_meta:Wt(J(),Gt()).optional()}),mh=ue({type:Ce("audio"),data:uh,mimeType:J(),annotations:Ei.optional(),_meta:Wt(J(),Gt()).optional()}),BH=ue({type:Ce("tool_use"),name:J(),id:J(),input:ue({}).passthrough(),_meta:Te(ue({}).passthrough())}).passthrough(),HH=ue({type:Ce("resource"),resource:Pt([gE,vE]),annotations:Ei.optional(),_meta:Wt(J(),Gt()).optional()}),VH=yE.extend({type:Ce("resource_link")}),hh=Pt([ph,fh,mh,VH,HH]),ZH=ue({role:ir(["user","assistant"]),content:hh}),GH=or.extend({description:Te(J()),messages:Ye(ZH)}),WH=Kr.extend({method:Ce("notifications/prompts/list_changed")}),KH=ue({title:J().optional(),readOnlyHint:ar().optional(),destructiveHint:ar().optional(),idempotentHint:ar().optional(),openWorldHint:ar().optional()}),JH=ue({taskSupport:ir(["required","optional","forbidden"]).optional()}),bE=ue({...yi.shape,...cc.shape,description:J().optional(),inputSchema:ue({type:Ce("object"),properties:Wt(J(),Pn).optional(),required:Ye(J()).optional()}).catchall(Gt()),outputSchema:ue({type:Ce("object"),properties:Wt(J(),Pn).optional(),required:Ye(J()).optional()}).catchall(Gt()).optional(),annotations:Te(KH),execution:Te(JH),_meta:Wt(J(),Gt()).optional()}),Om=lc.extend({method:Ce("tools/list")}),XH=uc.extend({tools:Ye(bE)}),gh=or.extend({content:Ye(hh).default([]),structuredContent:Wt(J(),Gt()).optional(),isError:Te(ar())}),Hne=gh.or(or.extend({toolResult:Gt()})),YH=_r.extend({name:J(),arguments:Te(Wt(J(),Gt()))}),eu=tr.extend({method:Ce("tools/call"),params:YH}),QH=Kr.extend({method:Ce("notifications/tools/list_changed")}),tu=ir(["debug","info","notice","warning","error","critical","alert","emergency"]),eV=_r.extend({level:tu}),_E=tr.extend({method:Ce("logging/setLevel"),params:eV}),tV=ra.extend({level:tu,logger:J().optional(),data:Gt()}),rV=Kr.extend({method:Ce("notifications/message"),params:tV}),nV=ue({name:J().optional()}),sV=ue({hints:Te(Ye(nV)),costPriority:Te(_t().min(0).max(1)),speedPriority:Te(_t().min(0).max(1)),intelligencePriority:Te(_t().min(0).max(1))}),aV=ue({mode:Te(ir(["auto","required","none"]))}),iV=ue({type:Ce("tool_result"),toolUseId:J().describe("The unique identifier for the corresponding tool call."),content:Ye(hh).default([]),structuredContent:ue({}).passthrough().optional(),isError:Te(ar()),_meta:Te(ue({}).passthrough())}).passthrough(),oV=Q0("type",[ph,fh,mh]),ru=Q0("type",[ph,fh,mh,BH,iV]),cV=ue({role:ir(["user","assistant"]),content:Pt([ru,Ye(ru)]),_meta:Te(ue({}).passthrough())}).passthrough(),lV=_r.extend({messages:Ye(cV),modelPreferences:sV.optional(),systemPrompt:J().optional(),includeContext:ir(["none","thisServer","allServers"]).optional(),temperature:_t().optional(),maxTokens:_t().int(),stopSequences:Ye(J()).optional(),metadata:Pn.optional(),tools:Te(Ye(bE)),toolChoice:Te(aV)}),uV=tr.extend({method:Ce("sampling/createMessage"),params:lV}),xE=or.extend({model:J(),stopReason:Te(ir(["endTurn","stopSequence","maxTokens"]).or(J())),role:ir(["user","assistant"]),content:oV}),wE=or.extend({model:J(),stopReason:Te(ir(["endTurn","stopSequence","maxTokens","toolUse"]).or(J())),role:ir(["user","assistant"]),content:Pt([ru,Ye(ru)])}),dV=ue({type:Ce("boolean"),title:J().optional(),description:J().optional(),default:ar().optional()}),pV=ue({type:Ce("string"),title:J().optional(),description:J().optional(),minLength:_t().optional(),maxLength:_t().optional(),format:ir(["email","uri","date","date-time"]).optional(),default:J().optional()}),fV=ue({type:ir(["number","integer"]),title:J().optional(),description:J().optional(),minimum:_t().optional(),maximum:_t().optional(),default:_t().optional()}),mV=ue({type:Ce("string"),title:J().optional(),description:J().optional(),enum:Ye(J()),default:J().optional()}),hV=ue({type:Ce("string"),title:J().optional(),description:J().optional(),oneOf:Ye(ue({const:J(),title:J()})),default:J().optional()}),gV=ue({type:Ce("string"),title:J().optional(),description:J().optional(),enum:Ye(J()),enumNames:Ye(J()).optional(),default:J().optional()}),vV=Pt([mV,hV]),yV=ue({type:Ce("array"),title:J().optional(),description:J().optional(),minItems:_t().optional(),maxItems:_t().optional(),items:ue({type:Ce("string"),enum:Ye(J())}),default:Ye(J()).optional()}),bV=ue({type:Ce("array"),title:J().optional(),description:J().optional(),minItems:_t().optional(),maxItems:_t().optional(),items:ue({anyOf:Ye(ue({const:J(),title:J()}))}),default:Ye(J()).optional()}),_V=Pt([yV,bV]),xV=Pt([gV,vV,_V]),wV=Pt([xV,dV,pV,fV]),SV=_r.extend({mode:Ce("form").optional(),message:J(),requestedSchema:ue({type:Ce("object"),properties:Wt(J(),wV),required:Ye(J()).optional()})}),EV=_r.extend({mode:Ce("url"),message:J(),elicitationId:J(),url:J().url()}),TV=Pt([SV,EV]),CV=tr.extend({method:Ce("elicitation/create"),params:TV}),PV=ra.extend({elicitationId:J()}),kV=Kr.extend({method:Ce("notifications/elicitation/complete"),params:PV}),Im=or.extend({action:ir(["accept","decline","cancel"]),content:sE(e=>null===e?void 0:e,Wt(J(),Pt([J(),_t(),ar(),Ye(J())])).optional())}),RV=ue({type:Ce("ref/resource"),uri:J()}),OV=ue({type:Ce("ref/prompt"),name:J()}),IV=_r.extend({ref:Pt([OV,RV]),argument:ue({name:J(),value:J()}),context:ue({arguments:Wt(J(),J()).optional()}).optional()}),$m=tr.extend({method:Ce("completion/complete"),params:IV});function $V(e){if("ref/prompt"!==e.params.ref.type)throw new TypeError(`Expected CompleteRequestPrompt, but got ${e.params.ref.type}`)}function AV(e){if("ref/resource"!==e.params.ref.type)throw new TypeError(`Expected CompleteRequestResourceTemplate, but got ${e.params.ref.type}`)}var NV=or.extend({completion:pn({values:Ye(J()).max(100),total:Te(_t().int()),hasMore:Te(ar())})}),DV=ue({uri:J().startsWith("file://"),name:J().optional(),_meta:Wt(J(),Gt()).optional()}),LV=tr.extend({method:Ce("roots/list")}),SE=or.extend({roots:Ye(DV)}),MV=Kr.extend({method:Ce("notifications/roots/list_changed")}),Vne=Pt([nh,fE,$m,_E,Rm,km,Tm,Cm,Pm,NH,LH,eu,Om,ah,oh,ch]),Zne=Pt([rh,sh,mE,MV,Ql]),Gne=Pt([th,xE,wE,Im,SE,ih,lh,bu]),Wne=Pt([nh,uV,CV,LV,ah,oh,ch]),Kne=Pt([rh,sh,rV,jH,$H,QH,WH,Ql,kV]),Jne=Pt([th,_H,NV,GH,qH,kH,RH,IH,gh,XH,ih,lh,bu]),Pe=class e extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}static fromError(t,r,a){if(t===Ie.UrlElicitationRequired&&a){let e=a;if(e.elicitations)return new Am(e.elicitations,r)}return new e(t,r,a)}},Am=class extends Pe{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(Ie.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){var e,t;return null!==(t=null===(e=this.data)||void 0===e?void 0:e.elicitations)&&void 0!==t?t:[]}};function Xs(e){return"completed"===e||"failed"===e||"cancelled"===e}var jV=Symbol("Let zodToJsonSchema decide on which parser to use"),wS={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},FV=e=>"string"==typeof e?{...wS,name:e}:{...wS,...e},UV=e=>{let t=FV(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function EE(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function ft(e,t,r,a,i){e[t]=r,EE(e,t,a,i)}var TE=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function yr(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?TE(t,e.currentPath):t.join("/")}}function qV(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==ie.ZodAny&&(r.items=it(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&ft(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&ft(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(ft(r,"minItems",e.exactLength.value,e.exactLength.message,t),ft(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function zV(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?ft(r,"minimum",a.value,a.message,t):ft(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),ft(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?ft(r,"maximum",a.value,a.message,t):ft(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),ft(r,"maximum",a.value,a.message,t));break;case"multipleOf":ft(r,"multipleOf",a.value,a.message,t)}return r}function BV(){return{type:"boolean"}}function CE(e,t){return it(e.type._def,t)}var HV=(e,t)=>it(e.innerType._def,t);function PE(e,t,r){let a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((r,a)=>PE(e,t,r))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return VV(e,t)}}var VV=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let a of e.checks)switch(a.kind){case"min":ft(r,"minimum",a.value,a.message,t);break;case"max":ft(r,"maximum",a.value,a.message,t)}return r};function ZV(e,t){return{...it(e.innerType._def,t),default:e.defaultValue()}}function GV(e,t){return"input"===t.effectStrategy?it(e.schema._def,t):yr(t)}function WV(e){return{type:"string",enum:Array.from(e.values)}}var KV=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function JV(e,t){let r=[it(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),it(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(e=>{if(KV(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else a=void 0;i.push(t)}}),i.length?{allOf:i,...a}:void 0}function XV(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}var nm=void 0,on={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===nm&&(nm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),nm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function kE(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":ft(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":ft(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":cn(r,"email",a.message,t);break;case"format:idn-email":cn(r,"idn-email",a.message,t);break;case"pattern:zod":pr(r,on.email,a.message,t)}break;case"url":cn(r,"uri",a.message,t);break;case"uuid":cn(r,"uuid",a.message,t);break;case"regex":pr(r,a.regex,a.message,t);break;case"cuid":pr(r,on.cuid,a.message,t);break;case"cuid2":pr(r,on.cuid2,a.message,t);break;case"startsWith":pr(r,RegExp(`^${sm(a.value,t)}`),a.message,t);break;case"endsWith":pr(r,RegExp(`${sm(a.value,t)}$`),a.message,t);break;case"datetime":cn(r,"date-time",a.message,t);break;case"date":cn(r,"date",a.message,t);break;case"time":cn(r,"time",a.message,t);break;case"duration":cn(r,"duration",a.message,t);break;case"length":ft(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),ft(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":pr(r,RegExp(sm(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&cn(r,"ipv4",a.message,t),"v4"!==a.version&&cn(r,"ipv6",a.message,t);break;case"base64url":pr(r,on.base64url,a.message,t);break;case"jwt":pr(r,on.jwt,a.message,t);break;case"cidr":"v6"!==a.version&&pr(r,on.ipv4Cidr,a.message,t),"v4"!==a.version&&pr(r,on.ipv6Cidr,a.message,t);break;case"emoji":pr(r,on.emoji(),a.message,t);break;case"ulid":pr(r,on.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":cn(r,"binary",a.message,t);break;case"contentEncoding:base64":ft(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":pr(r,on.base64,a.message,t)}break;case"nanoid":pr(r,on.nanoid,a.message,t)}return r}function sm(e,t){return"escape"===t.patternStrategy?QV(e):e}var YV=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function QV(e){let t="";for(let r=0;r<e.length;r++)YV.has(e[r])||(t+="\\"),t+=e[r];return t}function cn(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):ft(e,"format",t,r,a)}function pr(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:SS(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):ft(e,"pattern",SS(t,a),r,a)}function SS(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r=e.flags.includes("i"),a=e.flags.includes("m"),i=e.flags.includes("s"),s=r?e.source.toLowerCase():e.source,n="",o=!1,l=!1,c=!1;for(let e=0;e<s.length;e++)if(o)n+=s[e],o=!1;else{if(r)if(l){if(s[e].match(/[a-z]/)){c?(n+=s[e],n+=`${s[e-2]}-${s[e]}`.toUpperCase(),c=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(n+=s[e],c=!0):n+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){n+=`[${s[e]}${s[e].toUpperCase()}]`;continue}if(a){if("^"===s[e]){n+="(^|(?<=[\r\n]))";continue}if("$"===s[e]){n+="($|(?=[\r\n]))";continue}}i&&"."===s[e]?n+=l?`${s[e]}\r\n`:`[${s[e]}\r\n]`:(n+=s[e],"\\"===s[e]?o=!0:l&&"]"===s[e]?l=!1:!l&&"["===s[e]&&(l=!0))}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}function RE(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===ie.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:it(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??yr(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:it(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===ie.ZodString&&e.keyType._def.checks?.length){let{type:a,...i}=kE(e.keyType._def,t);return{...r,propertyNames:i}}if(e.keyType?._def.typeName===ie.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===ie.ZodBranded&&e.keyType._def.type._def.typeName===ie.ZodString&&e.keyType._def.type._def.checks?.length){let{type:a,...i}=CE(e.keyType._def,t);return{...r,propertyNames:i}}return r}function e3(e,t){if("record"===t.mapStrategy)return RE(e,t);return{type:"array",maxItems:125,items:{type:"array",items:[it(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||yr(t),it(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||yr(t)],minItems:2,maxItems:2}}}function t3(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),a=Array.from(new Set(r.map(e=>typeof e)));return{type:1===a.length?"string"===a[0]?"string":"number":["string","number"],enum:r}}function r3(e){return"openAi"===e.target?void 0:{not:yr({...e,currentPath:[...e.currentPath,"not"]})}}function n3(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}var nu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function s3(e,t){if("openApi3"===t.target)return ES(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in nu&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=nu[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return ES(e,t)}var ES=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>it(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function a3(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:nu[e.innerType._def.typeName],nullable:!0}:{type:[nu[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=it(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=it(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function i3(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",EE(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?ft(r,"minimum",a.value,a.message,t):ft(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),ft(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?ft(r,"maximum",a.value,a.message,t):ft(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),ft(r,"maximum",a.value,a.message,t));break;case"multipleOf":ft(r,"multipleOf",a.value,a.message,t)}return r}function o3(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},i=[],s=e.shape();for(let e in s){let n=s[e];if(void 0===n||void 0===n._def)continue;let o=l3(n);o&&r&&("ZodOptional"===n._def.typeName&&(n=n._def.innerType),n.isNullable()||(n=n.nullable()),o=!1);let l=it(n._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,o||i.push(e))}i.length&&(a.required=i);let n=c3(e,t);return void 0!==n&&(a.additionalProperties=n),a}function c3(e,t){if("ZodNever"!==e.catchall._def.typeName)return it(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function l3(e){try{return e.isOptional()}catch{return!0}}var u3=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return it(e.innerType._def,t);let r=it(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:yr(t)},r]}:yr(t)},d3=(e,t)=>{if("input"===t.pipeStrategy)return it(e.in._def,t);if("output"===t.pipeStrategy)return it(e.out._def,t);let r=it(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,it(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}};function p3(e,t){return it(e.type._def,t)}function f3(e,t){let r={type:"array",uniqueItems:!0,items:it(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&ft(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&ft(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function m3(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>it(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:it(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>it(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function h3(e){return{not:yr(e)}}function g3(e){return yr(e)}var v3=(e,t)=>it(e.innerType._def,t),y3=(e,t,r)=>{switch(t){case ie.ZodString:return kE(e,r);case ie.ZodNumber:return i3(e,r);case ie.ZodObject:return o3(e,r);case ie.ZodBigInt:return zV(e,r);case ie.ZodBoolean:return BV();case ie.ZodDate:return PE(e,r);case ie.ZodUndefined:return h3(r);case ie.ZodNull:return n3(r);case ie.ZodArray:return qV(e,r);case ie.ZodUnion:case ie.ZodDiscriminatedUnion:return s3(e,r);case ie.ZodIntersection:return JV(e,r);case ie.ZodTuple:return m3(e,r);case ie.ZodRecord:return RE(e,r);case ie.ZodLiteral:return XV(e,r);case ie.ZodEnum:return WV(e);case ie.ZodNativeEnum:return t3(e);case ie.ZodNullable:return a3(e,r);case ie.ZodOptional:return u3(e,r);case ie.ZodMap:return e3(e,r);case ie.ZodSet:return f3(e,r);case ie.ZodLazy:return()=>e.getter()._def;case ie.ZodPromise:return p3(e,r);case ie.ZodNaN:case ie.ZodNever:return r3(r);case ie.ZodEffects:return GV(e,r);case ie.ZodAny:return yr(r);case ie.ZodUnknown:return g3(r);case ie.ZodDefault:return ZV(e,r);case ie.ZodBranded:return CE(e,r);case ie.ZodReadonly:return v3(e,r);case ie.ZodCatch:return HV(e,r);case ie.ZodPipeline:return d3(e,r);case ie.ZodFunction:case ie.ZodVoid:case ie.ZodSymbol:default:return}};function it(e,t,r=!1){let a=t.seen.get(e);if(t.override){let i=t.override?.(e,t,a,r);if(i!==jV)return i}if(a&&!r){let e=b3(a,t);if(void 0!==e)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=y3(e,e.typeName,t),n="function"==typeof s?it(s(),t):s;if(n&&_3(e,t,n),t.postProcess){let r=t.postProcess(n,e,t);return i.jsonSchema=n,r}return i.jsonSchema=n,n}var b3=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:TE(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),yr(t)):"seen"===t.$refStrategy?yr(t):void 0}},_3=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),x3=(e,t)=>{let r=UV(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:it(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??yr(r)}),{}):void 0,i="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,s=it(e._def,void 0===i?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??yr(r),n="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==n&&(s.title=n),r.flags.hasReferencedOpenAiAnyType&&(a||(a={}),a[r.openAiAnyTypeName]||(a[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let o=void 0===i?a?{...s,[r.definitionPath]:a}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...a,[i]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};function w3(e){return e&&"jsonSchema7"!==e&&"draft-7"!==e&&("jsonSchema2019-09"===e||"draft-2020-12"===e)?"draft-2020-12":"draft-7"}function TS(e,t){var r,a,i;return dn(e)?iB(e,{target:w3(t?.target),io:null!==(r=t?.pipeStrategy)&&void 0!==r?r:"input"}):x3(e,{strictUnions:null===(a=t?.strictUnions)||void 0===a||a,pipeStrategy:null!==(i=t?.pipeStrategy)&&void 0!==i?i:"input"})}function CS(e){let t=oc(e),r=t?.method;if(!r)throw new Error("Schema is missing a method literal");let a=M0(r);if("string"!=typeof a)throw new Error("Schema method literal must be a string");return a}function PS(e,t){let r=Ho(e,t);if(!r.success)throw r.error;return r.data}var S3=6e4,Nm=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(rh,e=>{this._oncancel(e)}),this.setNotificationHandler(sh,e=>{this._onprogress(e)}),this.setRequestHandler(nh,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(ah,async(e,t)=>{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new Pe(Ie.InvalidParams,"Failed to retrieve task: Task not found");return{...r}}),this.setRequestHandler(oh,async(e,t)=>{let r=async()=>{var a;let i=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(i,t.sessionId);){if("response"===e.type||"error"===e.type){let t=e.message,r=t.id,a=this._requestResolvers.get(r);if(a)if(this._requestResolvers.delete(r),"response"===e.type)a(t);else{let e=t;a(new Pe(e.error.code,e.error.message,e.error.data))}else{let t="response"===e.type?"Response":"Error";this._onerror(new Error(`${t} handler missing for request ${r}`))}continue}await(null===(a=this._transport)||void 0===a?void 0:a.send(e.message,{relatedRequestId:t.requestId}))}}let s=await this._taskStore.getTask(i,t.sessionId);if(!s)throw new Pe(Ie.InvalidParams,`Task not found: ${i}`);if(!Xs(s.status))return await this._waitForTaskUpdate(i,t.signal),await r();if(Xs(s.status)){let e=await this._taskStore.getTaskResult(i,t.sessionId);return this._clearTaskQueue(i),{...e,_meta:{...e._meta,[Vn]:{taskId:i}}}}return await r()};return await r()}),this.setRequestHandler(ch,async(e,t)=>{var r;try{let{tasks:a,nextCursor:i}=await this._taskStore.listTasks(null===(r=e.params)||void 0===r?void 0:r.cursor,t.sessionId);return{tasks:a,nextCursor:i,_meta:{}}}catch(e){throw new Pe(Ie.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(TH,async(e,t)=>{try{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new Pe(Ie.InvalidParams,`Task not found: ${e.params.taskId}`);if(Xs(r.status))throw new Pe(Ie.InvalidParams,`Cannot cancel task in terminal status: ${r.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);let a=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!a)throw new Pe(Ie.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...a}}catch(e){throw e instanceof Pe?e:new Pe(Ie.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){let t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,r,a,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(a,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:i,onTimeout:a})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),Pe.fromError(Ie.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,r,a;this._transport=e;let i=null===(t=this.transport)||void 0===t?void 0:t.onclose;this._transport.onclose=()=>{i?.(),this._onclose()};let s=null===(r=this.transport)||void 0===r?void 0:r.onerror;this._transport.onerror=e=>{s?.(e),this._onerror(e)};let n=null===(a=this._transport)||void 0===a?void 0:a.onmessage;this._transport.onmessage=(e,t)=>{n?.(e,t),Bl(e)||uH(e)?this._onresponse(e):xS(e)?this._onrequest(e,t):lH(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let r=Pe.fromError(Ie.ConnectionClosed,"Connection closed");this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);for(let e of t.values())e(r)}_onerror(e){var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}_onnotification(e){var t;let r=null!==(t=this._notificationHandlers.get(e.method))&&void 0!==t?t:this.fallbackNotificationHandler;void 0!==r&&Promise.resolve().then(()=>r(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){var r,a,i,s,n,o;let l=null!==(r=this._requestHandlers.get(e.method))&&void 0!==r?r:this.fallbackRequestHandler,c=this._transport,u=null===(s=null===(i=null===(a=e.params)||void 0===a?void 0:a._meta)||void 0===i?void 0:i[Vn])||void 0===s?void 0:s.taskId;if(void 0===l){let t={jsonrpc:"2.0",id:e.id,error:{code:Ie.MethodNotFound,message:"Method not found"}};return void(u&&this._taskMessageQueue?this._enqueueTaskMessage(u,{type:"error",message:t,timestamp:Date.now()},c?.sessionId).catch(e=>this._onerror(new Error(`Failed to enqueue error response: ${e}`))):c?.send(t).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))))}let p=new AbortController;this._requestHandlerAbortControllers.set(e.id,p);let d=null===(n=e.params)||void 0===n?void 0:n.task,h=this._taskStore?this.requestTaskStore(e,c?.sessionId):void 0,m={signal:p.signal,sessionId:c?.sessionId,_meta:null===(o=e.params)||void 0===o?void 0:o._meta,sendNotification:async t=>{let r={relatedRequestId:e.id};u&&(r.relatedTask={taskId:u}),await this.notification(t,r)},sendRequest:async(t,r,a)=>{var i,s;let n={...a,relatedRequestId:e.id};u&&!n.relatedTask&&(n.relatedTask={taskId:u});let o=null!==(s=null===(i=n.relatedTask)||void 0===i?void 0:i.taskId)&&void 0!==s?s:u;return o&&h&&await h.updateTaskStatus(o,"input_required"),await this.request(t,r,n)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:u,taskStore:h,taskRequestedTtl:d?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{d&&this.assertTaskHandlerCapability(e.method)}).then(()=>l(e,m)).then(async t=>{if(p.signal.aborted)return;let r={result:t,jsonrpc:"2.0",id:e.id};u&&this._taskMessageQueue?await this._enqueueTaskMessage(u,{type:"response",message:r,timestamp:Date.now()},c?.sessionId):await(c?.send(r))},async t=>{var r;if(p.signal.aborted)return;let a={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:Ie.InternalError,message:null!==(r=t.message)&&void 0!==r?r:"Internal error",...void 0!==t.data&&{data:t.data}}};u&&this._taskMessageQueue?await this._enqueueTaskMessage(u,{type:"error",message:a,timestamp:Date.now()},c?.sessionId):await(c?.send(a))}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,a=Number(t),i=this._progressHandlers.get(a);if(!i)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));let s=this._responseHandlers.get(a),n=this._timeoutInfo.get(a);if(n&&s&&n.resetTimeoutOnProgress)try{this._resetTimeout(a)}catch(e){return this._responseHandlers.delete(a),this._progressHandlers.delete(a),this._cleanupTimeout(a),void s(e)}i(r)}_onresponse(e){let t=Number(e.id),r=this._requestResolvers.get(t);if(r){if(this._requestResolvers.delete(t),Bl(e))r(e);else{r(new Pe(e.error.code,e.error.message,e.error.data))}return}let a=this._responseHandlers.get(t);if(void 0===a)return void this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));this._responseHandlers.delete(t),this._cleanupTimeout(t);let i=!1;if(Bl(e)&&e.result&&"object"==typeof e.result){let r=e.result;if(r.task&&"object"==typeof r.task){let e=r.task;"string"==typeof e.taskId&&(i=!0,this._taskProgressTokens.set(e.taskId,t))}}if(i||this._progressHandlers.delete(t),Bl(e))a(e);else{a(Pe.fromError(e.error.code,e.error.message,e.error.data))}}get transport(){return this._transport}async close(){var e;await(null===(e=this._transport)||void 0===e?void 0:e.close())}async*requestStream(e,t,r){var a,i,s,n;let o,{task:l}=r??{};if(l)try{let l=await this.request(e,bu,r);if(!l.task)throw new Pe(Ie.InternalError,"Task creation did not return a task");for(o=l.task.taskId,yield{type:"taskCreated",task:l.task};;){let e=await this.getTask({taskId:o},r);if(yield{type:"taskStatus",task:e},Xs(e.status))return void("completed"===e.status?yield{type:"result",result:await this.getTaskResult({taskId:o},t,r)}:"failed"===e.status?yield{type:"error",error:new Pe(Ie.InternalError,`Task ${o} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new Pe(Ie.InternalError,`Task ${o} was cancelled`)}));if("input_required"===e.status)return void(yield{type:"result",result:await this.getTaskResult({taskId:o},t,r)});let l=null!==(s=null!==(a=e.pollInterval)&&void 0!==a?a:null===(i=this._options)||void 0===i?void 0:i.defaultTaskPollInterval)&&void 0!==s?s:1e3;await new Promise(e=>setTimeout(e,l)),null===(n=r?.signal)||void 0===n||n.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof Pe?e:new Pe(Ie.InternalError,String(e))}}else try{yield{type:"result",result:await this.request(e,t,r)}}catch(e){yield{type:"error",error:e instanceof Pe?e:new Pe(Ie.InternalError,String(e))}}}request(e,t,r){let{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s,task:n,relatedTask:o}=r??{};return new Promise((l,c)=>{var u,p,d,h,m,f,v;let g=e=>{c(e)};if(!this._transport)return void g(new Error("Not connected"));if(!0===(null===(u=this._options)||void 0===u?void 0:u.enforceStrictCapabilities))try{this.assertCapabilityForMethod(e.method),n&&this.assertTaskCapability(e.method)}catch(e){return void g(e)}null===(p=r?.signal)||void 0===p||p.throwIfAborted();let y=this._requestMessageId++,b={...e,jsonrpc:"2.0",id:y};r?.onprogress&&(this._progressHandlers.set(y,r.onprogress),b.params={...e.params,_meta:{...(null===(d=e.params)||void 0===d?void 0:d._meta)||{},progressToken:y}}),n&&(b.params={...b.params,task:n}),o&&(b.params={...b.params,_meta:{...(null===(h=b.params)||void 0===h?void 0:h._meta)||{},[Vn]:o}});let x=e=>{var t;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),null===(t=this._transport)||void 0===t||t.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(e)}},{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`)));let r=e instanceof Pe?e:new Pe(Ie.RequestTimeout,String(e));c(r)};this._responseHandlers.set(y,e=>{var a;if(null===(a=r?.signal)||void 0===a||!a.aborted){if(e instanceof Error)return c(e);try{let r=Ho(t,e.result);r.success?l(r.data):c(r.error)}catch(e){c(e)}}}),null===(m=r?.signal)||void 0===m||m.addEventListener("abort",()=>{var e;x(null===(e=r?.signal)||void 0===e?void 0:e.reason)});let _=null!==(f=r?.timeout)&&void 0!==f?f:S3;this._setupTimeout(y,_,r?.maxTotalTimeout,()=>x(Pe.fromError(Ie.RequestTimeout,"Request timed out",{timeout:_})),null!==(v=r?.resetTimeoutOnProgress)&&void 0!==v&&v);let w=o?.taskId;if(w){let e=e=>{let t=this._responseHandlers.get(y);t?t(e):this._onerror(new Error(`Response handler missing for side-channeled request ${y}`))};this._requestResolvers.set(y,e),this._enqueueTaskMessage(w,{type:"request",message:b,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(y),c(e)})}else this._transport.send(b,{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s}).catch(e=>{this._cleanupTimeout(y),c(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},ih,t)}async getTaskResult(e,t,r){return this.request({method:"tasks/result",params:e},t,r)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},lh,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},CH,t)}async notification(e,t){var r,a,i,s,n;if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let o=null===(r=t?.relatedTask)||void 0===r?void 0:r.taskId;if(o){let r={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...(null===(a=e.params)||void 0===a?void 0:a._meta)||{},[Vn]:t.relatedTask}}};return void await this._enqueueTaskMessage(o,{type:"notification",message:r,timestamp:Date.now()})}if((null!==(s=null===(i=this._options)||void 0===i?void 0:i.debouncedNotificationMethods)&&void 0!==s?s:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{var r,a;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let i={...e,jsonrpc:"2.0"};t?.relatedTask&&(i={...i,params:{...i.params,_meta:{...(null===(r=i.params)||void 0===r?void 0:r._meta)||{},[Vn]:t.relatedTask}}}),null===(a=this._transport)||void 0===a||a.send(i,t).catch(e=>this._onerror(e))})}let l={...e,jsonrpc:"2.0"};t?.relatedTask&&(l={...l,params:{...l.params,_meta:{...(null===(n=l.params)||void 0===n?void 0:n._meta)||{},[Vn]:t.relatedTask}}}),await this._transport.send(l,t)}setRequestHandler(e,t){let r=CS(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,a)=>{let i=PS(e,r);return Promise.resolve(t(i,a))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){let r=CS(e);this._notificationHandlers.set(r,r=>{let a=PS(e,r);return Promise.resolve(t(a))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){let t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,r){var a;if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let i=null===(a=this._options)||void 0===a?void 0:a.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,r,i)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){let r=await this._taskMessageQueue.dequeueAll(e,t);for(let t of r)if("request"===t.type&&xS(t.message)){let r=t.message.id,a=this._requestResolvers.get(r);a?(a(new Pe(Ie.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(r)):this._onerror(new Error(`Resolver missing for request ${r} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){var r,a,i;let s=null!==(a=null===(r=this._options)||void 0===r?void 0:r.defaultTaskPollInterval)&&void 0!==a?a:1e3;try{let t=await(null===(i=this._taskStore)||void 0===i?void 0:i.getTask(e));t?.pollInterval&&(s=t.pollInterval)}catch{}return new Promise((e,r)=>{if(t.aborted)return void r(new Pe(Ie.InvalidRequest,"Request cancelled"));let a=setTimeout(e,s);t.addEventListener("abort",()=>{clearTimeout(a),r(new Pe(Ie.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){let r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async a=>{if(!e)throw new Error("No request provided");return await r.createTask(a,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{let a=await r.getTask(e,t);if(!a)throw new Pe(Ie.InvalidParams,"Failed to retrieve task: Task not found");return a},storeTaskResult:async(e,a,i)=>{await r.storeTaskResult(e,a,i,t);let s=await r.getTask(e,t);if(s){let t=Ql.parse({method:"notifications/tasks/status",params:s});await this.notification(t),Xs(s.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>r.getTaskResult(e,t),updateTaskStatus:async(e,a,i)=>{let s=await r.getTask(e,t);if(!s)throw new Pe(Ie.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(Xs(s.status))throw new Pe(Ie.InvalidParams,`Cannot update task "${e}" from terminal status "${s.status}" to "${a}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(e,a,i,t);let n=await r.getTask(e,t);if(n){let t=Ql.parse({method:"notifications/tasks/status",params:n});await this.notification(t),Xs(n.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>r.listTasks(e,t)}}};function kS(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function E3(e,t){let r={...e};for(let e in t){let a=e,i=t[a];if(void 0===i)continue;let s=r[a];kS(s)&&kS(i)?r[a]={...s,...i}:r[a]=i}return r}var T3=AS(qS(),1),C3=AS(CU(),1);function P3(){let e=new T3.Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,C3.default)(e),e}var Dm=class{constructor(e){this._ajv=e??P3()}getValidator(e){var t;let r="$id"in e&&"string"==typeof e.$id&&null!==(t=this._ajv.getSchema(e.$id))&&void 0!==t?t:this._ajv.compile(e);return e=>r(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(r.errors)}}},Lm=class{constructor(e){this._server=e}requestStream(e,t,r){return this._server.requestStream(e,t,r)}async getTask(e,t){return this._server.getTask({taskId:e},t)}async getTaskResult(e,t,r){return this._server.getTaskResult({taskId:e},t,r)}async listTasks(e,t){return this._server.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._server.cancelTask({taskId:e},t)}};function k3(e,t,r){var a;if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);if("tools/call"===t)if(null===(a=e.tools)||void 0===a||!a.call)throw new Error(`${r} does not support task creation for tools/call (required for ${t})`)}function R3(e,t,r){var a,i;if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(null===(a=e.sampling)||void 0===a||!a.createMessage)throw new Error(`${r} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(null===(i=e.elicitation)||void 0===i||!i.create)throw new Error(`${r} does not support task creation for elicitation/create (required for ${t})`)}}var RS,Mm=class extends Nm{constructor(e,t){var r,a;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(tu.options.map((e,t)=>[e,t])),this.isMessageIgnored=(e,t)=>{let r=this._loggingLevels.get(t);return!!r&&this.LOG_LEVEL_SEVERITY.get(e)<this.LOG_LEVEL_SEVERITY.get(r)},this._capabilities=null!==(r=t?.capabilities)&&void 0!==r?r:{},this._instructions=t?.instructions,this._jsonSchemaValidator=null!==(a=t?.jsonSchemaValidator)&&void 0!==a?a:new Dm,this.setRequestHandler(fE,e=>this._oninitialize(e)),this.setNotificationHandler(mE,()=>{var e;return null===(e=this.oninitialized)||void 0===e?void 0:e.call(this)}),this._capabilities.logging&&this.setRequestHandler(_E,async(e,t)=>{var r;let a=t.sessionId||(null===(r=t.requestInfo)||void 0===r?void 0:r.headers["mcp-session-id"])||void 0,{level:i}=e.params,s=tu.safeParse(i);return s.success&&this._loggingLevels.set(a,s.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new Lm(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=E3(this._capabilities,e)}setRequestHandler(e,t){var r,a,i;let s,n=oc(e),o=n?.method;if(!o)throw new Error("Schema is missing a method literal");if(dn(o)){let e=o,t=null===(r=e._zod)||void 0===r?void 0:r.def;s=null!==(a=t?.value)&&void 0!==a?a:e.value}else{let e=o,t=e._def;s=null!==(i=t?.value)&&void 0!==i?i:e.value}if("string"!=typeof s)throw new Error("Schema method literal must be a string");if("tools/call"===s){let r=async(e,r)=>{let a=Ho(eu,e);if(!a.success){let e=a.error instanceof Error?a.error.message:String(a.error);throw new Pe(Ie.InvalidParams,`Invalid tools/call request: ${e}`)}let{params:i}=a.data,s=await Promise.resolve(t(e,r));if(i.task){let e=Ho(bu,s);if(!e.success){let t=e.error instanceof Error?e.error.message:String(e.error);throw new Pe(Ie.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}let n=Ho(gh,s);if(!n.success){let e=n.error instanceof Error?n.error.message:String(n.error);throw new Pe(Ie.InvalidParams,`Invalid tools/call result: ${e}`)}return n.data};return super.setRequestHandler(e,r)}return super.setRequestHandler(e,t)}assertCapabilityForMethod(e){var t,r,a;switch(e){case"sampling/createMessage":if(null===(t=this._clientCapabilities)||void 0===t||!t.sampling)throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(null===(r=this._clientCapabilities)||void 0===r||!r.elicitation)throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(null===(a=this._clientCapabilities)||void 0===a||!a.roots)throw new Error(`Client does not support listing roots (required for ${e})`)}}assertNotificationCapability(e){var t,r;switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/elicitation/complete":if(null===(r=null===(t=this._clientCapabilities)||void 0===t?void 0:t.elicitation)||void 0===r||!r.url)throw new Error(`Client does not support URL elicitation (required for ${e})`)}}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){var t,r;R3(null===(r=null===(t=this._clientCapabilities)||void 0===t?void 0:t.tasks)||void 0===r?void 0:r.requests,e,"Client")}assertTaskHandlerCapability(e){var t;this._capabilities&&k3(null===(t=this._capabilities.tasks)||void 0===t?void 0:t.requests,e,"Server")}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:iH.includes(t)?t:aE,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},th)}async createMessage(e,t){var r,a;if((e.tools||e.toolChoice)&&(null===(a=null===(r=this._clientCapabilities)||void 0===r?void 0:r.sampling)||void 0===a||!a.tools))throw new Error("Client does not support sampling tools capability.");if(e.messages.length>0){let t=e.messages[e.messages.length-1],r=Array.isArray(t.content)?t.content:[t.content],a=r.some(e=>"tool_result"===e.type),i=e.messages.length>1?e.messages[e.messages.length-2]:void 0,s=i?Array.isArray(i.content)?i.content:[i.content]:[],n=s.some(e=>"tool_use"===e.type);if(a){if(r.some(e=>"tool_result"!==e.type))throw new Error("The last message must contain only tool_result content if any is present");if(!n)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(n){let e=new Set(s.filter(e=>"tool_use"===e.type).map(e=>e.id)),t=new Set(r.filter(e=>"tool_result"===e.type).map(e=>e.toolUseId));if(e.size!==t.size||![...e].every(e=>t.has(e)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return e.tools?this.request({method:"sampling/createMessage",params:e},wE,t):this.request({method:"sampling/createMessage",params:e},xE,t)}async elicitInput(e,t){var r,a,i,s,n;switch(null!==(r=e.mode)&&void 0!==r?r:"form"){case"url":{if(null===(i=null===(a=this._clientCapabilities)||void 0===a?void 0:a.elicitation)||void 0===i||!i.url)throw new Error("Client does not support url elicitation.");let r=e;return this.request({method:"elicitation/create",params:r},Im,t)}case"form":{if(null===(n=null===(s=this._clientCapabilities)||void 0===s?void 0:s.elicitation)||void 0===n||!n.form)throw new Error("Client does not support form elicitation.");let r="form"===e.mode?e:{...e,mode:"form"},a=await this.request({method:"elicitation/create",params:r},Im,t);if("accept"===a.action&&a.content&&r.requestedSchema)try{let e=this._jsonSchemaValidator.getValidator(r.requestedSchema)(a.content);if(!e.valid)throw new Pe(Ie.InvalidParams,`Elicitation response content does not match requested schema: ${e.errorMessage}`)}catch(e){throw e instanceof Pe?e:new Pe(Ie.InternalError,`Error validating elicitation response: ${e instanceof Error?e.message:String(e)}`)}return a}}}createElicitationCompletionNotifier(e,t){var r,a;if(null===(a=null===(r=this._clientCapabilities)||void 0===r?void 0:r.elicitation)||void 0===a||!a.url)throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:e}},t)}async listRoots(e,t){return this.request({method:"roots/list",params:e},SE,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}},OE=Symbol.for("mcp.completable");function O3(e){return!!e&&"object"==typeof e&&OE in e}function I3(e){let t=e[OE];return t?.complete}(RS||(RS={})).Completable="McpCompletable";var $3=/^[A-Za-z0-9._-]{1,128}$/;function A3(e){let t=[];if(0===e.length)return{isValid:!1,warnings:["Tool name cannot be empty"]};if(e.length>128)return{isValid:!1,warnings:[`Tool name exceeds maximum length of 128 characters (current: ${e.length})`]};if(e.includes(" ")&&t.push("Tool name contains spaces, which may cause parsing issues"),e.includes(",")&&t.push("Tool name contains commas, which may cause parsing issues"),(e.startsWith("-")||e.endsWith("-"))&&t.push("Tool name starts or ends with a dash, which may cause parsing issues in some contexts"),(e.startsWith(".")||e.endsWith("."))&&t.push("Tool name starts or ends with a dot, which may cause parsing issues in some contexts"),!$3.test(e)){let r=e.split("").filter(e=>!/[A-Za-z0-9._-]/.test(e)).filter((e,t,r)=>r.indexOf(e)===t);return t.push(`Tool name contains invalid characters: ${r.map(e=>`"${e}"`).join(", ")}`,"Allowed characters are: A-Z, a-z, 0-9, underscore (_), dash (-), and dot (.)"),{isValid:!1,warnings:t}}return{isValid:!0,warnings:t}}function N3(e,t){if(t.length>0){console.warn(`Tool name validation warning for "${e}":`);for(let e of t)console.warn(`  - ${e}`);console.warn("Tool registration will proceed, but this may cause compatibility issues."),console.warn("Consider updating the tool name to conform to the MCP tool naming standard."),console.warn("See SEP: Specify Format for Tool Names (https://github.com/modelcontextprotocol/modelcontextprotocol/issues/986) for more details.")}}function OS(e){let t=A3(e);return N3(e,t.warnings),t.isValid}var jm=class{constructor(e){this._mcpServer=e}registerToolTask(e,t,r){let a={taskSupport:"required",...t.execution};if("forbidden"===a.taskSupport)throw new Error(`Cannot register task-based tool '${e}' with taskSupport 'forbidden'. Use registerTool() instead.`);return this._mcpServer._createRegisteredTool(e,t.title,t.description,t.inputSchema,t.outputSchema,t.annotations,a,t._meta,r)}},Fm=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Mm(e,t)}get experimental(){return this._experimental||(this._experimental={tasks:new jm(this)}),this._experimental}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(ys(Om)),this.server.assertCanSetRequestHandler(ys(eu)),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(Om,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let r={name:e,title:t.title,description:t.description,inputSchema:(()=>{let e=jo(t.inputSchema);return e?TS(e,{strictUnions:!0,pipeStrategy:"input"}):D3})(),annotations:t.annotations,execution:t.execution,_meta:t._meta};if(t.outputSchema){let e=jo(t.outputSchema);e&&(r.outputSchema=TS(e,{strictUnions:!0,pipeStrategy:"output"}))}return r})})),this.server.setRequestHandler(eu,async(e,t)=>{var r;try{let a=this._registeredTools[e.params.name];if(!a)throw new Pe(Ie.InvalidParams,`Tool ${e.params.name} not found`);if(!a.enabled)throw new Pe(Ie.InvalidParams,`Tool ${e.params.name} disabled`);let i=!!e.params.task,s=null===(r=a.execution)||void 0===r?void 0:r.taskSupport,n="createTask"in a.handler;if(("required"===s||"optional"===s)&&!n)throw new Pe(Ie.InternalError,`Tool ${e.params.name} has taskSupport '${s}' but was not registered with registerToolTask`);if("required"===s&&!i)throw new Pe(Ie.MethodNotFound,`Tool ${e.params.name} requires task augmentation (taskSupport: 'required')`);if("optional"===s&&!i&&n)return await this.handleAutomaticTaskPolling(a,e,t);let o=await this.validateToolInput(a,e.params.arguments,e.params.name),l=await this.executeToolHandler(a,o,t);return i||await this.validateToolOutput(a,l,e.params.name),l}catch(e){if(e instanceof Pe&&e.code===Ie.UrlElicitationRequired)throw e;return this.createToolError(e instanceof Error?e.message:String(e))}}),this._toolHandlersInitialized=!0)}createToolError(e){return{content:[{type:"text",text:e}],isError:!0}}async validateToolInput(e,t,r){if(!e.inputSchema)return;let a=jo(e.inputSchema)??e.inputSchema,i=await tm(a,t);if(!i.success){let e=rm("error"in i?i.error:"Unknown error");throw new Pe(Ie.InvalidParams,`Input validation error: Invalid arguments for tool ${r}: ${e}`)}return i.data}async validateToolOutput(e,t,r){if(!e.outputSchema||!("content"in t)||t.isError)return;if(!t.structuredContent)throw new Pe(Ie.InvalidParams,`Output validation error: Tool ${r} has an output schema but no structured content was provided`);let a=jo(e.outputSchema),i=await tm(a,t.structuredContent);if(!i.success){let e=rm("error"in i?i.error:"Unknown error");throw new Pe(Ie.InvalidParams,`Output validation error: Invalid structured content for tool ${r}: ${e}`)}}async executeToolHandler(e,t,r){let a=e.handler;if("createTask"in a){if(!r.taskStore)throw new Error("No task store provided.");let i={...r,taskStore:r.taskStore};if(e.inputSchema){let e=a;return await Promise.resolve(e.createTask(t,i))}{let e=a;return await Promise.resolve(e.createTask(i))}}if(e.inputSchema){let e=a;return await Promise.resolve(e(t,r))}{let e=a;return await Promise.resolve(e(r))}}async handleAutomaticTaskPolling(e,t,r){var a;if(!r.taskStore)throw new Error("No task store provided for task-capable tool.");let i=await this.validateToolInput(e,t.params.arguments,t.params.name),s=e.handler,n={...r,taskStore:r.taskStore},o=i?await Promise.resolve(s.createTask(i,n)):await Promise.resolve(s.createTask(n)),l=o.task.taskId,c=o.task,u=null!==(a=c.pollInterval)&&void 0!==a?a:5e3;for(;"completed"!==c.status&&"failed"!==c.status&&"cancelled"!==c.status;){await new Promise(e=>setTimeout(e,u));let e=await r.taskStore.getTask(l);if(!e)throw new Pe(Ie.InternalError,`Task ${l} not found during polling`);c=e}return await r.taskStore.getTaskResult(l)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(ys($m)),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler($m,async e=>{switch(e.params.ref.type){case"ref/prompt":return $V(e),this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return AV(e),this.handleResourceCompletion(e,e.params.ref);default:throw new Pe(Ie.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let r=this._registeredPrompts[t.name];if(!r)throw new Pe(Ie.InvalidParams,`Prompt ${t.name} not found`);if(!r.enabled)throw new Pe(Ie.InvalidParams,`Prompt ${t.name} disabled`);if(!r.argsSchema)return Fo;let a=oc(r.argsSchema),i=a?.[e.params.argument.name];if(!O3(i))return Fo;let s=I3(i);return s?$S(await s(e.params.argument.value,e.params.context)):Fo}async handleResourceCompletion(e,t){let r=Object.values(this._registeredResourceTemplates).find(e=>e.resourceTemplate.uriTemplate.toString()===t.uri);if(!r){if(this._registeredResources[t.uri])return Fo;throw new Pe(Ie.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let a=r.resourceTemplate.completeCallback(e.params.argument.name);return a?$S(await a(e.params.argument.value,e.params.context)):Fo}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(ys(Tm)),this.server.assertCanSetRequestHandler(ys(Cm)),this.server.assertCanSetRequestHandler(ys(Pm)),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Tm,async(e,t)=>{let r=Object.entries(this._registeredResources).filter(([e,t])=>t.enabled).map(([e,t])=>({uri:e,name:t.name,...t.metadata})),a=[];for(let e of Object.values(this._registeredResourceTemplates)){if(!e.resourceTemplate.listCallback)continue;let r=await e.resourceTemplate.listCallback(t);for(let t of r.resources)a.push({...e.metadata,...t})}return{resources:[...r,...a]}}),this.server.setRequestHandler(Cm,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([e,t])=>({name:e,uriTemplate:t.resourceTemplate.uriTemplate.toString(),...t.metadata}))})),this.server.setRequestHandler(Pm,async(e,t)=>{let r=new URL(e.params.uri),a=this._registeredResources[r.toString()];if(a){if(!a.enabled)throw new Pe(Ie.InvalidParams,`Resource ${r} disabled`);return a.readCallback(r,t)}for(let e of Object.values(this._registeredResourceTemplates)){let a=e.resourceTemplate.uriTemplate.match(r.toString());if(a)return e.readCallback(r,a,t)}throw new Pe(Ie.InvalidParams,`Resource ${r} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(ys(km)),this.server.assertCanSetRequestHandler(ys(Rm)),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(km,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?M3(t.argsSchema):void 0}))})),this.server.setRequestHandler(Rm,async(e,t)=>{let r=this._registeredPrompts[e.params.name];if(!r)throw new Pe(Ie.InvalidParams,`Prompt ${e.params.name} not found`);if(!r.enabled)throw new Pe(Ie.InvalidParams,`Prompt ${e.params.name} disabled`);if(r.argsSchema){let a=jo(r.argsSchema),i=await tm(a,e.params.arguments);if(!i.success){let t=rm("error"in i?i.error:"Unknown error");throw new Pe(Ie.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${t}`)}let s=i.data,n=r.callback;return await Promise.resolve(n(s,t))}{let e=r.callback;return await Promise.resolve(e(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...r){let a;"object"==typeof r[0]&&(a=r.shift());let i=r[0];if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let r=this._createRegisteredResource(e,void 0,t,a,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let r=this._createRegisteredResourceTemplate(e,void 0,t,a,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}}registerResource(e,t,r,a){if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let i=this._createRegisteredResource(e,r.title,t,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let i=this._createRegisteredResourceTemplate(e,r.title,t,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}}_createRegisteredResource(e,t,r,a,i){let s={name:e,title:t,metadata:a,readCallback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({uri:null}),update:e=>{typeof e.uri<"u"&&e.uri!==r&&(delete this._registeredResources[r],e.uri&&(this._registeredResources[e.uri]=s)),typeof e.name<"u"&&(s.name=e.name),typeof e.title<"u"&&(s.title=e.title),typeof e.metadata<"u"&&(s.metadata=e.metadata),typeof e.callback<"u"&&(s.readCallback=e.callback),typeof e.enabled<"u"&&(s.enabled=e.enabled),this.sendResourceListChanged()}};return this._registeredResources[r]=s,s}_createRegisteredResourceTemplate(e,t,r,a,i){let s={resourceTemplate:r,title:t,metadata:a,readCallback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&(delete this._registeredResourceTemplates[e],t.name&&(this._registeredResourceTemplates[t.name]=s)),typeof t.title<"u"&&(s.title=t.title),typeof t.template<"u"&&(s.resourceTemplate=t.template),typeof t.metadata<"u"&&(s.metadata=t.metadata),typeof t.callback<"u"&&(s.readCallback=t.callback),typeof t.enabled<"u"&&(s.enabled=t.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=s,s}_createRegisteredPrompt(e,t,r,a,i){let s={title:t,description:r,argsSchema:void 0===a?void 0:Bo(a),callback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&(delete this._registeredPrompts[e],t.name&&(this._registeredPrompts[t.name]=s)),typeof t.title<"u"&&(s.title=t.title),typeof t.description<"u"&&(s.description=t.description),typeof t.argsSchema<"u"&&(s.argsSchema=Bo(t.argsSchema)),typeof t.callback<"u"&&(s.callback=t.callback),typeof t.enabled<"u"&&(s.enabled=t.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=s,s}_createRegisteredTool(e,t,r,a,i,s,n,o,l){OS(e);let c={title:t,description:r,inputSchema:IS(a),outputSchema:IS(i),annotations:s,execution:n,_meta:o,handler:l,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&("string"==typeof t.name&&OS(t.name),delete this._registeredTools[e],t.name&&(this._registeredTools[t.name]=c)),typeof t.title<"u"&&(c.title=t.title),typeof t.description<"u"&&(c.description=t.description),typeof t.paramsSchema<"u"&&(c.inputSchema=Bo(t.paramsSchema)),typeof t.callback<"u"&&(c.handler=t.callback),typeof t.annotations<"u"&&(c.annotations=t.annotations),typeof t._meta<"u"&&(c._meta=t._meta),typeof t.enabled<"u"&&(c.enabled=t.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=c,this.setToolRequestHandlers(),this.sendToolListChanged(),c}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let r,a,i;if("string"==typeof t[0]&&(r=t.shift()),t.length>1){let e=t[0];Um(e)?(a=t.shift(),t.length>1&&"object"==typeof t[0]&&null!==t[0]&&!Um(t[0])&&(i=t.shift())):"object"==typeof e&&null!==e&&(i=t.shift())}let s=t[0];return this._createRegisteredTool(e,void 0,r,a,undefined,i,{taskSupport:"forbidden"},void 0,s)}registerTool(e,t,r){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:a,description:i,inputSchema:s,outputSchema:n,annotations:o,_meta:l}=t;return this._createRegisteredTool(e,a,i,s,n,o,{taskSupport:"forbidden"},l,r)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let r,a;"string"==typeof t[0]&&(r=t.shift()),t.length>1&&(a=t.shift());let i=t[0],s=this._createRegisteredPrompt(e,void 0,r,a,i);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),s}registerPrompt(e,t,r){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:a,description:i,argsSchema:s}=t,n=this._createRegisteredPrompt(e,a,i,s,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),n}isConnected(){return void 0!==this.server.transport}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}},D3={type:"object",properties:{}};function IE(e){return null!==e&&"object"==typeof e&&"parse"in e&&"function"==typeof e.parse&&"safeParse"in e&&"function"==typeof e.safeParse}function L3(e){return"_def"in e||"_zod"in e||IE(e)}function Um(e){return"object"==typeof e&&null!==e&&!L3(e)&&(0===Object.keys(e).length||Object.values(e).some(IE))}function IS(e){if(e)return Um(e)?Bo(e):e}function M3(e){let t=oc(e);return t?Object.entries(t).map(([e,t])=>({name:e,description:lB(t),required:!uB(t)})):[]}function ys(e){let t=oc(e),r=t?.method;if(!r)throw new Error("Schema is missing a method literal");let a=M0(r);if("string"==typeof a)return a;throw new Error("Schema method literal must be a string")}function $S(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}var Fo={completion:{values:[],hasMore:!1}};function $E(e){let t=new Fm({name:e.name,version:e.version??"1.0.0"},{capabilities:{tools:e.tools?{}:void 0}});return e.tools&&e.tools.forEach(e=>{t.tool(e.name,e.description,e.inputSchema,e.handler)}),{type:"sdk",name:e.name,instance:t}}function _u({prompt:e,options:t}){let r,a,{systemPrompt:i,settingSources:s,sandbox:n,...o}=t??{};void 0===i?r="":"string"==typeof i?r=i:"preset"===i.type&&(a=i.append);let l=o.pathToClaudeCodeExecutable;if(!l){let e=(0,zS.fileURLToPath)(j3.url),t=(0,im.join)(e,"..");l=(0,im.join)(t,"cli.js")}process.env.CLAUDE_AGENT_SDK_VERSION="0.1.75";let{abortController:c=HS(),additionalDirectories:u=[],agents:p,allowedTools:d=[],betas:h,canUseTool:m,continue:f,cwd:v,disallowedTools:g=[],tools:y,env:b,executable:x=(i0()?"bun":"node"),executableArgs:_=[],extraArgs:w={},fallbackModel:E,enableFileCheckpointing:S,forkSession:k,hooks:P,includePartialMessages:C,persistSession:T,maxThinkingTokens:$,maxTurns:O,maxBudgetUsd:R,mcpServers:j,model:I,outputFormat:A,permissionMode:N="default",allowDangerouslySkipPermissions:L=!1,permissionPromptToolName:F,plugins:D,resume:z,resumeSessionAt:M,stderr:q,strictMcpConfig:U}=o,Z="json_schema"===A?.type?A.schema:void 0,B=b;if(B||(B={...process.env}),B.CLAUDE_CODE_ENTRYPOINT||(B.CLAUDE_CODE_ENTRYPOINT="sdk-ts"),S&&(B.CLAUDE_CODE_ENABLE_SDK_FILE_CHECKPOINTING="true"),!l)throw new Error("pathToClaudeCodeExecutable is required");let V={},H=new Map;if(j)for(let[e,t]of Object.entries(j))"sdk"===t.type&&"instance"in t?(H.set(e,t.instance),V[e]={type:"sdk",name:e}):V[e]=t;let G="string"==typeof e,W=new cm({abortController:c,additionalDirectories:u,betas:h,cwd:v,executable:x,executableArgs:_,extraArgs:w,pathToClaudeCodeExecutable:l,env:B,forkSession:k,stderr:q,maxThinkingTokens:$,maxTurns:O,maxBudgetUsd:R,model:I,fallbackModel:E,jsonSchema:Z,permissionMode:N,allowDangerouslySkipPermissions:L,permissionPromptToolName:F,continueConversation:f,resume:z,resumeSessionAt:M,settingSources:s??[],allowedTools:d,disallowedTools:g,tools:y,mcpServers:V,strictMcpConfig:U,canUseTool:!!m,hooks:!!P,includePartialMessages:C,persistSession:T,plugins:D,sandbox:n,spawnClaudeCodeProcess:o.spawnClaudeCodeProcess}),J=new dm(W,G,m,P,c,H,Z,{systemPrompt:r,appendSystemPrompt:a,agents:p});return"string"==typeof e?W.write(JSON.stringify({type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:e}]},parent_tool_use_id:null})+"\n"):J.streamInput(e),J}var NE=require("child_process"),F3='You suggest what a developer might want to do next based on their current work.\n\nStudy the diff carefully. What is this person actually building? What\'s the next meaningful piece of work?\n\nSuggest real work, not tiny fixes:\n- "Add error handling to the processOrder function" is a code review comment\n- "Add error handling throughout the order processing flow" is real work\n- Think about what would actually move the project forward, not just polish one line\n\nYour suggestions should be honest and specific to THIS code:\n- Reference actual function names, files, or patterns you see in the diff\n- If something looks incomplete, offer to help finish it - not just point it out\n- If you see a pattern emerging, offer to extend it to related areas\n\nWhat makes a good suggestion:\n- It\'s meaningful work that would actually help, not a nitpick\n- It shows you understand what they\'re building\n- The developer thinks "yes, that would be useful"\n\nThink about the product, not just the code:\n- What would make this feature better for users?\n- Is there a related capability that would be natural to add?\n- What might users expect that isn\'t there yet?\n\nWhat to avoid:\n- Tiny incremental fixes that read like code review line comments\n- Generic suggestions that could apply to any codebase\n- Suggesting "commit" just because there are changes\n- Overpromising - be realistic about scope\n\nAim to delight:\n- A suggestion that makes them think "oh, I hadn\'t thought of that but yes!"\n- Noticing something clever they could do, not just the obvious next step\n- Showing genuine insight into their work, not just pattern matching\n\nIf you see non-trivial changes, offering to review the approach can be valuable.\n\nRespond with a JSON array (0-4 suggestions, fewer is fine, empty if nothing clearly helpful):\n[\n  {\n    "title": "Short title (5-10 words)",\n    "description": "What this involves, referencing their specific code",\n    "prompt": "Direct prompt for this task"\n  }\n]\n\nOnly output the JSON array.';async function Ts(e,t,r){return new Promise(a=>{let i="",s=(0,NE.spawn)(e,t,{cwd:r,shell:!1});s.stdout.on("data",e=>{i+=e.toString()}),s.on("close",e=>{a({stdout:i,exitCode:e??0})}),s.on("error",()=>{a({stdout:"",exitCode:1})})})}var U3=8e3,q3=2e3,z3=2e3,AE=200;function pc(e,t,r){return e.length<=t?e:e.slice(0,t)+`\n... (${r} truncated)`}async function B3(e){let t=(await Ts("git",["config","user.email"],e).catch(()=>({stdout:"",exitCode:1}))).stdout.trim(),[r,a,i,s,n]=await Promise.all([Ts("git",["status","--porcelain"],e).catch(()=>({stdout:"",exitCode:1})),Ts("git",["rev-parse","--abbrev-ref","HEAD"],e).catch(()=>({stdout:"",exitCode:1})),Ts("git",["log","--oneline","-10",...t?["--author",t]:[]],e).catch(()=>({stdout:"",exitCode:1})),(async()=>{if(!t)return Ts("git",["diff","--stat","HEAD~5..HEAD"],e);let r=(await Ts("git",["log","--oneline","-5","--author",t,"--format=%H"],e).catch(()=>({stdout:"",exitCode:1}))).stdout.trim().split("\n").filter(Boolean);return 0===r.length?{stdout:"",exitCode:0}:Ts("git",["diff","--stat",`${r[r.length-1]}^..HEAD`],e).catch(()=>({stdout:"",exitCode:1}))})(),Ts("git",["diff","HEAD"],e).catch(()=>({stdout:"",exitCode:1}))]),o=r.stdout.trim()||"No uncommitted changes",l=s.stdout.trim()||"No recent changes",c=n.stdout.trim();return{status:pc(o,q3,"status"),branch:a.stdout.trim()||"unknown",recentCommits:i.stdout.trim()||"No recent commits",diff:pc(l,z3,"diff stat"),workingTreeDiff:pc(c,U3,"diff")}}async function H3(e,t){try{let r=(await(await Bn.load(e,t)).fetchSessions()).filter(e=>!e.isSidechain).sort((e,t)=>t.lastModified-e.lastModified).slice(0,5);return{recentPrompts:r.map(e=>e.summary).filter(e=>e&&"No prompt"!==e).map(e=>pc(e,AE,"prompt")),lastSessionSummary:r[0]?.summary?pc(r[0].summary,AE,"summary"):null}}catch(e){return t.warn(`Failed to gather recent activity: ${e}`),{recentPrompts:[],lastSessionSummary:null}}}function V3(e,t){let r=[];return r.push("## Current Git State"),r.push(`Branch: ${e.branch}`),r.push(`\nUncommitted changes:\n${e.status}`),r.push(`\nRecent commits by this user:\n${e.recentCommits}`),e.diff&&r.push(`\nRecent changes summary (this user's work):\n${e.diff}`),e.workingTreeDiff&&(r.push("\n## Current Uncommitted Changes (diff)"),r.push("This shows the actual code changes in progress. Use this to understand what the developer is working on:"),r.push("```diff"),r.push(e.workingTreeDiff),r.push("```")),t.recentPrompts.length>0&&(r.push("\n## Recent Conversation Topics"),t.recentPrompts.forEach((e,t)=>{r.push(`${t+1}. ${e}`)})),r.push("\n## Task"),r.push("Based on this context, suggest up to 4 helpful next steps the developer is likely to want to take. Only include suggestions you are confident about - fewer is better."),r.join("\n")}function Z3(e){try{let t=e.match(/\[[\s\S]*\]/);if(!t)return[];let r=JSON.parse(t[0]);return Array.isArray(r)?r.filter(e=>"object"==typeof e&&null!==e&&"string"==typeof e.title&&"string"==typeof e.description&&"string"==typeof e.prompt).slice(0,4):[]}catch{return[]}}async function DE(e){let{cwd:t,logger:r,pathToClaudeCodeExecutable:a,executableArgs:i,env:s}=e;try{let[e,n]=await Promise.all([B3(t),H3(t,r)]),o=_u({prompt:V3(e,n),options:{cwd:t,permissionMode:"default",model:"claude-haiku-4-5-20251001",systemPrompt:F3,maxThinkingTokens:0,pathToClaudeCodeExecutable:a,executableArgs:i,env:s,persistSession:!1,stderr:e=>{r.warn(`[Claude STDERR] ${e}`)}}}),l="";for await(let e of o)if("assistant"===e.type&&e.message.content)for(let t of e.message.content)"text"===t.type&&(l+=t.text);return{suggestions:Z3(l)}}catch(e){return r.error(`Failed to generate suggestions: ${e}`),{suggestions:[]}}}var We,vh,E={};Hp(E,{BRAND:()=>yZ,DIRTY:()=>na,EMPTY_PATH:()=>J3,INVALID:()=>$e,NEVER:()=>rG,OK:()=>cr,ParseStatus:()=>rr,Schema:()=>He,ZodAny:()=>ks,ZodArray:()=>ts,ZodBigInt:()=>aa,ZodBoolean:()=>ia,ZodBranded:()=>mc,ZodCatch:()=>va,ZodDate:()=>oa,ZodDefault:()=>ga,ZodDiscriminatedUnion:()=>Su,ZodEffects:()=>Xr,ZodEnum:()=>ma,ZodError:()=>xr,ZodFirstPartyTypeKind:()=>se,ZodFunction:()=>Tu,ZodIntersection:()=>da,ZodIssueCode:()=>re,ZodLazy:()=>pa,ZodLiteral:()=>fa,ZodMap:()=>Oi,ZodNaN:()=>$i,ZodNativeEnum:()=>ha,ZodNever:()=>mn,ZodNull:()=>la,ZodNullable:()=>In,ZodNumber:()=>sa,ZodObject:()=>Sr,ZodOptional:()=>wr,ZodParsedType:()=>ve,ZodPipeline:()=>hc,ZodPromise:()=>Rs,ZodReadonly:()=>ya,ZodRecord:()=>Eu,ZodSchema:()=>He,ZodSet:()=>Ii,ZodString:()=>Ps,ZodSymbol:()=>ki,ZodTransformer:()=>Xr,ZodTuple:()=>On,ZodType:()=>He,ZodUndefined:()=>ca,ZodUnion:()=>ua,ZodUnknown:()=>es,ZodVoid:()=>Ri,addIssueToContext:()=>de,any:()=>PZ,array:()=>IZ,bigint:()=>wZ,boolean:()=>ZE,coerce:()=>tG,custom:()=>BE,date:()=>SZ,datetimeRegex:()=>qE,defaultErrorMap:()=>Yn,discriminatedUnion:()=>DZ,effect:()=>GZ,enum:()=>HZ,function:()=>qZ,getErrorMap:()=>Ti,getParsedType:()=>Rn,instanceof:()=>_Z,intersection:()=>LZ,isAborted:()=>xu,isAsync:()=>Ci,isDirty:()=>wu,isValid:()=>Cs,late:()=>bZ,lazy:()=>zZ,literal:()=>BZ,makeIssue:()=>fc,map:()=>FZ,nan:()=>xZ,nativeEnum:()=>VZ,never:()=>RZ,null:()=>CZ,nullable:()=>KZ,number:()=>VE,object:()=>$Z,objectUtil:()=>vh,oboolean:()=>eG,onumber:()=>QZ,optional:()=>WZ,ostring:()=>YZ,pipeline:()=>XZ,preprocess:()=>JZ,promise:()=>ZZ,quotelessJson:()=>G3,record:()=>jZ,set:()=>UZ,setErrorMap:()=>K3,strictObject:()=>AZ,string:()=>HE,symbol:()=>EZ,transformer:()=>GZ,tuple:()=>MZ,undefined:()=>TZ,union:()=>NZ,unknown:()=>kZ,util:()=>We,void:()=>OZ}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),a={};for(let e of r)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(We||(We={})),(vh||(vh={})).mergeShapes=(e,t)=>({...e,...t});var ve=We.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rn=e=>{switch(typeof e){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return Number.isNaN(e)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(e)?ve.array:null===e?ve.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ve.promise:typeof Map<"u"&&e instanceof Map?ve.map:typeof Set<"u"&&e instanceof Set?ve.set:typeof Date<"u"&&e instanceof Date?ve.date:ve.object;default:return ve.unknown}},re=We.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),G3=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),xr=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,a=0;for(;a<i.path.length;){let r=i.path[a];a===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,We.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};xr.create=e=>new xr(e);var W3=(e,t)=>{let r;switch(e.code){case re.invalid_type:r=e.received===ve.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case re.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,We.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:r=`Unrecognized key(s) in object: ${We.joinValues(e.keys,", ")}`;break;case re.invalid_union:r="Invalid input";break;case re.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${We.joinValues(e.options)}`;break;case re.invalid_enum_value:r=`Invalid enum value. Expected ${We.joinValues(e.options)}, received '${e.received}'`;break;case re.invalid_arguments:r="Invalid function arguments";break;case re.invalid_return_type:r="Invalid function return type";break;case re.invalid_date:r="Invalid date";break;case re.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:We.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case re.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case re.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case re.custom:r="Invalid input";break;case re.invalid_intersection_types:r="Intersection results could not be merged";break;case re.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case re.not_finite:r="Number must be finite";break;default:r=t.defaultError,We.assertNever(e)}return{message:r}},Yn=W3,LE=Yn;function K3(e){LE=e}function Ti(){return LE}var fc=e=>{let{data:t,path:r,errorMaps:a,issueData:i}=e,s=[...r,...i.path||[]],n={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="",l=a.filter(e=>!!e).slice().reverse();for(let e of l)o=e(n,{data:t,defaultError:o}).message;return{...i,path:s,message:o}},J3=[];function de(e,t){let r=Ti(),a=fc({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Yn?void 0:Yn].filter(e=>!!e)});e.common.issues.push(a)}var we,rr=class e{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return $e;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(t,r){let a=[];for(let e of r){let t=await e.key,r=await e.value;a.push({key:t,value:r})}return e.mergeObjectSync(t,a)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:i}=a;if("aborted"===t.status||"aborted"===i.status)return $e;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(typeof i.value<"u"||a.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}},$e=Object.freeze({status:"aborted"}),na=e=>({status:"dirty",value:e}),cr=e=>({status:"valid",value:e}),xu=e=>"aborted"===e.status,wu=e=>"dirty"===e.status,Cs=e=>"valid"===e.status,Ci=e=>typeof Promise<"u"&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(we||(we={}));var Jr=class{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ME=(e,t)=>{if(Cs(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new xr(e.common.issues);return this._error=t,this._error}}};function Be(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:i}=e;if(t&&(r||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:typeof i.data>"u"?{message:s??a??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}var yh,He=class{get description(){return this._def.description}_getType(e){return Rn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rr,ctx:{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(Ci(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},a=this._parseSync({data:e,path:r.path,parent:r});return ME(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return Cs(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Cs(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Ci(a)?a:Promise.resolve(a));return ME(r,i)}refine(e,t){let r=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{let i=e(t),s=()=>a.addIssue({code:re.custom,...r(t)});return typeof Promise<"u"&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new Xr({schema:this,typeName:se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return wr.create(this,this._def)}nullable(){return In.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ts.create(this)}promise(){return Rs.create(this,this._def)}or(e){return ua.create([this,e],this._def)}and(e){return da.create(this,e,this._def)}transform(e){return new Xr({...Be(this._def),schema:this,typeName:se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new ga({...Be(this._def),innerType:this,defaultValue:t,typeName:se.ZodDefault})}brand(){return new mc({typeName:se.ZodBranded,type:this,...Be(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new va({...Be(this._def),innerType:this,catchValue:t,typeName:se.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return hc.create(this,e)}readonly(){return ya.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},X3=/^c[^\s-]{8,}$/i,Y3=/^[0-9a-z]+$/,Q3=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eZ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tZ=/^[a-z0-9_-]{21}$/i,rZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",iZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,uZ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pZ=new RegExp(`^${FE}$`);function UE(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function fZ(e){return new RegExp(`^${UE(e)}$`)}function qE(e){let t=`${FE}T${UE(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function mZ(e,t){return!(("v4"!==t&&t||!iZ.test(e))&&("v6"!==t&&t||!cZ.test(e)))}function hZ(e,t){if(!rZ.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(a));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function gZ(e,t){return!(("v4"!==t&&t||!oZ.test(e))&&("v6"!==t&&t||!lZ.test(e)))}var Ps=class e extends He{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.string,received:t.parsedType}),$e}let t,r=new rr;for(let a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("max"===a.kind)e.data.length>a.value&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if("length"===a.kind){let i=e.data.length>a.value,s=e.data.length<a.value;(i||s)&&(t=this._getOrReturnCtx(e,t),i?de(t,{code:re.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&de(t,{code:re.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if("email"===a.kind)sZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"email",code:re.invalid_string,message:a.message}),r.dirty());else if("emoji"===a.kind)yh||(yh=new RegExp(aZ,"u")),yh.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"emoji",code:re.invalid_string,message:a.message}),r.dirty());else if("uuid"===a.kind)eZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"uuid",code:re.invalid_string,message:a.message}),r.dirty());else if("nanoid"===a.kind)tZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"nanoid",code:re.invalid_string,message:a.message}),r.dirty());else if("cuid"===a.kind)X3.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"cuid",code:re.invalid_string,message:a.message}),r.dirty());else if("cuid2"===a.kind)Y3.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"cuid2",code:re.invalid_string,message:a.message}),r.dirty());else if("ulid"===a.kind)Q3.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"ulid",code:re.invalid_string,message:a.message}),r.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),de(t,{validation:"url",code:re.invalid_string,message:a.message}),r.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"regex",code:re.invalid_string,message:a.message}),r.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):"datetime"===a.kind?qE(a).test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:"datetime",message:a.message}),r.dirty()):"date"===a.kind?pZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:"date",message:a.message}),r.dirty()):"time"===a.kind?fZ(a).test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_string,validation:"time",message:a.message}),r.dirty()):"duration"===a.kind?nZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"duration",code:re.invalid_string,message:a.message}),r.dirty()):"ip"===a.kind?mZ(e.data,a.version)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"ip",code:re.invalid_string,message:a.message}),r.dirty()):"jwt"===a.kind?hZ(e.data,a.alg)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"jwt",code:re.invalid_string,message:a.message}),r.dirty()):"cidr"===a.kind?gZ(e.data,a.version)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"cidr",code:re.invalid_string,message:a.message}),r.dirty()):"base64"===a.kind?uZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"base64",code:re.invalid_string,message:a.message}),r.dirty()):"base64url"===a.kind?dZ.test(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{validation:"base64url",code:re.invalid_string,message:a.message}),r.dirty()):We.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:re.invalid_string,...we.errToObj(r)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...we.errToObj(e)})}url(e){return this._addCheck({kind:"url",...we.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...we.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...we.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...we.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...we.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...we.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...we.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...we.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...we.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...we.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...we.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...we.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...we.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...we.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...we.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...we.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...we.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...we.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...we.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...we.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...we.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...we.errToObj(t)})}nonempty(e){return this.min(1,we.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function vZ(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=r>a?r:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}Ps.create=e=>new Ps({checks:[],typeName:se.ZodString,coerce:e?.coerce??!1,...Be(e)});var sa=class e extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.number,received:t.parsedType}),$e}let t,r=new rr;for(let a of this._def.checks)"int"===a.kind?We.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==vZ(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),de(t,{code:re.not_finite,message:a.message}),r.dirty()):We.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,we.toString(t))}gt(e,t){return this.setLimit("min",e,!1,we.toString(t))}lte(e,t){return this.setLimit("max",e,!0,we.toString(t))}lt(e,t){return this.setLimit("max",e,!1,we.toString(t))}setLimit(t,r,a,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:we.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:we.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:we.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:we.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:we.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:we.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&We.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};sa.create=e=>new sa({checks:[],typeName:se.ZodNumber,coerce:e?.coerce||!1,...Be(e)});var aa=class e extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ve.bigint)return this._getInvalidInput(e);let t,r=new rr;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):We.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.bigint,received:t.parsedType}),$e}gte(e,t){return this.setLimit("min",e,!0,we.toString(t))}gt(e,t){return this.setLimit("min",e,!1,we.toString(t))}lte(e,t){return this.setLimit("max",e,!0,we.toString(t))}lt(e,t){return this.setLimit("max",e,!1,we.toString(t))}setLimit(t,r,a,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:a,message:we.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:we.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:we.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:we.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:we.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:we.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};aa.create=e=>new aa({checks:[],typeName:se.ZodBigInt,coerce:e?.coerce??!1,...Be(e)});var ia=class extends He{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.boolean,received:t.parsedType}),$e}return cr(e.data)}};ia.create=e=>new ia({typeName:se.ZodBoolean,coerce:e?.coerce||!1,...Be(e)});var oa=class e extends He{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.date,received:t.parsedType}),$e}if(Number.isNaN(e.data.getTime())){return de(this._getOrReturnCtx(e),{code:re.invalid_date}),$e}let t,r=new rr;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(t=this._getOrReturnCtx(e,t),de(t,{code:re.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):We.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:we.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:we.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};oa.create=e=>new oa({checks:[],coerce:e?.coerce||!1,typeName:se.ZodDate,...Be(e)});var ki=class extends He{_parse(e){if(this._getType(e)!==ve.symbol){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.symbol,received:t.parsedType}),$e}return cr(e.data)}};ki.create=e=>new ki({typeName:se.ZodSymbol,...Be(e)});var ca=class extends He{_parse(e){if(this._getType(e)!==ve.undefined){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.undefined,received:t.parsedType}),$e}return cr(e.data)}};ca.create=e=>new ca({typeName:se.ZodUndefined,...Be(e)});var la=class extends He{_parse(e){if(this._getType(e)!==ve.null){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.null,received:t.parsedType}),$e}return cr(e.data)}};la.create=e=>new la({typeName:se.ZodNull,...Be(e)});var ks=class extends He{constructor(){super(...arguments),this._any=!0}_parse(e){return cr(e.data)}};ks.create=e=>new ks({typeName:se.ZodAny,...Be(e)});var es=class extends He{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cr(e.data)}};es.create=e=>new es({typeName:se.ZodUnknown,...Be(e)});var mn=class extends He{_parse(e){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.never,received:t.parsedType}),$e}};mn.create=e=>new mn({typeName:se.ZodNever,...Be(e)});var Ri=class extends He{_parse(e){if(this._getType(e)!==ve.undefined){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.void,received:t.parsedType}),$e}return cr(e.data)}};Ri.create=e=>new Ri({typeName:se.ZodVoid,...Be(e)});var ts=class e extends He{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==ve.array)return de(t,{code:re.invalid_type,expected:ve.array,received:t.parsedType}),$e;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(de(t,{code:e?re.too_big:re.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(de(t,{code:re.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(de(t,{code:re.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new Jr(t,e,t.path,r)))).then(e=>rr.mergeArray(r,e));let i=[...t.data].map((e,r)=>a.type._parseSync(new Jr(t,e,t.path,r)));return rr.mergeArray(r,i)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:we.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:we.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:we.toString(r)}})}nonempty(e){return this.min(1,e)}};function Pi(e){if(e instanceof Sr){let t={};for(let r in e.shape){let a=e.shape[r];t[r]=wr.create(Pi(a))}return new Sr({...e._def,shape:()=>t})}return e instanceof ts?new ts({...e._def,type:Pi(e.element)}):e instanceof wr?wr.create(Pi(e.unwrap())):e instanceof In?In.create(Pi(e.unwrap())):e instanceof On?On.create(e.items.map(e=>Pi(e))):e}ts.create=(e,t)=>new ts({type:e,minLength:null,maxLength:null,exactLength:null,typeName:se.ZodArray,...Be(t)});var Sr=class e extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=We.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ve.object){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.object,received:t.parsedType}),$e}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof mn&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let n=[];for(let e of i){let t=a[e],i=r.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new Jr(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof mn){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)n.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(de(r,{code:re.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new Jr(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of n){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>rr.mergeObjectSync(t,e)):rr.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(t){return we.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,r)=>{let a=this._def.errorMap?.(e,r).message??r.defaultError;return"unrecognized_keys"===e.code?{message:we.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let e of We.objectKeys(t))t[e]&&this.shape[e]&&(r[e]=this.shape[e]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let e of We.objectKeys(this.shape))t[e]||(r[e]=this.shape[e]);return new e({...this._def,shape:()=>r})}deepPartial(){return Pi(this)}partial(t){let r={};for(let e of We.objectKeys(this.shape)){let a=this.shape[e];t&&!t[e]?r[e]=a:r[e]=a.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let e of We.objectKeys(this.shape))if(t&&!t[e])r[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof wr;)t=t._def.innerType;r[e]=t}return new e({...this._def,shape:()=>r})}keyof(){return zE(We.objectKeys(this.shape))}};Sr.create=(e,t)=>new Sr({shape:()=>e,unknownKeys:"strip",catchall:mn.create(),typeName:se.ZodObject,...Be(t)}),Sr.strictCreate=(e,t)=>new Sr({shape:()=>e,unknownKeys:"strict",catchall:mn.create(),typeName:se.ZodObject,...Be(t)}),Sr.lazycreate=(e,t)=>new Sr({shape:e,unknownKeys:"strip",catchall:mn.create(),typeName:se.ZodObject,...Be(t)});var ua=class extends He{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new xr(e.ctx.common.issues));return de(t,{code:re.invalid_union,unionErrors:r}),$e});{let e,a=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"===s.status&&!e&&(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=a.map(e=>new xr(e));return de(t,{code:re.invalid_union,unionErrors:i}),$e}}get options(){return this._def.options}};ua.create=(e,t)=>new ua({options:e,typeName:se.ZodUnion,...Be(t)});var Qn=e=>e instanceof pa?Qn(e.schema):e instanceof Xr?Qn(e.innerType()):e instanceof fa?[e.value]:e instanceof ma?e.options:e instanceof ha?We.objectValues(e.enum):e instanceof ga?Qn(e._def.innerType):e instanceof ca?[void 0]:e instanceof la?[null]:e instanceof wr?[void 0,...Qn(e.unwrap())]:e instanceof In?[null,...Qn(e.unwrap())]:e instanceof mc||e instanceof ya?Qn(e.unwrap()):e instanceof va?Qn(e._def.innerType):[],Su=class e extends He{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.object)return de(t,{code:re.invalid_type,expected:ve.object,received:t.parsedType}),$e;let r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(de(t,{code:re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,a){let i=new Map;for(let e of r){let r=Qn(e.shape[t]);if(!r.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of r){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,e)}}return new e({typeName:se.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Be(a)})}};function bh(e,t){let r=Rn(e),a=Rn(t);if(e===t)return{valid:!0,data:e};if(r===ve.object&&a===ve.object){let r=We.objectKeys(t),a=We.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let r of a){let a=bh(e[r],t[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r===ve.array&&a===ve.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let a=0;a<e.length;a++){let i=bh(e[a],t[a]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===ve.date&&a===ve.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var da=class extends He{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(xu(e)||xu(a))return $e;let i=bh(e.value,a.value);return i.valid?((wu(e)||wu(a))&&t.dirty(),{status:t.value,value:i.data}):(de(r,{code:re.invalid_intersection_types}),$e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};da.create=(e,t,r)=>new da({left:e,right:t,typeName:se.ZodIntersection,...Be(r)});var On=class e extends He{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.array)return de(r,{code:re.invalid_type,expected:ve.array,received:r.parsedType}),$e;if(r.data.length<this._def.items.length)return de(r,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$e;!this._def.rest&&r.data.length>this._def.items.length&&(de(r,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new Jr(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>rr.mergeArray(t,e)):rr.mergeArray(t,a)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};On.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new On({items:e,typeName:se.ZodTuple,rest:null,...Be(t)})};var Eu=class e extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.object)return de(r,{code:re.invalid_type,expected:ve.object,received:r.parsedType}),$e;let a=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:i._parse(new Jr(r,e,r.path,e)),value:s._parse(new Jr(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?rr.mergeObjectAsync(t,a):rr.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(t,r,a){return new e(r instanceof He?{keyType:t,valueType:r,typeName:se.ZodRecord,...Be(a)}:{keyType:Ps.create(),valueType:t,typeName:se.ZodRecord,...Be(r)})}},Oi=class extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.map)return de(r,{code:re.invalid_type,expected:ve.map,received:r.parsedType}),$e;let a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new Jr(r,e,r.path,[s,"key"])),value:i._parse(new Jr(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,i=await r.value;if("aborted"===a.status||"aborted"===i.status)return $e;("dirty"===a.status||"dirty"===i.status)&&t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,i=r.value;if("aborted"===a.status||"aborted"===i.status)return $e;("dirty"===a.status||"dirty"===i.status)&&t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}};Oi.create=(e,t,r)=>new Oi({valueType:t,keyType:e,typeName:se.ZodMap,...Be(r)});var Ii=class e extends He{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.set)return de(r,{code:re.invalid_type,expected:ve.set,received:r.parsedType}),$e;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(de(r,{code:re.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(de(r,{code:re.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return $e;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let n=[...r.data.values()].map((e,t)=>i._parse(new Jr(r,e,r.path,t)));return r.common.async?Promise.all(n).then(e=>s(e)):s(n)}min(t,r){return new e({...this._def,minSize:{value:t,message:we.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:we.toString(r)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Ii.create=(e,t)=>new Ii({valueType:e,minSize:null,maxSize:null,typeName:se.ZodSet,...Be(t)});var Tu=class e extends He{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.function)return de(t,{code:re.invalid_type,expected:ve.function,received:t.parsedType}),$e;function r(e,r){return fc({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ti(),Yn].filter(e=>!!e),issueData:{code:re.invalid_arguments,argumentsError:r}})}function a(e,r){return fc({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ti(),Yn].filter(e=>!!e),issueData:{code:re.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Rs){let e=this;return cr(async function(...t){let n=new xr([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw n.addIssue(r(t,e)),n}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw n.addIssue(a(l,e)),n})})}{let e=this;return cr(function(...t){let n=e._def.args.safeParse(t,i);if(!n.success)throw new xr([r(t,n.error)]);let o=Reflect.apply(s,this,n.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new xr([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:On.create(t).rest(es.create())})}returns(t){return new e({...this._def,returns:t})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(t,r,a){return new e({args:t||On.create([]).rest(es.create()),returns:r||es.create(),typeName:se.ZodFunction,...Be(a)})}},pa=class extends He{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};pa.create=(e,t)=>new pa({getter:e,typeName:se.ZodLazy,...Be(t)});var fa=class extends He{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return de(t,{received:t.data,code:re.invalid_literal,expected:this._def.value}),$e}return{status:"valid",value:e.data}}get value(){return this._def.value}};function zE(e,t){return new ma({values:e,typeName:se.ZodEnum,...Be(t)})}fa.create=(e,t)=>new fa({value:e,typeName:se.ZodLiteral,...Be(t)});var ma=class e extends He{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return de(t,{expected:We.joinValues(r),received:t.parsedType,code:re.invalid_type}),$e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return de(t,{received:t.data,code:re.invalid_enum_value,options:r}),$e}return cr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...r})}};ma.create=zE;var ha=class extends He{_parse(e){let t=We.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ve.string&&r.parsedType!==ve.number){let e=We.objectValues(t);return de(r,{expected:We.joinValues(e),received:r.parsedType,code:re.invalid_type}),$e}if(this._cache||(this._cache=new Set(We.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=We.objectValues(t);return de(r,{received:r.data,code:re.invalid_enum_value,options:e}),$e}return cr(e.data)}get enum(){return this._def.values}};ha.create=(e,t)=>new ha({values:e,typeName:se.ZodNativeEnum,...Be(t)});var Rs=class extends He{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.promise&&!1===t.common.async)return de(t,{code:re.invalid_type,expected:ve.promise,received:t.parsedType}),$e;let r=t.parsedType===ve.promise?t.data:Promise.resolve(t.data);return cr(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Rs.create=(e,t)=>new Rs({type:e,typeName:se.ZodPromise,...Be(t)});var Xr=class extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{de(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){let e=a.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return $e;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?$e:"dirty"===a.status||"dirty"===t.value?na(a.value):a});{if("aborted"===t.value)return $e;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?$e:"dirty"===a.status||"dirty"===t.value?na(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?$e:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?$e:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===a.type){if(!1===r.common.async){let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Cs(e))return $e;let s=a.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>Cs(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):$e)}We.assertNever(a)}};Xr.create=(e,t,r)=>new Xr({schema:e,typeName:se.ZodEffects,effect:t,...Be(r)}),Xr.createWithPreprocess=(e,t,r)=>new Xr({schema:t,effect:{type:"preprocess",transform:e},typeName:se.ZodEffects,...Be(r)});var wr=class extends He{_parse(e){return this._getType(e)===ve.undefined?cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};wr.create=(e,t)=>new wr({innerType:e,typeName:se.ZodOptional,...Be(t)});var In=class extends He{_parse(e){return this._getType(e)===ve.null?cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};In.create=(e,t)=>new In({innerType:e,typeName:se.ZodNullable,...Be(t)});var ga=class extends He{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===ve.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};ga.create=(e,t)=>new ga({innerType:e,typeName:se.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Be(t)});var va=class extends He{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ci(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new xr(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new xr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};va.create=(e,t)=>new va({innerType:e,typeName:se.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Be(t)});var $i=class extends He{_parse(e){if(this._getType(e)!==ve.nan){let t=this._getOrReturnCtx(e);return de(t,{code:re.invalid_type,expected:ve.nan,received:t.parsedType}),$e}return{status:"valid",value:e.data}}};$i.create=e=>new $i({typeName:se.ZodNaN,...Be(e)});var yZ=Symbol("zod_brand"),mc=class extends He{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},hc=class e extends He{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?$e:"dirty"===e.status?(t.dirty(),na(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?$e:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(t,r){return new e({in:t,out:r,typeName:se.ZodPipeline})}},ya=class extends He{_parse(e){let t=this._def.innerType._parse(e),r=e=>(Cs(e)&&(e.value=Object.freeze(e.value)),e);return Ci(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}};function jE(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function BE(e,t={},r){return e?ks.create().superRefine((a,i)=>{let s=e(a);if(s instanceof Promise)return s.then(e=>{if(!e){let e=jE(t,a),s=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=jE(t,a),s=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:s})}}):ks.create()}ya.create=(e,t)=>new ya({innerType:e,typeName:se.ZodReadonly,...Be(t)});var se,bZ={object:Sr.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(se||(se={}));var _Z=(e,t={message:`Input not instance of ${e.name}`})=>BE(t=>t instanceof e,t),HE=Ps.create,VE=sa.create,xZ=$i.create,wZ=aa.create,ZE=ia.create,SZ=oa.create,EZ=ki.create,TZ=ca.create,CZ=la.create,PZ=ks.create,kZ=es.create,RZ=mn.create,OZ=Ri.create,IZ=ts.create,$Z=Sr.create,AZ=Sr.strictCreate,NZ=ua.create,DZ=Su.create,LZ=da.create,MZ=On.create,jZ=Eu.create,FZ=Oi.create,UZ=Ii.create,qZ=Tu.create,zZ=pa.create,BZ=fa.create,HZ=ma.create,VZ=ha.create,ZZ=Rs.create,GZ=Xr.create,WZ=wr.create,KZ=In.create,JZ=Xr.createWithPreprocess,XZ=hc.create,YZ=()=>HE().optional(),QZ=()=>VE().optional(),eG=()=>ZE().optional(),tG={string:e=>Ps.create({...e,coerce:!0}),number:e=>sa.create({...e,coerce:!0}),boolean:e=>ia.create({...e,coerce:!0}),bigint:e=>aa.create({...e,coerce:!0}),date:e=>oa.create({...e,coerce:!0})},rG=$e,ba=E,nG=ba.object({method:ba.literal("experiment_gates"),params:ba.object({gates:ba.record(ba.string(),ba.boolean())})});function GE(e){let t=$E({name:"claude-vscode",version:"2.0.75",tools:[]});return t.instance.server.setNotificationHandler(nG,async t=>{let{gates:r}=t.params;e(r)}),t}function WE(e,t,r){e.instance.server.notification({method:"log_event",params:{eventName:t,eventData:r}})}var Cu=class{constructor(e,t,r,a,i,s,n){this.cwd=e,this.logger=t,this.settings=r,this.openNewInTab=a,this.showTerminalBanner=i,this.experimentGates=s,this.authManager=n,this.readFromClient();try{Bn.load(this.cwd,this.logger)}catch(e){this.logger.error(`Failed to load sessions at startup: ${e}`)}}channels=new Map;fromClientStream=new ei;abortControllers=new Map;config;showReviewUpsellBanner;showYearEndPromo;yearEndPromoViewCount=0;outstandingRequests=new Map;async fromClient(e){this.fromClientStream.enqueue(e)}async readFromClient(){for await(let e of this.fromClientStream)switch(e.type){case"launch_claude":await this.launchClaude(e.channelId,e.resume,e.cwd,e.model,e.permissionMode,e.thinkingLevel);break;case"close_channel":this.closeChannel(e.channelId,!1);break;case"interrupt_claude":this.interruptClaude(e.channelId);break;case"start_speech_to_text":await this.handleStartSpeechToText(e.channelId);break;case"stop_speech_to_text":this.handleStopSpeechToText(e.channelId);break;case"io_message":this.transportMessage(e.channelId,e.message,e.done);break;case"request":this.handleRequest(e);break;case"response":{let t=e.requestId,r=this.outstandingRequests.get(t);r?"error"===e.response.type?r.reject(new Error(e.response.error)):r.resolve(e.response):this.logger.warn(`No handler for response with requestId: ${t}`)}break;case"cancel_request":this.handleCancellation(e.targetRequestId);break;default:this.logger.error(`Unknown message: ${e}`)}}async launchClaude(e,t,r,a,i,s){if(this.logger.log(`Launching Claude on channel: ${e}`),this.channels.has(e))throw new Error(`Channel already exists: ${e}`);this.generateAndPushProactiveSuggestions(e);try{let n,o=new ei,l=GE(e=>{this.onExperimentGatesUpdated(e)}),c={"claude-vscode":l},u=new Set(await jl(process.pid)),p=this.spawnClaude(o,t,async(t,r,a)=>this.requestToolPermission(e,t,r,a.suggestions||[]),a||null,r,i,this.settings.getAllowDangerouslySkipPermissions(),this.getMaxThinkingTokensForModel(s),c),d=(await jl(process.pid)).filter(e=>!u.has(e));for(let e of d){let t=await Jf(e);if(t.includes("cli.js")||t.includes("/claude")){n=parseInt(e,10);break}}void 0===n&&d.length>0&&(n=parseInt(d[0],10)),this.channels.set(e,{in:o,query:p,pid:n,vscodeMcpServer:l,mcpServers:{},chromeMcpState:{status:"disconnected"}}),this.logger.log(`Claude spawned on channel ${e} with PID: ${n??"unknown"}`),this.claudeLaunched(e),(async()=>{try{for await(let t of p)this.send({type:"io_message",channelId:e,message:t,done:!1}),Hw(t);this.closeChannel(e,!0)}catch(t){this.closeChannel(e,!0,String(t)),this.logger.error(`Error from Claude (on channel ${e}): ${t}`)}})()}catch(t){this.closeChannel(e,!0,String(t)),this.logger.error(`Error spawning Claude (on channel ${e}): ${t}`)}}claudeLaunched(e){}async requestToolPermission(e,t,r,a){this.channels.get(e);let i=await this.sendRequest(e,{type:"tool_permission_request",toolName:t,inputs:r,suggestions:a});return Bw(t,i),i.result}sendRequest(e,t){let r=vs();return new Promise((a,i)=>{this.outstandingRequests.set(r,{resolve:e=>{a(e)},reject:i}),this.send({type:"request",channelId:e,requestId:r,request:t})}).finally(()=>{this.outstandingRequests.delete(r)})}async interruptClaude(e){let t=this.channels.get(e);if(t)try{await t.query.interrupt(),this.logger.log(`Interrupted Claude for requestId: ${e}`)}catch(e){this.logger.error(`Failed to interrupt Claude: ${e}`)}else this.logger.warn(`Channel not found: ${e}`)}logEvent(e,t,r){let a=this.channels.get(e);a?WE(a.vscodeMcpServer,t,r):this.logger.warn(`Channel not found for logEvent: ${e}`)}async handleStartSpeechToText(e){throw new Error("Speech-to-text is not supported in this environment")}async handleStopSpeechToText(e){throw new Error("Speech-to-text is not supported in this environment")}async closeChannel(e,t,r){this.logger.log(`Closing Claude on channel: ${e}`),t&&this.send({type:"close_channel",channelId:e,error:r});let a=this.channels.get(e);if(a){a.in.done();try{await a.query.return()}catch(t){this.logger.warn(`Error cleaning up channel ${e}: ${t}`)}this.channels.delete(e)}}transportMessage(e,t,r){let a=this.channels.get(e);if(!a)throw new Error(`Channel not found: ${e}`);"user"===t.type&&a.in.enqueue(t),r&&a.in.done()}async shutdown(){await this.closeAllChannels(),this.fromClientStream.done()}async closeAllChannels(){let e=Array.from(this.channels.keys()).map(e=>this.closeChannel(e,!1));await Promise.all(e),this.channels.clear()}async closeAllChannelsWithCredentialChange(){let e=Array.from(this.channels.keys()).map(e=>this.closeChannel(e,!0));await Promise.all(e),this.channels.clear()}loadConfig(){if(this.config)return this.config;this.logger.log("Loading config cache by launching Claude...");let e=(async()=>{let e=new ei,t=this.spawnClaude(e,void 0,async()=>({behavior:"deny",message:"Config loading only"}),"default",this.cwd,"default",!1,0,void 0);e.done();let r={slashCommands:await t.supportedCommands(),models:await t.supportedModels(),accountInfo:await t.accountInfo()};return t.return(),r})().catch(e=>{throw this.logger.error(`Failed to load config cache: ${e}`),this.config=void 0,e});return this.config=e,e}async getMcpServers(e){let t=e?this.channels.get(e):void 0;if(!t)throw new Error(`Channel not found: ${e}`);try{return{type:"get_mcp_servers_response",mcpServers:(await t.query.mcpServerStatus()).filter(e=>"claude-vscode"!==e.name)}}catch(e){return this.logger.error(`Error fetching MCP servers: ${e}`),{type:"get_mcp_servers_response",mcpServers:[]}}}async ensureChromeMcpEnabled(e){throw new Error("Not supported")}async disableChromeMcp(e){throw new Error("Not supported")}async createNewBrowserTab(){throw new Error("createNewBrowserTab must be implemented by subclass")}getChromeMcpServerConfig(){throw new Error("getChromeMcpServerConfig must be implemented by subclass")}async handleRequest(e){let t=new AbortController;try{this.abortControllers.set(e.requestId,t);let r=await this.processRequest(e,t.signal);this.send({type:"response",requestId:e.requestId,response:r})}catch(t){this.logger.error(`Error processing client request: ${t}`),this.send({type:"response",requestId:e.requestId,response:{type:"error",error:t instanceof Error?t.message:String(t)}})}finally{this.abortControllers.delete(e.requestId)}}async processRequest(e,t){switch(e.request.type){case"init":{let t=this.authManager?.getAuthStatus(),r=e.channelId?this.channels.get(e.channelId):void 0;return{type:"init_response",state:{defaultCwd:this.cwd,openNewInTab:this.openNewInTab,showTerminalBanner:this.showTerminalBanner,showReviewUpsellBanner:this.showReviewUpsellBanner||!1,showYearEndPromo:this.showYearEndPromo||!1,yearEndPromoViewCount:this.yearEndPromoViewCount,authStatus:t,modelSetting:this.settings.getModel(),thinkingLevel:this.settings.getThinkingLevel(),initialPermissionMode:this.settings.getInitialPermissionMode(),allowDangerouslySkipPermissions:this.settings.getAllowDangerouslySkipPermissions(),platform:this.getPlatform(),speechToTextEnabled:this.isSpeechToTextEnabled(),marketplaceType:this.getMarketplaceType(),useCtrlEnterToSend:this.settings.getUseCtrlEnterToSend(),chromeMcpState:r?.chromeMcpState??{status:"disconnected"},browserIntegrationSupported:this.isBrowserIntegrationSupported()}}}case"get_claude_state":return{type:"get_claude_state_response",config:await this.loadConfig()};case"get_mcp_servers":return await this.getMcpServers(e.channelId);case"ensure_chrome_mcp_enabled":if(!e.channelId)throw new Error("channelId is required for ensure_chrome_mcp_enabled");return await this.ensureChromeMcpEnabled(e.channelId);case"disable_chrome_mcp":if(!e.channelId)throw new Error("channelId is required for disable_chrome_mcp");return await this.disableChromeMcp(e.channelId);case"create_new_browser_tab":return await this.createNewBrowserTab();case"list_sessions_request":return this.listSessions();case"open_file":return this.openFile(e.request.filePath,e.request.location),{type:"open_file_response"};case"get_session_request":return this.getSession(e.request.sessionId);case"exec":return this.execCommand(e.request.command,e.request.params);case"list_files_request":return{type:"list_files_response",files:await this.findFiles(e.request.pattern)};case"get_terminal_contents":return{type:"get_terminal_contents_response",content:await this.getTerminalContents(e.request.terminalName)};case"open_diff":return this.openDiff(e.request.originalFilePath,e.request.newFilePath,e.request.edits,e.request.supportMultiEdits||!1,t);case"open_content":return this.openContent(e.request.content,e.request.fileName,e.request.editable,t);case"get_asset_uris":return{type:"asset_uris_response",assetUris:this.getAssetUris()};case"open_url":return await this.openURL(e.request.url),{type:"open_url_response"};case"set_permission_mode":return this.setPermissionMode(e.channelId,e.request.mode);case"set_model":return this.setModel(e.channelId,e.request.model);case"set_thinking_level":return this.setThinkingLevel(e.channelId,e.request.thinkingLevel);case"get_auth_status":return{type:"get_auth_status_response",status:this.authManager?.getAuthStatus()};case"login":{if(!this.authManager)throw new Error("Authentication is not supported in this environment");let{method:t}=e.request,r=await this.authManager.login(t,async e=>{this.send({type:"request",channelId:"",requestId:vs(),request:{type:"auth_url",url:e.manualRedirectUrl,method:t}});try{await this.openURL(e.automaticRedirectUrl)}catch(e){this.logger.warn(`Failed to open browser: ${e}`)}});return await this.closeAllChannelsWithCredentialChange(),{type:"login_response",auth:r}}case"submit_oauth_code":{if(!this.authManager)throw new Error("Authentication is not supported in this environment");let{code:t}=e.request;return this.authManager.handleManualAuthCode(t),{type:"submit_oauth_code_response"}}case"open_config_file":return this.openConfigFile(e.request.configType),{type:"open_config_file_response"};case"open_claude_in_terminal":return await this.openClaudeInTerminal(e.request.prompt,e.request.args,e.request.location),{type:"open_claude_in_terminal_response"};case"open_terminal":return await this.openTerminal(e.request.executable,e.request.args,e.request.cwd,e.request.location,e.channelId),{type:"open_terminal_response"};case"show_claude_terminal_setting":return await this.showClaudeTerminalSetting(),{type:"show_claude_terminal_setting_response"};case"dismiss_terminal_banner":return await this.dismissTerminalBanner(),{type:"dismiss_terminal_banner_response"};case"dismiss_review_upsell_banner":return await this.dismissReviewUpsellBanner(e.request.metadata),{type:"dismiss_review_upsell_banner_response"};case"dismiss_year_end_promo":return await this.dismissYearEndPromo(),{type:"dismiss_year_end_promo_response"};case"log_event":{let t=e.channelId||"";return this.logEvent(t,e.request.eventName,e.request.eventData),{type:"log_event_response"}}case"open_config":return await this.openConfig(e.request.searchString),{type:"open_config_response"};case"open_help":return await this.openHelp(),{type:"open_help_response"};case"open_output_panel":return await this.openOutputPanel(),{type:"open_output_panel_response"};case"fork_conversation":return{type:"fork_conversation_response",sessionId:await(await Bn.load(this.cwd,this.logger)).forkSession(e.request.forkedFromSession,e.request.resumeSessionAt)};case"rewind_code":{let t=e.channelId?this.channels.get(e.channelId):void 0;if(!t)throw new Error(`Channel not found: ${e.channelId}`);return await t.query.rewindFiles(e.request.userMessageId),{type:"rewind_code_response"}}}throw new Error("Unknown request type.")}async loadSessionsFromPath(e,t,r){try{return(await(await Bn.load(e,this.logger)).fetchSessions()).filter(e=>!e.isSidechain).map(e=>({id:e.id,lastModified:e.lastModified,messageCount:e.messageCount,summary:e.summary,worktree:t,isCurrentWorkspace:r}))}catch(t){return this.logger.warn(`Failed to load sessions from ${e}: ${t}`),[]}}async listSessions(){let e=[],t=await this.loadSessionsFromPath(this.cwd,void 0,!0);return e.push(...t),zw(e),{type:"list_sessions_response",sessions:e}}async getSession(e){return{type:"get_session_response",messages:await(await Bn.load(this.cwd,this.logger)).getSessionMessages(e)}}handleCancellation(e){let t=this.abortControllers.get(e);t&&t.abort()}async execCommand(e,t){let r="",a="",i=(0,KE.spawn)(e,t,{cwd:this.cwd,shell:!1});i.stdout.on("data",e=>{r+=e.toString()}),i.stderr.on("data",e=>{a+=e.toString()});let s=await new Promise(e=>{i.on("close",t=>{e(t??0)}),i.on("error",t=>{a+=t.message,e(1)})});return{type:"exec_response",stdout:r,stderr:a,exitCode:s}}async createSpeechToTextStream(){throw new Error("Speech-to-text is not supported in this environment")}isSpeechToTextEnabled(){return!1}getAssetUris(){return Dw()}async setPermissionMode(e,t){let r=e?this.channels.get(e):void 0;if(!r)throw new Error(`Channel not found: ${e}`);try{return await r.query.setPermissionMode(t),{type:"set_permission_mode_response",success:!0}}catch(e){return this.logger.error(`Failed to set permission mode: ${e}`),{type:"set_permission_mode_response",success:!1}}}async setModel(e,t){let r=e?this.channels.get(e):void 0;if(!r)throw new Error(`Channel not found: ${e}`);try{return await r.query.setModel(t.value),await this.settings.setModel(t.value),{type:"set_model_response",success:!0}}catch(e){return this.logger.error(`Failed to set model: ${e}`),{type:"set_model_response",success:!1}}}async setThinkingLevel(e,t){let r=e?this.channels.get(e):void 0;if(!r)throw new Error(`Channel not found: ${e}`);let a=this.getMaxThinkingTokensForModel(t);return await r.query.setMaxThinkingTokens(a),await this.settings.setThinkingLevel(t),{type:"set_thinking_level_response"}}getPlatform(){switch(process.platform){case"win32":return"windows";case"darwin":return"macos";default:return"linux"}}isBrowserIntegrationSupported(){return!1}async pushStateUpdate(){this.config=void 0;let e=await this.loadConfig(),t={type:"request",channelId:"",requestId:vs(),request:{type:"update_state",state:this.getCurrentState(),config:e}};this.send(t)}getCurrentState(){let e=this.authManager?.getAuthStatus();return{defaultCwd:this.cwd,openNewInTab:this.openNewInTab,showTerminalBanner:this.showTerminalBanner,showReviewUpsellBanner:this.showReviewUpsellBanner??!1,showYearEndPromo:this.showYearEndPromo??!1,yearEndPromoViewCount:this.yearEndPromoViewCount,authStatus:e,modelSetting:this.settings.getModel(),thinkingLevel:this.settings.getThinkingLevel(),allowDangerouslySkipPermissions:this.settings.getAllowDangerouslySkipPermissions(),initialPermissionMode:this.settings.getInitialPermissionMode(),platform:this.getPlatform(),speechToTextEnabled:this.isSpeechToTextEnabled(),marketplaceType:this.getMarketplaceType(),useCtrlEnterToSend:this.settings.getUseCtrlEnterToSend(),chromeMcpState:{status:"disconnected"},browserIntegrationSupported:this.isBrowserIntegrationSupported()}}async pushChannelStateUpdate(e){let t=this.channels.get(e);if(!t)return;let r=await this.loadConfig(),a=this.getCurrentState();a.chromeMcpState=t.chromeMcpState;let i={type:"request",channelId:e,requestId:vs(),request:{type:"update_state",state:a,config:r}};this.send(i)}async generateAndPushProactiveSuggestions(e){if("true"===process.env.CLAUDE_PROACTIVE_SUGGESTIONS)try{let{pathToClaudeCodeExecutable:t,executableArgs:r,env:a}=this.getClaudeBinary(),i=await DE({cwd:this.cwd,logger:this.logger,pathToClaudeCodeExecutable:t,executableArgs:r,env:a});if(i.suggestions.length>0){let t={type:"request",channelId:e,requestId:vs(),request:{type:"proactive_suggestions_update",suggestions:i.suggestions}};this.send(t)}}catch(e){this.logger.warn(`Failed to generate proactive suggestions: ${e}`)}}getClaudeBinary(){return{pathToClaudeCodeExecutable:"",executableArgs:[],env:{}}}getMaxThinkingTokensForModel(e){return"off"===e?0:31999}},he=le(require("vscode"),1),Mr=le(require("vscode"),1),ji=require("fs"),kT=require("os"),Sh=require("path"),RT=require("child_process"),aG="object"==typeof global&&global&&global.Object===Object&&global,JE=aG,iG="object"==typeof self&&self&&self.Object===Object&&self,oG=JE||iG||Function("return this")(),Ai=oG,cG=Ai.Symbol,Ni=cG,XE=Object.prototype,lG=XE.hasOwnProperty,uG=XE.toString,gc=Ni?Ni.toStringTag:void 0;function dG(e){var t=lG.call(e,gc),r=e[gc];try{e[gc]=void 0;var a=!0}catch{}var i=uG.call(e);return a&&(t?e[gc]=r:delete e[gc]),i}var YE=dG,pG=Object.prototype,fG=pG.toString;function mG(e){return fG.call(e)}var QE=mG,hG="[object Null]",gG="[object Undefined]",eT=Ni?Ni.toStringTag:void 0;function vG(e){return null==e?void 0===e?gG:hG:eT&&eT in Object(e)?YE(e):QE(e)}var tT=vG;function yG(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Pu=yG,bG="[object AsyncFunction]",_G="[object Function]",xG="[object GeneratorFunction]",wG="[object Proxy]";function SG(e){if(!Pu(e))return!1;var t=tT(e);return t==_G||t==xG||t==bG||t==wG}var rT=SG,EG=Ai["__core-js_shared__"],ku=EG,nT=function(){var e=/[^.]+$/.exec(ku&&ku.keys&&ku.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function TG(e){return!!nT&&nT in e}var sT=TG,CG=Function.prototype,PG=CG.toString;function kG(e){if(null!=e){try{return PG.call(e)}catch{}try{return e+""}catch{}}return""}var aT=kG,RG=/[\\^$.*+?()[\]{}|]/g,OG=/^\[object .+?Constructor\]$/,IG=Function.prototype,$G=Object.prototype,AG=IG.toString,NG=$G.hasOwnProperty,DG=RegExp("^"+AG.call(NG).replace(RG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function LG(e){return!(!Pu(e)||sT(e))&&(rT(e)?DG:OG).test(aT(e))}var iT=LG;function MG(e,t){return e?.[t]}var oT=MG;function jG(e,t){var r=oT(e,t);return iT(r)?r:void 0}var Ru=jG;function FG(e,t){return e===t||e!=e&&t!=t}var cT=FG,UG=Ru(Object,"create"),rs=UG;function qG(){this.__data__=rs?rs(null):{},this.size=0}var lT=qG;function zG(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var uT=zG,BG="__lodash_hash_undefined__",HG=Object.prototype,VG=HG.hasOwnProperty;function ZG(e){var t=this.__data__;if(rs){var r=t[e];return r===BG?void 0:r}return VG.call(t,e)?t[e]:void 0}var dT=ZG,GG=Object.prototype,WG=GG.hasOwnProperty;function KG(e){var t=this.__data__;return rs?void 0!==t[e]:WG.call(t,e)}var pT=KG,JG="__lodash_hash_undefined__";function XG(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rs&&void 0===t?JG:t,this}var fT=XG;function Di(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Di.prototype.clear=lT,Di.prototype.delete=uT,Di.prototype.get=dT,Di.prototype.has=pT,Di.prototype.set=fT;var _h=Di;function YG(){this.__data__=[],this.size=0}var mT=YG;function QG(e,t){for(var r=e.length;r--;)if(cT(e[r][0],t))return r;return-1}var Os=QG,e6=Array.prototype,t6=e6.splice;function r6(e){var t=this.__data__,r=Os(t,e);return!(r<0)&&(r==t.length-1?t.pop():t6.call(t,r,1),--this.size,!0)}var hT=r6;function n6(e){var t=this.__data__,r=Os(t,e);return r<0?void 0:t[r][1]}var gT=n6;function s6(e){return Os(this.__data__,e)>-1}var vT=s6;function a6(e,t){var r=this.__data__,a=Os(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var yT=a6;function Li(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Li.prototype.clear=mT,Li.prototype.delete=hT,Li.prototype.get=gT,Li.prototype.has=vT,Li.prototype.set=yT;var bT=Li,i6=Ru(Ai,"Map"),_T=i6;function o6(){this.size=0,this.__data__={hash:new _h,map:new(_T||bT),string:new _h}}var xT=o6;function c6(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var wT=c6;function l6(e,t){var r=e.__data__;return wT(t)?r["string"==typeof t?"string":"hash"]:r.map}var Is=l6;function u6(e){var t=Is(this,e).delete(e);return this.size-=t?1:0,t}var ST=u6;function d6(e){return Is(this,e).get(e)}var ET=d6;function p6(e){return Is(this,e).has(e)}var TT=p6;function f6(e,t){var r=Is(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var CT=f6;function Mi(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Mi.prototype.clear=xT,Mi.prototype.delete=ST,Mi.prototype.get=ET,Mi.prototype.has=TT,Mi.prototype.set=CT;var xh=Mi,m6="Expected a function";function wh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(m6);var r=function(){var a=arguments,i=t?t.apply(this,a):a[0],s=r.cache;if(s.has(i))return s.get(i);var n=e.apply(this,a);return r.cache=s.set(i,n)||s,n};return r.cache=new(wh.Cache||xh),r}wh.Cache=xh;var Yr=wh,hn=le(require("vscode"),1),Ou=class{constructor(e){this.context=e}getModel(){let e=mr("selectedModel");return e&&"default"!==e&&"sonnet"!==e?"opus"===e?"claude-opus-4-5-thinking":"haiku"===e?"gemini-3-flash":e:"claude-sonnet-4-5-thinking"}async setModel(e){await hn.workspace.getConfiguration("claudeCode").update("selectedModel",e,hn.ConfigurationTarget.Global)}getThinkingLevel(){return this.context.globalState.get("thinkingLevel")||"off"}async setThinkingLevel(e){this.context.globalState.update("thinkingLevel",e)}getInitialPermissionMode(){let e=mr("initialPermissionMode")||"default";return"bypassPermissions"!==e||this.getAllowDangerouslySkipPermissions()?e:"default"}getAllowDangerouslySkipPermissions(){return mr("allowDangerouslySkipPermissions")||!1}getUseCtrlEnterToSend(){return mr("useCtrlEnterToSend")||!1}getPreferredLocation(){return"sidebar"===mr("preferredLocation")?"sidebar":"panel"}async setPreferredLocation(e){await hn.workspace.getConfiguration("claudeCode").update("preferredLocation",e,hn.ConfigurationTarget.Global)}migrateAllSettings(){this.migrateOldConfigSettings(),this.migrateLastClaudeLocation()}migrateOldConfigSettings(){if(this.context.globalState.get("settingsMigrated20251024"))return;let e=hn.workspace.getConfiguration("claude-code"),t=hn.workspace.getConfiguration("claudeCode"),r=["selectedModel","environmentVariables","useTerminal","allowDangerouslySkipPermissions","claudeProcessWrapper","respectGitIgnore"];for(let a of r){let r=e.get(a);void 0!==r&&(t.update(a,r,hn.ConfigurationTarget.Global),e.update(a,void 0,hn.ConfigurationTarget.Global))}this.context.globalState.update("settingsMigrated20251024",!0)}migrateLastClaudeLocation(){if(this.context.globalState.get("lastClaudeLocationMigrated"))return;let e=this.context.globalState.get("lastClaudeLocation");if(void 0!==e){let t=0===e?"sidebar":"panel";this.setPreferredLocation(t)}this.context.globalState.update("lastClaudeLocationMigrated",!0)}};function mr(e){return hn.workspace.getConfiguration("claudeCode").get(e)}function h6(e){let t=e.trim();return t?/[*?{}[\]]/.test(t)?t:`**/*${t.split("").map(e=>{if(/[a-zA-Z]/.test(e)){return`[${e.toLowerCase()}${e.toUpperCase()}]`}return e}).join("")}*`:"**/*"}var OT=`{${["**/node_modules/**","**/.git/**","**/dist/**","**/build/**","**/.next/**","**/.nuxt/**","**/.DS_Store","**/Thumbs.db","**/*.log","**/.env","**/.env.*","**/yarn-error.log","**/npm-debug.log*"].join(",")}}`;async function Eh(e){let t,r=[],a=e?h6(e):"**/*",i=await IT();try{t=await Mr.workspace.findFiles(a,i,100)}catch{t=await Mr.workspace.findFiles(a,OT,100)}try{for(let e of t){let t=Mr.workspace.asRelativePath(e),a=e.path.split("/").pop()||"";r.push({path:t,name:a,type:"file"})}r.sort((e,t)=>e.path.localeCompare(t.path))}catch{}return r}async function IT(){let e=[];try{let t=Mr.workspace.getConfiguration("search"),r=Mr.workspace.getConfiguration("files"),a=t.get("exclude")||{},i=r.get("exclude")||{};for(let[t,r]of Object.entries(a))r&&"string"==typeof t&&e.push(t);for(let[t,r]of Object.entries(i))r&&"string"==typeof t&&e.push(t);let s=t.get("useIgnoreFiles",!0),n=mr("respectGitIgnore")??!0;if(s&&n){let t=Mr.workspace.workspaceFolders;if(t)for(let r of t){let t=g6(r.uri.fsPath);e.push(...t)}}}catch{}let t=e.filter(e=>"string"==typeof e&&e.length>0);return 0===t.length?OT:1===t.length?t[0]:`{${t.join(",")}}`}function g6(e){let t=[];try{let r=(0,Sh.join)(e,".gitignore");if((0,ji.existsSync)(r)){let e=(0,ji.readFileSync)(r,"utf8");t.push(...PT(e))}let a=(0,Sh.join)((0,kT.homedir)(),".config","git","ignore");if((0,ji.existsSync)(a)){let e=(0,ji.readFileSync)(a,"utf8");t.push(...PT(e))}}catch{}return t}function PT(e){let t=[];for(let r of e.split("\n")){let e=r.trim();if(!e||e.startsWith("#")||e.startsWith("!"))continue;let a=e;a.endsWith("/")&&(a=a.slice(0,-1)+"/**"),a=a.startsWith("/")?a.slice(1):"**/"+a,t.includes(a)||t.push(a)}return t}async function v6(e){if("comment"===e.scheme||"output"===e.scheme)return!0;try{let t=Mr.workspace.getWorkspaceFolder(e);if(!t)return!1;let r=Mr.workspace.asRelativePath(e,!1),a=await IT();if(0===(await Mr.workspace.findFiles(new Mr.RelativePattern(t,r),a,1)).length)return!0;let i=mr("respectGitIgnore")??!0;return!!(Mr.workspace.getConfiguration("search").get("useIgnoreFiles",!0)&&i&&await new Promise(r=>{(0,RT.execFile)("git",["check-ignore",e.fsPath],{cwd:t.uri.fsPath},(e,t)=>{r(!e&&!!t)})}))}catch{return!1}}var Iu=Yr(v6,e=>e.fsPath),qh=le(require("vscode"),1),Bt=le(require("path"),1);function ns(e){return Array.isArray?Array.isArray(e):"[object Array]"===FT(e)}var y6=1/0;function b6(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-y6?"-0":t}function _6(e){return null==e?"":b6(e)}function $n(e){return"string"==typeof e}function MT(e){return"number"==typeof e}function x6(e){return!0===e||!1===e||w6(e)&&"[object Boolean]"==FT(e)}function jT(e){return"object"==typeof e}function w6(e){return jT(e)&&null!==e}function jr(e){return null!=e}function Th(e){return!e.trim().length}function FT(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var S6="Incorrect 'index' type",E6=e=>`Invalid value for key ${e}`,T6=e=>`Pattern length exceeds max of ${e}.`,C6=e=>`Missing ${e} property in key`,P6=e=>`Property 'weight' in key '${e}' must be a positive integer`,$T=Object.prototype.hasOwnProperty,Ch=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let r=UT(e);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function UT(e){let t=null,r=null,a=null,i=1,s=null;if($n(e)||ns(e))a=e,t=AT(e),r=Ph(e);else{if(!$T.call(e,"name"))throw new Error(C6("name"));let n=e.name;if(a=n,$T.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(P6(n));t=AT(n),r=Ph(n),s=e.getFn}return{path:t,id:r,weight:i,src:a,getFn:s}}function AT(e){return ns(e)?e:e.split(".")}function Ph(e){return ns(e)?e.join("."):e}function k6(e,t){let r=[],a=!1,i=(e,t,s)=>{if(jr(e))if(t[s]){let n=e[t[s]];if(!jr(n))return;if(s===t.length-1&&($n(n)||MT(n)||x6(n)))r.push(_6(n));else if(ns(n)){a=!0;for(let e=0,r=n.length;e<r;e+=1)i(n[e],t,s+1)}else t.length&&i(n,t,s+1)}else r.push(e)};return i(e,$n(t)?t.split("."):t,0),a?r:r[0]}var R6={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},O6={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},I6={location:0,threshold:.6,distance:100},$6={useExtendedSearch:!1,getFn:k6,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},Ue={...O6,...R6,...I6,...$6},A6=/[^ ]+/g;function N6(e=1,t=3){let r=new Map,a=Math.pow(10,t);return{get(t){let i=t.match(A6).length;if(r.has(i))return r.get(i);let s=1/Math.pow(i,.5*e),n=parseFloat(Math.round(s*a)/a);return r.set(i,n),n},clear(){r.clear()}}}var vc=class{constructor({getFn:e=Ue.getFn,fieldNormWeight:t=Ue.fieldNormWeight}={}){this.norm=N6(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,$n(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();$n(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!jr(e)||Th(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((t,a)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(jr(i))if(ns(i)){let e=[],t=[{nestedArrIndex:-1,value:i}];for(;t.length;){let{nestedArrIndex:r,value:a}=t.pop();if(jr(a))if($n(a)&&!Th(a)){let t={v:a,i:r,n:this.norm.get(a)};e.push(t)}else ns(a)&&a.forEach((e,r)=>{t.push({nestedArrIndex:r,value:e})})}r.$[a]=e}else if($n(i)&&!Th(i)){let e={v:i,n:this.norm.get(i)};r.$[a]=e}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function qT(e,t,{getFn:r=Ue.getFn,fieldNormWeight:a=Ue.fieldNormWeight}={}){let i=new vc({getFn:r,fieldNormWeight:a});return i.setKeys(e.map(UT)),i.setSources(t),i.create(),i}function D6(e,{getFn:t=Ue.getFn,fieldNormWeight:r=Ue.fieldNormWeight}={}){let{keys:a,records:i}=e,s=new vc({getFn:t,fieldNormWeight:r});return s.setKeys(a),s.setIndexRecords(i),s}function $u(e,{errors:t=0,currentLocation:r=0,expectedLocation:a=0,distance:i=Ue.distance,ignoreLocation:s=Ue.ignoreLocation}={}){let n=t/e.length;if(s)return n;let o=Math.abs(a-r);return i?n+o/i:o?1:n}function L6(e=[],t=Ue.minMatchCharLength){let r=[],a=-1,i=-1,s=0;for(let n=e.length;s<n;s+=1){let n=e[s];n&&-1===a?a=s:!n&&-1!==a&&(i=s-1,i-a+1>=t&&r.push([a,i]),a=-1)}return e[s-1]&&s-a>=t&&r.push([a,s-1]),r}var _a=32;function M6(e,t,r,{location:a=Ue.location,distance:i=Ue.distance,threshold:s=Ue.threshold,findAllMatches:n=Ue.findAllMatches,minMatchCharLength:o=Ue.minMatchCharLength,includeMatches:l=Ue.includeMatches,ignoreLocation:c=Ue.ignoreLocation}={}){if(t.length>_a)throw new Error(T6(_a));let u,p=t.length,d=e.length,h=Math.max(0,Math.min(a,d)),m=s,f=h,v=o>1||l,g=v?Array(d):[];for(;(u=e.indexOf(t,f))>-1;){let e=$u(t,{currentLocation:u,expectedLocation:h,distance:i,ignoreLocation:c});if(m=Math.min(e,m),f=u+p,v){let e=0;for(;e<p;)g[u+e]=1,e+=1}}f=-1;let y=[],b=1,x=p+d,_=1<<p-1;for(let a=0;a<p;a+=1){let s=0,o=x;for(;s<o;)$u(t,{errors:a,currentLocation:h+o,expectedLocation:h,distance:i,ignoreLocation:c})<=m?s=o:x=o,o=Math.floor((x-s)/2+s);x=o;let l=Math.max(1,h-o+1),u=n?d:Math.min(h+o,d)+p,w=Array(u+2);w[u+1]=(1<<a)-1;for(let s=u;s>=l;s-=1){let n=s-1,o=r[e.charAt(n)];if(v&&(g[n]=+!!o),w[s]=(w[s+1]<<1|1)&o,a&&(w[s]|=(y[s+1]|y[s])<<1|1|y[s+1]),w[s]&_&&(b=$u(t,{errors:a,currentLocation:n,expectedLocation:h,distance:i,ignoreLocation:c}),b<=m)){if(m=b,f=n,f<=h)break;l=Math.max(1,2*h-f)}}if($u(t,{errors:a+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>m)break;y=w}let w={isMatch:f>=0,score:Math.max(.001,b)};if(v){let e=L6(g,o);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function j6(e){let t={};for(let r=0,a=e.length;r<a;r+=1){let i=e.charAt(r);t[i]=(t[i]||0)|1<<a-r-1}return t}var Au=class{constructor(e,{location:t=Ue.location,threshold:r=Ue.threshold,distance:a=Ue.distance,includeMatches:i=Ue.includeMatches,findAllMatches:s=Ue.findAllMatches,minMatchCharLength:n=Ue.minMatchCharLength,isCaseSensitive:o=Ue.isCaseSensitive,ignoreLocation:l=Ue.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:n,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let c=(e,t)=>{this.chunks.push({pattern:e,alphabet:j6(e),startIndex:t})},u=this.pattern.length;if(u>_a){let e=0,t=u%_a,r=u-t;for(;e<r;)c(this.pattern.substr(e,_a),e),e+=_a;if(t){let e=u-_a;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}let{location:a,distance:i,threshold:s,findAllMatches:n,minMatchCharLength:o,ignoreLocation:l}=this.options,c=[],u=0,p=!1;this.chunks.forEach(({pattern:t,alphabet:d,startIndex:h})=>{let{isMatch:m,score:f,indices:v}=M6(e,t,d,{location:a+h,distance:i,threshold:s,findAllMatches:n,minMatchCharLength:o,includeMatches:r,ignoreLocation:l});m&&(p=!0),u+=f,m&&v&&(c=[...c,...v])});let d={isMatch:p,score:p?u/this.chunks.length:1};return p&&r&&(d.indices=c),d}},An=class{constructor(e){this.pattern=e}static isMultiMatch(e){return NT(e,this.multiRegex)}static isSingleMatch(e){return NT(e,this.singleRegex)}search(){}};function NT(e,t){let r=e.match(t);return r?r[1]:null}var kh=class extends An{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Rh=class extends An{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Oh=class extends An{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ih=class extends An{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},$h=class extends An{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Ah=class extends An{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Nu=class extends An{constructor(e,{location:t=Ue.location,threshold:r=Ue.threshold,distance:a=Ue.distance,includeMatches:i=Ue.includeMatches,findAllMatches:s=Ue.findAllMatches,minMatchCharLength:n=Ue.minMatchCharLength,isCaseSensitive:o=Ue.isCaseSensitive,ignoreLocation:l=Ue.ignoreLocation}={}){super(e),this._bitapSearch=new Au(e,{location:t,threshold:r,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:n,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},Du=class extends An{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,r=0,a=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,r))>-1;)r=t+i,a.push([t,r-1]);let s=!!a.length;return{isMatch:s,score:s?0:1,indices:a}}},Nh=[kh,Du,Oh,Ih,Ah,$h,Rh,Nu],DT=Nh.length,F6=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,U6="|";function q6(e,t={}){return e.split(U6).map(e=>{let r=e.trim().split(F6).filter(e=>e&&!!e.trim()),a=[];for(let e=0,i=r.length;e<i;e+=1){let i=r[e],s=!1,n=-1;for(;!s&&++n<DT;){let e=Nh[n],r=e.isMultiMatch(i);r&&(a.push(new e(r,t)),s=!0)}if(!s)for(n=-1;++n<DT;){let e=Nh[n],r=e.isSingleMatch(i);if(r){a.push(new e(r,t));break}}}return a})}var z6=new Set([Nu.type,Du.type]),Dh=class{constructor(e,{isCaseSensitive:t=Ue.isCaseSensitive,includeMatches:r=Ue.includeMatches,minMatchCharLength:a=Ue.minMatchCharLength,ignoreLocation:i=Ue.ignoreLocation,findAllMatches:s=Ue.findAllMatches,location:n=Ue.location,threshold:o=Ue.threshold,distance:l=Ue.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:a,findAllMatches:s,ignoreLocation:i,location:n,threshold:o,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=q6(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let i=0,s=[],n=0;for(let a=0,o=t.length;a<o;a+=1){let o=t[a];s.length=0,i=0;for(let t=0,a=o.length;t<a;t+=1){let a=o[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){n=0,i=0,s.length=0;break}if(i+=1,n+=u,r){let e=a.constructor.type;z6.has(e)?s=[...s,...c]:s.push(c)}}if(i){let e={isMatch:!0,score:n/i};return r&&(e.indices=s),e}}return{isMatch:!1,score:1}}},Lh=[];function B6(...e){Lh.push(...e)}function Mh(e,t){for(let r=0,a=Lh.length;r<a;r+=1){let a=Lh[r];if(a.condition(e,t))return new a(e,t)}return new Au(e,t)}var Lu={AND:"$and",OR:"$or"},jh={PATH:"$path",PATTERN:"$val"},Fh=e=>!(!e[Lu.AND]&&!e[Lu.OR]),H6=e=>!!e[jh.PATH],V6=e=>!ns(e)&&jT(e)&&!Fh(e),LT=e=>({[Lu.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function zT(e,t,{auto:r=!0}={}){let a=e=>{let i=Object.keys(e),s=H6(e);if(!s&&i.length>1&&!Fh(e))return a(LT(e));if(V6(e)){let a=s?e[jh.PATH]:i[0],n=s?e[jh.PATTERN]:e[a];if(!$n(n))throw new Error(E6(a));let o={keyId:Ph(a),pattern:n};return r&&(o.searcher=Mh(n,t)),o}let n={children:[],operator:i[0]};return i.forEach(t=>{let r=e[t];ns(r)&&r.forEach(e=>{n.children.push(a(e))})}),n};return Fh(e)||(e=LT(e)),a(e)}function Z6(e,{ignoreFieldNorm:t=Ue.ignoreFieldNorm}){e.forEach(e=>{let r=1;e.matches.forEach(({key:e,norm:a,score:i})=>{let s=e?e.weight:null;r*=Math.pow(0===i&&s?Number.EPSILON:i,(s||1)*(t?1:a))}),e.score=r})}function G6(e,t){let r=e.matches;t.matches=[],jr(r)&&r.forEach(e=>{if(!jr(e.indices)||!e.indices.length)return;let{indices:r,value:a}=e,i={indices:r,value:a};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)})}function W6(e,t){t.score=e.score}function K6(e,t,{includeMatches:r=Ue.includeMatches,includeScore:a=Ue.includeScore}={}){let i=[];return r&&i.push(G6),a&&i.push(W6),e.map(e=>{let{idx:r}=e,a={item:t[r],refIndex:r};return i.length&&i.forEach(t=>{t(e,a)}),a})}var ss=class{constructor(e,t={},r){this.options={...Ue,...t},this.options.useExtendedSearch,this._keyStore=new Ch(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof vc))throw new Error(S6);this._myIndex=t||qT(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){jr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,a=this._docs.length;r<a;r+=1){let i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,a-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:a,shouldSort:i,sortFn:s,ignoreFieldNorm:n}=this.options,o=$n(e)?$n(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Z6(o,{ignoreFieldNorm:n}),i&&o.sort(s),MT(t)&&t>-1&&(o=o.slice(0,t)),K6(o,this._docs,{includeMatches:r,includeScore:a})}_searchStringList(e){let t=Mh(e,this.options),{records:r}=this._myIndex,a=[];return r.forEach(({v:e,i:r,n:i})=>{if(!jr(e))return;let{isMatch:s,score:n,indices:o}=t.searchIn(e);s&&a.push({item:e,idx:r,matches:[{score:n,value:e,norm:i,indices:o}]})}),a}_searchLogical(e){let t=zT(e,this.options),r=(e,t,a)=>{if(!e.children){let{keyId:r,searcher:i}=e,s=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(t,r),searcher:i});return s&&s.length?[{idx:a,item:t,matches:s}]:[]}let i=[];for(let s=0,n=e.children.length;s<n;s+=1){let n=e.children[s],o=r(n,t,a);if(o.length)i.push(...o);else if(e.operator===Lu.AND)return[]}return i},a=this._myIndex.records,i={},s=[];return a.forEach(({$:e,i:a})=>{if(jr(e)){let n=r(t,e,a);n.length&&(i[a]||(i[a]={idx:a,item:e,matches:[]},s.push(i[a])),n.forEach(({matches:e})=>{i[a].matches.push(...e)}))}}),s}_searchObjectList(e){let t=Mh(e,this.options),{keys:r,records:a}=this._myIndex,i=[];return a.forEach(({$:e,i:a})=>{if(!jr(e))return;let s=[];r.forEach((r,a)=>{s.push(...this._findMatches({key:r,value:e[a],searcher:t}))}),s.length&&i.push({idx:a,item:e,matches:s})}),i}_findMatches({key:e,value:t,searcher:r}){if(!jr(t))return[];let a=[];if(ns(t))t.forEach(({v:t,i:i,n:s})=>{if(!jr(t))return;let{isMatch:n,score:o,indices:l}=r.searchIn(t);n&&a.push({score:o,key:e,value:t,idx:i,norm:s,indices:l})});else{let{v:i,n:s}=t,{isMatch:n,score:o,indices:l}=r.searchIn(i);n&&a.push({score:o,key:e,value:i,norm:s,indices:l})}return a}};ss.version="7.0.0",ss.createIndex=qT,ss.parseIndex=D6,ss.config=Ue,ss.parseQuery=zT,B6(Dh);var Mu=require("child_process"),Uh=100,J6=2e7,X6=1e4,Y6=Yr(()=>{if(!process.env.USE_BUILTIN_RIPGREP||"0"===process.env.USE_BUILTIN_RIPGREP||"false"===process.env.USE_BUILTIN_RIPGREP){let e="win32"===process.platform?"rg.exe":"rg";try{return(0,Mu.execFileSync)(e,["--version"],{stdio:"ignore"}),{mode:"system",command:e,args:[]}}catch{}}let e=Bt.resolve(__dirname,"..","..","..",".."),t=Bt.resolve(e,"vendor","ripgrep");return{mode:"builtin",command:"win32"===process.platform?Bt.resolve(t,"x64-win32","rg.exe"):Bt.resolve(t,`${process.arch}-${process.platform}`,"rg"),args:[]}});function Q6(){let e=Y6();return{rgPath:e.command,rgArgs:e.args}}async function eW(e,t){return new Promise((r,a)=>{let{rgPath:i,rgArgs:s}=Q6();(0,Mu.execFile)(i,[...s,...e],{cwd:t,maxBuffer:J6,timeout:X6},(e,t)=>{if(!e)return void r(t.trim().split("\n").filter(Boolean));if("code"in e&&1===e.code)return void r([]);let i=t&&t.trim().length>0,s="signal"in e&&"SIGTERM"===e.signal||"code"in e&&"ABORT_ERR"===e.code,n="code"in e&&"ERR_CHILD_PROCESS_STDIO_MAXBUFFER"===e.code;if((s||n)&&i){let e=t.trim().split("\n").filter(Boolean);return void r(e.length>0?e.slice(0,-1):[])}a(e)})})}function tW(e,t){if(!t){let t=new Set;for(let r of e){let e=r.split(Bt.sep)[0];if(e&&(t.add(e),t.size>=Uh))break}return[...t].sort().map(t=>{let r=e.some(e=>e.startsWith(t+Bt.sep));return{path:r?t+Bt.sep:t,filename:Bt.basename(t),isDirectory:r}})}let r=e.map(e=>({path:e,filename:Bt.basename(e),testPenalty:e.includes("test")?1:0})),a=t.lastIndexOf(Bt.sep);a>2&&(r=r.filter(e=>e.path.substring(0,a).startsWith(t.substring(0,a))));let i=new ss(r,{includeScore:!0,threshold:.5,keys:[{name:"path",weight:1},{name:"filename",weight:2}]}).search(t,{limit:Uh});return i=i.sort((e,t)=>void 0===e.score||void 0===t.score?0:Math.abs(e.score-t.score)>.05?e.score-t.score:e.item.testPenalty-t.item.testPenalty),i.map(e=>({path:e.item.path,filename:e.item.filename,isDirectory:e.item.path.endsWith(Bt.sep)})).slice(0,Uh)}async function BT(e,t,r){try{let a=["--files","--follow","--hidden"];(mr("respectGitIgnore")??1)||a.push("--no-ignore-vcs");try{let e=qh.workspace.getConfiguration("search"),t=qh.workspace.getConfiguration("files"),r=e.get("exclude")||{},i=t.get("exclude")||{};for(let[e,t]of Object.entries(r))t&&a.push("--glob",`!${e}`);for(let[e,t]of Object.entries(i))t&&!r[e]&&a.push("--glob",`!${e}`)}catch(e){r.warn("Failed to get VSCode exclude patterns",e)}let i=await eW(a,t);return tW([...rW(i),...i],e).map(e=>({path:e.path,name:e.filename,type:e.isDirectory?"directory":"file"}))}catch(e){throw r.error("Ripgrep search failed",e),e}}function rW(e){let t=new Set;return e.forEach(e=>{let r=Bt.dirname(e);for(;"."!==r&&r!==Bt.parse(r).root;)t.add(r),r=Bt.dirname(r)}),[...t].map(e=>e+Bt.sep)}var kr=require("path"),ay=le(Vh(),1),J$=require("os"),As=le(require("vscode"),1),$s=le(require("vscode"),1);function Fi(){return $s.window.tabGroups.all.flatMap(e=>e.tabs)}function Ui(e,t){return new Promise((r,a)=>{let i,s=setInterval(()=>{let t=e();t&&(clearInterval(s),i&&clearTimeout(i),r(t))},100);t&&(i=setTimeout(()=>{clearInterval(s),a(new Error(`Timeout waiting after ${t}ms`))},t))})}async function wa(e,t){if(!e)return;let r=e.input;if(r instanceof $s.TabInputTextDiff)try{let e=await $s.workspace.openTextDocument(r.modified);if(e.isDirty){let t=new Promise(t=>{let r=$s.workspace.onDidSaveTextDocument(a=>{a.uri.toString()===e.uri.toString()&&(r.dispose(),t())});setTimeout(()=>{r.dispose(),t()},2e3)});await e.save(),await t}}catch(e){t.error("Error saving modified file:",e)}try{await $s.window.tabGroups.close(e)}catch{}}async function QT(e,t,r,a,i,s,n){let o,l=[],c=`${i||"Claude Code"} (${Math.random().toString(36).substring(2,8)})`,u=[];if(s){let t=`/temp/${c}`,i=r.createFile(t,a).uri;o=await As.workspace.openTextDocument(i),e.info("Editable uri: ",i.toString());let s=new Promise(e=>{l.push(As.workspace.onWillSaveTextDocument(t=>{if(t.document.uri.toString()===i.toString()){let r=t.document.getText();e(r)}}))});"off"===As.workspace.getConfiguration("files").get("autoSave")?(e.info("files.autoSave is off, waiting for file save"),u.push(s)):e.info("files.autoSave is on, cannot save to exit");let n={preview:!1,preserveFocus:!0};await As.window.showTextDocument(o,n)}else{let e=`/temp/readonly/${c}`,r=t.createFile(e,a);o=await As.workspace.openTextDocument(r),await As.window.showTextDocument(o,{preview:!0})}let p=await Ui(()=>Fi().find(e=>e.label===c),1e3);n?.addEventListener("abort",()=>{wa(p,e)});let d=Ui(()=>!Fi().some(e=>e.label===c)).then(()=>{if(e.info("Tab closed",c),s)return o.getText()});return u.push(d),await Promise.race(u).finally(()=>{l.forEach(e=>e.dispose())}).then(t=>(e.info("File save operation completed",t),t)).finally(()=>{wa(p,e)})}var At=le(require("vscode"),1),fC=le(require("fs"),1);function gn(){}function eC(e,t,r,a,i){for(var s,n=[];t;)n.push(t),s=t.previousComponent,delete t.previousComponent,t=s;n.reverse();for(var o=0,l=n.length,c=0,u=0;o<l;o++){var p=n[o];if(p.removed)p.value=e.join(a.slice(u,u+p.count)),u+=p.count;else{if(!p.added&&i){var d=r.slice(c,c+p.count);d=d.map(function(e,t){var r=a[u+t];return r.length>e.length?r:e}),p.value=e.join(d)}else p.value=e.join(r.slice(c,c+p.count));c+=p.count,p.added||(u+=p.count)}}return n}gn.prototype={diff:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.callback;"function"==typeof a&&(i=a,a={});var s=this;function n(e){return e=s.postProcess(e,a),i?(setTimeout(function(){i(e)},0),!0):e}e=this.castInput(e,a),t=this.castInput(t,a),e=this.removeEmpty(this.tokenize(e,a));var o=(t=this.removeEmpty(this.tokenize(t,a))).length,l=e.length,c=1,u=o+l;null!=a.maxEditLength&&(u=Math.min(u,a.maxEditLength));var p=null!==(r=a.timeout)&&void 0!==r?r:1/0,d=Date.now()+p,h=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(h[0],t,e,0,a);if(h[0].oldPos+1>=l&&m+1>=o)return n(eC(s,h[0].lastComponent,t,e,s.useLongestToken));var f=-1/0,v=1/0;function g(){for(var r=Math.max(f,-c);r<=Math.min(v,c);r+=2){var i=void 0,u=h[r-1],p=h[r+1];u&&(h[r-1]=void 0);var d=!1;if(p){var g=p.oldPos-r;d=p&&0<=g&&g<o}var y=u&&u.oldPos+1<l;if(d||y){if(i=!y||d&&u.oldPos<p.oldPos?s.addToPath(p,!0,!1,0,a):s.addToPath(u,!1,!0,1,a),m=s.extractCommon(i,t,e,r,a),i.oldPos+1>=l&&m+1>=o)return n(eC(s,i.lastComponent,t,e,s.useLongestToken));h[r]=i,i.oldPos+1>=l&&(v=Math.min(v,r-1)),m+1>=o&&(f=Math.max(f,r+1))}else h[r]=void 0}c++}if(i)!function e(){setTimeout(function(){if(c>u||Date.now()>d)return i();g()||e()},0)}();else for(;c<=u&&Date.now()<=d;){var y=g();if(y)return y}},addToPath:function(e,t,r,a,i){var s=e.lastComponent;return s&&!i.oneChangePerToken&&s.added===t&&s.removed===r?{oldPos:e.oldPos+a,lastComponent:{count:s.count+1,added:t,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+a,lastComponent:{count:1,added:t,removed:r,previousComponent:s}}},extractCommon:function(e,t,r,a,i){for(var s=t.length,n=r.length,o=e.oldPos,l=o-a,c=0;l+1<s&&o+1<n&&this.equals(r[o+1],t[l+1],i);)l++,o++,c++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!i.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=o,l},equals:function(e,t,r){return r.comparator?r.comparator(e,t):e===t||r.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};var qie=new gn;function tC(e,t){var r;for(r=0;r<e.length&&r<t.length;r++)if(e[r]!=t[r])return e.slice(0,r);return e.slice(0,r)}function rC(e,t){var r;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(r=0;r<e.length&&r<t.length;r++)if(e[e.length-(r+1)]!=t[t.length-(r+1)])return e.slice(-r);return e.slice(-r)}function Gh(e,t,r){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return r+e.slice(t.length)}function Wh(e,t,r){if(!t)return e+r;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+r}function yc(e,t){return Gh(e,t,"")}function ju(e,t){return Wh(e,t,"")}function nC(e,t){return t.slice(0,dW(e,t))}function dW(e,t){var r=0;e.length>t.length&&(r=e.length-t.length);var a=t.length;e.length<t.length&&(a=e.length);var i=Array(a),s=0;i[0]=0;for(var n=1;n<a;n++){for(t[n]==t[s]?i[n]=i[s]:i[n]=s;s>0&&t[n]!=t[s];)s=i[s];t[n]==t[s]&&s++}s=0;for(var o=r;o<e.length;o++){for(;s>0&&e[o]!=t[s];)s=i[s];e[o]==t[s]&&s++}return s}var Fu="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",pW=new RegExp("[".concat(Fu,"]+|\\s+|[^").concat(Fu,"]"),"ug"),Uu=new gn;function sC(e,t,r,a){if(t&&r){var i=t.value.match(/^\s*/)[0],s=t.value.match(/\s*$/)[0],n=r.value.match(/^\s*/)[0],o=r.value.match(/\s*$/)[0];if(e){var l=tC(i,n);e.value=Wh(e.value,n,l),t.value=yc(t.value,l),r.value=yc(r.value,l)}if(a){var c=rC(s,o);a.value=Gh(a.value,o,c),t.value=ju(t.value,c),r.value=ju(r.value,c)}}else if(r)e&&(r.value=r.value.replace(/^\s*/,"")),a&&(a.value=a.value.replace(/^\s*/,""));else if(e&&a){var u=a.value.match(/^\s*/)[0],p=t.value.match(/^\s*/)[0],d=t.value.match(/\s*$/)[0],h=tC(u,p);t.value=yc(t.value,h);var m=rC(yc(u,h),d);t.value=ju(t.value,m),a.value=Gh(a.value,u,m),e.value=Wh(e.value,u,u.slice(0,u.length-m.length))}else if(a){var f=a.value.match(/^\s*/)[0],v=nC(t.value.match(/\s*$/)[0],f);t.value=ju(t.value,v)}else if(e){var g=nC(e.value.match(/\s*$/)[0],t.value.match(/^\s*/)[0]);t.value=yc(t.value,g)}}Uu.equals=function(e,t,r){return r.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()},Uu.tokenize=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.intlSegmenter){if("word"!=r.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(r.intlSegmenter.segment(e),function(e){return e.segment})}else t=e.match(pW)||[];var a=[],i=null;return t.forEach(function(e){/\s/.test(e)?null==i?a.push(e):a.push(a.pop()+e):/\s/.test(i)?a[a.length-1]==i?a.push(a.pop()+e):a.push(i+e):a.push(e),i=e}),a},Uu.join=function(e){return e.map(function(e,t){return 0==t?e:e.replace(/^\s+/,"")}).join("")},Uu.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var r=null,a=null,i=null;return e.forEach(function(e){e.added?a=e:e.removed?i=e:((a||i)&&sC(r,i,a,e),r=e,a=null,i=null)}),(a||i)&&sC(r,i,a,null),e};var fW=new gn;fW.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(Fu,"]+|[^\\S\\n\\r]+|[^").concat(Fu,"]"),"ug");return e.match(t)||[]};var qu=new gn;function aC(e,t,r){return qu.diff(e,t,r)}qu.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var r=[],a=e.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(var i=0;i<a.length;i++){var s=a[i];i%2&&!t.newlineIsToken?r[r.length-1]+=s:r.push(s)}return r},qu.equals=function(e,t,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes("\n"))&&(e=e.trim()),(!r.newlineIsToken||!t.includes("\n"))&&(t=t.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),gn.prototype.equals.call(this,e,t,r)};var mW=new gn;mW.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var hW=new gn;function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function oC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(t){yW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gW(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function vW(e){var t=gW(e,"string");return"symbol"==typeof t?t:t+""}function Kh(e){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yW(e,t,r){return(t=vW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zh(e){return bW(e)||_W(e)||xW(e)||wW()}function bW(e){if(Array.isArray(e))return Jh(e)}function _W(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function xW(e,t){if(e){if("string"==typeof e)return Jh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jh(e,t)}}function Jh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function wW(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}hW.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var bc=new gn;function Xh(e,t,r,a,i){var s,n;for(t=t||[],r=r||[],a&&(e=a(i,e)),s=0;s<t.length;s+=1)if(t[s]===e)return r[s];if("[object Array]"===Object.prototype.toString.call(e)){for(t.push(e),n=new Array(e.length),r.push(n),s=0;s<e.length;s+=1)n[s]=Xh(e[s],t,r,a,i);return t.pop(),r.pop(),n}if(e&&e.toJSON&&(e=e.toJSON()),"object"===Kh(e)&&null!==e){t.push(e),n={},r.push(n);var o,l=[];for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&l.push(o);for(l.sort(),s=0;s<l.length;s+=1)n[o=l[s]]=Xh(e[o],t,r,a,o);t.pop(),r.pop()}else n=e;return n}bc.useLongestToken=!0,bc.tokenize=qu.tokenize,bc.castInput=function(e,t){var r=t.undefinedReplacement,a=t.stringifyReplacer,i=void 0===a?function(e,t){return typeof t>"u"?r:t}:a;return"string"==typeof e?e:JSON.stringify(Xh(e,null,null,i),i,"  ")},bc.equals=function(e,t,r){return gn.prototype.equals.call(bc,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),r)};var Yh=new gn;function cC(e,t,r,a,i,s,n){if(n||(n={}),"function"==typeof n&&(n={callback:n}),typeof n.context>"u"&&(n.context=4),n.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(!n.callback)return l(aC(r,a,n));var o=n.callback;function l(r){if(r){r.push({value:"",lines:[]});for(var a=[],o=0,l=0,c=[],u=1,p=1,d=function(){var e=r[h],t=e.lines||SW(e.value);if(e.lines=t,e.added||e.removed){var i;if(!o){var s=r[h-1];o=u,l=p,s&&(c=n.context>0?y(s.lines.slice(-n.context)):[],o-=c.length,l-=c.length)}(i=c).push.apply(i,Zh(t.map(function(t){return(e.added?"+":"-")+t}))),e.added?p+=t.length:u+=t.length}else{if(o)if(t.length<=2*n.context&&h<r.length-2){var d;(d=c).push.apply(d,Zh(y(t)))}else{var m,f=Math.min(t.length,n.context);(m=c).push.apply(m,Zh(y(t.slice(0,f))));var v={oldStart:o,oldLines:u-o+f,newStart:l,newLines:p-l+f,lines:c};a.push(v),o=0,l=0,c=[]}u+=t.length,p+=t.length}},h=0;h<r.length;h++)d();for(var m=0,f=a;m<f.length;m++)for(var v=f[m],g=0;g<v.lines.length;g++)v.lines[g].endsWith("\n")?v.lines[g]=v.lines[g].slice(0,-1):(v.lines.splice(g+1,0,"\\ No newline at end of file"),g++);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:s,hunks:a}}function y(e){return e.map(function(e){return" "+e})}}aC(r,a,oC(oC({},n),{},{callback:function(e){var t=l(e);o(t)}}))}function SW(e){var t=e.endsWith("\n"),r=e.split("\n").map(function(e){return e+"\n"});return t?r.pop():r.push(r.pop().slice(0,-1)),r}function uC(e,t){let r=e,a=[];if(!e&&1===t.length&&t[0]&&""===t[0].oldString&&""===t[0].newString)return"";for(let e of t){let t=e.oldString.replace(/\n+$/,"");for(let e of a)if(""!==t&&e.includes(t))throw new Error("Cannot edit file: old_string is a substring of a new_string from a previous edit.");let i=r;if(r=""===e.oldString?e.newString:EW(r,e.oldString,e.newString,e.replaceAll),r===i)throw new Error("String not found in file. Failed to apply edit.");a.push(e.newString)}if(r===e)throw new Error("Original and edited file match exactly. Failed to apply edit.");return r}function EW(e,t,r,a=!1){let i=a?(e,t,r)=>e.replaceAll(t,()=>r):(e,t,r)=>e.replace(t,()=>r);return""!==r?i(e,t,r):!t.endsWith("\n")&&e.includes(t+"\n")?i(e,t+"\n",r):i(e,t,r)}function Qh(e,t,r,a){let i=kW({filePath:e,oldContent:t,newContent:r,singleHunk:"single"===a});return 0===i.length?[]:TW(i)}function TW(e){return e.map(e=>{let t=[],r=[],a=[];for(let i of e.lines)i.startsWith(" ")?(t.push(i.slice(1)),r.push(i.slice(1)),a.push(i.slice(1))):i.startsWith("-")?r.push(i.slice(1)):i.startsWith("+")&&a.push(i.slice(1));return{oldString:r.join("\n"),newString:a.join("\n"),replaceAll:!1}})}Yh.tokenize=function(e){return e.slice()},Yh.join=Yh.removeEmpty=function(e){return e};var dC="<<:AMPERSAND_TOKEN:>>",pC="<<:DOLLAR_TOKEN:>>";function lC(e){return e.replaceAll("&",dC).replaceAll("$",pC)}function CW(e){return e.replaceAll(dC,"&").replaceAll(pC,"$")}var PW=3;function kW({filePath:e,oldContent:t,newContent:r,ignoreWhitespace:a=!1,singleHunk:i=!1}){return cC(e,e,lC(t),lC(r),void 0,void 0,{ignoreWhitespace:a,context:i?1e5:PW}).hunks.map(e=>({...e,lines:e.lines.map(CW)}))}async function mC(e,t,r,a,i,s,n,o,l){let c=a.split("/").pop()||a,u=i.split("/").pop()||i,p=` [Claude Code] ${c===u?c:`${c}  ${u}`}`;e.info("diff from",a,"to",i,"as",p),hC.push(p);let d=At.Uri.file(a),h="";try{let e=await At.workspace.openTextDocument(d);e.isDirty?(h=fC.readFileSync(a,"utf8"),d=t.createFile(a,h).uri):h=e.getText()}catch{e.info("leftTempFileProvider.createFile",a),d=t.createFile(a,"").uri}let m=uC(h,s),f=r.createFile(i,m).uri,v=await At.workspace.openTextDocument(f);await RW(e)>0&&await new Promise(e=>setTimeout(e,200));let g,y=m,b=m;At.workspace.onDidChangeTextDocument(e=>{e.document.uri.toString()===f.toString()&&(y=b,b=e.document.getText(),e.contentChanges.length>3&&e.reason!==At.TextDocumentChangeReason.Undo&&e.reason!==At.TextDocumentChangeReason.Redo&&(g={time:Date.now(),contents:y}))});let x=[],_=new Promise(e=>{x.push(At.workspace.onWillSaveTextDocument(t=>{if(t.document.uri.toString()===f.toString()){let r=t.document.getText();g&&Date.now()-g.time<500&&(r=g.contents),e(r)}}))}),w=new Promise(e=>{x.push(o(t=>{t.activeTab&&t.activeTab.label===p&&e(t)}))}).then(t=>{if(t.accepted)return e.info("diff_accepted",p),Qh(i,h,v.getText(),n?"multiple":"single")}),E={preview:!1,preserveFocus:!0},S=await At.commands.executeCommand("vscode.diff",d,f,p,E);e.info("diff result",S,p,d,f,E);let k=await Ui(()=>Fi().find(e=>e.label===p),1e3);l?.addEventListener("abort",()=>{wa(k,e)});let P=Ui(()=>!Fi().some(e=>e.label===p)).then(()=>{e.info("tab_closed",p)}),C=_.then(async e=>Qh(i,h,e,n?"multiple":"single")),T=[P,w];return"off"===At.workspace.getConfiguration("files").get("autoSave")?(e.info("files.autoSave is off, waiting for file save"),T.push(C)):e.info("files.autoSave is on, need explicit accept"),await Promise.race(T).finally(()=>{x.forEach(e=>e.dispose())}).then(t=>(e.info("diff operation completed",t),t)).finally(()=>{wa(k,e)})}var hC=[];async function RW(e){let t=0;e.info("Closing all diff tabs in the editor...");for(let r of At.window.tabGroups.all)for(let a of r.tabs)a.input instanceof At.TabInputTextDiff&&hC.includes(a.label)&&(await wa(a,e),t++);return e.info(`Closed ${t} diff tabs.`),t}function gC(e){let t=new At.EventEmitter;return e.push(At.commands.registerCommand("claude-vscode.acceptProposedDiff",async()=>{let e=At.window.tabGroups.activeTabGroup.activeTab;t.fire({accepted:!0,activeTab:e})})),e.push(At.commands.registerCommand("claude-vscode.rejectProposedDiff",async()=>{let e=At.window.tabGroups.activeTabGroup.activeTab;t.fire({accepted:!1,activeTab:e})})),t.event}var Ns=le(require("vscode"),1),zu=le(require("vscode"),1),vC=require("node:child_process");function yC(e){let t=e;if(e.startsWith("file://")&&(t=e.substring(7)),!t.startsWith("/")||/^\/[a-zA-Z]:/.test(t))return e;try{return(0,vC.execFileSync)("wsl.exe",["-e","wslpath","-w",t],{encoding:"utf8",stdio:["pipe","pipe","ignore"]}).trim()}catch{return e}}function Bu(e){if("win32"===process.platform){let t=yC(e);return t.startsWith("file://")?zu.Uri.parse(t):zu.Uri.file(t)}return zu.Uri.parse(e)}function OW(e){return e.map(e=>({message:e.message,severity:Ns.DiagnosticSeverity[e.severity],range:{start:{line:e.range.start.line,character:e.range.start.character},end:{line:e.range.end.line,character:e.range.end.character}},source:e.source,code:e.code?.toString()}))}function _c(e){return(e?(()=>{let t=Bu(e);return[[t,Ns.languages.getDiagnostics(t)]]})():Ns.languages.getDiagnostics()).map(([e,t])=>({uri:e.toString(!0),linesInFile:IW(e),diagnostics:OW(t)}))}function IW(e){try{return Ns.workspace.textDocuments.find(t=>t.uri.toString()===e.toString())?.lineCount}catch{return}}var Hu=class e{static instance;listener;clients;clientCounter;output;constructor(e){this.clients=new Map,this.clientCounter=0,this.output=e}static getInstance(t){return e.instance||(e.instance=new e(t)),e.instance}registerClient(e){let t="client_"+this.clientCounter++;return this.clients.set(t,e),this.startStreaming(),t}unregisterClient(e){this.clients.delete(e)&&(this.output.info(`[DiagnosticStreamManager] Unregistered client ${e}. Total clients: ${this.clients.size}`),0===this.clients.size&&this.stopStreaming())}startStreaming(){this.listener||(this.listener=Ns.languages.onDidChangeDiagnostics(e=>{this.notifyDiagnosticsChanged(e.uris)}),this.output.info("[DiagnosticStreamManager] Started streaming diagnostics"))}stopStreaming(){this.listener&&(this.listener.dispose(),this.listener=void 0,this.output.info("[DiagnosticStreamManager] Stopped streaming diagnostics"))}notifyDiagnosticsChanged(e){if(0===this.clients.size)return;let t=e.map(e=>e.toString());this.output.info(`[DiagnosticStreamManager] Notifying ${this.clients.size} clients about diagnostics change for ${e.length} files`),this.clients.forEach((e,r)=>{try{e(t)}catch(e){this.output.error(`[DiagnosticStreamManager] Error notifying client ${r}: ${e}`)}})}dispose(){this.clients.clear(),this.stopStreaming()}},Zu=le(require("vscode"),1),Vu=class{constructor(e){this.logger=e}baselineDiagnostics=new Map;async captureBaseline(e){try{if("PreToolUse"!==e.hook_event_name)return{continue:!0};let t=this.extractFilePath(e);if(t&&"string"==typeof t){let e=_c(t);this.baselineDiagnostics.set(t,e),this.logger.log(`[DiagnosticTracking] Captured baseline diagnostics for ${t}: ${e.length} files`)}}catch(e){this.logger.error(`[DiagnosticTracking] Error capturing baseline diagnostics: ${e}`)}return{continue:!0}}async findDiagnosticsProblems(e){try{if("PostToolUse"!==e.hook_event_name)return{continue:!0};let t=this.extractFilePath(e);if(t&&"string"==typeof t){let e=Zu.Uri.file(t),r=Zu.window.visibleTextEditors.some(t=>t.document.uri.toString()===e.toString()),a=this.baselineDiagnostics.get(t)||[],i=r?[750,750]:[1e3];for(let e=0;e<i.length;e++){await new Promise(t=>setTimeout(t,i[e]));let r=_c(t),s=this.findNewDiagnostics(a,r);if(s.length>0){this.logger.log(`[DiagnosticTracking] Found ${s.length} new diagnostics for ${t} at ${e+1}s`);let r=this.formatDiagnosticsSummary(s);return this.baselineDiagnostics.delete(t),{continue:!0,hookSpecificOutput:{hookEventName:"PostToolUse",additionalContext:`<ide_diagnostics>${r}</ide_diagnostics>`}}}}this.logger.log(`[DiagnosticTracking] No new diagnostics found for ${t}`),this.baselineDiagnostics.delete(t)}}catch(e){this.logger.error(`[DiagnosticTracking] Error tracking post-tool diagnostics: ${e}`)}return{continue:!0}}extractFilePath(e){if(!("PreToolUse"!==e.hook_event_name&&"PostToolUse"!==e.hook_event_name||"Edit"!==e.tool_name&&"MultiEdit"!==e.tool_name&&"Write"!==e.tool_name))return e.tool_input?.file_path}findNewDiagnostics(e,t){let r=[];for(let a of t){let t=e.find(e=>e.uri===a.uri);if(t){let e=void 0!==t.linesInFile&&void 0!==a.linesInFile?Math.abs(t.linesInFile-a.linesInFile):0,i=a.diagnostics.filter(r=>!t.diagnostics.some(t=>this.areDiagnosticsEqual(r,t,e)));i.length>0&&r.push({uri:a.uri,linesInFile:a.linesInFile,diagnostics:i})}else r.push(a)}return r}areDiagnosticsEqual(e,t,r){let a=Math.abs((e.range?.start?.line??0)-(t.range?.start?.line??0)),i=Math.abs((e.range?.end?.line??0)-(t.range?.end?.line??0));return e.message===t.message&&e.severity===t.severity&&e.source===t.source&&e.code===t.code&&a<=r&&i<=r&&e.range?.start?.character===t.range?.start?.character&&e.range?.end?.character===t.range?.end?.character}formatDiagnosticsSummary(e){let t=e.flatMap(e=>e.diagnostics.map(t=>({filePath:this.normalizeFileUri(e.uri),line:void 0!==t.range?.start?.line?t.range.start.line+1:0,column:void 0!==t.range?.start?.character?t.range.start.character+1:0,message:t.message,code:t.code||"",severity:t.severity||""})));return JSON.stringify(t,null,2)}normalizeFileUri(e){let t=["file://","_claude_fs_right:","_claude_fs_left:"];for(let r of t)if(e.startsWith(r))return e.slice(r.length);return e}},Cd=le(require("path"),1),Cr=le(require("fs"),1),Fc=le(require("crypto"),1),YR=le(require("http"),1);function xc(e,t){return function(){return e.apply(t,arguments)}}var{toString:$W}=Object.prototype,{getPrototypeOf:tg}=Object,Wu=(e=>t=>{let r=$W.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),vn=e=>(e=e.toLowerCase(),t=>Wu(t)===e),Ku=e=>t=>typeof t===e,{isArray:qi}=Array,wc=Ku("undefined");function AW(e){return null!==e&&!wc(e)&&null!==e.constructor&&!wc(e.constructor)&&Fr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var _C=vn("ArrayBuffer");function NW(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_C(e.buffer),t}var DW=Ku("string"),Fr=Ku("function"),xC=Ku("number"),Ju=e=>null!==e&&"object"==typeof e,LW=e=>!0===e||!1===e,Gu=e=>{if("object"!==Wu(e))return!1;let t=tg(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},MW=vn("Date"),jW=vn("File"),FW=vn("Blob"),UW=vn("FileList"),qW=e=>Ju(e)&&Fr(e.pipe),zW=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Fr(e.append)&&("formdata"===(t=Wu(e))||"object"===t&&Fr(e.toString)&&"[object FormData]"===e.toString()))},BW=vn("URLSearchParams"),[HW,VW,ZW,GW]=["ReadableStream","Request","Response","Headers"].map(vn),WW=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sc(e,t,{allOwnKeys:r=!1}={}){if(null===e||typeof e>"u")return;let a,i;if("object"!=typeof e&&(e=[e]),qi(e))for(a=0,i=e.length;a<i;a++)t.call(null,e[a],a,e);else{let i,s=r?Object.getOwnPropertyNames(e):Object.keys(e),n=s.length;for(a=0;a<n;a++)i=s[a],t.call(null,e[i],i,e)}}function wC(e,t){t=t.toLowerCase();let r,a=Object.keys(e),i=a.length;for(;i-- >0;)if(r=a[i],t===r.toLowerCase())return r;return null}var Sa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,SC=e=>!wc(e)&&e!==Sa;function eg(){let{caseless:e}=SC(this)&&this||{},t={},r=(r,a)=>{let i=e&&wC(t,a)||a;Gu(t[i])&&Gu(r)?t[i]=eg(t[i],r):Gu(r)?t[i]=eg({},r):qi(r)?t[i]=r.slice():t[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Sc(arguments[e],r);return t}var KW=(e,t,r,{allOwnKeys:a}={})=>(Sc(t,(t,a)=>{r&&Fr(t)?e[a]=xc(t,r):e[a]=t},{allOwnKeys:a}),e),JW=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),XW=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},YW=(e,t,r,a)=>{let i,s,n,o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)n=i[s],(!a||a(n,e,t))&&!o[n]&&(t[n]=e[n],o[n]=!0);e=!1!==r&&tg(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},QW=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;let a=e.indexOf(t,r);return-1!==a&&a===r},e5=e=>{if(!e)return null;if(qi(e))return e;let t=e.length;if(!xC(t))return null;let r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},t5=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tg(Uint8Array)),r5=(e,t)=>{let r,a=(e&&e[Symbol.iterator]).call(e);for(;(r=a.next())&&!r.done;){let a=r.value;t.call(e,a[0],a[1])}},n5=(e,t)=>{let r,a=[];for(;null!==(r=e.exec(t));)a.push(r);return a},s5=vn("HTMLFormElement"),a5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),bC=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),i5=vn("RegExp"),EC=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),a={};Sc(r,(r,i)=>{let s;!1!==(s=t(r,i,e))&&(a[i]=s||r)}),Object.defineProperties(e,a)},o5=e=>{EC(e,(t,r)=>{if(Fr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;let a=e[r];if(Fr(a)){if(t.enumerable=!1,"writable"in t)return void(t.writable=!1);t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},c5=(e,t)=>{let r={},a=e=>{e.forEach(e=>{r[e]=!0})};return qi(e)?a(e):a(String(e).split(t)),r},l5=()=>{},u5=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function d5(e){return!!(e&&Fr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}var p5=e=>{let t=new Array(10),r=(e,a)=>{if(Ju(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[a]=e;let i=qi(e)?[]:{};return Sc(e,(e,t)=>{let s=r(e,a+1);!wc(s)&&(i[t]=s)}),t[a]=void 0,i}}return e};return r(e,0)},f5=vn("AsyncFunction"),m5=e=>e&&(Ju(e)||Fr(e))&&Fr(e.then)&&Fr(e.catch),TC=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,a=[],Sa.addEventListener("message",({source:e,data:t})=>{e===Sa&&t===r&&a.length&&a.shift()()},!1),e=>{a.push(e),Sa.postMessage(r,"*")}):e=>setTimeout(e);var r,a})("function"==typeof setImmediate,Fr(Sa.postMessage)),h5=typeof queueMicrotask<"u"?queueMicrotask.bind(Sa):typeof process<"u"&&process.nextTick||TC,L={isArray:qi,isArrayBuffer:_C,isBuffer:AW,isFormData:zW,isArrayBufferView:NW,isString:DW,isNumber:xC,isBoolean:LW,isObject:Ju,isPlainObject:Gu,isReadableStream:HW,isRequest:VW,isResponse:ZW,isHeaders:GW,isUndefined:wc,isDate:MW,isFile:jW,isBlob:FW,isRegExp:i5,isFunction:Fr,isStream:qW,isURLSearchParams:BW,isTypedArray:t5,isFileList:UW,forEach:Sc,merge:eg,extend:KW,trim:WW,stripBOM:JW,inherits:XW,toFlatObject:YW,kindOf:Wu,kindOfTest:vn,endsWith:QW,toArray:e5,forEachEntry:r5,matchAll:n5,isHTMLForm:s5,hasOwnProperty:bC,hasOwnProp:bC,reduceDescriptors:EC,freezeMethods:o5,toObjectSet:c5,toCamelCase:a5,noop:l5,toFiniteNumber:u5,findKey:wC,global:Sa,isContextDefined:SC,isSpecCompliantForm:d5,toJSONObject:p5,isAsyncFn:f5,isThenable:m5,setImmediate:TC,asap:h5};function zi(e,t,r,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}L.inherits(zi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});var CC=zi.prototype,PC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{PC[e]={value:e}}),Object.defineProperties(zi,PC),Object.defineProperty(CC,"isAxiosError",{value:!0}),zi.from=(e,t,r,a,i,s)=>{let n=Object.create(CC);return L.toFlatObject(e,n,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),zi.call(n,e.message,t,r,a,i),n.cause=e,n.name=e.name,s&&Object.assign(n,s),n};var pe=zi,Ik=le(Ok(),1),id=Ik.default;function wg(e){return L.isPlainObject(e)||L.isArray(e)}function Ak(e){return L.endsWith(e,"[]")?e.slice(0,-2):e}function $k(e,t,r){return e?e.concat(t).map(function(e,t){return e=Ak(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function Q8(e){return L.isArray(e)&&!e.some(wg)}var eK=L.toFlatObject(L,{},null,function(e){return/^is[A-Z]/.test(e)});function tK(e,t,r){if(!L.isObject(e))throw new TypeError("target must be an object");t=t||new(id||FormData);let a=(r=L.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!L.isUndefined(t[e])})).metaTokens,i=r.visitor||c,s=r.dots,n=r.indexes,o=(r.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(L.isDate(e))return e.toISOString();if(!o&&L.isBlob(e))throw new pe("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(e)||L.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,i){let o=e;if(e&&!i&&"object"==typeof e)if(L.endsWith(r,"{}"))r=a?r:r.slice(0,-2),e=JSON.stringify(e);else if(L.isArray(e)&&Q8(e)||(L.isFileList(e)||L.endsWith(r,"[]"))&&(o=L.toArray(e)))return r=Ak(r),o.forEach(function(e,a){!L.isUndefined(e)&&null!==e&&t.append(!0===n?$k([r],a,s):null===n?r:r+"[]",l(e))}),!1;return!!wg(e)||(t.append($k(i,r,s),l(e)),!1)}let u=[],p=Object.assign(eK,{defaultVisitor:c,convertValue:l,isVisitable:wg});if(!L.isObject(e))throw new TypeError("data must be an object");return function e(r,a){if(!L.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+a.join("."));u.push(r),L.forEach(r,function(r,s){!0===(!(L.isUndefined(r)||null===r)&&i.call(t,r,L.isString(s)?s.trim():s,a,p))&&e(r,a?a.concat(s):[s])}),u.pop()}}(e),t}var Ds=tK;function Nk(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Dk(e,t){this._pairs=[],e&&Ds(e,this,t)}var Lk=Dk.prototype;Lk.append=function(e,t){this._pairs.push([e,t])},Lk.toString=function(e){let t=e?function(t){return e.call(this,t,Nk)}:Nk;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var Mk=Dk;function rK(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ta(e,t,r){if(!t)return e;let a=r&&r.encode||rK;L.isFunction(r)&&(r={serialize:r});let i,s=r&&r.serialize;if(i=s?s(t,r):L.isURLSearchParams(t)?t.toString():new Mk(t,r).toString(a),i){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}var Sg=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){L.forEach(this.handlers,function(t){null!==t&&e(t)})}},Eg=Sg,Gi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qk=le(require("crypto"),1),jk=le(require("url"),1),Fk=jk.default.URLSearchParams,Tg="abcdefghijklmnopqrstuvwxyz",Uk="0123456789",zk={DIGIT:Uk,ALPHA:Tg,ALPHA_DIGIT:Tg+Tg.toUpperCase()+Uk},nK=(e=16,t=zk.ALPHA_DIGIT)=>{let r="",{length:a}=t,i=new Uint32Array(e);qk.default.randomFillSync(i);for(let s=0;s<e;s++)r+=t[i[s]%a];return r},Bk={isNode:!0,classes:{URLSearchParams:Fk,FormData:id,Blob:typeof Blob<"u"&&Blob||null},ALPHABET:zk,generateString:nK,protocols:["http","https","file","data"]},kg={};Hp(kg,{hasBrowserEnv:()=>Pg,hasStandardBrowserEnv:()=>sK,hasStandardBrowserWebWorkerEnv:()=>aK,navigator:()=>Cg,origin:()=>iK});var Pg=typeof window<"u"&&typeof document<"u",Cg="object"==typeof navigator&&navigator||void 0,sK=Pg&&(!Cg||["ReactNative","NativeScript","NS"].indexOf(Cg.product)<0),aK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,iK=Pg&&window.location.href||"http://localhost",at={...kg,...Bk};function Rg(e,t){return Ds(e,new at.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,a){return at.isNode&&L.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function oK(e){return L.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function cK(e){let t,r,a={},i=Object.keys(e),s=i.length;for(t=0;t<s;t++)r=i[t],a[r]=e[r];return a}function lK(e){function t(e,r,a,i){let s=e[i++];if("__proto__"===s)return!0;let n=Number.isFinite(+s),o=i>=e.length;return s=!s&&L.isArray(a)?a.length:s,o?(L.hasOwnProp(a,s)?a[s]=[a[s],r]:a[s]=r,!n):((!a[s]||!L.isObject(a[s]))&&(a[s]=[]),t(e,r,a[s],i)&&L.isArray(a[s])&&(a[s]=cK(a[s])),!n)}if(L.isFormData(e)&&L.isFunction(e.entries)){let r={};return L.forEachEntry(e,(e,a)=>{t(oK(e),a,r,0)}),r}return null}var od=lK;function uK(e,t,r){if(L.isString(e))try{return(t||JSON.parse)(e),L.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}var Og={transitional:Gi,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let r,a=t.getContentType()||"",i=a.indexOf("application/json")>-1,s=L.isObject(e);if(s&&L.isHTMLForm(e)&&(e=new FormData(e)),L.isFormData(e))return i?JSON.stringify(od(e)):e;if(L.isArrayBuffer(e)||L.isBuffer(e)||L.isStream(e)||L.isFile(e)||L.isBlob(e)||L.isReadableStream(e))return e;if(L.isArrayBufferView(e))return e.buffer;if(L.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Rg(e,this.formSerializer).toString();if((r=L.isFileList(e))||a.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return Ds(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),uK(e)):e}],transformResponse:[function(e){let t=this.transitional||Og.transitional,r=t&&t.forcedJSONParsing,a="json"===this.responseType;if(L.isResponse(e)||L.isReadableStream(e))return e;if(e&&L.isString(e)&&(r&&!this.responseType||a)){let r=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(e){if(r)throw"SyntaxError"===e.name?pe.from(e,pe.ERR_BAD_RESPONSE,this,null,this.response):e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:at.classes.FormData,Blob:at.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],e=>{Og.headers[e]={}});var Wi=Og,dK=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hk=e=>{let t,r,a,i={};return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),t=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!(!t||i[t]&&dK[t])&&("set-cookie"===t?i[t]?i[t].push(r):i[t]=[r]:i[t]=i[t]?i[t]+", "+r:r)}),i},Vk=Symbol("internals");function kc(e){return e&&String(e).trim().toLowerCase()}function cd(e){return!1===e||null==e?e:L.isArray(e)?e.map(cd):String(e)}function pK(e){let t,r=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=a.exec(e);)r[t[1]]=t[2];return r}var fK=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ig(e,t,r,a,i){if(L.isFunction(a))return a.call(this,t,r);if(i&&(t=r),L.isString(t)){if(L.isString(a))return-1!==t.indexOf(a);if(L.isRegExp(a))return a.test(t)}}function mK(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function hK(e,t){let r=L.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(e,r,i){return this[a].call(this,t,e,r,i)},configurable:!0})})}var Ki=class{constructor(e){e&&this.set(e)}set(e,t,r){let a=this;function i(e,t,r){let i=kc(t);if(!i)throw new Error("header name must be a non-empty string");let s=L.findKey(a,i);(!s||void 0===a[s]||!0===r||void 0===r&&!1!==a[s])&&(a[s||t]=cd(e))}let s=(e,t)=>L.forEach(e,(e,r)=>i(e,r,t));if(L.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(L.isString(e)&&(e=e.trim())&&!fK(e))s(Hk(e),t);else if(L.isHeaders(e))for(let[t,a]of e.entries())i(a,t,r);else null!=e&&i(t,e,r);return this}get(e,t){if(e=kc(e)){let r=L.findKey(this,e);if(r){let e=this[r];if(!t)return e;if(!0===t)return pK(e);if(L.isFunction(t))return t.call(this,e,r);if(L.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=kc(e)){let r=L.findKey(this,e);return!(!r||void 0===this[r]||t&&!Ig(this,this[r],r,t))}return!1}delete(e,t){let r=this,a=!1;function i(e){if(e=kc(e)){let i=L.findKey(r,e);i&&(!t||Ig(r,r[i],i,t))&&(delete r[i],a=!0)}}return L.isArray(e)?e.forEach(i):i(e),a}clear(e){let t=Object.keys(this),r=t.length,a=!1;for(;r--;){let i=t[r];(!e||Ig(this,this[i],i,e,!0))&&(delete this[i],a=!0)}return a}normalize(e){let t=this,r={};return L.forEach(this,(a,i)=>{let s=L.findKey(r,i);if(s)return t[s]=cd(a),void delete t[i];let n=e?mK(i):String(i).trim();n!==i&&delete t[i],t[n]=cd(a),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return L.forEach(this,(r,a)=>{null!=r&&!1!==r&&(t[a]=e&&L.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){let t=(this[Vk]=this[Vk]={accessors:{}}).accessors,r=this.prototype;function a(e){let a=kc(e);t[a]||(hK(r,e),t[a]=!0)}return L.isArray(e)?e.forEach(a):a(e),this}};Ki.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),L.reduceDescriptors(Ki.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),L.freezeMethods(Ki);var Nt=Ki;function Rc(e,t){let r=this||Wi,a=t||r,i=Nt.from(a.headers),s=a.data;return L.forEach(e,function(e){s=e.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Oc(e){return!(!e||!e.__CANCEL__)}function Zk(e,t,r){pe.call(this,e??"canceled",pe.ERR_CANCELED,t,r),this.name="CanceledError"}L.inherits(Zk,pe,{__CANCEL__:!0});var Ur=Zk;function Nn(e,t,r){let a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(new pe("Request failed with status code "+r.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function $g(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ag(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ca(e,t,r){let a=!$g(t);return e&&(a||0==r)?Ag(e,t):t}var RR=le(Wk(),1),OR=le(require("http"),1),IR=le(require("https"),1),$R=le(require("util"),1),AR=le(fR(),1),is=le(require("zlib"),1),Oa="1.8.4";function Dc(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}var rJ=/^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\s\S]*)$/;function Kg(e,t,r){let a=r&&r.Blob||at.classes.Blob,i=Dc(e);if(void 0===t&&a&&(t=!0),"data"===i){e=i.length?e.slice(i.length+1):e;let r=rJ.exec(e);if(!r)throw new pe("Invalid URL",pe.ERR_INVALID_URL);let s=r[1],n=r[2],o=r[3],l=Buffer.from(decodeURIComponent(o),n?"base64":"utf8");if(t){if(!a)throw new pe("Blob is not supported",pe.ERR_NOT_SUPPORT);return new a([l],{type:s})}return l}throw new pe("Unsupported protocol "+i,pe.ERR_NOT_SUPPORT)}var Ia=le(require("stream"),1),mR=le(require("stream"),1),Jg=Symbol("internals"),Xg=class extends mR.default.Transform{constructor(e){super({readableHighWaterMark:(e=L.toFlatObject(e,{maxRate:0,chunkSize:65536,minChunkSize:100,timeWindow:500,ticksRate:2,samplesCount:15},null,(e,t)=>!L.isUndefined(t[e]))).chunkSize});let t=this[Jg]={timeWindow:e.timeWindow,chunkSize:e.chunkSize,maxRate:e.maxRate,minChunkSize:e.minChunkSize,bytesSeen:0,isCaptured:!1,notifiedBytesLoaded:0,ts:Date.now(),bytes:0,onReadCallback:null};this.on("newListener",e=>{"progress"===e&&(t.isCaptured||(t.isCaptured=!0))})}_read(e){let t=this[Jg];return t.onReadCallback&&t.onReadCallback(),super._read(e)}_transform(e,t,r){let a=this[Jg],i=a.maxRate,s=this.readableHighWaterMark,n=a.timeWindow,o=i/(1e3/n),l=!1!==a.minChunkSize?Math.max(a.minChunkSize,.01*o):0,c=(e,t)=>{let r=Buffer.byteLength(e);a.bytesSeen+=r,a.bytes+=r,a.isCaptured&&this.emit("progress",a.bytesSeen),this.push(e)?process.nextTick(t):a.onReadCallback=()=>{a.onReadCallback=null,process.nextTick(t)}},u=(e,t)=>{let r,u=Buffer.byteLength(e),p=null,d=s,h=0;if(i){let e=Date.now();(!a.ts||(h=e-a.ts)>=n)&&(a.ts=e,r=o-a.bytes,a.bytes=r<0?-r:0,h=0),r=o-a.bytes}if(i){if(r<=0)return setTimeout(()=>{t(null,e)},n-h);r<d&&(d=r)}d&&u>d&&u-d>l&&(p=e.subarray(d),e=e.subarray(0,d)),c(e,p?()=>{process.nextTick(t,null,p)}:t)};u(e,function e(t,a){if(t)return r(t);a?u(a,e):r(null)})}},Yg=Xg,NR=require("events"),gR=le(require("util"),1),vR=require("stream"),{asyncIterator:hR}=Symbol,nJ=async function*(e){e.stream?yield*e.stream():e.arrayBuffer?yield await e.arrayBuffer():e[hR]?yield*e[hR]():yield e},md=nJ,sJ=at.ALPHABET.ALPHA_DIGIT+"-_",Lc="function"==typeof TextEncoder?new TextEncoder:new gR.default.TextEncoder,Ls="\r\n",aJ=Lc.encode(Ls),iJ=2,Qg=class{constructor(e,t){let{escapeName:r}=this.constructor,a=L.isString(t),i=`Content-Disposition: form-data; name="${r(e)}"${!a&&t.name?`; filename="${r(t.name)}"`:""}${Ls}`;a?t=Lc.encode(String(t).replace(/\r?\n|\r\n?/g,Ls)):i+=`Content-Type: ${t.type||"application/octet-stream"}${Ls}`,this.headers=Lc.encode(i+Ls),this.contentLength=a?t.byteLength:t.size,this.size=this.headers.byteLength+this.contentLength+iJ,this.name=e,this.value=t}async*encode(){yield this.headers;let{value:e}=this;L.isTypedArray(e)?yield e:yield*md(e),yield aJ}static escapeName(e){return String(e).replace(/[\r\n"]/g,e=>({"\r":"%0D","\n":"%0A",'"':"%22"}[e]))}},oJ=(e,t,r)=>{let{tag:a="form-data-boundary",size:i=25,boundary:s=a+"-"+at.generateString(i,sJ)}=r||{};if(!L.isFormData(e))throw TypeError("FormData instance required");if(s.length<1||s.length>70)throw Error("boundary must be 10-70 characters long");let n=Lc.encode("--"+s+Ls),o=Lc.encode("--"+s+"--"+Ls+Ls),l=o.byteLength,c=Array.from(e.entries()).map(([e,t])=>{let r=new Qg(e,t);return l+=r.size,r});l+=n.byteLength*c.length,l=L.toFiniteNumber(l);let u={"Content-Type":`multipart/form-data; boundary=${s}`};return Number.isFinite(l)&&(u["Content-Length"]=l),t&&t(u),vR.Readable.from(async function*(){for(let e of c)yield n,yield*e.encode();yield o}())},yR=oJ,bR=le(require("stream"),1),ev=class extends bR.default.Transform{__transform(e,t,r){this.push(e),r()}_transform(e,t,r){if(0!==e.length&&(this._transform=this.__transform,120!==e[0])){let e=Buffer.alloc(2);e[0]=120,e[1]=156,this.push(e,t)}this.__transform(e,t,r)}},_R=ev,cJ=(e,t)=>L.isAsyncFn(e)?function(...r){let a=r.pop();e.apply(this,r).then(e=>{try{t?a(null,...t(e)):a(null,e)}catch(e){a(e)}},a)}:e,xR=cJ;function lJ(e,t){e=e||10;let r,a=new Array(e),i=new Array(e),s=0,n=0;return t=void 0!==t?t:1e3,function(o){let l=Date.now(),c=i[n];r||(r=l),a[s]=o,i[s]=l;let u=n,p=0;for(;u!==s;)p+=a[u++],u%=e;if(s=(s+1)%e,s===n&&(n=(n+1)%e),l-r<t)return;let d=c&&l-c;return d?Math.round(1e3*p/d):void 0}}var wR=lJ;function uJ(e,t){let r,a,i=0,s=1e3/t,n=(t,s=Date.now())=>{i=s,r=null,a&&(clearTimeout(a),a=null),e.apply(null,t)};return[(...e)=>{let t=Date.now(),o=t-i;o>=s?n(e,t):(r=e,a||(a=setTimeout(()=>{a=null,n(r)},s-o)))},()=>r&&n(r)]}var SR=uJ,as=(e,t,r=3)=>{let a=0,i=wR(50,250);return SR(r=>{let s=r.loaded,n=r.lengthComputable?r.total:void 0,o=s-a,l=i(o);a=s,e({loaded:s,total:n,progress:n?s/n:void 0,bytes:o,rate:l||void 0,estimated:l&&n&&s<=n?(n-s)/l:void 0,event:r,lengthComputable:null!=n,[t?"download":"upload"]:!0})},r)},eo=(e,t)=>{let r=null!=e;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},to=e=>(...t)=>L.asap(()=>e(...t)),ER={flush:is.default.constants.Z_SYNC_FLUSH,finishFlush:is.default.constants.Z_SYNC_FLUSH},dJ={flush:is.default.constants.BROTLI_OPERATION_FLUSH,finishFlush:is.default.constants.BROTLI_OPERATION_FLUSH},TR=L.isFunction(is.default.createBrotliDecompress),{http:pJ,https:fJ}=AR.default,mJ=/https:?/,CR=at.protocols.map(e=>e+":"),PR=(e,[t,r])=>(e.on("end",r).on("error",r),t);function hJ(e,t){e.beforeRedirects.proxy&&e.beforeRedirects.proxy(e),e.beforeRedirects.config&&e.beforeRedirects.config(e,t)}function DR(e,t,r){let a=t;if(!a&&!1!==a){let e=RR.default.getProxyForUrl(r);e&&(a=new URL(e))}if(a){if(a.username&&(a.auth=(a.username||"")+":"+(a.password||"")),a.auth){(a.auth.username||a.auth.password)&&(a.auth=(a.auth.username||"")+":"+(a.auth.password||""));let t=Buffer.from(a.auth,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+t}e.headers.host=e.hostname+(e.port?":"+e.port:"");let t=a.hostname||a.host;e.hostname=t,e.host=t,e.port=a.port,e.path=r,a.protocol&&(e.protocol=a.protocol.includes(":")?a.protocol:`${a.protocol}:`)}e.beforeRedirects.proxy=function(e){DR(e,t,e.href)}}var gJ=typeof process<"u"&&"process"===L.kindOf(process),vJ=e=>new Promise((t,r)=>{let a,i,s=(e,t)=>{i||(i=!0,a&&a(e,t))},n=e=>{s(e,!0),r(e)};e(e=>{s(e),t(e)},n,e=>a=e).catch(n)}),yJ=({address:e,family:t})=>{if(!L.isString(e))throw TypeError("address must be a string");return{address:e,family:t||(e.indexOf(".")<0?6:4)}},kR=(e,t)=>yJ(L.isObject(e)?e:{address:e,family:t}),LR=gJ&&function(e){return vJ(async function(t,r,a){let i,s,{data:n,lookup:o,family:l}=e,{responseType:c,responseEncoding:u}=e,p=e.method.toUpperCase(),d=!1;if(o){let e=xR(o,e=>L.isArray(e)?e:[e]);o=(t,r,a)=>{e(t,r,(e,t,i)=>{if(e)return a(e);let s=L.isArray(t)?t.map(e=>kR(e)):[kR(t,i)];r.all?a(e,s):a(e,s[0].address,s[0].family)})}}let h=new NR.EventEmitter,m=()=>{e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f),h.removeAllListeners()};function f(t){h.emit("abort",!t||t.type?new Ur(null,e,s):t)}a((e,t)=>{i=!0,t&&(d=!0,m())}),h.once("abort",r),(e.cancelToken||e.signal)&&(e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f)));let v=Ca(e.baseURL,e.url,e.allowAbsoluteUrls),g=new URL(v,at.hasBrowserEnv?at.origin:void 0),y=g.protocol||CR[0];if("data:"===y){let a;if("GET"!==p)return Nn(t,r,{status:405,statusText:"method not allowed",headers:{},config:e});try{a=Kg(e.url,"blob"===c,{Blob:e.env&&e.env.Blob})}catch(t){throw pe.from(t,pe.ERR_BAD_REQUEST,e)}return"text"===c?(a=a.toString(u),(!u||"utf8"===u)&&(a=L.stripBOM(a))):"stream"===c&&(a=Ia.default.Readable.from(a)),Nn(t,r,{data:a,status:200,statusText:"OK",headers:new Nt,config:e})}if(-1===CR.indexOf(y))return r(new pe("Unsupported protocol "+y,pe.ERR_BAD_REQUEST,e));let b=Nt.from(e.headers).normalize();b.set("User-Agent","axios/"+Oa,!1);let x,_,{onUploadProgress:w,onDownloadProgress:E}=e,S=e.maxRate;if(L.isSpecCompliantForm(n)){let e=b.getContentType(/boundary=([-_\w\d]{10,70})/i);n=yR(n,e=>{b.set(e)},{tag:`axios-${Oa}-boundary`,boundary:e&&e[1]||void 0})}else if(L.isFormData(n)&&L.isFunction(n.getHeaders)){if(b.set(n.getHeaders()),!b.hasContentLength())try{let e=await $R.default.promisify(n.getLength).call(n);Number.isFinite(e)&&e>=0&&b.setContentLength(e)}catch{}}else if(L.isBlob(n)||L.isFile(n))n.size&&b.setContentType(n.type||"application/octet-stream"),b.setContentLength(n.size||0),n=Ia.default.Readable.from(md(n));else if(n&&!L.isStream(n)){if(!Buffer.isBuffer(n))if(L.isArrayBuffer(n))n=Buffer.from(new Uint8Array(n));else{if(!L.isString(n))return r(new pe("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",pe.ERR_BAD_REQUEST,e));n=Buffer.from(n,"utf-8")}if(b.setContentLength(n.length,!1),e.maxBodyLength>-1&&n.length>e.maxBodyLength)return r(new pe("Request body larger than maxBodyLength limit",pe.ERR_BAD_REQUEST,e))}let k,P,C=L.toFiniteNumber(b.getContentLength());if(L.isArray(S)?(x=S[0],_=S[1]):x=_=S,n&&(w||x)&&(L.isStream(n)||(n=Ia.default.Readable.from(n,{objectMode:!1})),n=Ia.default.pipeline([n,new Yg({maxRate:L.toFiniteNumber(x)})],L.noop),w&&n.on("progress",PR(n,eo(C,as(to(w),!1,3))))),e.auth){k=(e.auth.username||"")+":"+(e.auth.password||"")}if(!k&&g.username){k=g.username+":"+g.password}k&&b.delete("authorization");try{P=Ta(g.pathname+g.search,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){let a=new Error(t.message);return a.config=e,a.url=e.url,a.exists=!0,r(a)}b.set("Accept-Encoding","gzip, compress, deflate"+(TR?", br":""),!1);let T={path:P,method:p,headers:b.toJSON(),agents:{http:e.httpAgent,https:e.httpsAgent},auth:k,protocol:y,family:l,beforeRedirect:hJ,beforeRedirects:{}};!L.isUndefined(o)&&(T.lookup=o),e.socketPath?T.socketPath=e.socketPath:(T.hostname=g.hostname.startsWith("[")?g.hostname.slice(1,-1):g.hostname,T.port=g.port,DR(T,e.proxy,y+"//"+g.hostname+(g.port?":"+g.port:"")+T.path));let $,O=mJ.test(T.protocol);if(T.agent=O?e.httpsAgent:e.httpAgent,e.transport?$=e.transport:0===e.maxRedirects?$=O?IR.default:OR.default:(e.maxRedirects&&(T.maxRedirects=e.maxRedirects),e.beforeRedirect&&(T.beforeRedirects.config=e.beforeRedirect),$=O?fJ:pJ),e.maxBodyLength>-1?T.maxBodyLength=e.maxBodyLength:T.maxBodyLength=1/0,e.insecureHTTPParser&&(T.insecureHTTPParser=e.insecureHTTPParser),s=$.request(T,function(a){if(s.destroyed)return;let i=[a],n=+a.headers["content-length"];if(E||_){let e=new Yg({maxRate:L.toFiniteNumber(_)});E&&e.on("progress",PR(e,eo(n,as(to(E),!0,3)))),i.push(e)}let o=a,l=a.req||s;if(!1!==e.decompress&&a.headers["content-encoding"])switch(("HEAD"===p||204===a.statusCode)&&delete a.headers["content-encoding"],(a.headers["content-encoding"]||"").toLowerCase()){case"gzip":case"x-gzip":case"compress":case"x-compress":i.push(is.default.createUnzip(ER)),delete a.headers["content-encoding"];break;case"deflate":i.push(new _R),i.push(is.default.createUnzip(ER)),delete a.headers["content-encoding"];break;case"br":TR&&(i.push(is.default.createBrotliDecompress(dJ)),delete a.headers["content-encoding"])}o=i.length>1?Ia.default.pipeline(i,L.noop):i[0];let f=Ia.default.finished(o,()=>{f(),m()}),v={status:a.statusCode,statusText:a.statusMessage,headers:new Nt(a.headers),config:e,request:l};if("stream"===c)v.data=o,Nn(t,r,v);else{let a=[],i=0;o.on("data",function(t){a.push(t),i+=t.length,e.maxContentLength>-1&&i>e.maxContentLength&&(d=!0,o.destroy(),r(new pe("maxContentLength size of "+e.maxContentLength+" exceeded",pe.ERR_BAD_RESPONSE,e,l)))}),o.on("aborted",function(){if(d)return;let t=new pe("stream has been aborted",pe.ERR_BAD_RESPONSE,e,l);o.destroy(t),r(t)}),o.on("error",function(t){s.destroyed||r(pe.from(t,null,e,l))}),o.on("end",function(){try{let e=1===a.length?a[0]:Buffer.concat(a);"arraybuffer"!==c&&(e=e.toString(u),(!u||"utf8"===u)&&(e=L.stripBOM(e))),v.data=e}catch(t){return r(pe.from(t,null,e,v.request,v))}Nn(t,r,v)})}h.once("abort",e=>{o.destroyed||(o.emit("error",e),o.destroy())})}),h.once("abort",e=>{r(e),s.destroy(e)}),s.on("error",function(t){r(pe.from(t,null,e,s))}),s.on("socket",function(e){e.setKeepAlive(!0,6e4)}),e.timeout){let t=parseInt(e.timeout,10);if(Number.isNaN(t))return void r(new pe("error trying to parse `config.timeout` to int",pe.ERR_BAD_OPTION_VALUE,e,s));s.setTimeout(t,function(){if(i)return;let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",a=e.transitional||Gi;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new pe(t,a.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,e,s)),f()})}if(L.isStream(n)){let t=!1,r=!1;n.on("end",()=>{t=!0}),n.once("error",e=>{r=!0,s.destroy(e)}),n.on("close",()=>{!t&&!r&&f(new Ur("Request stream has been aborted",e,s))}),n.pipe(s)}else s.end(n)})},MR=at.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,at.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(at.origin),at.navigator&&/(msie|trident)/i.test(at.navigator.userAgent)):()=>!0,jR=at.hasStandardBrowserEnv?{write(e,t,r,a,i,s){let n=[e+"="+encodeURIComponent(t)];L.isNumber(r)&&n.push("expires="+new Date(r).toGMTString()),L.isString(a)&&n.push("path="+a),L.isString(i)&&n.push("domain="+i),!0===s&&n.push("secure"),document.cookie=n.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}},FR=e=>e instanceof Nt?{...e}:e;function bn(e,t){t=t||{};let r={};function a(e,t,r,a){return L.isPlainObject(e)&&L.isPlainObject(t)?L.merge.call({caseless:a},e,t):L.isPlainObject(t)?L.merge({},t):L.isArray(t)?t.slice():t}function i(e,t,r,i){return L.isUndefined(t)?L.isUndefined(e)?void 0:a(void 0,e,0,i):a(e,t,0,i)}function s(e,t){if(!L.isUndefined(t))return a(void 0,t)}function n(e,t){return L.isUndefined(t)?L.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(r,i,s){return s in t?a(r,i):s in e?a(void 0,r):void 0}let l={url:s,method:s,data:s,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:o,headers:(e,t,r)=>i(FR(e),FR(t),0,!0)};return L.forEach(Object.keys(Object.assign({},e,t)),function(a){let s=l[a]||i,n=s(e[a],t[a],a);L.isUndefined(n)&&s!==o||(r[a]=n)}),r}var hd=e=>{let t,r=bn({},e),{data:a,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:n,headers:o,auth:l}=r;if(r.headers=o=Nt.from(o),r.url=Ta(Ca(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),L.isFormData(a))if(at.hasStandardBrowserEnv||at.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(t=o.getContentType())){let[e,...r]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...r].join("; "))}if(at.hasStandardBrowserEnv&&(i&&L.isFunction(i)&&(i=i(r)),i||!1!==i&&MR(r.url))){let e=s&&n&&jR.read(n);e&&o.set(s,e)}return r},bJ=typeof XMLHttpRequest<"u",UR=bJ&&function(e){return new Promise(function(t,r){let a,i,s,n,o,l=hd(e),c=l.data,u=Nt.from(l.headers).normalize(),{responseType:p,onUploadProgress:d,onDownloadProgress:h}=l;function m(){n&&n(),o&&o(),l.cancelToken&&l.cancelToken.unsubscribe(a),l.signal&&l.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function v(){if(!f)return;let a=Nt.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Nn(function(e){t(e),m()},function(e){r(e),m()},{data:p&&"text"!==p&&"json"!==p?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:a,config:e,request:f}),f=null}f.open(l.method.toUpperCase(),l.url,!0),f.timeout=l.timeout,"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||4!==f.readyState||0===f.status&&(!f.responseURL||0!==f.responseURL.indexOf("file:"))||setTimeout(v)},f.onabort=function(){f&&(r(new pe("Request aborted",pe.ECONNABORTED,e,f)),f=null)},f.onerror=function(){r(new pe("Network Error",pe.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",a=l.transitional||Gi;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),r(new pe(t,a.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,e,f)),f=null},void 0===c&&u.setContentType(null),"setRequestHeader"in f&&L.forEach(u.toJSON(),function(e,t){f.setRequestHeader(t,e)}),L.isUndefined(l.withCredentials)||(f.withCredentials=!!l.withCredentials),p&&"json"!==p&&(f.responseType=l.responseType),h&&([s,o]=as(h,!0),f.addEventListener("progress",s)),d&&f.upload&&([i,n]=as(d),f.upload.addEventListener("progress",i),f.upload.addEventListener("loadend",n)),(l.cancelToken||l.signal)&&(a=t=>{f&&(r(!t||t.type?new Ur(null,e,f):t),f.abort(),f=null)},l.cancelToken&&l.cancelToken.subscribe(a),l.signal&&(l.signal.aborted?a():l.signal.addEventListener("abort",a)));let g=Dc(l.url);g&&-1===at.protocols.indexOf(g)?r(new pe("Unsupported protocol "+g+":",pe.ERR_BAD_REQUEST,e)):f.send(c||null)})},_J=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,a=new AbortController,i=function(e){if(!r){r=!0,n();let t=e instanceof Error?e:this.reason;a.abort(t instanceof pe?t:new Ur(t instanceof Error?t.message:t))}},s=t&&setTimeout(()=>{s=null,i(new pe(`timeout ${t} of ms exceeded`,pe.ETIMEDOUT))},t),n=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));let{signal:o}=a;return o.unsubscribe=()=>L.asap(n),o}},qR=_J,xJ=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let a,i=0;for(;i<r;)a=i+t,yield e.slice(i,a),i=a},wJ=async function*(e,t){for await(let r of SJ(e))yield*xJ(r,t)},SJ=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},tv=(e,t,r,a)=>{let i,s=wJ(e,t),n=0,o=e=>{i||(i=!0,a&&a(e))};return new ReadableStream({async pull(e){try{let{done:t,value:a}=await s.next();if(t)return o(),void e.close();let i=a.byteLength;if(r){let e=n+=i;r(e)}e.enqueue(new Uint8Array(a))}catch(e){throw o(e),e}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},vd="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,BR=vd&&"function"==typeof ReadableStream,EJ=vd&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),HR=(e,...t)=>{try{return!!e(...t)}catch{return!1}},TJ=BR&&HR(()=>{let e=!1,t=new Request(at.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),zR=65536,rv=BR&&HR(()=>L.isReadableStream(new Response("").body)),gd={stream:rv&&(e=>e.body)};vd&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!gd[t]&&(gd[t]=L.isFunction(e[t])?e=>e[t]():(e,r)=>{throw new pe(`Response type '${t}' is not supported`,pe.ERR_NOT_SUPPORT,r)})})})(new Response);var CJ=async e=>null==e?0:L.isBlob(e)?e.size:L.isSpecCompliantForm(e)?(await new Request(at.origin,{method:"POST",body:e}).arrayBuffer()).byteLength:L.isArrayBufferView(e)||L.isArrayBuffer(e)?e.byteLength:(L.isURLSearchParams(e)&&(e+=""),L.isString(e)?(await EJ(e)).byteLength:void 0),PJ=async(e,t)=>L.toFiniteNumber(e.getContentLength())??CJ(t),VR=vd&&(async e=>{let{url:t,method:r,data:a,signal:i,cancelToken:s,timeout:n,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:p="same-origin",fetchOptions:d}=hd(e);c=c?(c+"").toLowerCase():"text";let h,m,f=qR([i,s&&s.toAbortSignal()],n),v=f&&f.unsubscribe&&(()=>{f.unsubscribe()});try{if(l&&TJ&&"get"!==r&&"head"!==r&&0!==(m=await PJ(u,a))){let e,r=new Request(t,{method:"POST",body:a,duplex:"half"});if(L.isFormData(a)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){let[e,t]=eo(m,as(to(l)));a=tv(r.body,zR,e,t)}}L.isString(p)||(p=p?"include":"omit");let i="credentials"in Request.prototype;h=new Request(t,{...d,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:i?p:void 0});let s=await fetch(h),n=rv&&("stream"===c||"response"===c);if(rv&&(o||n&&v)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});let t=L.toFiniteNumber(s.headers.get("content-length")),[r,a]=o&&eo(t,as(to(o),!0))||[];s=new Response(tv(s.body,zR,r,()=>{a&&a(),v&&v()}),e)}c=c||"text";let g=await gd[L.findKey(gd,c)||"text"](s,e);return!n&&v&&v(),await new Promise((t,r)=>{Nn(t,r,{data:g,headers:Nt.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:h})})}catch(t){throw v&&v(),t&&"TypeError"===t.name&&/fetch/i.test(t.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,e,h),{cause:t.cause||t}):pe.from(t,t&&t.code,e,h)}}),nv={http:LR,xhr:UR,fetch:VR};L.forEach(nv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var ZR=e=>`- ${e}`,kJ=e=>L.isFunction(e)||null===e||!1===e,yd={getAdapter:e=>{e=L.isArray(e)?e:[e];let t,r,{length:a}=e,i={};for(let s=0;s<a;s++){let a;if(t=e[s],r=t,!kJ(t)&&(r=nv[(a=String(t)).toLowerCase()],void 0===r))throw new pe(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")),t=a?e.length>1?"since :\n"+e.map(ZR).join("\n"):" "+ZR(e[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r},adapters:nv};function sv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ur(null,e)}function bd(e){return sv(e),e.headers=Nt.from(e.headers),e.data=Rc.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yd.getAdapter(e.adapter||Wi.adapter)(e).then(function(t){return sv(e),t.data=Rc.call(e,e.transformResponse,t),t.headers=Nt.from(t.headers),t},function(t){return Oc(t)||(sv(e),t&&t.response&&(t.response.data=Rc.call(e,e.transformResponse,t.response),t.response.headers=Nt.from(t.response.headers))),Promise.reject(t)})}var _d={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_d[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var GR={};function RJ(e,t,r){if("object"!=typeof e)throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);let a=Object.keys(e),i=a.length;for(;i-- >0;){let s=a[i],n=t[s];if(n){let t=e[s],r=void 0===t||n(t,s,e);if(!0!==r)throw new pe("option "+s+" must be "+r,pe.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new pe("Unknown option "+s,pe.ERR_BAD_OPTION)}}_d.transitional=function(e,t,r){function a(e,t){return"[Axios v"+Oa+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,s)=>{if(!1===e)throw new pe(a(i," has been removed"+(t?" in "+t:"")),pe.ERR_DEPRECATED);return t&&!GR[i]&&(GR[i]=!0,console.warn(a(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,s)}},_d.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var Mc={assertOptions:RJ,validators:_d},Dn=Mc.validators,ro=class{constructor(e){this.defaults=e,this.interceptors={request:new Eg,response:new Eg}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;let r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch{}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=bn(this.defaults,t);let{transitional:r,paramsSerializer:a,headers:i}=t;void 0!==r&&Mc.assertOptions(r,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),null!=a&&(L.isFunction(a)?t.paramsSerializer={serialize:a}:Mc.assertOptions(a,{encode:Dn.function,serialize:Dn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mc.assertOptions(t,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&L.merge(i.common,i[t.method]);i&&L.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=Nt.concat(s,i);let n=[],o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))});let l=[];this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let c,u,p=0;if(!o){let e=[bd.bind(this),void 0];for(e.unshift.apply(e,n),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);p<u;)c=c.then(e[p++],e[p++]);return c}u=n.length;let d=t;for(p=0;p<u;){let e=n[p++],t=n[p++];try{d=e(d)}catch(e){t.call(this,e);break}}try{c=bd.call(this,d)}catch(e){return Promise.reject(e)}for(p=0,u=l.length;p<u;)c=c.then(l[p++],l[p++]);return c}getUri(e){return Ta(Ca((e=bn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(e){ro.prototype[e]=function(t,r){return this.request(bn(r||{},{method:e,url:t,data:(r||{}).data}))}}),L.forEach(["post","put","patch"],function(e){function t(t){return function(r,a,i){return this.request(bn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}ro.prototype[e]=t(),ro.prototype[e+"Form"]=t(!0)});var jc=ro,av=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t,a=new Promise(e=>{r.subscribe(e),t=e}).then(e);return a.cancel=function(){r.unsubscribe(t)},a},e(function(e,a,i){r.reason||(r.reason=new Ur(e,a,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},WR=av;function iv(e){return function(t){return e.apply(null,t)}}function ov(e){return L.isObject(e)&&!0===e.isAxiosError}var cv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cv).forEach(([e,t])=>{cv[t]=e});var KR=cv;function JR(e){let t=new jc(e),r=xc(jc.prototype.request,t);return L.extend(r,jc.prototype,t,{allOwnKeys:!0}),L.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return JR(bn(e,t))},r}var Ht=JR(Wi);Ht.Axios=jc,Ht.CanceledError=Ur,Ht.CancelToken=WR,Ht.isCancel=Oc,Ht.VERSION=Oa,Ht.toFormData=Ds,Ht.AxiosError=pe,Ht.Cancel=Ht.CanceledError,Ht.all=function(e){return Promise.all(e)},Ht.spread=iv,Ht.isAxiosError=ov,Ht.mergeConfig=bn,Ht.AxiosHeaders=Nt,Ht.formToJSON=e=>od(L.isHTMLForm(e)?new FormData(e):e),Ht.getAdapter=yd.getAdapter,Ht.HttpStatusCode=KR,Ht.default=Ht;var no=Ht,{Axios:Mde,AxiosError:jde,CanceledError:Fde,isCancel:Ude,CancelToken:qde,VERSION:zde,all:Bde,Cancel:Hde,isAxiosError:Vde,spread:Zde,toFormData:Gde,AxiosHeaders:Wde,HttpStatusCode:Kde,formToJSON:Jde,getAdapter:Xde,mergeConfig:Yde}=no;function OJ(){return"prod"}var IJ="user:inference",$J="org:create_api_key",lv=[$J,"user:profile"],uv=["user:profile",IJ,"user:sessions:claude_code"],rpe=Array.from(new Set([...lv,...uv])),XR={BASE_API_URL:"https://api.anthropic.com",CONSOLE_AUTHORIZE_URL:"https://console.anthropic.com/oauth/authorize",CLAUDE_AI_AUTHORIZE_URL:"https://claude.ai/oauth/authorize",TOKEN_URL:"https://console.anthropic.com/v1/oauth/token",API_KEY_URL:"https://api.anthropic.com/api/oauth/claude_cli/create_api_key",ROLES_URL:"https://api.anthropic.com/api/oauth/claude_cli/roles",CONSOLE_SUCCESS_URL:"https://console.anthropic.com/buy_credits?returnUrl=/oauth/code/success%3Fapp%3Dclaude-code",CLAUDEAI_SUCCESS_URL:"https://console.anthropic.com/oauth/code/success?app=claude-code",MANUAL_REDIRECT_URL:"https://console.anthropic.com/oauth/code/callback",CLIENT_ID:"9d1c250a-e61b-44d9-88ed-5944d1962f5e",OAUTH_FILE_SUFFIX:"",MCP_PROXY_URL:void 0,MCP_PROXY_PATH:void 0},AJ=void 0,NJ={BASE_API_URL:"http://localhost:3000",CONSOLE_AUTHORIZE_URL:"http://localhost:3000/oauth/authorize",CLAUDE_AI_AUTHORIZE_URL:"http://localhost:4000/oauth/authorize",TOKEN_URL:"http://localhost:3000/v1/oauth/token",API_KEY_URL:"http://localhost:3000/api/oauth/claude_cli/create_api_key",ROLES_URL:"http://localhost:3000/api/oauth/claude_cli/roles",CONSOLE_SUCCESS_URL:"http://localhost:3000/buy_credits?returnUrl=/oauth/code/success%3Fapp%3Dclaude-code",CLAUDEAI_SUCCESS_URL:"http://localhost:3000/oauth/code/success?app=claude-code",MANUAL_REDIRECT_URL:"https://console.staging.ant.dev/oauth/code/callback",CLIENT_ID:"22422756-60c9-4084-8eb7-27705fd5cf9a",OAUTH_FILE_SUFFIX:"-local-oauth",MCP_PROXY_URL:"http://localhost:8205",MCP_PROXY_PATH:"/v1/toolbox/shttp/mcp/{server_id}"};function os(){switch(OJ()){case"local":return NJ;case"staging":return AJ??XR;case"prod":return XR}}var xd=class{constructor(e){this.logger=e,this.codeVerifier=this.generateCodeVerifier()}codeVerifier;server=null;manualAuthCodeResolver=null;async startOAuthFlow(e,t){let r=await this.startCallbackServer(),a=this.generateCodeChallenge(this.codeVerifier),i=this.generateState(),s=this.buildAuthUrls({codeChallenge:a,state:i,port:r,loginWithClaudeAi:e});await t(s);let{code:n,isManualFlow:o}=await this.waitForAuthorizationCode(i,r,e);return await this.exchangeCodeForTokens(n,i,this.codeVerifier,o?void 0:r)}buildAuthUrls(e){let t=os(),r=e.loginWithClaudeAi?t.CLAUDE_AI_AUTHORIZE_URL:t.CONSOLE_AUTHORIZE_URL,a=new URL(r);a.searchParams.set("code","true"),a.searchParams.set("client_id",t.CLIENT_ID),a.searchParams.set("response_type","code");let i=e.loginWithClaudeAi?uv:lv;a.searchParams.set("scope",i.join(" ")),a.searchParams.set("code_challenge",e.codeChallenge),a.searchParams.set("code_challenge_method","S256"),a.searchParams.set("state",e.state),a.searchParams.set("redirect_uri",`http://localhost:${e.port}/callback`);let s=a.toString();return a.searchParams.set("redirect_uri",t.MANUAL_REDIRECT_URL),{automaticRedirectUrl:s,manualRedirectUrl:a.toString()}}async startCallbackServer(){return new Promise((e,t)=>{this.server=YR.createServer(),this.server.listen(0,"127.0.0.1",()=>{let r=this.server.address();r&&"string"!=typeof r?e(r.port):t(new Error("Failed to get server address"))}),this.server.on("error",t)})}async waitForAuthorizationCode(e,t,r){return new Promise((a,i)=>{this.server?(this.manualAuthCodeResolver=t=>{let r=t.trim().split("#");if(r[1]!==e)throw new Error("Invalid state parameter");a({code:r[0],isManualFlow:!0})},this.server.on("request",(s,n)=>{let o=new URL(s.url,`http://localhost:${t}`);if("/callback"===o.pathname){let t=o.searchParams.get("code");if(o.searchParams.get("state")!==e)return n.writeHead(400),n.end("Invalid state parameter"),void i(new Error("Invalid state parameter"));if(!t)return n.writeHead(400),n.end("Missing authorization code"),void i(new Error("Missing authorization code"));let s=r?os().CLAUDEAI_SUCCESS_URL:os().CONSOLE_SUCCESS_URL;n.writeHead(302,{Location:s}),n.end(),this.manualAuthCodeResolver=null,a({code:t,isManualFlow:!1})}})):i(new Error("Server not started"))})}async exchangeCodeForTokens(e,t,r,a){let i=os(),s={grant_type:"authorization_code",code:e,redirect_uri:a?`http://localhost:${a}/callback`:i.MANUAL_REDIRECT_URL,client_id:i.CLIENT_ID,code_verifier:r,state:t};try{let e=await no.post(i.TOKEN_URL,s,{headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(`Token exchange failed: ${e.statusText}`);let t=e.data,r={accessToken:t.access_token,refreshToken:t.refresh_token||null,expiresAt:t.expires_in?Date.now()+1e3*t.expires_in:null,scopes:t.scope?t.scope.split(" "):[],subscriptionType:null,rateLimitTier:null};if(r.scopes.includes("user:profile")){let e=await this.fetchProfileInfo(r.accessToken);r.subscriptionType=e.subscriptionType,r.rateLimitTier=e.rateLimitTier}return r}catch(e){let t=e;throw new Error(`Token exchange failed: ${t.response?.data?.error||t.response?.data?.message||t.message||"Unknown error"}`)}}handleManualAuthCodeInput(e){this.manualAuthCodeResolver&&e&&(this.manualAuthCodeResolver(e),this.manualAuthCodeResolver=null,this.cleanup())}async createApiKey(e){let t=os();try{return(await no.post(t.API_KEY_URL,null,{headers:{Authorization:`Bearer ${e}`}})).data?.raw_key||null}catch{return null}}cleanup(){this.server&&(this.server.close(),this.server=null)}generateCodeVerifier(){return Fc.randomBytes(32).toString("base64url")}generateCodeChallenge(e){return Fc.createHash("sha256").update(e).digest("base64url")}generateState(){return Fc.randomBytes(32).toString("base64url")}async fetchProfileInfo(e){try{let t=`${os().BASE_API_URL}/api/claude_cli_profile`,r=await no.get(t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=r.data?.organization?.organization_type,i=null;switch(a){case"claude_max":i="max";break;case"claude_pro":i="pro";break;case"claude_enterprise":i="enterprise";break;case"claude_team":i="team";break;default:i=null}return{subscriptionType:i,rateLimitTier:r.data?.organization?.rate_limit_tier??null}}catch(e){return this.logger.error(`Failed to fetch subscription: ${e}`),{subscriptionType:null,rateLimitTier:null}}}},TO=require("fs"),tO=require("process"),rO=require("fs"),nO=require("crypto"),QR={name:"BASH_MAX_OUTPUT_LENGTH",default:3e4,validate:e=>{if(!e)return{effective:3e4,status:"valid"};let t=parseInt(e,10);return isNaN(t)||t<=0?{effective:3e4,status:"invalid",message:`Invalid value "${e}" (using default: 30000)`}:t>15e4?{effective:15e4,status:"capped",message:`Capped from ${t} to 150000`}:{effective:t,status:"valid"}}},eO={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32e3,validate:e=>{if(!e)return{effective:32e3,status:"valid"};let t=parseInt(e,10);return isNaN(t)||t<=0?{effective:32e3,status:"invalid",message:`Invalid value "${e}" (using default: 32000)`}:t>64e3?{effective:64e3,status:"capped",message:`Capped from ${t} to 64000`}:{effective:t,status:"valid"}}};function DJ(){let e="";return typeof process<"u"&&"function"==typeof process.cwd&&(e=(0,rO.realpathSync)((0,tO.cwd)())),{originalCwd:e,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:e,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:(0,nO.randomUUID)(),loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[QR,eO],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],sessionBypassPermissionsMode:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map}}var dv=DJ();function sO(){return dv.sessionId}function aO(){return dv.originalCwd}function iO(){return dv.cwd}function LJ(){return iO()}function oO(){try{return LJ()}catch{return aO()}}function cO(e){for(let t=0;t<e.length;t+=2e3)process.stderr.write(e.substring(t,t+2e3))}var lO=Yr(e=>{if(!e||""===e.trim())return null;let t=e.split(",").map(e=>e.trim()).filter(Boolean);if(0===t.length)return null;let r=t.some(e=>e.startsWith("!")),a=t.some(e=>!e.startsWith("!"));if(r&&a)return null;let i=t.map(e=>e.replace(/^!/,"").toLowerCase());return{include:r?[]:i,exclude:r?i:[],isExclusive:r}});function MJ(e){let t=[],r=e.match(/^MCP server ["']([^"']+)["']/);if(r&&r[1])t.push("mcp"),t.push(r[1].toLowerCase());else{let r=e.match(/^([^:[]+):/);r&&r[1]&&t.push(r[1].trim().toLowerCase())}let a=e.match(/^\[([^\]]+)]/);a&&a[1]&&t.push(a[1].trim().toLowerCase()),e.toLowerCase().includes("statsig event:")&&t.push("statsig");let i=e.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(i&&i[1]){let e=i[1].trim().toLowerCase();e.length<30&&!e.includes(" ")&&t.push(e)}return Array.from(new Set(t))}function jJ(e,t){return!t||0!==e.length&&(t.isExclusive?!e.some(e=>t.exclude.includes(e)):e.some(e=>t.include.includes(e)))}function uO(e,t){if(!t)return!0;return jJ(MJ(e),t)}var Oe=le(require("fs"),1),pv=require("fs/promises"),FJ=5;function Ft(e,t){let r=performance.now();try{return t()}finally{let t=performance.now()-r;t>FJ&&Uc(`[SLOW OPERATION DETECTED] fs.${e} (${t.toFixed(1)}ms)`)}}var UJ={cwd:()=>process.cwd(),existsSync:e=>Ft("existsSync",()=>Oe.existsSync(e)),stat:async e=>(0,pv.stat)(e),statSync:e=>Ft("statSync",()=>Oe.statSync(e)),lstatSync:e=>Ft("lstatSync",()=>Oe.lstatSync(e)),readFileSync:(e,t)=>Ft("readFileSync",()=>Oe.readFileSync(e,{encoding:t.encoding})),readFileBytesSync:e=>Ft("readFileBytesSync",()=>Oe.readFileSync(e)),readSync:(e,t)=>Ft("readSync",()=>{let r;try{r=Oe.openSync(e,"r");let a=Buffer.alloc(t.length);return{buffer:a,bytesRead:Oe.readSync(r,a,0,t.length,0)}}finally{r&&Oe.closeSync(r)}}),writeFileSync:(e,t,r)=>Ft("writeFileSync",()=>{let a,i=Oe.existsSync(e);if(!r.flush){let a={encoding:r.encoding};return i?void 0!==r.mode&&(a.mode=r.mode):a.mode=r.mode??384,void Oe.writeFileSync(e,t,a)}try{let s=i?r.mode:r.mode??384;a=Oe.openSync(e,"w",s),Oe.writeFileSync(a,t,{encoding:r.encoding}),Oe.fsyncSync(a)}finally{a&&Oe.closeSync(a)}}),appendFileSync:(e,t,r)=>Ft("appendFileSync",()=>{if(Oe.existsSync(e))Oe.appendFileSync(e,t);else{let a=r?.mode??384,i=Oe.openSync(e,"a",a);try{Oe.appendFileSync(i,t)}finally{Oe.closeSync(i)}}}),copyFileSync:(e,t)=>Ft("copyFileSync",()=>Oe.copyFileSync(e,t)),unlinkSync:e=>Ft("unlinkSync",()=>Oe.unlinkSync(e)),renameSync:(e,t)=>Ft("renameSync",()=>Oe.renameSync(e,t)),linkSync:(e,t)=>Ft("linkSync",()=>Oe.linkSync(e,t)),symlinkSync:(e,t)=>Ft("symlinkSync",()=>Oe.symlinkSync(e,t)),readlinkSync:e=>Ft("readlinkSync",()=>Oe.readlinkSync(e)),realpathSync:e=>Ft("realpathSync",()=>Oe.realpathSync(e)),mkdirSync:e=>Ft("mkdirSync",()=>{Oe.existsSync(e)||Oe.mkdirSync(e,{recursive:!0,mode:448})}),readdirSync:e=>Ft("readdirSync",()=>Oe.readdirSync(e,{withFileTypes:!0})),readdirStringSync:e=>Ft("readdirStringSync",()=>Oe.readdirSync(e)),isDirEmptySync(e){return Ft("isDirEmptySync",()=>0===this.readdirSync(e).length)},rmdirSync:e=>Ft("rmdirSync",()=>Oe.rmdirSync(e)),rmSync:(e,t)=>Ft("rmSync",()=>Oe.rmSync(e,t)),createWriteStream:e=>Oe.createWriteStream(e)},qJ=UJ;function nr(){return qJ}var $a=require("path");function dO({writeFn:e,flushIntervalMs:t=1e3,maxBufferSize:r=100,immediateMode:a=!1}){let i=[],s=null;function n(){0!==i.length&&(e(i.join("")),i=[],s&&(clearTimeout(s),s=null))}return{write(o){a?e(o):(i.push(o),s||(s=setTimeout(n,t)),i.length>=r&&n())},flush:n,dispose(){n()}}}var pO=new Set;function fO(e){return pO.add(e),()=>pO.delete(e)}var zJ=Yr(()=>Vf(process.env.DEBUG)||Vf(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||fv()||process.argv.some(e=>e.startsWith("--debug="))),BJ=Yr(()=>{let e=process.argv.find(e=>e.startsWith("--debug="));if(!e)return null;let t=e.substring(8);return lO(t)}),fv=Yr(()=>process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e"));function HJ(e){if("test"===process.env.NODE_ENV&&!fv()||typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;return uO(e,BJ())}var VJ=!1,wd=null;function ZJ(){return wd||(wd=dO({writeFn:e=>{let t=mO();nr().existsSync((0,$a.dirname)(t))||nr().mkdirSync((0,$a.dirname)(t)),nr().appendFileSync(t,e),GJ()},flushIntervalMs:1e3,maxBufferSize:100,immediateMode:zJ()}),fO(async()=>wd?.dispose())),wd}function Uc(e,{level:t}={level:"debug"}){if(!HJ(e))return;VJ&&e.includes("\n")&&(e=JSON.stringify(e));let r=`${(new Date).toISOString()} [${t.toUpperCase()}] ${e.trim()}\n`;fv()?cO(r):ZJ().write(r)}function mO(){return process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??(0,$a.join)(sn(),"debug",`${sO()}.txt`)}var GJ=Yr(()=>{if("--ripgrep"!==process.argv[2])try{let e=mO(),t=(0,$a.dirname)(e),r=(0,$a.join)(t,"latest");if(nr().existsSync(t)||nr().mkdirSync(t),nr().existsSync(r))try{nr().unlinkSync(r)}catch{}nr().symlinkSync(e,r)}catch{}}),hO=5,gO=1e3,vO=60;function Sd(e,t,r=10*vO*gO){let a;a=void 0===t?{}:t instanceof AbortSignal?{abortSignal:t,timeout:r}:t;let{abortSignal:i,timeout:s=10*vO*gO,input:n,stdio:o=["ignore","pipe","pipe"]}=a;i?.throwIfAborted();let l=performance.now();try{let t=Ar(e,{env:process.env,maxBuffer:1e6,timeout:s,cwd:oO(),stdio:o,shell:!0,reject:!1,input:n}),r=performance.now()-l;return r>hO&&Uc(`[SLOW OPERATION DETECTED] execSyncWithDefaults_DEPRECATED (${r.toFixed(1)}ms): ${e.slice(0,100)}`),t.stdout&&t.stdout.trim()||null}catch{let t=performance.now()-l;return t>hO&&Uc(`[SLOW OPERATION DETECTED] execSyncWithDefaults_DEPRECATED (${t.toFixed(1)}ms): ${e.slice(0,100)}`),null}}var yO=require("crypto"),bO=require("os");function Ms(e=""){let t=sn(),r=process.env.CLAUDE_CONFIG_DIR?`-${(0,yO.createHash)("sha256").update(t).digest("hex").substring(0,8)}`:"";return`Claude Code${os().OAUTH_FILE_SUFFIX}${e}${r}`}function Aa(){try{return process.env.USER||(0,bO.userInfo)().username}catch{return"claude-code-user"}}var _O={name:"keychain",read(){try{let e=Ms("-credentials"),t=Sd(`security find-generic-password -a "${Aa()}" -w -s "${e}"`);if(t)return JSON.parse(t)}catch{return null}return null},update(e){try{let t=Ms("-credentials"),r=Aa(),a=JSON.stringify(e);return 0!==Ar("security",["-i"],{input:`add-generic-password -U -a "${r}" -s "${t}" -X "${Buffer.from(a,"utf-8").toString("hex")}"\n`,stdio:["pipe","pipe","pipe"],reject:!1}).exitCode?{success:!1}:{success:!0}}catch{return{success:!1}}},delete(){try{let e=Ms("-credentials");return Sd(`security delete-generic-password -a "${Aa()}" -s "${e}"`),!0}catch{return!1}}};function xO(e,t){return{name:`${e.name}-with-${t.name}-fallback`,read:()=>e.read()??(t.read()||{}),update(r){let a=e.read(),i=e.update(r);if(i.success)return null===a&&t.delete(),i;let s=t.update(r);return s.success?{success:!0,warning:s.warning}:{success:!1}},delete(){let r=e.delete(),a=t.delete();return r||a}}}var wO=require("path"),SO=require("fs");function mv(){let e=sn();return{storageDir:e,storagePath:(0,wO.join)(e,".credentials.json")}}var hv={name:"plaintext",read(){let{storagePath:e}=mv();if(nr().existsSync(e))try{let t=nr().readFileSync(e,{encoding:"utf8"});return JSON.parse(t)}catch{return null}return null},update(e){try{let{storageDir:t,storagePath:r}=mv();return nr().existsSync(t)||nr().mkdirSync(t),nr().writeFileSync(r,JSON.stringify(e),{encoding:"utf8",flush:!1}),(0,SO.chmodSync)(r,384),{success:!0,warning:"Warning: Storing credentials in plaintext."}}catch{return{success:!1}}},delete(){let{storagePath:e}=mv();if(nr().existsSync(e))try{return nr().unlinkSync(e),!0}catch{return!1}return!0}};function Ed(){return"darwin"===process.platform?xO(_O,hv):hv}function EO(e){return e.slice(-20)}var so=class{constructor(e,t,r=!1){this.logger=e,this.env=t,this.disableAuthLogin=r,this.logger.log("AuthManager initialized")}currentOAuthService=null;getAuthStatus(){if(this.logger.log("Getting authentication status"),Td(this.env.CLAUDE_CODE_USE_BEDROCK)||Td(this.env.CLAUDE_CODE_USE_VERTEX)||Td(this.env.CLAUDE_CODE_USE_FOUNDRY)||this.env.ANTHROPIC_API_KEY||this.env.ANTHROPIC_AUTH_TOKEN||Td(this.env.CLAUDE_CODE_SKIP_AUTH_LOGIN)||this.disableAuthLogin)return{authMethod:"3p",email:null,subscriptionType:null};let e,t=this.getApiKey(),r=this.getOAuthTokens();if(!t&&!r)return void this.logger.log("No authentication found");e=r?r.scopes.includes("user:inference")?"claudeai":"console":"api-key";let a={authMethod:e,email:null,subscriptionType:r?.subscriptionType||null};return this.logger.log(`Auth status: method=${a.authMethod}`),a}getOAuthTokens(){let e=(Ed().read()||{})?.claudeAiOauth;return e?(this.logger.log("OAuth tokens found in secure storage"),{accessToken:e.accessToken,refreshToken:e.refreshToken||null,expiresAt:e.expiresAt||null,scopes:e.scopes,subscriptionType:e.subscriptionType,rateLimitTier:e.rateLimitTier}):null}getApiKey(){if("darwin"===process.platform)try{let e=Ar("security",["find-generic-password","-a",Aa(),"-w","-s",Ms()]);if(e.stdout)return this.logger.log("API key found in macOS keychain"),e.stdout.trim()}catch{this.logger.log("Keychain read failed, trying file fallback")}let e=this.getConfigPath(),t=Cd.join(e,"config.json");if(Cr.existsSync(t))try{let e=JSON.parse(Cr.readFileSync(t,"utf8"));if(e.primaryApiKey)return this.logger.log("API key found in config file"),e.primaryApiKey}catch{this.logger.warn("Failed to read config file")}return null}saveOAuthTokens(e){this.logger.log("Saving OAuth tokens to secure storage");let t=Ed(),r=t.read()||{};r.claudeAiOauth={accessToken:e.accessToken,refreshToken:e.refreshToken||"",expiresAt:e.expiresAt||Date.now()+36e5,scopes:e.scopes,subscriptionType:e.subscriptionType,rateLimitTier:e.rateLimitTier},t.update(r)}async saveApiKey(e){this.logger.log("Saving API key");let t=this.getConfigPath();Cr.existsSync(t)||Cr.mkdirSync(t,{recursive:!0});let r=Cd.join(t,"config.json"),a={};if(Cr.existsSync(r))try{a=JSON.parse(Cr.readFileSync(r,"utf8"))}catch{}if("darwin"===process.platform)try{let t=Ms(),r=Ar("security",["-i"],{input:`add-generic-password -U -a "${Aa()}" -s "${t}" -X "${Buffer.from(e,"utf-8").toString("hex")}"\n`,stdio:["pipe","pipe","pipe"],reject:!1});if(0!==r.exitCode)throw new Error(`security command failed with exit code ${r.exitCode}`);this.logger.log("API key saved to macOS keychain named ")}catch(e){throw this.logger.error(`Failed to save API key to keychain: ${e}`),new Error("Unable to save API key to macOS Keychain. Please ensure VS Code has keychain access permissions.")}else a.primaryApiKey=e;a.customApiKeyResponses||(a.customApiKeyResponses={}),a.customApiKeyResponses.approved||(a.customApiKeyResponses.approved=[]);let i=EO(e);a.customApiKeyResponses.approved.includes(i)||a.customApiKeyResponses.approved.push(i);try{Cr.writeFileSync(r,JSON.stringify(a,null,2),"utf8"),(0,TO.chmodSync)(r,384),this.logger.log("API key saved to config file")}catch(e){throw this.logger.error(`Failed to save API key: ${e}`),new Error(`Failed to save API key ${e}`)}}async logout(){this.logger.log("Logging out - clearing stored credentials");let e=!0;"darwin"===process.platform&&this.maybeRemoveApiKeyFromMacOSKeychain(),Ed().delete();let t=this.getConfigPath(),r=Cd.join(t,"config.json");if(Cr.existsSync(r))try{let e=JSON.parse(Cr.readFileSync(r,"utf8"));delete e.primaryApiKey,Cr.writeFileSync(r,JSON.stringify(e,null,2),"utf8")}catch{e=!1}return this.logger.log("Logout "+(e?"successful":"failed")),e}getConfigPath(){return sn()}handleManualAuthCode(e){this.currentOAuthService?(this.logger.log("Handling manual auth code input"),this.currentOAuthService.handleManualAuthCodeInput(e)):this.logger.warn("No active OAuth service to handle manual auth code")}async login(e,t){this.logger.log(`Starting OAuth login flow: method=${e}`),this.currentOAuthService=new xd(this.logger);try{let r=await this.currentOAuthService.startOAuthFlow("claudeai"===e,t);if("claudeai"===e)this.saveOAuthTokens(r);else if("console"===e){this.logger.log("Creating API key for Console user");let e=await this.currentOAuthService.createApiKey(r.accessToken);if(!e)throw this.logger.error("Failed to create API key"),new Error("Failed to create API key");await this.saveApiKey(e)}this.logger.log("Login successful");let a=this.getAuthStatus();if(!a)throw new Error("Failed to retrieve auth status after login");return a}finally{this.currentOAuthService&&(this.currentOAuthService.cleanup(),this.currentOAuthService=null)}}maybeRemoveApiKeyFromMacOSKeychain(){if("darwin"===process.platform)try{let e=Ms();Ar("security",["delete-generic-password","-a",Aa(),"-s",e])}catch(e){this.logger.error(`Failed to remove API key from keychain: ${e}`)}}};function Td(e){if(!e)return!1;if("boolean"==typeof e)return e;let t=e.toLowerCase().trim();return["1","true","yes","on"].includes(t)}function CO(e){return void 0!==e&&Date.now()-e<864e5}function PO(){let e=qw();return!(e.totalSessions<=12||e.recentSessions<=4||e.editsAccepted<4&&e.editsAutoAccepted<10||e.editsDeclined>1)}var lt,qc="2025-06-18",Pd=[qc,"2025-03-26","2024-11-05","2024-10-07"],kd="2.0",kO=E.union([E.string(),E.number().int()]),RO=E.string(),WJ=E.object({progressToken:E.optional(kO)}).passthrough(),en=E.object({_meta:E.optional(WJ)}).passthrough(),Pr=E.object({method:E.string(),params:E.optional(en)}),zc=E.object({_meta:E.optional(E.object({}).passthrough())}).passthrough(),Ln=E.object({method:E.string(),params:E.optional(zc)}),tn=E.object({_meta:E.optional(E.object({}).passthrough())}).passthrough(),Rd=E.union([E.string(),E.number().int()]),OO=E.object({jsonrpc:E.literal(kd),id:Rd}).merge(Pr).strict(),IO=e=>OO.safeParse(e).success,$O=E.object({jsonrpc:E.literal(kd)}).merge(Ln).strict(),AO=e=>$O.safeParse(e).success,NO=E.object({jsonrpc:E.literal(kd),id:Rd,result:tn}).strict(),gv=e=>NO.safeParse(e).success;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"}(lt||(lt={}));var DO=E.object({jsonrpc:E.literal(kd),id:Rd,error:E.object({code:E.number().int(),message:E.string(),data:E.optional(E.unknown())})}).strict(),LO=e=>DO.safeParse(e).success,Od=E.union([OO,$O,NO,DO]),cs=tn.strict(),Id=Ln.extend({method:E.literal("notifications/cancelled"),params:zc.extend({requestId:Rd,reason:E.string().optional()})}),Bc=E.object({name:E.string(),title:E.optional(E.string())}).passthrough(),MO=Bc.extend({version:E.string()}),KJ=E.object({experimental:E.optional(E.object({}).passthrough()),sampling:E.optional(E.object({}).passthrough()),elicitation:E.optional(E.object({}).passthrough()),roots:E.optional(E.object({listChanged:E.optional(E.boolean())}).passthrough())}).passthrough(),vv=Pr.extend({method:E.literal("initialize"),params:en.extend({protocolVersion:E.string(),capabilities:KJ,clientInfo:MO})}),JJ=E.object({experimental:E.optional(E.object({}).passthrough()),logging:E.optional(E.object({}).passthrough()),completions:E.optional(E.object({}).passthrough()),prompts:E.optional(E.object({listChanged:E.optional(E.boolean())}).passthrough()),resources:E.optional(E.object({subscribe:E.optional(E.boolean()),listChanged:E.optional(E.boolean())}).passthrough()),tools:E.optional(E.object({listChanged:E.optional(E.boolean())}).passthrough())}).passthrough(),yv=tn.extend({protocolVersion:E.string(),capabilities:JJ,serverInfo:MO,instructions:E.optional(E.string())}),bv=Ln.extend({method:E.literal("notifications/initialized")}),$d=Pr.extend({method:E.literal("ping")}),XJ=E.object({progress:E.number(),total:E.optional(E.number()),message:E.optional(E.string())}).passthrough(),Ad=Ln.extend({method:E.literal("notifications/progress"),params:zc.merge(XJ).extend({progressToken:kO})}),Nd=Pr.extend({params:en.extend({cursor:E.optional(RO)}).optional()}),Dd=tn.extend({nextCursor:E.optional(RO)}),jO=E.object({uri:E.string(),mimeType:E.optional(E.string()),_meta:E.optional(E.object({}).passthrough())}).passthrough(),FO=jO.extend({text:E.string()}),_v=E.string().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),UO=jO.extend({blob:_v}),qO=Bc.extend({uri:E.string(),description:E.optional(E.string()),mimeType:E.optional(E.string()),_meta:E.optional(E.object({}).passthrough())}),YJ=Bc.extend({uriTemplate:E.string(),description:E.optional(E.string()),mimeType:E.optional(E.string()),_meta:E.optional(E.object({}).passthrough())}),Ld=Nd.extend({method:E.literal("resources/list")}),xv=Dd.extend({resources:E.array(qO)}),Md=Nd.extend({method:E.literal("resources/templates/list")}),wv=Dd.extend({resourceTemplates:E.array(YJ)}),jd=Pr.extend({method:E.literal("resources/read"),params:en.extend({uri:E.string()})}),Sv=tn.extend({contents:E.array(E.union([FO,UO]))}),QJ=Ln.extend({method:E.literal("notifications/resources/list_changed")}),e7=Pr.extend({method:E.literal("resources/subscribe"),params:en.extend({uri:E.string()})}),t7=Pr.extend({method:E.literal("resources/unsubscribe"),params:en.extend({uri:E.string()})}),r7=Ln.extend({method:E.literal("notifications/resources/updated"),params:zc.extend({uri:E.string()})}),n7=E.object({name:E.string(),description:E.optional(E.string()),required:E.optional(E.boolean())}).passthrough(),s7=Bc.extend({description:E.optional(E.string()),arguments:E.optional(E.array(n7)),_meta:E.optional(E.object({}).passthrough())}),Fd=Nd.extend({method:E.literal("prompts/list")}),Ev=Dd.extend({prompts:E.array(s7)}),Ud=Pr.extend({method:E.literal("prompts/get"),params:en.extend({name:E.string(),arguments:E.optional(E.record(E.string()))})}),Tv=E.object({type:E.literal("text"),text:E.string(),_meta:E.optional(E.object({}).passthrough())}).passthrough(),Cv=E.object({type:E.literal("image"),data:_v,mimeType:E.string(),_meta:E.optional(E.object({}).passthrough())}).passthrough(),Pv=E.object({type:E.literal("audio"),data:_v,mimeType:E.string(),_meta:E.optional(E.object({}).passthrough())}).passthrough(),a7=E.object({type:E.literal("resource"),resource:E.union([FO,UO]),_meta:E.optional(E.object({}).passthrough())}).passthrough(),i7=qO.extend({type:E.literal("resource_link")}),zO=E.union([Tv,Cv,Pv,i7,a7]),o7=E.object({role:E.enum(["user","assistant"]),content:zO}).passthrough(),kv=tn.extend({description:E.optional(E.string()),messages:E.array(o7)}),c7=Ln.extend({method:E.literal("notifications/prompts/list_changed")}),l7=E.object({title:E.optional(E.string()),readOnlyHint:E.optional(E.boolean()),destructiveHint:E.optional(E.boolean()),idempotentHint:E.optional(E.boolean()),openWorldHint:E.optional(E.boolean())}).passthrough(),u7=Bc.extend({description:E.optional(E.string()),inputSchema:E.object({type:E.literal("object"),properties:E.optional(E.object({}).passthrough()),required:E.optional(E.array(E.string()))}).passthrough(),outputSchema:E.optional(E.object({type:E.literal("object"),properties:E.optional(E.object({}).passthrough()),required:E.optional(E.array(E.string()))}).passthrough()),annotations:E.optional(l7),_meta:E.optional(E.object({}).passthrough())}),qd=Nd.extend({method:E.literal("tools/list")}),Rv=Dd.extend({tools:E.array(u7)}),Na=tn.extend({content:E.array(zO).default([]),structuredContent:E.object({}).passthrough().optional(),isError:E.optional(E.boolean())}),ofe=Na.or(tn.extend({toolResult:E.unknown()})),zd=Pr.extend({method:E.literal("tools/call"),params:en.extend({name:E.string(),arguments:E.optional(E.record(E.unknown()))})}),d7=Ln.extend({method:E.literal("notifications/tools/list_changed")}),BO=E.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),p7=Pr.extend({method:E.literal("logging/setLevel"),params:en.extend({level:BO})}),f7=Ln.extend({method:E.literal("notifications/message"),params:zc.extend({level:BO,logger:E.optional(E.string()),data:E.unknown()})}),m7=E.object({name:E.string().optional()}).passthrough(),h7=E.object({hints:E.optional(E.array(m7)),costPriority:E.optional(E.number().min(0).max(1)),speedPriority:E.optional(E.number().min(0).max(1)),intelligencePriority:E.optional(E.number().min(0).max(1))}).passthrough(),g7=E.object({role:E.enum(["user","assistant"]),content:E.union([Tv,Cv,Pv])}).passthrough(),v7=Pr.extend({method:E.literal("sampling/createMessage"),params:en.extend({messages:E.array(g7),systemPrompt:E.optional(E.string()),includeContext:E.optional(E.enum(["none","thisServer","allServers"])),temperature:E.optional(E.number()),maxTokens:E.number().int(),stopSequences:E.optional(E.array(E.string())),metadata:E.optional(E.object({}).passthrough()),modelPreferences:E.optional(h7)})}),Ov=tn.extend({model:E.string(),stopReason:E.optional(E.enum(["endTurn","stopSequence","maxTokens"]).or(E.string())),role:E.enum(["user","assistant"]),content:E.discriminatedUnion("type",[Tv,Cv,Pv])}),y7=E.object({type:E.literal("boolean"),title:E.optional(E.string()),description:E.optional(E.string()),default:E.optional(E.boolean())}).passthrough(),b7=E.object({type:E.literal("string"),title:E.optional(E.string()),description:E.optional(E.string()),minLength:E.optional(E.number()),maxLength:E.optional(E.number()),format:E.optional(E.enum(["email","uri","date","date-time"]))}).passthrough(),_7=E.object({type:E.enum(["number","integer"]),title:E.optional(E.string()),description:E.optional(E.string()),minimum:E.optional(E.number()),maximum:E.optional(E.number())}).passthrough(),x7=E.object({type:E.literal("string"),title:E.optional(E.string()),description:E.optional(E.string()),enum:E.array(E.string()),enumNames:E.optional(E.array(E.string()))}).passthrough(),w7=E.union([y7,b7,_7,x7]),S7=Pr.extend({method:E.literal("elicitation/create"),params:en.extend({message:E.string(),requestedSchema:E.object({type:E.literal("object"),properties:E.record(E.string(),w7),required:E.optional(E.array(E.string()))}).passthrough()})}),Iv=tn.extend({action:E.enum(["accept","decline","cancel"]),content:E.optional(E.record(E.string(),E.unknown()))}),E7=E.object({type:E.literal("ref/resource"),uri:E.string()}).passthrough(),T7=E.object({type:E.literal("ref/prompt"),name:E.string()}).passthrough(),Bd=Pr.extend({method:E.literal("completion/complete"),params:en.extend({ref:E.union([T7,E7]),argument:E.object({name:E.string(),value:E.string()}).passthrough(),context:E.optional(E.object({arguments:E.optional(E.record(E.string(),E.string()))}))})}),$v=tn.extend({completion:E.object({values:E.array(E.string()).max(100),total:E.optional(E.number().int()),hasMore:E.optional(E.boolean())}).passthrough()}),C7=E.object({uri:E.string().startsWith("file://"),name:E.optional(E.string()),_meta:E.optional(E.object({}).passthrough())}).passthrough(),P7=Pr.extend({method:E.literal("roots/list")}),Av=tn.extend({roots:E.array(C7)}),k7=Ln.extend({method:E.literal("notifications/roots/list_changed")}),cfe=E.union([$d,vv,Bd,p7,Ud,Fd,Ld,Md,jd,e7,t7,zd,qd]),lfe=E.union([Id,Ad,bv,k7]),ufe=E.union([cs,Ov,Iv,Av]),dfe=E.union([$d,v7,S7,P7]),pfe=E.union([Id,Ad,f7,r7,QJ,d7,c7]),ffe=E.union([cs,yv,$v,kv,Ev,xv,wv,Sv,Na,Rv]),ot=class extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}},R7=6e4,ao=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(Id,e=>{let t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}),this.setNotificationHandler(Ad,e=>{this._onprogress(e)}),this.setRequestHandler($d,e=>({}))}_setupTimeout(e,t,r,a,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(a,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:i,onTimeout:a})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new ot(lt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,r,a;this._transport=e;let i=null===(t=this.transport)||void 0===t?void 0:t.onclose;this._transport.onclose=()=>{i?.(),this._onclose()};let s=null===(r=this.transport)||void 0===r?void 0:r.onerror;this._transport.onerror=e=>{s?.(e),this._onerror(e)};let n=null===(a=this._transport)||void 0===a?void 0:a.onmessage;this._transport.onmessage=(e,t)=>{n?.(e,t),gv(e)||LO(e)?this._onresponse(e):IO(e)?this._onrequest(e,t):AO(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);let r=new ot(lt.ConnectionClosed,"Connection closed");for(let e of t.values())e(r)}_onerror(e){var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}_onnotification(e){var t;let r=null!==(t=this._notificationHandlers.get(e.method))&&void 0!==t?t:this.fallbackNotificationHandler;void 0!==r&&Promise.resolve().then(()=>r(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){var r,a;let i=null!==(r=this._requestHandlers.get(e.method))&&void 0!==r?r:this.fallbackRequestHandler,s=this._transport;if(void 0===i)return void s?.send({jsonrpc:"2.0",id:e.id,error:{code:lt.MethodNotFound,message:"Method not found"}}).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`)));let n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);let o={signal:n.signal,sessionId:s?.sessionId,_meta:null===(a=e.params)||void 0===a?void 0:a._meta,sendNotification:t=>this.notification(t,{relatedRequestId:e.id}),sendRequest:(t,r,a)=>this.request(t,r,{...a,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>i(e,o)).then(t=>{if(!n.signal.aborted)return s?.send({result:t,jsonrpc:"2.0",id:e.id})},t=>{var r;if(!n.signal.aborted)return s?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:lt.InternalError,message:null!==(r=t.message)&&void 0!==r?r:"Internal error"}})}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,a=Number(t),i=this._progressHandlers.get(a);if(!i)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));let s=this._responseHandlers.get(a),n=this._timeoutInfo.get(a);if(n&&s&&n.resetTimeoutOnProgress)try{this._resetTimeout(a)}catch(e){return void s(e)}i(r)}_onresponse(e){let t=Number(e.id),r=this._responseHandlers.get(t);if(void 0!==r)if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),gv(e))r(e);else{r(new ot(e.error.code,e.error.message,e.error.data))}else this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`))}get transport(){return this._transport}async close(){var e;await(null===(e=this._transport)||void 0===e?void 0:e.close())}request(e,t,r){let{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s}=r??{};return new Promise((n,o)=>{var l,c,u,p,d,h;if(!this._transport)return void o(new Error("Not connected"));!0===(null===(l=this._options)||void 0===l?void 0:l.enforceStrictCapabilities)&&this.assertCapabilityForMethod(e.method),null===(c=r?.signal)||void 0===c||c.throwIfAborted();let m=this._requestMessageId++,f={...e,jsonrpc:"2.0",id:m};r?.onprogress&&(this._progressHandlers.set(m,r.onprogress),f.params={...e.params,_meta:{...(null===(u=e.params)||void 0===u?void 0:u._meta)||{},progressToken:m}});let v=e=>{var t;this._responseHandlers.delete(m),this._progressHandlers.delete(m),this._cleanupTimeout(m),null===(t=this._transport)||void 0===t||t.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:m,reason:String(e)}},{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`))),o(e)};this._responseHandlers.set(m,e=>{var a;if(null===(a=r?.signal)||void 0===a||!a.aborted){if(e instanceof Error)return o(e);try{let r=t.parse(e.result);n(r)}catch(e){o(e)}}}),null===(p=r?.signal)||void 0===p||p.addEventListener("abort",()=>{var e;v(null===(e=r?.signal)||void 0===e?void 0:e.reason)});let g=null!==(d=r?.timeout)&&void 0!==d?d:R7;this._setupTimeout(m,g,r?.maxTotalTimeout,()=>v(new ot(lt.RequestTimeout,"Request timed out",{timeout:g})),null!==(h=r?.resetTimeoutOnProgress)&&void 0!==h&&h),this._transport.send(f,{relatedRequestId:a,resumptionToken:i,onresumptiontoken:s}).catch(e=>{this._cleanupTimeout(m),o(e)})})}async notification(e,t){var r,a;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),(null!==(a=null===(r=this._options)||void 0===r?void 0:r.debouncedNotificationMethods)&&void 0!==a?a:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{var r;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let a={...e,jsonrpc:"2.0"};null===(r=this._transport)||void 0===r||r.send(a,t).catch(e=>this._onerror(e))})}let i={...e,jsonrpc:"2.0"};await this._transport.send(i,t)}setRequestHandler(e,t){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,a)=>Promise.resolve(t(e.parse(r),a)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Hd(e,t){return Object.entries(t).reduce((e,[t,r])=>(e[t]=r&&"object"==typeof r&&e[t]?{...e[t],...r}:r,e),{...e})}var H$=le(sy(),1),lp=class extends ao{constructor(e,t){var r;super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=null!==(r=t?.capabilities)&&void 0!==r?r:{},this._ajv=new H$.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Hd(this._capabilities,e)}assertCapability(e,t){var r;if(null===(r=this._serverCapabilities)||void 0===r||!r[e])throw new Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{let r=await this.request({method:"initialize",params:{protocolVersion:qc,capabilities:this._capabilities,clientInfo:this._clientInfo}},yv,t);if(void 0===r)throw new Error(`Server sent invalid initialize result: ${r}`);if(!Pd.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var t,r,a,i,s;switch(e){case"logging/setLevel":if(null===(t=this._serverCapabilities)||void 0===t||!t.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(null===(r=this._serverCapabilities)||void 0===r||!r.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(null===(a=this._serverCapabilities)||void 0===a||!a.resources)throw new Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(null===(i=this._serverCapabilities)||void 0===i||!i.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(null===(s=this._serverCapabilities)||void 0===s||!s.completions)throw new Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){var t;if("notifications/roots/list_changed"===e)if(null===(t=this._capabilities.roots)||void 0===t||!t.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`)}}async ping(e){return this.request({method:"ping"},cs,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},$v,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},cs,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},kv,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},Ev,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},xv,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},wv,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},Sv,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},cs,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},cs,t)}async callTool(e,t=Na,r){let a=await this.request({method:"tools/call",params:e},t,r),i=this.getToolOutputValidator(e.name);if(i){if(!a.structuredContent&&!a.isError)throw new ot(lt.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(a.structuredContent)try{if(!i(a.structuredContent))throw new ot(lt.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(i.errors)}`)}catch(e){throw e instanceof ot?e:new ot(lt.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return a}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let t of e)if(t.outputSchema)try{let e=this._ajv.compile(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){let r=await this.request({method:"tools/list",params:e},Rv,t);return this.cacheToolOutputSchemas(r.tools),r}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}},Z$=le(ef(),1),Vc=le(require("node:process"),1),G$=require("node:stream"),up=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf("\n");if(-1===e)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),cY(t)}clear(){this._buffer=void 0}};function cY(e){return Od.parse(JSON.parse(e))}function V$(e){return JSON.stringify(e)+"\n"}var lY="win32"===Vc.default.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function uY(){let e={};for(let t of lY){let r=Vc.default.env[t];void 0!==r&&(r.startsWith("()")||(e[t]=r))}return e}var dp=class{constructor(e){this._abortController=new AbortController,this._readBuffer=new up,this._stderrStream=null,this._serverParams=e,("pipe"===e.stderr||"overlapped"===e.stderr)&&(this._stderrStream=new G$.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{var r,a,i,s,n;this._process=(0,Z$.default)(this._serverParams.command,null!==(r=this._serverParams.args)&&void 0!==r?r:[],{env:{...uY(),...this._serverParams.env},stdio:["pipe","pipe",null!==(a=this._serverParams.stderr)&&void 0!==a?a:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:"win32"===Vc.default.platform&&dY(),cwd:this._serverParams.cwd}),this._process.on("error",e=>{var r,a;"AbortError"!==e.name?(t(e),null===(a=this.onerror)||void 0===a||a.call(this,e)):null===(r=this.onclose)||void 0===r||r.call(this)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{var t;this._process=void 0,null===(t=this.onclose)||void 0===t||t.call(this)}),null===(i=this._process.stdin)||void 0===i||i.on("error",e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}),null===(s=this._process.stdout)||void 0===s||s.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),null===(n=this._process.stdout)||void 0===n||n.on("error",e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,t;return this._stderrStream?this._stderrStream:null!==(t=null===(e=this._process)||void 0===e?void 0:e.stderr)&&void 0!==t?t:null}get pid(){var e,t;return null!==(t=null===(e=this._process)||void 0===e?void 0:e.pid)&&void 0!==t?t:null}processReadBuffer(){for(var e,t;;)try{let t=this._readBuffer.readMessage();if(null===t)break;null===(e=this.onmessage)||void 0===e||e.call(this,t)}catch(e){null===(t=this.onerror)||void 0===t||t.call(this,e)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(t=>{var r;if(null===(r=this._process)||void 0===r||!r.stdin)throw new Error("Not connected");let a=V$(e);this._process.stdin.write(a)?t():this._process.stdin.once("drain",t)})}};function dY(){return"type"in Vc.default}var Zc=class{constructor(e,t){this.output=e,this.getClaudeBinary=t}client=null;transport=null;async connect(){return!1}async disconnect(){}async createNewBrowserTab(){if(!await this.connect()||!this.client)throw new Error("Failed to connect to Chrome MCP server");try{let e=await this.client.callTool({name:"tabs_context_mcp",arguments:{createIfEmpty:!0}},Na);if(e.isError){let t=W$(e.content);throw new Error(`Failed to create new tab: ${t}`)}let t=e.content;if(Array.isArray(t)&&t.length>0){let e=t.find(e=>"text"===e.type);if(e&&"text"in e){let t=JSON.parse(e.text);return{tabGroupId:String(t.tabGroupId),tabId:t.tabId}}}throw new Error("Unexpected response format from tabs_create")}catch(e){throw this.output.error(`Chrome MCP: Error calling tabs_create: ${e}`),await this.disconnect(),e}}async getBrowserTabs(){if(!await this.connect()||!this.client)return[];try{let e=await this.client.callTool({name:"tabs_context_mcp",arguments:{createIfEmpty:!1}},Na),t={tabGroupId:"",tabId:0,title:"new tab",url:""};if(e.isError)return W$(e.content).includes("No tab available")?[t]:(this.output.warn(`Chrome MCP: tabs_context returned error: ${JSON.stringify(e.content)}`),[]);let r=e.content;if(Array.isArray(r)&&r.length>0){let e=r.find(e=>"text"===e.type);if(e&&"text"in e)try{let r=JSON.parse(e.text),a=String(r.tabGroupId),i=(r.availableTabs||[]).map(e=>({...e,tabGroupId:a}));return i.push(t),i}catch(r){if(e.text.includes("No MCP tab groups found."))return[t];this.output.warn(`Chrome MCP: Failed to parse tabs_context response: ${r}`),this.output.warn(`Response text: ${e.text}`)}}return[]}catch(e){return this.output.error(`Chrome MCP: Error calling tabs_context: ${e}`),await this.disconnect(),[]}}};function W$(e){return"string"==typeof e?e:Array.isArray(e)?e.map(e=>{if(e&&"object"==typeof e&&"text"in e&&"string"==typeof e.text)return e.text}).join(""):""}var pY="\n# VSCode Extension Context\n\nYou are running inside a VSCode native extension environment.\n\n## Code References in Text\nIMPORTANT: When referencing files or code locations, use markdown link syntax to make them clickable:\n- For files: [filename.ts](src/filename.ts)\n- For specific lines: [filename.ts:42](src/filename.ts#L42)\n- For a range of lines: [filename.ts:42-51](src/filename.ts#L42-L51)\n- For folders: [src/utils/](src/utils/)\nUnless explicitly asked for by the user, DO NOT USE backtickets ` or HTML tags like code for file references - always use markdown [text](link) format.\nThe URL links should be relative paths from the root of  the user's workspace.\n\n## User Selection Context\nThe user's IDE selection (if any) is included in the conversation context and marked with ide_selection tags. This represents code or text the user has highlighted in their editor and may or may not be relevant to their request.",Gc=class extends Cu{constructor(e,t,r,a,i,s,n,o,l,c,u,p,d,h,m){let f=e.globalState.get("experimentGates")||{},v=e.globalState.get("showTerminalBanner");super(t,io(i),r,!!m,void 0===v||v,f,new so(io(i),pp(),mr("disableLoginPrompt"))),this.context=e,this.cwd=t,this.settings=r,this.webview=a,this.output=i,this.leftTempFileProvider=o,this.rightTempFileProvider=l,this.readOnlyTempFileProvider=c,this.acceptOrRejectDiffs=u,this.getCurrentSelection=p,this.isVisible=d,this.makeVisible=h,this.panelTab=m,this.checkAndUpdateReviewUpsellBanner(),this.checkAndUpdateYearEndPromo(),s(e=>{this.send({type:"request",channelId:"",requestId:"",request:{type:"insert_at_mention",text:e}}),this.panelTab&&this.panelTab.reveal()}),n(e=>{this.send({type:"request",channelId:"",requestId:"",request:{type:"selection_changed",selection:e}})}),setTimeout(()=>{this.notifyVisibilityChange(this.isVisible())},100)}sendQueue=Promise.resolve();speechToTextChannels=new Map;chromeMcpClient;notifyVisibilityChange(e){this.send({type:"request",channelId:"",requestId:"",request:{type:"visibility_changed",isVisible:e}}),e&&(this.checkAndUpdateReviewUpsellBanner(),this.checkAndUpdateYearEndPromo())}notifyFontConfigurationChange(e){this.send({type:"request",channelId:"",requestId:"",request:{type:"font_configuration_changed",fontConfig:e}})}notifyCreateNewConversation(){this.send({type:"request",channelId:"",requestId:"",request:{type:"create_new_conversation"}})}send(e){this.sendQueue=this.sendQueue.then(()=>this.webview.postMessage({type:"from-extension",message:e}).then(()=>{})),this.checkAndUpdateReviewUpsellBanner()}async processRequest(e,t){if("get_current_selection"===e.request.type)return{type:"get_current_selection_response",selection:this.getCurrentSelection()};if("new_conversation_tab"===e.request.type)return await he.commands.executeCommand("claude-vscode.editor.open",e.request.sessionId,e.request.initialPrompt),{type:"new_conversation_tab_response"};if("rename_tab"===e.request.type){if(this.panelTab){let t;this.panelTab.title=e.request.title,t=e.request.hasPendingPermissions?"claude-logo-pending.svg":e.request.hasUnseenCompletion?"claude-logo-done.svg":"claude-logo.svg",this.panelTab.iconPath=he.Uri.file((0,kr.join)(this.context.extensionPath,"resources",t))}return{type:"rename_tab_response"}}if("show_notification"===e.request.type){let t,{message:r,severity:a,buttons:i,onlyIfNotVisible:s}=e.request;if(s&&this.isVisible())return{type:"show_notification_response"};switch(a){case"error":t=await he.window.showErrorMessage(r,...i||[]);break;case"warning":t=await he.window.showWarningMessage(r,...i||[]);break;default:t=await he.window.showInformationMessage(r,...i||[])}return t&&this.makeVisible(),{type:"show_notification_response",buttonValue:t}}return super.processRequest(e,t)}spawnClaude(e,t,r,a,i,s,n,o,l){hY();let c=new Vu(io(this.output)),u={cwd:i||this.cwd,resume:t,canUseTool:r,permissionMode:s,allowDangerouslySkipPermissions:n,model:null===a?"default":a,stderr:e=>{e.includes("An update to our Consumer Terms and Privacy Policy")&&he.window.showErrorMessage("An update to our Consumer Terms and Privacy Policy has taken effect on October 8, 2025. You must run claude in the terminal to review the updated terms.","Resolve in Terminal").then(e=>{"Resolve in Terminal"===e&&this.openClaudeInTerminal()}),this.output.info(`From claude: ${e}`)},systemPrompt:{type:"preset",preset:"claude_code",append:pY},enableFileCheckpointing:!0,maxThinkingTokens:o,includePartialMessages:!0,hooks:{PreToolUse:[{matcher:"Edit|Write|MultiEdit",hooks:[e=>c.captureBaseline(e)]},{matcher:"Edit|Write|Read",hooks:[e=>this.saveFileIfNeeded(e)]}],PostToolUse:[{matcher:"Edit|Write|MultiEdit",hooks:[e=>c.findDiagnosticsProblems(e)]}]},settingSources:["user","project","local"],extraArgs:{debug:null,"debug-to-stderr":null,"enable-auth-status":null},mcpServers:l},{pathToClaudeCodeExecutable:p,executableArgs:d,env:h}=this.getClaudeBinary();return u.pathToClaudeCodeExecutable=p,u.executableArgs=d,u.env=h,this.output.info(`Spawning Claude with SDK query function - cwd: ${u.cwd}, permission mode: ${s}, version: 2.0.75, ${u.pathToClaudeCodeExecutable}, resume: ${t}`),_u({prompt:e,options:u})}getClaudeBinary(){let e,t=[];{let t=mY(this.context);t&&(e=t)}let r=!1;if(!e){let t=this.context.asAbsolutePath((0,kr.join)("resources","claude-code","cli.js"));if(!Rr.existsSync(t))throw new Error(`Unsupported platform: ${process.platform}-${process.arch}. No compatible Claude Code binary found.`);gY(),r=!0,e=t}let a=mr("claudeProcessWrapper");return a&&(t=[e],r&&t.unshift("node"),e=a),{pathToClaudeCodeExecutable:e,executableArgs:t,env:pp()}}getChromeMcpServerConfig(){throw new Error("Not supported")}async onExperimentGatesUpdated(e){this.experimentGates=e,this.context.globalState.update("experimentGates",e),await this.checkAndUpdateReviewUpsellBanner()}claudeLaunched(e){let t={appName:he.env.appName,version:he.version};this.logEvent(e,"claude_launched",{ide:t})}async openFile(e,t){let r=(0,kr.isAbsolute)(e)?e:(0,kr.join)(this.cwd,e);if(!Rr.existsSync(r)&&!(0,kr.isAbsolute)(e)){let t=await Eh(e);t.length>0&&(r=(0,kr.join)(this.cwd,t[0].path))}let a=he.Uri.file(r);Rr.existsSync(r)&&Rr.statSync(r).isDirectory()?he.commands.executeCommand("revealInExplorer",a):he.window.showTextDocument(a).then(e=>{if(t?.searchText){let r=e.document,a=r.getText().indexOf(t.searchText);if(-1!==a){let i=r.positionAt(a),s=r.positionAt(a+t.searchText.length),n=new he.Range(i,s);e.revealRange(n,he.TextEditorRevealType.InCenter),e.selection=new he.Selection(i,s)}}else if(t){let r=new he.Range(new he.Position((t.startLine||1)-1,0),new he.Position((t.endLine||t.startLine||1)-1,0));e.revealRange(r,he.TextEditorRevealType.InCenter),e.selection=new he.Selection(r.start,r.end)}})}openConfigFile(e){let t,r=(0,kr.join)(process.env.CLAUDE_CONFIG_DIR||(0,J$.homedir)(),".claude.json");switch(e){case"mcp-local":case"mcp-user":default:t=r;break;case"mcp-project":t=(0,kr.join)(this.cwd,".mcp.json")}Rr.existsSync(t)||Rr.writeFileSync(t,'{\n  "mcpServers": {}\n}\n',"utf-8");let a=he.Uri.file(t);he.workspace.openTextDocument(a).then(e=>{he.window.showTextDocument(e,{preview:!1})},e=>{this.output.error(`Failed to open config file ${t}: ${e}`)})}async openContent(e,t,r,a){return{type:"open_content_response",updatedContent:await QT(this.output,this.readOnlyTempFileProvider,this.rightTempFileProvider,e,t,r,a)}}async openDiff(e,t,r,a,i){return{type:"open_diff_response",newEdits:await mC(this.output,this.leftTempFileProvider,this.rightTempFileProvider,e,t,r,a,this.acceptOrRejectDiffs,i)}}async openURL(e){await he.env.openExternal(he.Uri.parse(e))}async openClaudeInTerminal(e,t,r){await he.commands.executeCommand("claude-vscode.terminal.open",e,t,r)}async openTerminal(e,t=[],r,a,i){let s,n,o={...process.env},l="beside"===a||void 0===a?{viewColumn:he.ViewColumn.Beside}:"window"===a?{viewColumn:he.ViewColumn.One}:void 0,c=he.window.createTerminal({name:"Claude Code",iconPath:he.Uri.file((0,kr.join)(this.context.extensionPath,"resources","claude-logo.svg")),cwd:r||this.cwd,location:l,isTransient:!0,env:o,strictEnv:!0}),u=[e,...t];c.show(),await new Promise(e=>{let t=!1;s=he.window.onDidChangeTerminalShellIntegration(r=>{r.terminal===c&&!t&&(t=!0,n=he.window.onDidStartTerminalShellExecution(t=>{t.terminal===c&&e()}),r.shellIntegration.executeCommand((0,ay.quote)(u)))}),setTimeout(()=>{!c.shellIntegration&&!t&&(t=!0,c.sendText((0,ay.quote)(u)),e())},3e3)}).finally(()=>{s?.dispose(),n?.dispose()}),"window"===a&&await he.commands.executeCommand("workbench.action.moveEditorToNewWindow")}async showClaudeTerminalSetting(){await he.commands.executeCommand("workbench.action.focusFirstEditorGroup"),await he.commands.executeCommand("workbench.action.openSettings","claudeCode.useTerminal")}async dismissTerminalBanner(){this.showTerminalBanner=!1,await this.context.globalState.update("showTerminalBanner",!1)}async dismissReviewUpsellBanner(e){this.context.globalState.update("reviewUpsellDismissedMetadata",e),this.showReviewUpsellBanner=!1,await this.pushStateUpdate()}async dismissYearEndPromo(){this.context.globalState.update("yearEndPromoDismissed",!0),this.showYearEndPromo=!1,await this.pushStateUpdate()}async checkAndUpdateYearEndPromo(){try{if(void 0!==this.showYearEndPromo||!this.experimentGates.tengu_year_end_2025_campaign_promo)return;if(this.context.globalState.get("yearEndPromoDismissed"))return this.showYearEndPromo=!1,void await this.pushStateUpdate();let e=this.context.globalState.get("yearEndPromoViewCount")??0;this.yearEndPromoViewCount=e+1,await this.context.globalState.update("yearEndPromoViewCount",this.yearEndPromoViewCount),this.showYearEndPromo=!0,await this.pushStateUpdate()}catch(e){this.output.warn(`Failed to check year-end promo: ${e}`)}}async checkAndUpdateReviewUpsellBanner(){try{if(void 0!==this.showReviewUpsellBanner||!this.experimentGates.tengu_vscode_review_upsell)return;if(void 0!==this.context.globalState.get("reviewUpsellDismissedMetadata"))return this.showReviewUpsellBanner=!1,void await this.pushStateUpdate();if(CO(this.context.globalState.get("reviewUpsellLastShownTimestamp")))return this.showReviewUpsellBanner=!1,void await this.pushStateUpdate();let e=PO();e&&!0!==this.showReviewUpsellBanner&&(this.showReviewUpsellBanner=e,e&&this.context.globalState.update("reviewUpsellLastShownTimestamp",Date.now()),await this.pushStateUpdate())}catch(e){this.output.warn(`Failed to check review upsell banner: ${e}`)}}async openConfig(e){await he.commands.executeCommand("workbench.action.focusFirstEditorGroup"),await he.commands.executeCommand("workbench.action.openSettings",e||"claudeCode")}async openHelp(){let e=he.Uri.parse("https://code.claude.com/docs/en/vs-code");await he.env.openExternal(e)}async openOutputPanel(){this.output.show()}isSpeechToTextEnabled(){return"true"===process.env.CLAUDE_SPEECH_TO_TEXT&&void 0!==he.extensions.getExtension("ms-vscode.vscode-speech")}async handleStartSpeechToText(e){if(this.output.info(`Starting speech-to-text on channel: ${e}`),this.speechToTextChannels.has(e))throw new Error(`Speech-to-text channel already exists: ${e}`);try{let{iterator:t,abort:r}=await this.createSpeechToTextStream();this.speechToTextChannels.set(e,{abort:r}),(async()=>{try{for await(let r of t)this.send({type:"speech_to_text_message",channelId:e,text:r,done:!1});this.closeSpeechToTextChannel(e,!0)}catch(t){this.closeSpeechToTextChannel(e,!0,String(t)),this.output.error(`Error from speech-to-text (on channel ${e}): ${t}`)}})()}catch(t){this.closeSpeechToTextChannel(e,!0,String(t)),this.output.error(`Error starting speech-to-text (on channel ${e}): ${t}`)}}async handleStopSpeechToText(e){let t=this.speechToTextChannels.get(e);if(t)try{t.abort(),this.output.info(`Stopped speech-to-text for channel: ${e}`)}catch(e){this.output.error(`Failed to stop speech-to-text: ${e}`)}else this.output.warn(`Speech-to-text channel not found: ${e}`)}closeSpeechToTextChannel(e,t,r){this.output.info(`Closing speech-to-text on channel: ${e}`),t&&this.send({type:"close_channel",channelId:e,error:r}),this.speechToTextChannels.delete(e)}async createSpeechToTextStream(){let e=he.extensions.getExtension("ms-vscode.vscode-speech");if(!e)throw new Error("Speech extension not found. Please install ms-vscode.vscode-speech");e.isActive||await e.activate();let t=await he.workspace.openTextDocument({content:"",language:"plaintext"});await he.window.showTextDocument(t,{preview:!0,preserveFocus:!1});let r=!1,a="",i=[],s=null,n=he.workspace.onDidChangeTextDocument(e=>{if(e.document===t&&e.contentChanges.length>0){let e=t.getText();this.output.info(`Speech document changed. Current text length: ${e.length}, Last text length: ${a.length}`),e!==a&&(a=e,i.push(e),this.output.info(`Enqueued speech text: "${e}"`),s&&(s(),s=null))}});return await he.commands.executeCommand("workbench.action.editorDictation.start"),this.panelTab?this.panelTab.reveal():await he.commands.executeCommand("claudeVSCodeSidebar.focus"),{iterator:async function*(){try{for(;!r;)i.length>0?yield i.shift():await new Promise(e=>{s=e,setTimeout(()=>{s===e&&(s=null,e())},100)})}finally{n.dispose(),he.commands.executeCommand("workbench.action.revertAndCloseActiveEditor")}}(),abort:()=>{r=!0,he.commands.executeCommand("workbench.action.editorDictation.stop"),n.dispose(),he.commands.executeCommand("workbench.action.revertAndCloseActiveEditor"),s&&(s(),s=null)}}}getAssetUris(){let e=Lw(),t=e=>this.webview.asWebviewUri(he.Uri.file(this.context.asAbsolutePath(e))).toString();for(let r of Object.keys(e))e[r]={light:t(e[r].light),dark:t(e[r].dark)};return e}async findFiles(e){let t=e?.toLowerCase()??"";if("true"===process.env.AT_MENTION_TERMINAL&&t.startsWith("terminal:"))return this.getMatchingTerminals(e);let r=t&&"browser:".startsWith(t),a=t&&"terminal:".startsWith(t),i=[];"true"===process.env.AT_MENTION_TERMINAL&&(i=this.getMatchingTerminals(e));let s,n=[],o=he.workspace.workspaceFolders;if(!o||0===o.length)return[...i,...n];try{s=await BT(e,this.cwd,io(this.output))}catch(t){this.output.warn(`Ripgrep search failed, falling back to VSCode findFiles: ${t}`),s=await Eh(e)}return r?[...n,...i,...s]:a?[...i,...n,...s]:[...s,...i,...n]}getMatchingTerminals(e){let t=e?.toLowerCase()??"";return he.window.terminals.filter(r=>{let a=r.name.replace(/ /g,"_");return!e||`terminal:${a}`.toLowerCase().includes(t)}).map(e=>{let t=e.name.replace(/ /g,"_");return{path:`terminal:${t}`,name:`terminal:${t}`,type:"terminal"}})}async getMatchingBrowserTabs(e){return[]}async disableChromeMcp(e){return this.chromeMcpClient&&await this.chromeMcpClient.disconnect(),super.disableChromeMcp(e)}async createNewBrowserTab(){throw new Error("Browser integration is not enabled")}getMarketplaceType(){let e=he.env.appName.toLowerCase();return e.includes("vscodium")||e.includes("gitpod")||e.includes("code - oss")||e.includes("cursor")?"openvsx":"vscode"}isBrowserIntegrationSupported(){return!1}async getTerminalContents(e){let t=he.window.terminals.find(t=>t.name.replace(/ /g,"_")===e);if(!t)return null;let r=await he.env.clipboard.readText();try{t.show(),await he.commands.executeCommand("workbench.action.terminal.selectAll"),await he.commands.executeCommand("workbench.action.terminal.copySelection"),await he.commands.executeCommand("workbench.action.terminal.clearSelection");let e=await he.env.clipboard.readText(),a=100,i=e.split("\n");return i.length>a&&(e=i.slice(-a).join("\n")),await he.env.clipboard.writeText(r),e}catch(e){return await he.env.clipboard.writeText(r),this.output.error(`Failed to get terminal contents: ${e}`),null}}async saveFileIfNeeded(e){if(!mr("autosave"))return{continue:!0};if("PreToolUse"!==e.hook_event_name)return{continue:!0};if("Edit"!==e.tool_name&&"Write"!==e.tool_name&&"Read"!==e.tool_name)return{continue:!0};let t=e.tool_input?.file_path,r=Bu(t);try{let e=await he.workspace.openTextDocument(r);e.isDirty&&await e.save()}catch{}return{continue:!0}}async shutdown(){await super.shutdown()}};function io(e){return{log:(t,...r)=>e.info(t,...r),warn:(t,...r)=>e.warn(t,...r),error:(t,...r)=>e.error(t,...r)}}function fY(){if("linux"!==process.platform)return!1;try{if(Rr.existsSync("/lib/libc.musl-x86_64.so.1")||Rr.existsSync("/lib/libc.musl-aarch64.so.1"))return!0;let e=Ar("ldd /bin/ls 2>/dev/null",{env:process.env,maxBuffer:1e6,timeout:2e4,stdio:["ignore","pipe","pipe"],shell:!0,reject:!1});return e.stdout&&e.stdout.includes("musl")}catch{return!1}}function mY(e){let t="win32"===process.platform?"claude.exe":"claude",r=fY()?`${process.arch}-musl`:process.arch,a=e.asAbsolutePath((0,kr.join)("resources","native-binaries",`${process.platform}-${r}`,t));if(Rr.existsSync(a))return a;if("win32"===process.platform&&"arm64"===process.arch){let r=e.asAbsolutePath((0,kr.join)("resources","native-binaries","win32-x64",t));if(Rr.existsSync(r))return r}let i=e.asAbsolutePath((0,kr.join)("resources","native-binary",t));return Rr.existsSync(i)?i:void 0}function hY(){if("win32"===process.platform)try{Ar("where.exe",["git"],{stdio:"pipe",encoding:"utf8"})}catch{throw new Error("Claude Code on Windows requires git-bash (https://git-scm.com/downloads/win). If installed but not in PATH, set environment variable pointing to your bash.exe, similar to: CLAUDE_CODE_GIT_BASH_PATH=C:\\Program Files\\Git\\bin\\bash.exe")}}function gY(){try{let e=Ar("win32"===process.platform?"node.exe":"node",["--version"],{stdio:"pipe",encoding:"utf8"}).stdout.trim();if(!K$.default.gte(e,"18.0.0"))throw new Error(`Claude Code requires Node.js version 18 or higher. Found version ${e}.`)}catch(e){throw e instanceof Error&&e.message.includes("requires Node.js")?e:new Error("Claude Code requires Node.js version 18 or higher to be installed.")}}function pp(){let e=mr("environmentVariables")||[],t={...process.env};for(let r of e)r.name&&(t[r.name]=r.value||"");return t.CLAUDE_CODE_ENTRYPOINT="claude-vscode",t}var fp=class{constructor(e,t,r,a,i,s,n,o,l,c,u){this.extensionUri=e,this.context=t,this.output=r,this.settings=a,this.leftTempFileProvider=i,this.rightTempFileProvider=s,this.readOnlyTempFileProvider=n,this.acceptOrRejectDiffs=o,this.atMentionEvents=l,this.selectionChangedEvents=c,this.getSelection=u}disposables=[];allComms=new Set;webviews=new Set;hasVisibleWebview(){for(let e of this.webviews)if(e.isVisible())return!0;return!1}resolveWebviewView(e,t,r){let a={isVisible:()=>e.visible};this.webviews.add(a),e.webview.options={enableScripts:!0,localResourceRoots:[ut.Uri.joinPath(this.extensionUri,"webview"),ut.Uri.joinPath(this.extensionUri,"resources")]},e.webview.html=this.getHtmlForWebview(e.webview,void 0,void 0),e.show(!0);let i=(ut.workspace.workspaceFolders?.map(e=>e.uri.fsPath)||[])[0]||iy.homedir(),s=new Gc(this.context,i,this.settings,e.webview,this.output,this.atMentionEvents,this.selectionChangedEvents,this.leftTempFileProvider,this.rightTempFileProvider,this.readOnlyTempFileProvider,this.acceptOrRejectDiffs,this.getSelection,()=>e.visible,()=>e.show(),void 0);this.allComms.add(s),e.webview.onDidReceiveMessage(e=>{this.output.info(`Received message from webview: ${JSON.stringify(e)}`),s?.fromClient(e)},null,this.disposables),e.onDidDispose(()=>{s.shutdown(),this.allComms.delete(s),this.webviews.delete(a),this.updateSidebarActiveState()},null,this.disposables),e.onDidChangeVisibility(()=>{this.updateSidebarActiveState()},null,this.disposables),this.updateSidebarActiveState(),e.show(!0)}updateSidebarActiveState(){ut.commands.executeCommand("setContext","claude-vscode.sideBarActive",this.hasVisibleWebview())}dispose(){for(;this.disposables.length;){let e=this.disposables.pop();e&&e.dispose()}}async notifyLogout(){for(let e of this.allComms)e.pushStateUpdate()}notifyCreateNewConversation(){for(let e of this.allComms)e.notifyCreateNewConversation()}notifyFontConfigurationChange(){let e=ut.workspace.getConfiguration("chat.editor"),t=e.get("fontFamily")||"default";"default"===t&&(t="monospace");let r=e.get("fontSize")||12,a=e.get("fontWeight")||"normal",i=ut.workspace.getConfiguration("chat"),s=i.get("fontSize")||13,n=i.get("fontFamily")||"default";"default"===n&&(n="-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif");for(let e of this.allComms)e.notifyFontConfigurationChange({editorFontFamily:t,editorFontSize:r,editorFontWeight:a,chatFontSize:s,chatFontFamily:n})}createPanel(e,t){let r=!1,a=ut.ViewColumn.Beside,i=ut.window.tabGroups.all.find(e=>0!==e.tabs.length&&e.tabs.every(e=>e.input instanceof ut.TabInputWebview&&e.input.viewType.includes("claudeVSCodePanel")));i&&i.viewColumn?a=i.viewColumn:(a=this.findUnusedColumn(),r=!0);let s=ut.window.createWebviewPanel("claudeVSCodePanel","Claude Code",a,{enableScripts:!0,retainContextWhenHidden:!0,enableFindWidget:!0,localResourceRoots:[ut.Uri.joinPath(this.extensionUri,"webview"),ut.Uri.joinPath(this.extensionUri,"resources")]});return this.setupPanel(s,e,t),{startedInNewColumn:r}}findUnusedColumn(){let e=new Set;ut.window.tabGroups.all.forEach(t=>{void 0!==t.viewColumn&&e.add(t.viewColumn)});for(let t=ut.ViewColumn.One;t<=ut.ViewColumn.Nine;t++)if(!e.has(t))return t;return ut.ViewColumn.Beside}setupPanel(e,t,r){let a={isVisible:()=>e.visible};this.webviews.add(a);let i=(ut.workspace.workspaceFolders?.map(e=>e.uri.fsPath)||[])[0]||iy.homedir();e.iconPath=ut.Uri.file(X$.join(this.context.extensionPath,"resources","claude-logo.svg")),e.webview.options={enableScripts:!0,localResourceRoots:[ut.Uri.joinPath(this.extensionUri,"webview"),ut.Uri.joinPath(this.extensionUri,"resources")]},e.webview.html=this.getHtmlForWebview(e.webview,t,r);let s=new Gc(this.context,i,this.settings,e.webview,this.output,this.atMentionEvents,this.selectionChangedEvents,this.leftTempFileProvider,this.rightTempFileProvider,this.readOnlyTempFileProvider,this.acceptOrRejectDiffs,this.getSelection,()=>e.visible,()=>e.reveal(),e);this.allComms.add(s),e.webview.onDidReceiveMessage(e=>{this.output.info(`Received message from webview: ${JSON.stringify(e)}`),s?.fromClient(e)},null,this.disposables),e.onDidChangeViewState(()=>s.notifyVisibilityChange(e.visible),null,this.disposables),e.onDidDispose(()=>{s.shutdown(),this.allComms.delete(s),this.webviews.delete(a)},null,this.disposables),this.disposables.push(e)}getHtmlForWebview(e,t,r){let a=ut.Uri.joinPath(this.extensionUri,"webview","index.js"),i=e.asWebviewUri(a),s=ut.Uri.joinPath(this.extensionUri,"webview","index.css"),n=e.asWebviewUri(s),o=vs(),l=`style-src ${e.cspSource} 'unsafe-inline'`,c=`font-src ${e.cspSource}`,u=`img-src ${e.cspSource} data:`,p=`worker-src ${e.cspSource}`,d=ut.workspace.getConfiguration("chat.editor"),h=d.get("fontFamily")||"default";"default"===h&&(h="monospace");let m=d.get("fontSize")||12,f=d.get("fontWeight")||"normal",v=ut.workspace.getConfiguration("chat"),g=v.get("fontSize")||13,y=v.get("fontFamily")||"default";return"default"===y&&(y="-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif"),`<!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n\n        \x3c!--\n          Use a content security policy to only allow loading images from our extension directory or data URIs,\n          and only allow scripts that have a specific nonce.\n          Note: External https: URLs are blocked to prevent data exfiltration via markdown image URLs.\n        --\x3e\n        <meta http-equiv="Content-Security-Policy" content="default-src 'none'; ${l}; ${c}; ${u}; script-src 'nonce-${o}'; ${p};">\n\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <link href="${n}" rel="stylesheet">\n        <style>\n          :root {\n            --vscode-editor-font-family: ${h} !important;\n            --vscode-editor-font-size: ${m}px !important;\n            --vscode-editor-font-weight: ${f} !important;\n            --vscode-chat-font-size: ${g}px;\n            --vscode-chat-font-family: ${y};\n          }\n        </style>\n      </head>\n      <body>\n        <pre id="claude-error"></pre>\n        <div id="root"></div>\n        <script nonce="${o}">\n          window.initialConfiguration = {\n            initialPrompt: ${r?JSON.stringify(r):"undefined"},\n            initialSession: ${t?JSON.stringify(t):"undefined"},\n          }\n        <\/script>\n        <script nonce="${o}" src="${i}" type="module"><\/script>\n      </body>\n      </html>`}},mp=le(require("vscode"),1),vY=le(Hf(),1),Y$=le(require("child_process"),1),Q$=require("util"),Mme=(0,Q$.promisify)(Y$.execFile),Vt=le(require("vscode"),1);function oy(e){return e.includes("\\")?e.startsWith("\\\\")?"/"+e.substring(2).replace(/\\/g,"/"):(/^[a-zA-Z]:/.test(e)&&(e=e.replace(/^([a-zA-Z]):/,(e,t)=>"/"+t.toLowerCase()+":")),e.replace(/\\/g,"/")):e}var cy=class{constructor(e,t){this.uri=e,this.contents=t,this.ctime=this.modifiedTime=Date.now()}type=Vt.FileType.File;ctime;modifiedTime;get mtime(){return this.modifiedTime}get size(){return this.data.length}get data(){return this.contents}write(e){this.modifiedTime=Date.now(),this.contents=e,this.emitter.fire()}emitter=new Vt.EventEmitter;onDidSave=this.emitter.event},Wc=class{constructor(e){this.scheme=e}documents=new Map;createFile(e,t){let r=e;"win32"===process.platform&&(r=oy(e));let a=Vt.Uri.from({scheme:this.scheme,path:r}),i=this.documents.get(a.path);return i?(this.writeFile(a,(new TextEncoder).encode(t)),i):(i=new cy(a,(new TextEncoder).encode(t)),this.documents.set(a.path,i),i)}emitter=new Vt.EventEmitter;onDidChangeFile=this.emitter.event;watch(e){return new Vt.Disposable(()=>{})}stat(e){return this.find(e)}find(e){let t=e.path;"win32"===process.platform&&(t=oy(e.path));let r=this.documents.get(t);if(!r)throw Vt.FileSystemError.FileNotFound(e);return r}readDirectory(e){throw Vt.FileSystemError.FileNotFound(e)}readFile(e){let t=this.find(e).data;if(t)return t;throw Vt.FileSystemError.FileNotFound(e)}writeFile(e,t){this.find(e).write(t),this.emitter.fire([{type:Vt.FileChangeType.Changed,uri:e}])}createDirectory(e){throw Vt.FileSystemError.Unavailable()}delete(e){throw Vt.FileSystemError.Unavailable()}rename(e,t,r){throw Vt.FileSystemError.Unavailable()}},hp=class{constructor(e){this.scheme=e}documents=new Map;onDidChangeEmitter=new Vt.EventEmitter;onDidChange=this.onDidChangeEmitter.event;createFile(e,t){let r=e;"win32"===process.platform&&(r=oy(e));let a=Vt.Uri.from({scheme:this.scheme,path:r});return this.addDocument(a,t),a}provideTextDocumentContent(e){return this.documents.get(e.toString())||""}addDocument(e,t){this.documents.set(e.toString(),t),this.onDidChangeEmitter.fire(e)}},ms=le(require("vscode"),1),Yt=le(require("vscode"),1);function eA(e){return e.includes("\\")?e.startsWith("\\\\")?"/"+e.substring(2).replace(/\\/g,"/"):(/^[a-zA-Z]:/.test(e)&&(e=e.replace(/^([a-zA-Z]):/,(e,t)=>"/"+t.toLowerCase()+":")),e.replace(/\\/g,"/")):e}var ly=class{constructor(e,t){this.uri=e,this.contents=t,this.ctime=this.modifiedTime=Date.now()}type=Yt.FileType.File;ctime;modifiedTime;get mtime(){return this.modifiedTime}get size(){return this.data.length}get data(){return this.contents}write(e){this.modifiedTime=Date.now(),this.contents=e,this.emitter.fire()}emitter=new Yt.EventEmitter;onDidSave=this.emitter.event},Kc=class{constructor(e){this.scheme=e}documents=new Map;createFile(e,t){let r=e;"win32"===process.platform&&(r=eA(e));let a=Yt.Uri.from({scheme:this.scheme,path:r}),i=this.documents.get(a.path);return i?(this.writeFile(a,(new TextEncoder).encode(t)),i):(i=new ly(a,(new TextEncoder).encode(t)),this.documents.set(a.path,i),i)}emitter=new Yt.EventEmitter;onDidChangeFile=this.emitter.event;watch(e){return new Yt.Disposable(()=>{})}stat(e){return this.find(e)}find(e){let t=e.path;"win32"===process.platform&&(t=eA(e.path));let r=this.documents.get(t);if(!r)throw Yt.FileSystemError.FileNotFound(e);return r}readDirectory(e){throw Yt.FileSystemError.FileNotFound(e)}readFile(e){let t=this.find(e).data;if(t)return t;throw Yt.FileSystemError.FileNotFound(e)}writeFile(e,t){this.find(e).write(t),this.emitter.fire([{type:Yt.FileChangeType.Changed,uri:e}])}createDirectory(e){throw Yt.FileSystemError.Unavailable()}delete(e){throw Yt.FileSystemError.Unavailable()}rename(e,t,r){throw Yt.FileSystemError.Unavailable()}},Or=le(require("vscode"),1),cN=require("crypto"),tA=le(sy(),1),gp=class extends ao{constructor(e,t){var r;super(t),this._serverInfo=e,this._capabilities=null!==(r=t?.capabilities)&&void 0!==r?r:{},this._instructions=t?.instructions,this.setRequestHandler(vv,e=>this._oninitialize(e)),this.setNotificationHandler(bv,()=>{var e;return null===(e=this.oninitialized)||void 0===e?void 0:e.call(this)})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Hd(this._capabilities,e)}assertCapabilityForMethod(e){var t,r,a;switch(e){case"sampling/createMessage":if(null===(t=this._clientCapabilities)||void 0===t||!t.sampling)throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(null===(r=this._clientCapabilities)||void 0===r||!r.elicitation)throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(null===(a=this._clientCapabilities)||void 0===a||!a.roots)throw new Error(`Client does not support listing roots (required for ${e})`)}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`)}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`)}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Pd.includes(t)?t:qc,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},cs)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Ov,t)}async elicitInput(e,t){let r=await this.request({method:"elicitation/create",params:e},Iv,t);if("accept"===r.action&&r.content)try{let t=new tA.default,a=t.compile(e.requestedSchema);if(!a(r.content))throw new ot(lt.InvalidParams,`Elicitation response content does not match requested schema: ${t.errorsText(a.errors)}`)}catch(e){throw e instanceof ot?e:new ot(lt.InternalError,`Error validating elicitation response: ${e}`)}return r}async listRoots(e,t){return this.request({method:"roots/list",params:e},Av,t)}async sendLoggingMessage(e){return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}},nA=Symbol("Let zodToJsonSchema decide on which parser to use"),rA={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},sA=e=>"string"==typeof e?{...rA,name:e}:{...rA,...e},aA=e=>{let t=sA(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function uy(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function Je(e,t,r,a,i){e[t]=r,uy(e,t,a,i)}function iA(){return{}}function oA(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==se.ZodAny&&(r.items=Ne(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Je(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Je(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Je(r,"minItems",e.exactLength.value,e.exactLength.message,t),Je(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function cA(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?Je(r,"minimum",a.value,a.message,t):Je(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),Je(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?Je(r,"maximum",a.value,a.message,t):Je(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),Je(r,"maximum",a.value,a.message,t));break;case"multipleOf":Je(r,"multipleOf",a.value,a.message,t)}return r}function lA(){return{type:"boolean"}}function vp(e,t){return Ne(e.type._def,t)}var uA=(e,t)=>Ne(e.innerType._def,t);function dy(e,t,r){let a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((r,a)=>dy(e,t,r))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return yY(e,t)}}var yY=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let a of e.checks)switch(a.kind){case"min":Je(r,"minimum",a.value,a.message,t);break;case"max":Je(r,"maximum",a.value,a.message,t)}return r};function dA(e,t){return{...Ne(e.innerType._def,t),default:e.defaultValue()}}function pA(e,t){return"input"===t.effectStrategy?Ne(e.schema._def,t):{}}function fA(e){return{type:"string",enum:Array.from(e.values)}}var bY=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function mA(e,t){let r=[Ne(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Ne(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(e=>{if(bY(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else a=void 0;i.push(t)}}),i.length?{allOf:i,...a}:void 0}function hA(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}var py,_n={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===py&&(py=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),py),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function yp(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":Je(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":Je(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":xn(r,"email",a.message,t);break;case"format:idn-email":xn(r,"idn-email",a.message,t);break;case"pattern:zod":hr(r,_n.email,a.message,t)}break;case"url":xn(r,"uri",a.message,t);break;case"uuid":xn(r,"uuid",a.message,t);break;case"regex":hr(r,a.regex,a.message,t);break;case"cuid":hr(r,_n.cuid,a.message,t);break;case"cuid2":hr(r,_n.cuid2,a.message,t);break;case"startsWith":hr(r,RegExp(`^${fy(a.value,t)}`),a.message,t);break;case"endsWith":hr(r,RegExp(`${fy(a.value,t)}$`),a.message,t);break;case"datetime":xn(r,"date-time",a.message,t);break;case"date":xn(r,"date",a.message,t);break;case"time":xn(r,"time",a.message,t);break;case"duration":xn(r,"duration",a.message,t);break;case"length":Je(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),Je(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":hr(r,RegExp(fy(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&xn(r,"ipv4",a.message,t),"v4"!==a.version&&xn(r,"ipv6",a.message,t);break;case"base64url":hr(r,_n.base64url,a.message,t);break;case"jwt":hr(r,_n.jwt,a.message,t);break;case"cidr":"v6"!==a.version&&hr(r,_n.ipv4Cidr,a.message,t),"v4"!==a.version&&hr(r,_n.ipv6Cidr,a.message,t);break;case"emoji":hr(r,_n.emoji(),a.message,t);break;case"ulid":hr(r,_n.ulid,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":xn(r,"binary",a.message,t);break;case"contentEncoding:base64":Je(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":hr(r,_n.base64,a.message,t)}break;case"nanoid":hr(r,_n.nanoid,a.message,t)}return r}function fy(e,t){return"escape"===t.patternStrategy?xY(e):e}var _Y=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function xY(e){let t="";for(let r=0;r<e.length;r++)_Y.has(e[r])||(t+="\\"),t+=e[r];return t}function xn(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):Je(e,"format",t,r,a)}function hr(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:gA(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):Je(e,"pattern",gA(t,a),r,a)}function gA(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r=e.flags.includes("i"),a=e.flags.includes("m"),i=e.flags.includes("s"),s=r?e.source.toLowerCase():e.source,n="",o=!1,l=!1,c=!1;for(let e=0;e<s.length;e++)if(o)n+=s[e],o=!1;else{if(r)if(l){if(s[e].match(/[a-z]/)){c?(n+=s[e],n+=`${s[e-2]}-${s[e]}`.toUpperCase(),c=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(n+=s[e],c=!0):n+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){n+=`[${s[e]}${s[e].toUpperCase()}]`;continue}if(a){if("^"===s[e]){n+="(^|(?<=[\r\n]))";continue}if("$"===s[e]){n+="($|(?=[\r\n]))";continue}}i&&"."===s[e]?n+=l?`${s[e]}\r\n`:`[${s[e]}\r\n]`:(n+=s[e],"\\"===s[e]?o=!0:l&&"]"===s[e]?l=!1:!l&&"["===s[e]&&(l=!0))}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}function bp(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===se.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===se.ZodString&&e.keyType._def.checks?.length){let{type:a,...i}=yp(e.keyType._def,t);return{...r,propertyNames:i}}if(e.keyType?._def.typeName===se.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===se.ZodBranded&&e.keyType._def.type._def.typeName===se.ZodString&&e.keyType._def.type._def.checks?.length){let{type:a,...i}=vp(e.keyType._def,t);return{...r,propertyNames:i}}return r}function vA(e,t){if("record"===t.mapStrategy)return bp(e,t);return{type:"array",maxItems:125,items:{type:"array",items:[Ne(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}function yA(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),a=Array.from(new Set(r.map(e=>typeof e)));return{type:1===a.length?"string"===a[0]?"string":"number":["string","number"],enum:r}}function bA(){return{not:{}}}function _A(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}var Jc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function wA(e,t){if("openApi3"===t.target)return xA(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in Jc&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=Jc[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return xA(e,t)}var xA=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>Ne(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function SA(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:Jc[e.innerType._def.typeName],nullable:!0}:{type:[Jc[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=Ne(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=Ne(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function EA(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",uy(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?Je(r,"minimum",a.value,a.message,t):Je(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),Je(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?Je(r,"maximum",a.value,a.message,t):Je(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),Je(r,"maximum",a.value,a.message,t));break;case"multipleOf":Je(r,"multipleOf",a.value,a.message,t)}return r}function TA(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},i=[],s=e.shape();for(let e in s){let n=s[e];if(void 0===n||void 0===n._def)continue;let o=SY(n);o&&r&&(n instanceof wr&&(n=n._def.innerType),n.isNullable()||(n=n.nullable()),o=!1);let l=Ne(n._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,o||i.push(e))}i.length&&(a.required=i);let n=wY(e,t);return void 0!==n&&(a.additionalProperties=n),a}function wY(e,t){if("ZodNever"!==e.catchall._def.typeName)return Ne(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function SY(e){try{return e.isOptional()}catch{return!0}}var CA=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Ne(e.innerType._def,t);let r=Ne(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},PA=(e,t)=>{if("input"===t.pipeStrategy)return Ne(e.in._def,t);if("output"===t.pipeStrategy)return Ne(e.out._def,t);let r=Ne(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,Ne(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}};function kA(e,t){return Ne(e.type._def,t)}function RA(e,t){let r={type:"array",uniqueItems:!0,items:Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Je(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Je(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function OA(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>Ne(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:Ne(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>Ne(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function IA(){return{not:{}}}function $A(){return{}}var AA=(e,t)=>Ne(e.innerType._def,t),NA=(e,t,r)=>{switch(t){case se.ZodString:return yp(e,r);case se.ZodNumber:return EA(e,r);case se.ZodObject:return TA(e,r);case se.ZodBigInt:return cA(e,r);case se.ZodBoolean:return lA();case se.ZodDate:return dy(e,r);case se.ZodUndefined:return IA();case se.ZodNull:return _A(r);case se.ZodArray:return oA(e,r);case se.ZodUnion:case se.ZodDiscriminatedUnion:return wA(e,r);case se.ZodIntersection:return mA(e,r);case se.ZodTuple:return OA(e,r);case se.ZodRecord:return bp(e,r);case se.ZodLiteral:return hA(e,r);case se.ZodEnum:return fA(e);case se.ZodNativeEnum:return yA(e);case se.ZodNullable:return SA(e,r);case se.ZodOptional:return CA(e,r);case se.ZodMap:return vA(e,r);case se.ZodSet:return RA(e,r);case se.ZodLazy:return()=>e.getter()._def;case se.ZodPromise:return kA(e,r);case se.ZodNaN:case se.ZodNever:return bA();case se.ZodEffects:return pA(e,r);case se.ZodAny:return iA();case se.ZodUnknown:return $A();case se.ZodDefault:return dA(e,r);case se.ZodBranded:return vp(e,r);case se.ZodReadonly:return AA(e,r);case se.ZodCatch:return uA(e,r);case se.ZodPipeline:return PA(e,r);case se.ZodFunction:case se.ZodVoid:case se.ZodSymbol:default:return}};function Ne(e,t,r=!1){let a=t.seen.get(e);if(t.override){let i=t.override?.(e,t,a,r);if(i!==nA)return i}if(a&&!r){let e=EY(a,t);if(void 0!==e)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=NA(e,e.typeName,t),n="function"==typeof s?Ne(s(),t):s;if(n&&CY(e,t,n),t.postProcess){let r=t.postProcess(n,e,t);return i.jsonSchema=n,r}return i.jsonSchema=n,n}var my,EY=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:TY(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},TY=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},CY=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),_p=(e,t)=>{let r=aA(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:Ne(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,i="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,s=Ne(e._def,void 0===i?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},n="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==n&&(s.title=n);let o=void 0===i?a?{...s,[r.definitionPath]:a}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...a,[i]:s}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};(my||(my={})).Completable="McpCompletable";var oo=class extends He{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}};function PY(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:i}=e;if(t&&(r||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var s,n;let{message:o}=e;return"invalid_enum_value"===t.code?{message:o??i.defaultError}:typeof i.data>"u"?{message:null!==(s=o??a)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(n=o??r)&&void 0!==n?n:i.defaultError}},description:i}}oo.create=(e,t)=>new oo({type:e,typeName:my.Completable,complete:t.complete,...PY(t)});var wp=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new gp(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(qd.shape.method.value),this.server.assertCanSetRequestHandler(zd.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(qd,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let r={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?_p(t.inputSchema,{strictUnions:!0}):kY,annotations:t.annotations};return t.outputSchema&&(r.outputSchema=_p(t.outputSchema,{strictUnions:!0})),r})})),this.server.setRequestHandler(zd,async(e,t)=>{let r,a=this._registeredTools[e.params.name];if(!a)throw new ot(lt.InvalidParams,`Tool ${e.params.name} not found`);if(!a.enabled)throw new ot(lt.InvalidParams,`Tool ${e.params.name} disabled`);if(a.inputSchema){let i=await a.inputSchema.safeParseAsync(e.params.arguments);if(!i.success)throw new ot(lt.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${i.error.message}`);let s=i.data,n=a.callback;try{r=await Promise.resolve(n(s,t))}catch(e){r={content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}else{let e=a.callback;try{r=await Promise.resolve(e(t))}catch(e){r={content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}if(a.outputSchema&&!r.isError){if(!r.structuredContent)throw new ot(lt.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let t=await a.outputSchema.safeParseAsync(r.structuredContent);if(!t.success)throw new ot(lt.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${t.error.message}`)}return r}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(Bd.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(Bd,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new ot(lt.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let r=this._registeredPrompts[t.name];if(!r)throw new ot(lt.InvalidParams,`Prompt ${t.name} not found`);if(!r.enabled)throw new ot(lt.InvalidParams,`Prompt ${t.name} disabled`);if(!r.argsSchema)return xp;let a=r.argsSchema.shape[e.params.argument.name];return a instanceof oo?LA(await a._def.complete(e.params.argument.value,e.params.context)):xp}async handleResourceCompletion(e,t){let r=Object.values(this._registeredResourceTemplates).find(e=>e.resourceTemplate.uriTemplate.toString()===t.uri);if(!r){if(this._registeredResources[t.uri])return xp;throw new ot(lt.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let a=r.resourceTemplate.completeCallback(e.params.argument.name);return a?LA(await a(e.params.argument.value,e.params.context)):xp}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Ld.shape.method.value),this.server.assertCanSetRequestHandler(Md.shape.method.value),this.server.assertCanSetRequestHandler(jd.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Ld,async(e,t)=>{let r=Object.entries(this._registeredResources).filter(([e,t])=>t.enabled).map(([e,t])=>({uri:e,name:t.name,...t.metadata})),a=[];for(let e of Object.values(this._registeredResourceTemplates)){if(!e.resourceTemplate.listCallback)continue;let r=await e.resourceTemplate.listCallback(t);for(let t of r.resources)a.push({...e.metadata,...t})}return{resources:[...r,...a]}}),this.server.setRequestHandler(Md,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([e,t])=>({name:e,uriTemplate:t.resourceTemplate.uriTemplate.toString(),...t.metadata}))})),this.server.setRequestHandler(jd,async(e,t)=>{let r=new URL(e.params.uri),a=this._registeredResources[r.toString()];if(a){if(!a.enabled)throw new ot(lt.InvalidParams,`Resource ${r} disabled`);return a.readCallback(r,t)}for(let e of Object.values(this._registeredResourceTemplates)){let a=e.resourceTemplate.uriTemplate.match(r.toString());if(a)return e.readCallback(r,a,t)}throw new ot(lt.InvalidParams,`Resource ${r} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(Fd.shape.method.value),this.server.assertCanSetRequestHandler(Ud.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(Fd,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?OY(t.argsSchema):void 0}))})),this.server.setRequestHandler(Ud,async(e,t)=>{let r=this._registeredPrompts[e.params.name];if(!r)throw new ot(lt.InvalidParams,`Prompt ${e.params.name} not found`);if(!r.enabled)throw new ot(lt.InvalidParams,`Prompt ${e.params.name} disabled`);if(r.argsSchema){let a=await r.argsSchema.safeParseAsync(e.params.arguments);if(!a.success)throw new ot(lt.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${a.error.message}`);let i=a.data,s=r.callback;return await Promise.resolve(s(i,t))}{let e=r.callback;return await Promise.resolve(e(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...r){let a;"object"==typeof r[0]&&(a=r.shift());let i=r[0];if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let r=this._createRegisteredResource(e,void 0,t,a,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let r=this._createRegisteredResourceTemplate(e,void 0,t,a,i);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}}registerResource(e,t,r,a){if("string"==typeof t){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let i=this._createRegisteredResource(e,r.title,t,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let i=this._createRegisteredResourceTemplate(e,r.title,t,r,a);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),i}}_createRegisteredResource(e,t,r,a,i){let s={name:e,title:t,metadata:a,readCallback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({uri:null}),update:e=>{typeof e.uri<"u"&&e.uri!==r&&(delete this._registeredResources[r],e.uri&&(this._registeredResources[e.uri]=s)),typeof e.name<"u"&&(s.name=e.name),typeof e.title<"u"&&(s.title=e.title),typeof e.metadata<"u"&&(s.metadata=e.metadata),typeof e.callback<"u"&&(s.readCallback=e.callback),typeof e.enabled<"u"&&(s.enabled=e.enabled),this.sendResourceListChanged()}};return this._registeredResources[r]=s,s}_createRegisteredResourceTemplate(e,t,r,a,i){let s={resourceTemplate:r,title:t,metadata:a,readCallback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&(delete this._registeredResourceTemplates[e],t.name&&(this._registeredResourceTemplates[t.name]=s)),typeof t.title<"u"&&(s.title=t.title),typeof t.template<"u"&&(s.resourceTemplate=t.template),typeof t.metadata<"u"&&(s.metadata=t.metadata),typeof t.callback<"u"&&(s.readCallback=t.callback),typeof t.enabled<"u"&&(s.enabled=t.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=s,s}_createRegisteredPrompt(e,t,r,a,i){let s={title:t,description:r,argsSchema:void 0===a?void 0:E.object(a),callback:i,enabled:!0,disable:()=>s.update({enabled:!1}),enable:()=>s.update({enabled:!0}),remove:()=>s.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&(delete this._registeredPrompts[e],t.name&&(this._registeredPrompts[t.name]=s)),typeof t.title<"u"&&(s.title=t.title),typeof t.description<"u"&&(s.description=t.description),typeof t.argsSchema<"u"&&(s.argsSchema=E.object(t.argsSchema)),typeof t.callback<"u"&&(s.callback=t.callback),typeof t.enabled<"u"&&(s.enabled=t.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=s,s}_createRegisteredTool(e,t,r,a,i,s,n){let o={title:t,description:r,inputSchema:void 0===a?void 0:E.object(a),outputSchema:void 0===i?void 0:E.object(i),annotations:s,callback:n,enabled:!0,disable:()=>o.update({enabled:!1}),enable:()=>o.update({enabled:!0}),remove:()=>o.update({name:null}),update:t=>{typeof t.name<"u"&&t.name!==e&&(delete this._registeredTools[e],t.name&&(this._registeredTools[t.name]=o)),typeof t.title<"u"&&(o.title=t.title),typeof t.description<"u"&&(o.description=t.description),typeof t.paramsSchema<"u"&&(o.inputSchema=E.object(t.paramsSchema)),typeof t.callback<"u"&&(o.callback=t.callback),typeof t.annotations<"u"&&(o.annotations=t.annotations),typeof t.enabled<"u"&&(o.enabled=t.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=o,this.setToolRequestHandlers(),this.sendToolListChanged(),o}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let r,a,i;if("string"==typeof t[0]&&(r=t.shift()),t.length>1){let e=t[0];DA(e)?(a=t.shift(),t.length>1&&"object"==typeof t[0]&&null!==t[0]&&!DA(t[0])&&(i=t.shift())):"object"==typeof e&&null!==e&&(i=t.shift())}let s=t[0];return this._createRegisteredTool(e,void 0,r,a,undefined,i,s)}registerTool(e,t,r){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:a,description:i,inputSchema:s,outputSchema:n,annotations:o}=t;return this._createRegisteredTool(e,a,i,s,n,o,r)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let r,a;"string"==typeof t[0]&&(r=t.shift()),t.length>1&&(a=t.shift());let i=t[0],s=this._createRegisteredPrompt(e,void 0,r,a,i);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),s}registerPrompt(e,t,r){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:a,description:i,argsSchema:s}=t,n=this._createRegisteredPrompt(e,a,i,s,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),n}isConnected(){return void 0!==this.server.transport}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}},kY={type:"object",properties:{}};function DA(e){return"object"==typeof e&&null!==e&&(0===Object.keys(e).length||Object.values(e).some(RY))}function RY(e){return null!==e&&"object"==typeof e&&"parse"in e&&"function"==typeof e.parse&&"safeParse"in e&&"function"==typeof e.safeParse}function OY(e){return Object.entries(e.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))}function LA(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}var xp={completion:{values:[],hasMore:!1}},lN=le(require("http"),1),Le=le(require("vscode"),1),qs=le(require("path"),1);async function MA(e={}){try{let t=_c(e.uri);return{content:[{type:"text",text:JSON.stringify(t,null,2)}]}}catch(e){throw console.error("Error getting diagnostics through MCP:",e),e}}async function jA({filePath:e,preview:t,startText:r,endText:a,selectToEndOfLine:i,makeFrontmost:s=!0}){try{if(!e)throw new Error("File path is required");let n;if(!qs.isAbsolute(e)&&Le.workspace.workspaceFolders&&Le.workspace.workspaceFolders.length>0){let t=Le.workspace.workspaceFolders[0].uri.fsPath,r=qs.join(t,e);n=Le.Uri.file(r),console.log(`Converted relative path '${e}' to absolute: '${r}'`)}else n=Le.Uri.file(e);try{await Le.workspace.fs.stat(n);let e,o=await Le.workspace.openTextDocument(n),l=Le.window.visibleTextEditors.some(e=>e.document.uri.toString()===n.toString());if(e=s||!l?await Le.window.showTextDocument(o,{preview:t,preserveFocus:!s}):Le.window.visibleTextEditors.find(e=>e.document.uri.toString()===n.toString()),r&&e){let t=o.getText(),s={success:!0,filePath:n.fsPath,message:`Opened file: ${n.fsPath}`},l=t.indexOf(r);if(-1!==l){let n,c=o.positionAt(l);if(a){let u=t.substring(l+r.length).indexOf(a);if(-1!==u){let t=l+r.length+u+a.length;n=o.positionAt(t),i&&(n=new Le.Position(n.line,Number.MAX_SAFE_INTEGER)),e.selection=new Le.Selection(c,n),e.revealRange(new Le.Range(c,n),Le.TextEditorRevealType.InCenter),s.message=`Opened file and selected text from "${r}" to "${a}"`}else e.selection=new Le.Selection(c,c),e.revealRange(new Le.Range(c,c),Le.TextEditorRevealType.InCenter),s.message=`Opened file and positioned at "${r}" (end text "${a}" not found)`}else n=o.positionAt(l+r.length),e.selection=new Le.Selection(c,n),e.revealRange(new Le.Range(c,n),Le.TextEditorRevealType.InCenter),s.message=`Opened file and selected text "${r}"`}else s.message=`Opened file, but text "${r}" not found`;return{content:[{type:"text",text:s.message}]}}let c={success:!0,filePath:n.fsPath,fileUrl:o.uri.toString(),message:`Opened file: ${n.fsPath}`};return s||(c.languageId=o.languageId,c.lineCount=o.lineCount,c.isDirty=o.isDirty,c.isUntitled=o.isUntitled,c.isClosed=o.isClosed),{content:[{type:"text",text:s?c.message:JSON.stringify(c,null,2)}]}}catch{throw new Error(`File not found: ${n.fsPath}`)}}catch(e){throw console.error("Error opening file through MCP:",e),e}}async function FA(){try{let e=Le.window.activeTextEditor,t=[];for(let r of Le.window.tabGroups.all)for(let a of r.tabs)if(a.input instanceof Le.TabInputText){let i=a.input.uri,s=Le.workspace.textDocuments.find(e=>e.uri.toString()===i.toString()),n={uri:i.toString(),isActive:a.isActive,isPinned:a.isPinned,isPreview:a.isPreview,isDirty:a.isDirty,label:a.label,groupIndex:r.viewColumn?r.viewColumn-1:0,viewColumn:r.viewColumn,isGroupActive:r.isActive};s&&(n.fileName=s.fileName,n.languageId=s.languageId,n.lineCount=s.lineCount,n.isUntitled=s.isUntitled,e&&e.document.uri.toString()===i.toString()&&(n.selection={start:{line:e.selection.start.line,character:e.selection.start.character},end:{line:e.selection.end.line,character:e.selection.end.character},isReversed:e.selection.isReversed})),t.push(n)}return{content:[{type:"text",text:JSON.stringify({tabs:t},null,2)}]}}catch(e){throw console.error("Error getting open editors through MCP:",e),e}}async function UA(){try{let e=Le.window.activeTextEditor;if(!e)return{content:[{type:"text",text:JSON.stringify({success:!1,message:"No active editor found"},null,2)}]};let t=e.selection,r=e.document,a=r.getText(t),i=r.uri.fsPath;return{content:[{type:"text",text:JSON.stringify({success:!0,text:a,filePath:i,fileUrl:r.uri.toString(),selection:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character},isEmpty:t.isEmpty}},null,2)}]}}catch(e){throw console.error("Error getting current selection through MCP:",e),e}}async function qA(){try{let e=(Le.workspace.workspaceFolders||[]).map(e=>({name:e.name,uri:e.uri.toString(),path:e.uri.fsPath,index:e.index}));return{content:[{type:"text",text:JSON.stringify({success:!0,folders:e,rootPath:Le.workspace.rootPath||null,workspaceFile:Le.workspace.workspaceFile?.toString()||null},null,2)}]}}catch(e){throw console.error("Error getting workspace folders through MCP:",e),e}}async function zA({filePath:e}){try{if(!e)throw new Error("File path is required");let t;if(!qs.isAbsolute(e)&&Le.workspace.workspaceFolders&&Le.workspace.workspaceFolders.length>0){let r=Le.workspace.workspaceFolders[0].uri.fsPath,a=qs.join(r,e);t=Le.Uri.file(a),console.log(`Converted relative path '${e}' to absolute: '${a}'`)}else t=Le.Uri.file(e);let r=Le.workspace.textDocuments.find(e=>e.uri.toString()===t.toString());return r?{content:[{type:"text",text:JSON.stringify({success:!0,filePath:t.fsPath,isDirty:r.isDirty,isUntitled:r.isUntitled},null,2)}]}:{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${t.fsPath}`},null,2)}]}}catch(e){throw console.error("Error checking document dirty state through MCP:",e),e}}async function BA({filePath:e}){try{if(!e)throw new Error("File path is required");let t;if(!qs.isAbsolute(e)&&Le.workspace.workspaceFolders&&Le.workspace.workspaceFolders.length>0){let r=Le.workspace.workspaceFolders[0].uri.fsPath,a=qs.join(r,e);t=Le.Uri.file(a),console.log(`Converted relative path '${e}' to absolute: '${a}'`)}else t=Le.Uri.file(e);let r=Le.workspace.textDocuments.find(e=>e.uri.toString()===t.toString());if(!r)return{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${t.fsPath}`},null,2)}]};let a=await r.save();return{content:[{type:"text",text:JSON.stringify({success:!0,filePath:t.fsPath,saved:a,message:a?"Document saved successfully":"Document was not dirty or save failed"},null,2)}]}}catch(e){throw console.error("Error saving document through MCP:",e),e}}var hy,Dt=le(require("vscode"),1);async function IY(){if(!hy){let e=Dt.extensions.getExtension("ms-toolsai.jupyter");if(!e)throw new Error("Jupyter extension not installed");hy=Promise.resolve(e.activate())}return hy}function co(e,t){return e.error(t),{content:[{type:"text",text:t}]}}async function HA(e,t){let r,a=Dt.window.activeNotebookEditor;if(!a)return co(e,"No active notebook editor found.");try{r=await IY()}catch{return co(e,"Unable to request Jupyter extension API. It is either not installed or not activated.")}let i=await r.kernels.getKernel(a.notebook.uri);if(!i)return co(e,"No kernel found for the active notebook. Please connect to a kernel.");if("python"!==i.language)return co(e,`Kernel language is ${i?.language}, not python.`);let s={content:[]};try{e.info(`Executing ${t}`);let r=new TextDecoder,i=await AY(t,a.notebook),n=a.notebook.getCells().find(e=>e.metadata.id===i);if(!n)return co(e,"No cell found in the notebook.");let o=a.notebook.getCells().indexOf(n);if(a.revealRange(new Dt.NotebookRange(o,o+1),Dt.NotebookEditorRevealType.InCenter),!await $Y(e))return co(e,"Code execution cancelled by user. Ask the user how they would like to proceed.");await Dt.commands.executeCommand("notebook.cell.execute",{ranges:[{start:o,end:o+1}],document:a.notebook.uri});for(let t of n.outputs)for(let a of t.items)if(a.mime===NY){let t=JSON.parse(r.decode(a.data));e.appendLine(`Error executing code ${t.name}: ${t.message},/n ${t.stack}`),s.content.push({type:"text",text:`Error: ${t.name}: ${t.message},/n ${t.stack}`})}else if(a.mime===DY){let e=Buffer.from(a.data).toString("base64");s.content.push({type:"image",data:e,mimeType:a.mime})}else s.content.push({type:"text",text:r.decode(a.data)});e.info("Code execution completed")}catch(t){e.error(`Code execution failed with an error '${t}'`)}return s}async function $Y(e){return"Execute"===(await Dt.window.showQuickPick([{label:"Execute",description:"Run the code in the notebook"},{label:"Cancel",description:"Do not execute the code"}],{title:"Claude Code Execution",placeHolder:"Choose whether to execute the code"}))?.label}async function AY(e,t){let r=new Dt.NotebookCellData(Dt.NotebookCellKind.Code,e,"python"),a=Math.random().toString(36).substring(2,15);r.metadata={id:a};let i=t.getCells().length,s=Dt.NotebookEdit.insertCells(i,[r]),n=new Dt.WorkspaceEdit;return n.set(t.uri,[s]),await Dt.workspace.applyEdit(n),a}var NY=Dt.NotebookCellOutputItem.error(new Error("")).mime,DY="image/png",Sp=le(require("vscode"),1),Mn=le(require("fs"),1),Ep=le(require("path"),1),VA=le(require("os"),1),ZA=le(require("http"),1);function LY(){return Math.floor(55536*Math.random())+1e4}function GA(){let e=Ep.join(VA.homedir(),".claude","ide");return Mn.existsSync(e)||Mn.mkdirSync(e,{recursive:!0,mode:448}),e}function gy(e,t){let r=GA(),a=Ep.join(r,`${e}.lock`),i=Mn.existsSync(a),s=Sp.workspace.workspaceFolders?.map(e=>e.uri.fsPath)||[],n={pid:process.ppid,workspaceFolders:s,ideName:Sp.env.appName,transport:"ws",runningInWindows:"win32"===process.platform,authToken:t};return Mn.writeFileSync(a,JSON.stringify(n),{mode:384}),i&&console.log(`Updated lock file with new workspace folders: ${a}`),a}function WA(e){let t=GA(),r=Ep.join(t,`${e}.lock`);if(Mn.existsSync(r))try{Mn.unlinkSync(r)}catch(e){console.error(`Failed to delete lock file ${r}:`,e)}}function MY(e){return new Promise(t=>{let r=ZA.createServer();r.once("error",()=>{t(!1)}),r.once("listening",()=>{r.close(),t(!0)}),r.listen(e)})}async function KA(){for(let e=0;e<50;e++){let e=LY();if(await MY(e))return e}throw new Error("Failed to find an available port after multiple attempts")}var zs,Ut=le(require("vscode"),1),YA=le(require("fs"),1),JA=le(require("vscode"),1);function wn(){try{let e=JA.window.activeTerminal;e&&e.show()}catch(e){console.error("Error focusing terminal:",e)}}async function QA(e,t,r,a,i,s,n,o,l){e.info("diff from",a,"to",i,"as",n);let c=Ut.Uri.file(a);try{if((await Ut.workspace.openTextDocument(c)).isDirty){let e=YA.readFileSync(a,"utf8");c=t.createFile(a,e).uri}}catch{e.info("leftTempFileProvider.createFile",a),c=t.createFile(a,"").uri}let u=r.createFile(i,s).uri,p=await Ut.workspace.openTextDocument(u);await vy(e)>0&&await new Promise(e=>setTimeout(e,200));let d,h={preview:!1},m=s,f=s;Ut.workspace.onDidChangeTextDocument(e=>{e.document.uri.toString()===u.toString()&&(m=f,f=e.document.getText(),e.contentChanges.length>3&&e.reason!==Ut.TextDocumentChangeReason.Undo&&e.reason!==Ut.TextDocumentChangeReason.Redo&&(d={time:Date.now(),contents:m}))});let v=new Promise(e=>{l.push(Ut.workspace.onWillSaveTextDocument(t=>{if(t.document.uri.toString()===u.toString()){let r=t.document.getText();d&&Date.now()-d.time<500&&(r=d.contents),e(r)}}))}),g=!0;zs&&(zs.dispose(),zs=void 0);try{zs=Ut.commands.registerCommand("type",e=>{if(!g||Ut.window.activeTextEditor?.document.uri.toString()!==u.toString())return Ut.commands.executeCommand("default:type",e)}),setTimeout(()=>{g=!1,zs&&(zs.dispose(),zs=void 0)},1e3),l.push(zs)}catch(t){e.warn("Could not register type command interceptor:",t)}let y=Tp(),b=await Ut.commands.executeCommand("vscode.diff",c,u,n,h);e.info("diff result",b,n,c,u,h);try{await XA(()=>Tp().some(e=>e.label===n),1e3)}catch(t){let r=Tp().filter(e=>!y.some(t=>t.label===e.label)).map(e=>({label:e.label,isDiff:e.isDiff}));throw e.error(`Failed to open diff tab, possibly new tabs: ${JSON.stringify(r)}`),t}wn();let x=new Promise(e=>{l.push(o(t=>{t.activeTab&&(e=>e.input instanceof Ut.TabInputTextDiff&&e.input.modified.toString()===u.toString())(t.activeTab)&&e(t)}))}).then(t=>t.accepted?(e.info("diff_accepted",n),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:p.getText()}]}):{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:n}]}),_=XA(()=>!Tp().some(e=>e.label===n)).then(()=>(e.info("tab_closed",n),{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:n}]})),w=v.then(async t=>(e.info("file_saved",n),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:t}]})),E=[_,x];return"off"===Ut.workspace.getConfiguration("files").get("autoSave")&&E.push(w),await Promise.race(E)}function Tp(){return Ut.window.tabGroups.all.flatMap(e=>e.tabs.map(t=>({tab:t,label:t.label,isDiff:t.input instanceof Ut.TabInputTextDiff,viewColumn:e.viewColumn,isActive:t.isActive})))}function XA(e,t){return new Promise((r,a)=>{let i,s=setInterval(()=>{e()&&(clearInterval(s),i&&clearTimeout(i),r())},100);t&&(i=setTimeout(()=>{clearInterval(s),a(new Error(`Timeout waiting after ${t}ms`))},t))})}async function yy(e,t,r){e.environmentVariableCollection.replace(t,r),console.log(`Set ${t}=${r} in terminal environment (in-memory)`)}var ree=le(W1(),1),nee=le(Ry(),1),see=le($y(),1),sN=le(Mp(),1),Uy=le(nN(),1),vo=sN.default,Fp=class{constructor(e){this.ws=e,this.opened=new Promise((e,t)=>{this.ws.readyState===vo.OPEN?e():(this.ws.on("open",()=>{e()}),this.ws.on("error",e=>{t(e)}))}),this.ws.on("message",this.onMessageHandler),this.ws.on("error",this.onErrorHandler),this.ws.on("close",this.onCloseHandler)}started=!1;opened;onclose;onerror;onmessage;onMessageHandler=e=>{try{let t=JSON.parse(e.toString("utf-8")),r=Od.parse(t);this.onmessage?.(r)}catch(e){this.onErrorHandler(e)}};onErrorHandler=e=>{this.onerror?.(e instanceof Error?e:new Error("Failed to process message"))};onCloseHandler=()=>{this.onclose?.(),this.ws.off("message",this.onMessageHandler),this.ws.off("error",this.onErrorHandler),this.ws.off("close",this.onCloseHandler)};async start(){if(this.started)throw new Error("Start can only be called once per transport.");if(await this.opened,this.ws.readyState!==vo.OPEN)throw new Error("WebSocket is not open. Cannot start transport.");this.started=!0}async close(){(this.ws.readyState===vo.OPEN||this.ws.readyState===vo.CONNECTING)&&this.ws.close(),this.onCloseHandler()}async send(e){if(this.ws.readyState!==vo.OPEN)throw new Error("WebSocket is not open. Cannot send message.");let t=JSON.stringify(e);try{await new Promise((e,r)=>{this.ws.send(t,t=>{t?r(t):e()})})}catch(e){throw this.onErrorHandler(e),e}}},qy=le(require("vscode"),1),fs=null;function zy(){return fs}function aN(e,t){let r=null,a=qy.window.onDidChangeTextEditorSelection(a=>{let i=a.textEditor,s=i.selection,n=i.document,o=n.getText(s);if("comment"===n.uri.scheme||"output"===n.uri.scheme)return;let l={text:o,filePath:n.uri.fsPath,fileUrl:n.uri.toString(),selection:{start:{line:s.start.line,character:s.start.character},end:{line:s.end.line,character:s.end.character},isEmpty:s.isEmpty}},c=!fs||fs.text!==l.text||fs.filePath!==l.filePath||fs.selection.start.line!==l.selection.start.line||fs.selection.start.character!==l.selection.start.character||fs.selection.end.line!==l.selection.end.line||fs.selection.end.character!==l.selection.end.character;fs=l;let u=t();c&&u&&e.server&&(r&&clearTimeout(r),r=setTimeout(()=>{let e=t();e&&By(l,e)},300))});return{dispose:()=>{a.dispose(),r&&clearTimeout(r)}}}function iN(e,t,r){e(()=>{let e=qy.window.activeTextEditor;if(!e)return;let a=e.selection,i={filePath:e.document.uri.fsPath};a.isEmpty||(i.lineStart=a.start.line,i.lineEnd=a.end.line);let s=r();s&&t.server&&(oN(i,s),wn())})}function aee(){let e,t=Or.env.appName;switch(t.toLowerCase()){case"visual studio code":e="Claude Code VSCode MCP";break;case"cursor":e="Claude Code Cursor MCP";break;case"windsurf":e="Claude Code Windsurf MCP";break;default:e=`Claude Code ${t} MCP`}return e}function iee(e,t,r,a){e.logged.event(e=>{let i=a();i&&t.server?fN(r,e,i):Hy.push(e)})}function uN(e,t,r,a,i,s,n){let o=new wp({name:aee(),version:e.extension.packageJSON.version||"0.0.1"});o.tool("openDiff","Open a git diff for the file",{old_file_path:E.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_path:E.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_contents:E.string().describe("Contents of the new file. If not provided then the current file contents of new_file_path will be used."),tab_name:E.string().describe("Path to the file to show diff for. If not provided, uses active editor.")},async({old_file_path:e,new_file_path:s,new_file_contents:n,tab_name:o})=>{let l=[];try{return await QA(a,t,r,e,s,n,o,i,l)}catch(e){throw a.error(`Error opening diff: ${e}`),e}finally{for(let e of l)e.dispose()}}),o.tool("getDiagnostics","Get language diagnostics from VS Code",{uri:E.string().optional().describe("Optional file URI to get diagnostics for. If not provided, gets diagnostics for all files.")},MA),o.tool("close_tab",{tab_name:E.string()},async({tab_name:e})=>(await oee(e,a),setTimeout(()=>{wn()},500),{content:[{type:"text",text:"TAB_CLOSED"}]})),o.tool("closeAllDiffTabs","Close all diff tabs in the editor",{},async()=>{let e=await vy(a);return setTimeout(()=>{wn()},500),{content:[{type:"text",text:`CLOSED_${e}_DIFF_TABS`}]}}),o.tool("openFile","Open a file in the editor and optionally select a range of text",{filePath:E.string().describe("Path to the file to open"),preview:E.boolean().describe("Whether to open the file in preview mode").default(!1),startText:E.string().describe("Text pattern to find the start of the selection range. Selects from the beginning of this match."),endText:E.string().describe("Text pattern to find the end of the selection range. Selects up to the end of this match. If not provided, only the startText match will be selected."),selectToEndOfLine:E.boolean().describe("If true, selection will extend to the end of the line containing the endText match.").default(!1),makeFrontmost:E.boolean().describe("Whether to make the file the active editor tab. If false, the file will be opened in the background without changing focus.").default(!0)},{readOnlyHint:!0},jA),o.tool("getOpenEditors","Get information about currently open editors",{},FA),o.tool("getWorkspaceFolders","Get all workspace folders currently open in the IDE",{},qA),o.tool("getCurrentSelection","Get the current text selection in the active editor",{},UA),o.tool("checkDocumentDirty","Check if a document has unsaved changes (is dirty)",{filePath:E.string().describe("Path to the file to check")},zA),o.tool("saveDocument","Save a document with unsaved changes",{filePath:E.string().describe("Path to the file to save")},BA),o.tool("getLatestSelection","Get the most recent text selection (even if not in the active editor)",{},async()=>({content:[{type:"text",text:JSON.stringify(zy()||{success:!1,message:"No selection available"},null,2)}]})),o.tool("executeCode","Execute python code in the Jupyter kernel for the current notebook file.\n    \n    All code will be executed in the current Jupyter kernel.\n    \n    Avoid declaring variables or modifying the state of the kernel unless the user\n    explicitly asks for it.\n    \n    Any code executed will persist across calls to this tool, unless the kernel\n    has been restarted.",{code:E.string().describe("The code to be executed on the kernel.")},({code:e})=>HA(a,e));let l=lN.createServer(),c=new Uy.default({server:l}),u=null,p=null,d=Hu.getInstance(a),h=(0,cN.randomUUID)();c.on("connection",function(e,t){if(t.headers["x-claude-code-ide-authorization"]!==h)return a.error("Unauthorized WebSocket connection attempt"),void e.close(1008,"Unauthorized");if(a.info("New WS connection from:",t.url||"unknown"),u){a.info("Disconnecting previous WebSocket client"),p&&(d.unregisterClient(p),a.info(`Unregistered previous diagnostic client: ${p}`),p=null);try{u.close()}catch(e){a.error("Error closing previous transport:",e)}}let r=new Fp(e);u=r;let i=null;o.connect(r).then(()=>{a.info("MCP server connected to transport"),i=d.registerClient(e=>{r.send({jsonrpc:"2.0",method:"diagnostics_changed",params:{uris:e}}).catch(e=>{a.error("Error sending diagnostics notification:",e.message)})}),p=i,a.info(`Registered diagnostic client: ${i}`),setTimeout(()=>{let e=zy();e&&By(e,r);let t=[...Hy];Hy.length=0;for(let e of t)fN(a,e,r)},500)}).catch(t=>{console.error("Error connecting transport:",t),u=null;try{e.close()}catch(e){a.error("Error closing WebSocket:",e)}}),e.on("close",()=>{a.info("WS client disconnected"),u===r&&(u=null,i&&p===i&&(d.unregisterClient(i),a.info(`Unregistered diagnostic client: ${i}`),p=null))})});let m=()=>u;iee(n,o,a,m),iN(s,o,m);let f=aN(o,m),v=null;l.on("listening",()=>{let e=l.address();e&&"string"!=typeof e&&(v=e.port)});let g=Or.workspace.onDidChangeWorkspaceFolders(()=>{null!==v&&(gy(v,h),a.info(`Updated lock file for port ${v} with new workspace folders`))});return{httpServer:l,authToken:h,dispose:async()=>{null!==v&&(WA(v),a.info(`Deleted lock file for port ${v}`)),f.dispose(),g.dispose(),d.dispose(),l.close(),"function"==typeof o.close&&await o.close()}}}async function dN(e,t,r,a){try{let i=await KA(),s=null;return new Promise((n,o)=>{e.listen(i,"127.0.0.1",async()=>{a.info(`MCP Server running on port ${i} (localhost only)`),s=gy(i,t),console.log(`Created lock file at ${s}`);try{await yy(r,"CLAUDE_CODE_SSE_PORT",String(i)),await yy(r,"ENABLE_IDE_INTEGRATION","true"),n(i)}catch(e){console.error("Failed to set environment variables:",e),o(e)}}).on("error",e=>{console.error("Failed to start MCP server:",e),Or.window.showErrorMessage(`Failed to start MCP server: ${e}`),o(e)})})}catch(e){throw console.error("Failed to start MCP server:",e),Or.window.showErrorMessage(`Failed to start MCP server: ${e}`),e}}async function pN(e,t){let r=e.input;if(r instanceof Or.TabInputTextDiff)try{await(await Or.workspace.openTextDocument(r.modified)).save()}catch(e){t.error("Error saving modified file:",e)}await Or.window.tabGroups.close(e)}async function oee(e,t){for(let r of Or.window.tabGroups.all)for(let a of r.tabs)if(a.label===e)return await pN(a,t),!0;return!1}async function vy(e){let t=0;e.info("Closing all diff tabs in the editor...");for(let r of Or.window.tabGroups.all)for(let a of r.tabs)a.input instanceof Or.TabInputTextDiff&&a.label.includes("[Claude Code]")&&(await pN(a,e),t++);return e.info(`Closed ${t} diff tabs.`),t}function fN(e,t,r){e.info("Logging event:",t.eventName,t.eventData);let a={eventName:t.eventName,eventData:t.eventData??{}};r.send({jsonrpc:"2.0",method:"log_event",params:a}).catch(t=>{e.error("Error sending log event:",t)})}var Hy=[];async function By(e,t){try{t.send({jsonrpc:"2.0",method:"selection_changed",params:e}).catch(e=>{console.error("Error sending selection change notification:",e)})}catch(e){console.error("Error sending selection change notification:",e)}}async function oN(e,t){try{t.send({jsonrpc:"2.0",method:"at_mentioned",params:e}).catch(e=>{console.error("Error sending at-mentioned notification:",e)})}catch(e){console.error("Error sending at-mentioned notification:",e)}}var gt=le(require("vscode"),1),mN=le(require("path"),1),hN=le(Vh(),1);function cee(e){return"string"==typeof e&&["bottom","window","beside"].includes(e)}async function lee(e,t,r=!0,a,i=[],s){e.info("Creating new Claude terminal"),r&&gt.window.withProgress({location:gt.ProgressLocation.Notification,title:"Claude Code launching...",cancellable:!1},async e=>new Promise(e=>setTimeout(e,2e3)));let n="beside"===s||void 0===s?{viewColumn:gt.ViewColumn.Beside}:"window"===s?{viewColumn:gt.ViewColumn.One}:void 0,o=gt.window.createTerminal({name:process.env.CLAUDE_CODE_TERMINAL_TITLE||"Claude Code",iconPath:gt.Uri.file(mN.join(t.extensionPath,"resources","claude-logo.svg")),location:n,isTransient:!0});gt.window.onDidEndTerminalShellExecution(t=>{t.terminal===o&&t.execution.commandLine.value.startsWith("claude ")&&(e.info(`Claude terminal closed after executing ${t.execution.commandLine.value}`),o.dispose())});let l=!1;return gt.window.onDidChangeTerminalShellIntegration(async t=>{let r=["claude",...i];a&&r.push(a),t.terminal===o&&!l&&(l=!0,e.info("Terminal shell integration available"),t.shellIntegration.executeCommand((0,hN.quote)(r)))}),setTimeout(()=>{!o.shellIntegration&&!l&&(l=!0,o.sendText("claude"))},3e3),o.show(),"window"===s&&await gt.commands.executeCommand("workbench.action.moveEditorToNewWindow"),{terminal:o,claudeRunning:!0}}function gN(e,t,r){let a=async(r,a,i)=>{try{await lee(e,t,!0,r,a,i)}catch(t){e.error("Error running Claude Code:",t),gt.window.showErrorMessage(`Failed to run Claude Code: ${t}`)}};t.subscriptions.push(gt.commands.registerCommand("claude-vscode.terminal.open",(e,t,i)=>{r.logEvent("run_claude_command");let s="string"==typeof e?e:void 0,n=Array.isArray(t)?t:void 0,o=cee(i)?i:void 0;a(s,n,o)})),t.subscriptions.push(gt.commands.registerCommand("claude-vscode.terminal.open.keyboard",()=>{r.logEvent("run_claude_command_keyboard"),a()}))}function vN(e){let t=new gt.EventEmitter;return e.push(gt.commands.registerCommand("claude-code.acceptProposedDiff",async()=>{let e=gt.window.tabGroups.activeTabGroup.activeTab;t.fire({accepted:!0,activeTab:e}),wn()})),e.push(gt.commands.registerCommand("claude-code.rejectProposedDiff",async()=>{let e=gt.window.tabGroups.activeTabGroup.activeTab;t.fire({accepted:!1,activeTab:e}),wn()})),t.event}function yN(e,t){let r=new gt.EventEmitter;return e.push(gt.commands.registerCommand("claude-code.insertAtMentioned",async()=>{if(t?.nativeAtMentionCallback){let e=gt.window.activeTextEditor;if(!e)return;let a,i=e.document,s=gt.workspace.asRelativePath(i.fileName),n=e.selection;if(n.isEmpty)a=`@${s}`;else{let e=n.start.line+1,t=n.end.line+1;a=e!==t?`@${s}#L${e}-${t}`:`@${s}#L${e}`}t.nativeAtMentionCallback(a)||r.fire({})}else r.fire({}),wn()})),r.event}var bN=le(require("vscode"),1),Up=class{logged=new bN.EventEmitter;logEvent(e,t){this.logged.fire({eventName:e,eventData:t})}};function _N(e,t,r){e.subscriptions.push(t);let a=new Up;t.info("Claude code extension is now active?");let i=new Kc("_claude_fs_left");e.subscriptions.push(ms.workspace.registerFileSystemProvider(i.scheme,i));let s=new Kc("_claude_fs_right");e.subscriptions.push(ms.workspace.registerFileSystemProvider(s.scheme,s)),e.subscriptions.push(uee(s.scheme));let n=vN(e.subscriptions),o=yN(e.subscriptions,{output:t,context:e,nativeAtMentionCallback:r.nativeAtMentionCallback});gN(t,e,a);try{let{httpServer:r,authToken:l,dispose:c}=uN(e,i,s,t,n,o,a);dN(r,l,e,t).catch(e=>{t.error("Failed to start MCP server:",e),ms.window.showErrorMessage(`Failed to start MCP server: ${e}`)}),e.subscriptions.push({dispose:async()=>{await c()}})}catch(e){t.error("Error during extension activation:",e),ms.window.showErrorMessage(`Failed to activate Claude Code extension: ${e}`)}}function uee(e){return ms.window.onDidChangeVisibleTextEditors(t=>{let r=t.some(t=>t?.document.uri.scheme===e);ms.commands.executeCommand("setContext","claude-code.viewingProposedDiff",r)})}function Vy(e,t){let r=e.document,a=r.fileName,i=e.selection;if(i.isEmpty)return{filePath:a,startLine:i.start.line+1,endLine:i.start.line+1};{let e;return t||(e=r.getText(i)),{filePath:a,startLine:i.start.line+1,endLine:i.end.line+1,startColumn:i.start.character,endColumn:i.end.character,selectedText:e}}}var al,xN=!1;function dee(e){xN=!0;let t=ke.window.createOutputChannel("Claude VSCode",{log:!0});e.subscriptions.push(t),ke.commands.executeCommand("setContext","claude-vscode.updateSupported",!1);let r=new Ou(e);r.migrateAllSettings(),e.subscriptions.push(ke.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("claudeCode.respectGitIgnore")&&Iu.cache.clear?.()}));let a=new Wc("_claude_vscode_fs_left");e.subscriptions.push(ke.workspace.registerFileSystemProvider(a.scheme,a));let i=new Wc("_claude_vscode_fs_right");e.subscriptions.push(ke.workspace.registerFileSystemProvider(i.scheme,i));let s=new hp("_claude_vscode_fs_readonly");e.subscriptions.push(ke.workspace.registerTextDocumentContentProvider(s.scheme,s)),e.subscriptions.push(mee(i.scheme));let n=gC(e.subscriptions),o=new ke.EventEmitter;e.subscriptions.push(o);let l=o.event,c=fee(e.subscriptions),u=new fp(e.extensionUri,e,t,r,a,i,s,n,l,c,()=>al);e.subscriptions.push(u),e.subscriptions.push(ke.workspace.onDidChangeConfiguration(e=>{(e.affectsConfiguration("chat.fontSize")||e.affectsConfiguration("chat.fontFamily")||e.affectsConfiguration("chat.editor.fontSize")||e.affectsConfiguration("chat.editor.fontFamily")||e.affectsConfiguration("chat.editor.fontWeight"))&&u.notifyFontConfigurationChange()})),pee(e.subscriptions,o,u),_N(e,t,{nativeAtMentionCallback:e=>!!u.hasVisibleWebview()&&(o.fire(e),!0)});let p=ke.version.split(".").map(Number),d=p[0]??0,h=p[1]??0,m=d>1||1===d&&h>=106;ke.commands.executeCommand("setContext","claude-code:supportsSecondarySidebar",m),e.subscriptions.push(ke.window.registerWebviewViewProvider("claudeVSCodeSidebar",u,{webviewOptions:{retainContextWhenHidden:!0}})),e.subscriptions.push(ke.window.registerWebviewViewProvider("claudeVSCodeSidebarSecondary",u,{webviewOptions:{retainContextWhenHidden:!0}})),ke.window.registerWebviewPanelSerializer("claudeVSCodePanel",{async deserializeWebviewPanel(e,t){u.setupPanel(e,void 0,void 0)}}),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.editor.open",async(e,t)=>{r.setPreferredLocation("panel");let{startedInNewColumn:a}=u.createPanel(e,t);a&&await ke.commands.executeCommand("workbench.action.lockEditorGroup")})),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.editor.openLast",async()=>{"sidebar"!==r.getPreferredLocation()?await ke.commands.executeCommand("claude-vscode.editor.open"):await ke.commands.executeCommand("claude-vscode.sidebar.open")})),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.newConversation",async()=>{u.notifyCreateNewConversation()})),e.globalState.get("everOpenedSidebar")&&ke.commands.executeCommand("setContext","claude-code:sidebarVisible",!0);let f=ke.window.createStatusBarItem(ke.StatusBarAlignment.Right);f.text=" Claude Code",f.command="claude-vscode.editor.openLast",f.tooltip="Open Claude Code",e.subscriptions.push(f),"sidebar"===r.getPreferredLocation()&&m&&f.show(),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.sidebar.open",async()=>{if(r.setPreferredLocation("sidebar"),await ke.commands.executeCommand("setContext","claude-code:sidebarVisible",!0),!m)return ke.window.showWarningMessage("Secondary Sidebar not supported in this version of VSCode. Please update your VSCode to use. Opening in Activity Bar instead."),void await ke.commands.executeCommand("claudeVSCodeSidebar.focus");await ke.commands.executeCommand("claudeVSCodeSidebarSecondary.focus"),f.show()})),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.window.open",async()=>{u.createPanel(void 0,void 0),await ke.commands.executeCommand("workbench.action.moveEditorToNewWindow"),f.hide()})),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.logout",async()=>{await new so(io(t),pp()).logout()?(await u.notifyLogout(),ke.window.showInformationMessage("Successfully logged out from Claude")):ke.window.showErrorMessage("Failed to logout completely. Some credentials may remain.")})),e.subscriptions.push(ke.commands.registerCommand("claude-vscode.showLogs",()=>{t.show()}))}function pee(e,t,r){e.push(ke.commands.registerCommand("claude-vscode.insertAtMention",async()=>{let e=ke.window.activeTextEditor;if(!e)return;let r=e.document,a=ke.workspace.asRelativePath(r.fileName),i=e.selection;if(i.isEmpty)return void t.fire(`@${a}`);let s=i.start.line+1,n=i.end.line+1,o=s!==n?`@${a}#${s}-${n}`:`@${a}#${s}`;t.fire(o)})),e.push(ke.commands.registerCommand("claude-vscode.blur",async()=>{ke.commands.executeCommand("workbench.action.focusFirstEditorGroup")})),e.push(ke.commands.registerCommand("claude-vscode.focus",async()=>{r.hasVisibleWebview()||await ke.commands.executeCommand("claude-vscode.editor.openLast");let e=ke.window.activeTextEditor;if(!e)return void t.fire("");let a=e.document,i=ke.workspace.asRelativePath(a.fileName),s=e.selection;if(s.isEmpty)return void t.fire("");let n=s.start.line+1,o=s.end.line+1,l=n!==o?`@${i}#${n}-${o}`:`@${i}#${n}`;t.fire(l)}))}function fee(e){let t=new ke.EventEmitter;return e.push(ke.window.onDidChangeTextEditorSelection(async e=>{if(e.textEditor!==ke.window.activeTextEditor)return;let r=await Iu(e.textEditor.document.uri);if("comment"!==e.textEditor.document.uri.scheme&&"output"!==e.textEditor.document.uri.scheme){if(0===e.selections.length)return void t.fire(void 0);al=Vy(e.textEditor,r),t.fire(al)}})),e.push(ke.window.onDidChangeActiveTextEditor(async e=>{if(!e)return;let r=await Iu(e.document.uri);al=Vy(e,r),t.fire(al)})),t.event}function mee(e){return ke.window.onDidChangeVisibleTextEditors(t=>{let r=t.some(t=>t?.document.uri.scheme===e);ke.commands.executeCommand("setContext","claude-vscode.viewingProposedDiff",r)})}function hee(){console.log("Claude code extension is now deactivated"),xN=!1}function gee(){return ke.window.tabGroups.all.flatMap(e=>e.tabs)}
/*! Bundled license information:

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/